var K9=Object.defineProperty;var W9=(t,e,n)=>e in t?K9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var bw=(t,e,n)=>W9(t,typeof e!="symbol"?e+"":e,n);function Y9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function cs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sw={exports:{}},Xh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _N;function J9(){if(_N)return Xh;_N=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var l in i)l!=="key"&&(o[l]=i[l])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:o}}return Xh.Fragment=e,Xh.jsx=n,Xh.jsxs=n,Xh}var TN;function Q9(){return TN||(TN=1,Sw.exports=J9()),Sw.exports}var P=Q9(),Aw={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EN;function X9(){if(EN)return Ze;EN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function v(K){return K===null||typeof K!="object"?null:(K=g&&K[g]||K["@@iterator"],typeof K=="function"?K:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function A(K,ae,ue){this.props=K,this.context=ae,this.refs=S,this.updater=ue||E}A.prototype.isReactComponent={},A.prototype.setState=function(K,ae){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ae,"setState")},A.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function I(){}I.prototype=A.prototype;function N(K,ae,ue){this.props=K,this.context=ae,this.refs=S,this.updater=ue||E}var D=N.prototype=new I;D.constructor=N,b(D,A.prototype),D.isPureReactComponent=!0;var V=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function O(K,ae,ue,ve,Pe,Be){return ue=Be.ref,{$$typeof:t,type:K,key:ae,ref:ue!==void 0?ue:null,props:Be}}function L(K,ae){return O(K.type,ae,void 0,void 0,void 0,K.props)}function k(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function $(K){var ae={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ue){return ae[ue]})}var F=/\/+/g;function G(K,ae){return typeof K=="object"&&K!==null&&K.key!=null?$(""+K.key):ae.toString(36)}function H(){}function Ae(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(H,H):(K.status="pending",K.then(function(ae){K.status==="pending"&&(K.status="fulfilled",K.value=ae)},function(ae){K.status==="pending"&&(K.status="rejected",K.reason=ae)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function Re(K,ae,ue,ve,Pe){var Be=typeof K;(Be==="undefined"||Be==="boolean")&&(K=null);var ze=!1;if(K===null)ze=!0;else switch(Be){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(K.$$typeof){case t:case e:ze=!0;break;case h:return ze=K._init,Re(ze(K._payload),ae,ue,ve,Pe)}}if(ze)return Pe=Pe(K),ze=ve===""?"."+G(K,0):ve,V(Pe)?(ue="",ze!=null&&(ue=ze.replace(F,"$&/")+"/"),Re(Pe,ae,ue,"",function(Se){return Se})):Pe!=null&&(k(Pe)&&(Pe=L(Pe,ue+(Pe.key==null||K&&K.key===Pe.key?"":(""+Pe.key).replace(F,"$&/")+"/")+ze)),ae.push(Pe)),1;ze=0;var ln=ve===""?".":ve+":";if(V(K))for(var _t=0;_t<K.length;_t++)ve=K[_t],Be=ln+G(ve,_t),ze+=Re(ve,ae,ue,Be,Pe);else if(_t=v(K),typeof _t=="function")for(K=_t.call(K),_t=0;!(ve=K.next()).done;)ve=ve.value,Be=ln+G(ve,_t++),ze+=Re(ve,ae,ue,Be,Pe);else if(Be==="object"){if(typeof K.then=="function")return Re(Ae(K),ae,ue,ve,Pe);throw ae=String(K),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ee(K,ae,ue){if(K==null)return K;var ve=[],Pe=0;return Re(K,ve,"","",function(Be){return ae.call(ue,Be,Pe++)}),ve}function he(K){if(K._status===-1){var ae=K._result;ae=ae(),ae.then(function(ue){(K._status===0||K._status===-1)&&(K._status=1,K._result=ue)},function(ue){(K._status===0||K._status===-1)&&(K._status=2,K._result=ue)}),K._status===-1&&(K._status=0,K._result=ae)}if(K._status===1)return K._result.default;throw K._result}var Ee=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Le(){}return Ze.Children={map:ee,forEach:function(K,ae,ue){ee(K,function(){ae.apply(this,arguments)},ue)},count:function(K){var ae=0;return ee(K,function(){ae++}),ae},toArray:function(K){return ee(K,function(ae){return ae})||[]},only:function(K){if(!k(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Ze.Component=A,Ze.Fragment=n,Ze.Profiler=i,Ze.PureComponent=N,Ze.StrictMode=r,Ze.Suspense=c,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(K){return q.H.useMemoCache(K)}},Ze.cache=function(K){return function(){return K.apply(null,arguments)}},Ze.cloneElement=function(K,ae,ue){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var ve=b({},K.props),Pe=K.key,Be=void 0;if(ae!=null)for(ze in ae.ref!==void 0&&(Be=void 0),ae.key!==void 0&&(Pe=""+ae.key),ae)!z.call(ae,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&ae.ref===void 0||(ve[ze]=ae[ze]);var ze=arguments.length-2;if(ze===1)ve.children=ue;else if(1<ze){for(var ln=Array(ze),_t=0;_t<ze;_t++)ln[_t]=arguments[_t+2];ve.children=ln}return O(K.type,Pe,void 0,void 0,Be,ve)},Ze.createContext=function(K){return K={$$typeof:s,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:o,_context:K},K},Ze.createElement=function(K,ae,ue){var ve,Pe={},Be=null;if(ae!=null)for(ve in ae.key!==void 0&&(Be=""+ae.key),ae)z.call(ae,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Pe[ve]=ae[ve]);var ze=arguments.length-2;if(ze===1)Pe.children=ue;else if(1<ze){for(var ln=Array(ze),_t=0;_t<ze;_t++)ln[_t]=arguments[_t+2];Pe.children=ln}if(K&&K.defaultProps)for(ve in ze=K.defaultProps,ze)Pe[ve]===void 0&&(Pe[ve]=ze[ve]);return O(K,Be,void 0,void 0,null,Pe)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(K){return{$$typeof:l,render:K}},Ze.isValidElement=k,Ze.lazy=function(K){return{$$typeof:h,_payload:{_status:-1,_result:K},_init:he}},Ze.memo=function(K,ae){return{$$typeof:f,type:K,compare:ae===void 0?null:ae}},Ze.startTransition=function(K){var ae=q.T,ue={};q.T=ue;try{var ve=K(),Pe=q.S;Pe!==null&&Pe(ue,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(Le,Ee)}catch(Be){Ee(Be)}finally{q.T=ae}},Ze.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Ze.use=function(K){return q.H.use(K)},Ze.useActionState=function(K,ae,ue){return q.H.useActionState(K,ae,ue)},Ze.useCallback=function(K,ae){return q.H.useCallback(K,ae)},Ze.useContext=function(K){return q.H.useContext(K)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(K,ae){return q.H.useDeferredValue(K,ae)},Ze.useEffect=function(K,ae,ue){var ve=q.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ve.useEffect(K,ae)},Ze.useId=function(){return q.H.useId()},Ze.useImperativeHandle=function(K,ae,ue){return q.H.useImperativeHandle(K,ae,ue)},Ze.useInsertionEffect=function(K,ae){return q.H.useInsertionEffect(K,ae)},Ze.useLayoutEffect=function(K,ae){return q.H.useLayoutEffect(K,ae)},Ze.useMemo=function(K,ae){return q.H.useMemo(K,ae)},Ze.useOptimistic=function(K,ae){return q.H.useOptimistic(K,ae)},Ze.useReducer=function(K,ae,ue){return q.H.useReducer(K,ae,ue)},Ze.useRef=function(K){return q.H.useRef(K)},Ze.useState=function(K){return q.H.useState(K)},Ze.useSyncExternalStore=function(K,ae,ue){return q.H.useSyncExternalStore(K,ae,ue)},Ze.useTransition=function(){return q.H.useTransition()},Ze.version="19.1.1",Ze}var wN;function Td(){return wN||(wN=1,Aw.exports=X9()),Aw.exports}var R=Td();const m4=cs(R),Z9=Y9({__proto__:null,default:m4},[R]);var Cw={exports:{}},Zh={},xw={exports:{}},Iw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bN;function e8(){return bN||(bN=1,(function(t){function e(ee,he){var Ee=ee.length;ee.push(he);e:for(;0<Ee;){var Le=Ee-1>>>1,K=ee[Le];if(0<i(K,he))ee[Le]=he,ee[Ee]=K,Ee=Le;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var he=ee[0],Ee=ee.pop();if(Ee!==he){ee[0]=Ee;e:for(var Le=0,K=ee.length,ae=K>>>1;Le<ae;){var ue=2*(Le+1)-1,ve=ee[ue],Pe=ue+1,Be=ee[Pe];if(0>i(ve,Ee))Pe<K&&0>i(Be,ve)?(ee[Le]=Be,ee[Pe]=Ee,Le=Pe):(ee[Le]=ve,ee[ue]=Ee,Le=ue);else if(Pe<K&&0>i(Be,Ee))ee[Le]=Be,ee[Pe]=Ee,Le=Pe;else break e}}return he}function i(ee,he){var Ee=ee.sortIndex-he.sortIndex;return Ee!==0?Ee:ee.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],f=[],h=1,g=null,v=3,E=!1,b=!1,S=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function V(ee){for(var he=n(f);he!==null;){if(he.callback===null)r(f);else if(he.startTime<=ee)r(f),he.sortIndex=he.expirationTime,e(c,he);else break;he=n(f)}}function q(ee){if(S=!1,V(ee),!b)if(n(c)!==null)b=!0,z||(z=!0,G());else{var he=n(f);he!==null&&Re(q,he.startTime-ee)}}var z=!1,O=-1,L=5,k=-1;function $(){return A?!0:!(t.unstable_now()-k<L)}function F(){if(A=!1,z){var ee=t.unstable_now();k=ee;var he=!0;try{e:{b=!1,S&&(S=!1,N(O),O=-1),E=!0;var Ee=v;try{t:{for(V(ee),g=n(c);g!==null&&!(g.expirationTime>ee&&$());){var Le=g.callback;if(typeof Le=="function"){g.callback=null,v=g.priorityLevel;var K=Le(g.expirationTime<=ee);if(ee=t.unstable_now(),typeof K=="function"){g.callback=K,V(ee),he=!0;break t}g===n(c)&&r(c),V(ee)}else r(c);g=n(c)}if(g!==null)he=!0;else{var ae=n(f);ae!==null&&Re(q,ae.startTime-ee),he=!1}}break e}finally{g=null,v=Ee,E=!1}he=void 0}}finally{he?G():z=!1}}}var G;if(typeof D=="function")G=function(){D(F)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Ae=H.port2;H.port1.onmessage=F,G=function(){Ae.postMessage(null)}}else G=function(){I(F,0)};function Re(ee,he){O=I(function(){ee(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var he=3;break;default:he=v}var Ee=v;v=he;try{return ee()}finally{v=Ee}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(ee,he){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Ee=v;v=ee;try{return he()}finally{v=Ee}},t.unstable_scheduleCallback=function(ee,he,Ee){var Le=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Le+Ee:Le):Ee=Le,ee){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Ee+K,ee={id:h++,callback:he,priorityLevel:ee,startTime:Ee,expirationTime:K,sortIndex:-1},Ee>Le?(ee.sortIndex=Ee,e(f,ee),n(c)===null&&ee===n(f)&&(S?(N(O),O=-1):S=!0,Re(q,Ee-Le))):(ee.sortIndex=K,e(c,ee),b||E||(b=!0,z||(z=!0,G()))),ee},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(ee){var he=v;return function(){var Ee=v;v=he;try{return ee.apply(this,arguments)}finally{v=Ee}}}})(Iw)),Iw}var SN;function t8(){return SN||(SN=1,xw.exports=e8()),xw.exports}var Rw={exports:{}},wr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AN;function n8(){if(AN)return wr;AN=1;var t=Td();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(c,f,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:f,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return wr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,wr.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(c,f,null,h)},wr.flushSync=function(c){var f=s.T,h=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=f,r.p=h,r.d.f()}},wr.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},wr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},wr.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,g=l(h,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:E}):h==="script"&&r.d.X(c,{crossOrigin:g,integrity:v,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},wr.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=l(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},wr.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,g=l(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},wr.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=l(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},wr.requestFormReset=function(c){r.d.r(c)},wr.unstable_batchedUpdates=function(c,f){return c(f)},wr.useFormState=function(c,f,h){return s.H.useFormState(c,f,h)},wr.useFormStatus=function(){return s.H.useHostTransitionStatus()},wr.version="19.1.1",wr}var CN;function g4(){if(CN)return Rw.exports;CN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rw.exports=n8(),Rw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xN;function r8(){if(xN)return Zh;xN=1;var t=t8(),e=Td(),n=g4();function r(a){var u="https://react.dev/errors/"+a;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var u=a,d=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(d=u.return),a=u.return;while(a)}return u.tag===3?d:null}function s(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function l(a){if(o(a)!==a)throw Error(r(188))}function c(a){var u=a.alternate;if(!u){if(u=o(a),u===null)throw Error(r(188));return u!==a?null:a}for(var d=a,y=u;;){var T=d.return;if(T===null)break;var w=T.alternate;if(w===null){if(y=T.return,y!==null){d=y;continue}break}if(T.child===w.child){for(w=T.child;w;){if(w===d)return l(T),a;if(w===y)return l(T),u;w=w.sibling}throw Error(r(188))}if(d.return!==y.return)d=T,y=w;else{for(var M=!1,U=T.child;U;){if(U===d){M=!0,d=T,y=w;break}if(U===y){M=!0,y=T,d=w;break}U=U.sibling}if(!M){for(U=w.child;U;){if(U===d){M=!0,d=w,y=T;break}if(U===y){M=!0,y=w,d=T;break}U=U.sibling}if(!M)throw Error(r(189))}}if(d.alternate!==y)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?a:u}function f(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a;for(a=a.child;a!==null;){if(u=f(a),u!==null)return u;a=a.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(a){return a===null||typeof a!="object"?null:(a=F&&a[F]||a["@@iterator"],typeof a=="function"?a:null)}var H=Symbol.for("react.client.reference");function Ae(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===H?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case q:return"Suspense";case z:return"SuspenseList";case k:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case D:return(a.displayName||"Context")+".Provider";case N:return(a._context.displayName||"Context")+".Consumer";case V:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case O:return u=a.displayName||null,u!==null?u:Ae(a.type)||"Memo";case L:u=a._payload,a=a._init;try{return Ae(a(u))}catch{}}return null}var Re=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},Le=[],K=-1;function ae(a){return{current:a}}function ue(a){0>K||(a.current=Le[K],Le[K]=null,K--)}function ve(a,u){K++,Le[K]=a.current,a.current=u}var Pe=ae(null),Be=ae(null),ze=ae(null),ln=ae(null);function _t(a,u){switch(ve(ze,u),ve(Be,a),ve(Pe,null),u.nodeType){case 9:case 11:a=(a=u.documentElement)&&(a=a.namespaceURI)?KM(a):0;break;default:if(a=u.tagName,u=u.namespaceURI)u=KM(u),a=WM(u,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ue(Pe),ve(Pe,a)}function Se(){ue(Pe),ue(Be),ue(ze)}function je(a){a.memoizedState!==null&&ve(ln,a);var u=Pe.current,d=WM(u,a.type);u!==d&&(ve(Be,a),ve(Pe,d))}function Ye(a){Be.current===a&&(ue(Pe),ue(Be)),ln.current===a&&(ue(ln),Kh._currentValue=Ee)}var me=Object.prototype.hasOwnProperty,Kt=t.unstable_scheduleCallback,et=t.unstable_cancelCallback,nn=t.unstable_shouldYield,Sn=t.unstable_requestPaint,Wt=t.unstable_now,va=t.unstable_getCurrentPriorityLevel,Fl=t.unstable_ImmediatePriority,bo=t.unstable_UserBlockingPriority,hs=t.unstable_NormalPriority,Qd=t.unstable_LowPriority,_a=t.unstable_IdlePriority,Bl=t.log,_c=t.unstable_setDisableYieldValue,Yt=null,Ue=null;function ar(a){if(typeof Bl=="function"&&_c(a),Ue&&typeof Ue.setStrictMode=="function")try{Ue.setStrictMode(Yt,a)}catch{}}var yn=Math.clz32?Math.clz32:So,Ta=Math.log,Tc=Math.LN2;function So(a){return a>>>=0,a===0?32:31-(Ta(a)/Tc|0)|0}var Ao=256,Co=4194304;function jr(a){var u=a&42;if(u!==0)return u;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function re(a,u,d){var y=a.pendingLanes;if(y===0)return 0;var T=0,w=a.suspendedLanes,M=a.pingedLanes;a=a.warmLanes;var U=y&134217727;return U!==0?(y=U&~w,y!==0?T=jr(y):(M&=U,M!==0?T=jr(M):d||(d=U&~a,d!==0&&(T=jr(d))))):(U=y&~w,U!==0?T=jr(U):M!==0?T=jr(M):d||(d=y&~a,d!==0&&(T=jr(d)))),T===0?0:u!==0&&u!==T&&(u&w)===0&&(w=T&-T,d=u&-u,w>=d||w===32&&(d&4194048)!==0)?u:T}function ge(a,u){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&u)===0}function xe(a,u){switch(a){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function be(){var a=Ao;return Ao<<=1,(Ao&4194048)===0&&(Ao=256),a}function Ie(){var a=Co;return Co<<=1,(Co&62914560)===0&&(Co=4194304),a}function Ge(a){for(var u=[],d=0;31>d;d++)u.push(a);return u}function lt(a,u){a.pendingLanes|=u,u!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function un(a,u,d,y,T,w){var M=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var U=a.entanglements,j=a.expirationTimes,Z=a.hiddenUpdates;for(d=M&~d;0<d;){var le=31-yn(d),fe=1<<le;U[le]=0,j[le]=-1;var te=Z[le];if(te!==null)for(Z[le]=null,le=0;le<te.length;le++){var ne=te[le];ne!==null&&(ne.lane&=-536870913)}d&=~fe}y!==0&&Je(a,y,0),w!==0&&T===0&&a.tag!==0&&(a.suspendedLanes|=w&~(M&~u))}function Je(a,u,d){a.pendingLanes|=u,a.suspendedLanes&=~u;var y=31-yn(u);a.entangledLanes|=u,a.entanglements[y]=a.entanglements[y]|1073741824|d&4194090}function Tt(a,u){var d=a.entangledLanes|=u;for(a=a.entanglements;d;){var y=31-yn(d),T=1<<y;T&u|a[y]&u&&(a[y]|=u),d&=~T}}function On(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ii(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function An(){var a=he.p;return a!==0?a:(a=window.event,a===void 0?32:hN(a.type))}function Tr(a,u){var d=he.p;try{return he.p=a,u()}finally{he.p=d}}var Rt=Math.random().toString(36).slice(2),cn="__reactFiber$"+Rt,Cn="__reactProps$"+Rt,Ri="__reactContainer$"+Rt,Xd="__reactEvents$"+Rt,CT="__reactListeners$"+Rt,Ea="__reactHandles$"+Rt,_g="__reactResources$"+Rt,ql="__reactMarker$"+Rt;function wa(a){delete a[cn],delete a[Cn],delete a[Xd],delete a[CT],delete a[Ea]}function ps(a){var u=a[cn];if(u)return u;for(var d=a.parentNode;d;){if(u=d[Ri]||d[cn]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(a=XM(a);a!==null;){if(d=a[cn])return d;a=XM(a)}return u}a=d,d=a.parentNode}return null}function xo(a){if(a=a[cn]||a[Ri]){var u=a.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return a}return null}function Io(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a.stateNode;throw Error(r(33))}function Mr(a){var u=a[_g];return u||(u=a[_g]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function vn(a){a[ql]=!0}var Zd=new Set,Ec={};function ro(a,u){ms(a,u),ms(a+"Capture",u)}function ms(a,u){for(Ec[a]=u,a=0;a<u.length;a++)Zd.add(u[a])}var Tg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Eg={},$l={};function wg(a){return me.call($l,a)?!0:me.call(Eg,a)?!1:Tg.test(a)?$l[a]=!0:(Eg[a]=!0,!1)}function ba(a,u,d){if(wg(u))if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(u);return}}a.setAttribute(u,""+d)}}function Ro(a,u,d){if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttribute(u,""+d)}}function lr(a,u,d,y){if(y===null)a.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(u,d,""+y)}}var zl,bg;function gs(a){if(zl===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);zl=u&&u[1]||"",bg=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zl+a+bg}var wc=!1;function bc(a,u){if(!a||wc)return"";wc=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ne){var te=ne}Reflect.construct(a,[],fe)}else{try{fe.call()}catch(ne){te=ne}a.call(fe.prototype)}}else{try{throw Error()}catch(ne){te=ne}(fe=a())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),M=w[0],U=w[1];if(M&&U){var j=M.split(`
`),Z=U.split(`
`);for(T=y=0;y<j.length&&!j[y].includes("DetermineComponentFrameRoot");)y++;for(;T<Z.length&&!Z[T].includes("DetermineComponentFrameRoot");)T++;if(y===j.length||T===Z.length)for(y=j.length-1,T=Z.length-1;1<=y&&0<=T&&j[y]!==Z[T];)T--;for(;1<=y&&0<=T;y--,T--)if(j[y]!==Z[T]){if(y!==1||T!==1)do if(y--,T--,0>T||j[y]!==Z[T]){var le=`
`+j[y].replace(" at new "," at ");return a.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",a.displayName)),le}while(1<=y&&0<=T);break}}}finally{wc=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?gs(d):""}function eh(a){switch(a.tag){case 26:case 27:case 5:return gs(a.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 15:return bc(a.type,!1);case 11:return bc(a.type.render,!1);case 1:return bc(a.type,!0);case 31:return gs("Activity");default:return""}}function Sc(a){try{var u="";do u+=eh(a),a=a.return;while(a);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Nr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function th(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function xT(a){var u=th(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),y=""+a[u];if(!a.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var T=d.get,w=d.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return T.call(this)},set:function(M){y=""+M,w.call(this,M)}}),Object.defineProperty(a,u,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(M){y=""+M},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function Ac(a){a._valueTracker||(a._valueTracker=xT(a))}function nh(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var d=u.getValue(),y="";return a&&(y=th(a)?a.checked?"true":"false":a.value),a=y,a!==d?(u.setValue(a),!0):!1}function Hl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var IT=/[\n"\\]/g;function xn(a){return a.replace(IT,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function oi(a,u,d,y,T,w,M,U){a.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?a.type=M:a.removeAttribute("type"),u!=null?M==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+Nr(u)):a.value!==""+Nr(u)&&(a.value=""+Nr(u)):M!=="submit"&&M!=="reset"||a.removeAttribute("value"),u!=null?Sa(a,M,Nr(u)):d!=null?Sa(a,M,Nr(d)):y!=null&&a.removeAttribute("value"),T==null&&w!=null&&(a.defaultChecked=!!w),T!=null&&(a.checked=T&&typeof T!="function"&&typeof T!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?a.name=""+Nr(U):a.removeAttribute("name")}function Gl(a,u,d,y,T,w,M,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),u!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||u!=null))return;d=d!=null?""+Nr(d):"",u=u!=null?""+Nr(u):d,U||u===a.value||(a.value=u),a.defaultValue=u}y=y??T,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=U?a.checked:!!y,a.defaultChecked=!!y,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(a.name=M)}function Sa(a,u,d){u==="number"&&Hl(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function ys(a,u,d,y){if(a=a.options,u){u={};for(var T=0;T<d.length;T++)u["$"+d[T]]=!0;for(d=0;d<a.length;d++)T=u.hasOwnProperty("$"+a[d].value),a[d].selected!==T&&(a[d].selected=T),T&&y&&(a[d].defaultSelected=!0)}else{for(d=""+Nr(d),u=null,T=0;T<a.length;T++){if(a[T].value===d){a[T].selected=!0,y&&(a[T].defaultSelected=!0);return}u!==null||a[T].disabled||(u=a[T])}u!==null&&(u.selected=!0)}}function Pt(a,u,d){if(u!=null&&(u=""+Nr(u),u!==a.value&&(a.value=u),d==null)){a.defaultValue!==u&&(a.defaultValue=u);return}a.defaultValue=d!=null?""+Nr(d):""}function jl(a,u,d,y){if(u==null){if(y!=null){if(d!=null)throw Error(r(92));if(Re(y)){if(1<y.length)throw Error(r(93));y=y[0]}d=y}d==null&&(d=""),u=d}d=Nr(u),a.defaultValue=d,y=a.textContent,y===d&&y!==""&&y!==null&&(a.value=y)}function Pi(a,u){if(u){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=u;return}}a.textContent=u}var Kl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sg(a,u,d){var y=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?y?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="":y?a.setProperty(u,d):typeof d!="number"||d===0||Kl.has(u)?u==="float"?a.cssFloat=d:a[u]=(""+d).trim():a[u]=d+"px"}function rh(a,u,d){if(u!=null&&typeof u!="object")throw Error(r(62));if(a=a.style,d!=null){for(var y in d)!d.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var T in u)y=u[T],u.hasOwnProperty(T)&&d[T]!==y&&Sg(a,T,y)}else for(var w in u)u.hasOwnProperty(w)&&Sg(a,w,u[w])}function ih(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cc(a){return PT.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var vs=null;function Mi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var _s=null,Ts=null;function oh(a){var u=xo(a);if(u&&(a=u.stateNode)){var d=a[Cn]||null;e:switch(a=u.stateNode,u.type){case"input":if(oi(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+xn(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var y=d[u];if(y!==a&&y.form===a.form){var T=y[Cn]||null;if(!T)throw Error(r(90));oi(y,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(u=0;u<d.length;u++)y=d[u],y.form===a.form&&nh(y)}break e;case"textarea":Pt(a,d.value,d.defaultValue);break e;case"select":u=d.value,u!=null&&ys(a,!!d.multiple,u,!1)}}}var Po=!1;function Ag(a,u,d){if(Po)return a(u,d);Po=!0;try{var y=a(u);return y}finally{if(Po=!1,(_s!==null||Ts!==null)&&(vy(),_s&&(u=_s,a=Ts,Ts=_s=null,oh(u),a)))for(u=0;u<a.length;u++)oh(a[u])}}function Wl(a,u){var d=a.stateNode;if(d===null)return null;var y=d[Cn]||null;if(y===null)return null;d=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(r(231,u,typeof d));return d}var io=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ni=!1;if(io)try{var Yl={};Object.defineProperty(Yl,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",Yl,Yl),window.removeEventListener("test",Yl,Yl)}catch{Ni=!1}var Mo=null,Aa=null,Es=null;function sh(){if(Es)return Es;var a,u=Aa,d=u.length,y,T="value"in Mo?Mo.value:Mo.textContent,w=T.length;for(a=0;a<d&&u[a]===T[a];a++);var M=d-a;for(y=1;y<=M&&u[d-y]===T[w-y];y++);return Es=T.slice(a,1<y?1-y:void 0)}function No(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function Do(){return!0}function ah(){return!1}function Gn(a){function u(d,y,T,w,M){this._reactName=d,this._targetInst=T,this.type=y,this.nativeEvent=w,this.target=M,this.currentTarget=null;for(var U in a)a.hasOwnProperty(U)&&(d=a[U],this[U]=d?d(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Do:ah,this.isPropagationStopped=ah,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Do)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Do)},persist:function(){},isPersistent:Do}),u}var Et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xc=Gn(Et),Jl=h({},Et,{view:0,detail:0}),Cg=Gn(Jl),Ic,Rc,ko,Ql=h({},Jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eu,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ko&&(ko&&a.type==="mousemove"?(Ic=a.screenX-ko.screenX,Rc=a.screenY-ko.screenY):Rc=Ic=0,ko=a),Ic)},movementY:function(a){return"movementY"in a?a.movementY:Rc}}),Di=Gn(Ql),xg=h({},Ql,{dataTransfer:0}),MT=Gn(xg),Xl=h({},Jl,{relatedTarget:0}),Pc=Gn(Xl),lh=h({},Et,{animationName:0,elapsedTime:0,pseudoElement:0}),Mc=Gn(lh),Ig=h({},Et,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Nc=Gn(Ig),NT=h({},Et,{data:0}),uh=Gn(NT),Zl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ch(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Pg[a])?!!u[a]:!1}function eu(){return ch}var Mg=h({},Jl,{key:function(a){if(a.key){var u=Zl[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=No(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Rg[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eu,charCode:function(a){return a.type==="keypress"?No(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?No(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Dc=Gn(Mg),Ng=h({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fh=Gn(Ng),ws=h({},Jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eu}),Dg=Gn(ws),kg=h({},Et,{propertyName:0,elapsedTime:0,pseudoElement:0}),Og=Gn(kg),Lg=h({},Ql,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),kc=Gn(Lg),Dr=h({},Et,{newState:0,oldState:0}),Vg=Gn(Dr),Ug=[9,13,27,32],Oo=io&&"CompositionEvent"in window,_=null;io&&"documentMode"in document&&(_=document.documentMode);var C=io&&"TextEvent"in window&&!_,x=io&&(!Oo||_&&8<_&&11>=_),B=" ",J=!1;function oe(a,u){switch(a){case"keyup":return Ug.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _e(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ut=!1;function Ln(a,u){switch(a){case"compositionend":return _e(u);case"keypress":return u.which!==32?null:(J=!0,B);case"textInput":return a=u.data,a===B&&J?null:a;default:return null}}function ct(a,u){if(ut)return a==="compositionend"||!Oo&&oe(a,u)?(a=sh(),Es=Aa=Mo=null,ut=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return x&&u.locale!=="ko"?null:u.data;default:return null}}var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!jn[a.type]:u==="textarea"}function bs(a,u,d,y){_s?Ts?Ts.push(y):Ts=[y]:_s=y,u=Sy(u,"onChange"),0<u.length&&(d=new xc("onChange","change",null,d,y),a.push({event:d,listeners:u}))}var ur=null,Lo=null;function dh(a){$M(a,0)}function Fg(a){var u=Io(a);if(nh(u))return a}function u1(a,u){if(a==="change")return u}var c1=!1;if(io){var DT;if(io){var kT="oninput"in document;if(!kT){var f1=document.createElement("div");f1.setAttribute("oninput","return;"),kT=typeof f1.oninput=="function"}DT=kT}else DT=!1;c1=DT&&(!document.documentMode||9<document.documentMode)}function d1(){ur&&(ur.detachEvent("onpropertychange",h1),Lo=ur=null)}function h1(a){if(a.propertyName==="value"&&Fg(Lo)){var u=[];bs(u,Lo,a,Mi(a)),Ag(dh,u)}}function bG(a,u,d){a==="focusin"?(d1(),ur=u,Lo=d,ur.attachEvent("onpropertychange",h1)):a==="focusout"&&d1()}function SG(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Fg(Lo)}function AG(a,u){if(a==="click")return Fg(u)}function CG(a,u){if(a==="input"||a==="change")return Fg(u)}function xG(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var si=typeof Object.is=="function"?Object.is:xG;function hh(a,u){if(si(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var d=Object.keys(a),y=Object.keys(u);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var T=d[y];if(!me.call(u,T)||!si(a[T],u[T]))return!1}return!0}function p1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function m1(a,u){var d=p1(a);a=0;for(var y;d;){if(d.nodeType===3){if(y=a+d.textContent.length,a<=u&&y>=u)return{node:d,offset:u-a};a=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=p1(d)}}function g1(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?g1(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function y1(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var u=Hl(a.document);u instanceof a.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)a=u.contentWindow;else break;u=Hl(a.document)}return u}function OT(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}var IG=io&&"documentMode"in document&&11>=document.documentMode,Oc=null,LT=null,ph=null,VT=!1;function v1(a,u,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;VT||Oc==null||Oc!==Hl(y)||(y=Oc,"selectionStart"in y&&OT(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),ph&&hh(ph,y)||(ph=y,y=Sy(LT,"onSelect"),0<y.length&&(u=new xc("onSelect","select",null,u,d),a.push({event:u,listeners:y}),u.target=Oc)))}function tu(a,u){var d={};return d[a.toLowerCase()]=u.toLowerCase(),d["Webkit"+a]="webkit"+u,d["Moz"+a]="moz"+u,d}var Lc={animationend:tu("Animation","AnimationEnd"),animationiteration:tu("Animation","AnimationIteration"),animationstart:tu("Animation","AnimationStart"),transitionrun:tu("Transition","TransitionRun"),transitionstart:tu("Transition","TransitionStart"),transitioncancel:tu("Transition","TransitionCancel"),transitionend:tu("Transition","TransitionEnd")},UT={},_1={};io&&(_1=document.createElement("div").style,"AnimationEvent"in window||(delete Lc.animationend.animation,delete Lc.animationiteration.animation,delete Lc.animationstart.animation),"TransitionEvent"in window||delete Lc.transitionend.transition);function nu(a){if(UT[a])return UT[a];if(!Lc[a])return a;var u=Lc[a],d;for(d in u)if(u.hasOwnProperty(d)&&d in _1)return UT[a]=u[d];return a}var T1=nu("animationend"),E1=nu("animationiteration"),w1=nu("animationstart"),RG=nu("transitionrun"),PG=nu("transitionstart"),MG=nu("transitioncancel"),b1=nu("transitionend"),S1=new Map,FT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");FT.push("scrollEnd");function oo(a,u){S1.set(a,u),ro(u,[a])}var A1=new WeakMap;function ki(a,u){if(typeof a=="object"&&a!==null){var d=A1.get(a);return d!==void 0?d:(u={value:a,source:u,stack:Sc(u)},A1.set(a,u),u)}return{value:a,source:u,stack:Sc(u)}}var Oi=[],Vc=0,BT=0;function Bg(){for(var a=Vc,u=BT=Vc=0;u<a;){var d=Oi[u];Oi[u++]=null;var y=Oi[u];Oi[u++]=null;var T=Oi[u];Oi[u++]=null;var w=Oi[u];if(Oi[u++]=null,y!==null&&T!==null){var M=y.pending;M===null?T.next=T:(T.next=M.next,M.next=T),y.pending=T}w!==0&&C1(d,T,w)}}function qg(a,u,d,y){Oi[Vc++]=a,Oi[Vc++]=u,Oi[Vc++]=d,Oi[Vc++]=y,BT|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function qT(a,u,d,y){return qg(a,u,d,y),$g(a)}function Uc(a,u){return qg(a,null,null,u),$g(a)}function C1(a,u,d){a.lanes|=d;var y=a.alternate;y!==null&&(y.lanes|=d);for(var T=!1,w=a.return;w!==null;)w.childLanes|=d,y=w.alternate,y!==null&&(y.childLanes|=d),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(T=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,T&&u!==null&&(T=31-yn(d),a=w.hiddenUpdates,y=a[T],y===null?a[T]=[u]:y.push(u),u.lane=d|536870912),w):null}function $g(a){if(50<Fh)throw Fh=0,KE=null,Error(r(185));for(var u=a.return;u!==null;)a=u,u=a.return;return a.tag===3?a.stateNode:null}var Fc={};function NG(a,u,d,y){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(a,u,d,y){return new NG(a,u,d,y)}function $T(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ss(a,u){var d=a.alternate;return d===null?(d=ai(a.tag,u,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=u,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,u=a.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function x1(a,u){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=u,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,u=d.dependencies,a.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),a}function zg(a,u,d,y,T,w){var M=0;if(y=a,typeof a=="function")$T(a)&&(M=1);else if(typeof a=="string")M=k9(a,d,Pe.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case k:return a=ai(31,d,u,T),a.elementType=k,a.lanes=w,a;case b:return ru(d.children,T,w,u);case S:M=8,T|=24;break;case A:return a=ai(12,d,u,T|2),a.elementType=A,a.lanes=w,a;case q:return a=ai(13,d,u,T),a.elementType=q,a.lanes=w,a;case z:return a=ai(19,d,u,T),a.elementType=z,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case I:case D:M=10;break e;case N:M=9;break e;case V:M=11;break e;case O:M=14;break e;case L:M=16,y=null;break e}M=29,d=Error(r(130,a===null?"null":typeof a,"")),y=null}return u=ai(M,d,u,T),u.elementType=a,u.type=y,u.lanes=w,u}function ru(a,u,d,y){return a=ai(7,a,y,u),a.lanes=d,a}function zT(a,u,d){return a=ai(6,a,null,u),a.lanes=d,a}function HT(a,u,d){return u=ai(4,a.children!==null?a.children:[],a.key,u),u.lanes=d,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}var Bc=[],qc=0,Hg=null,Gg=0,Li=[],Vi=0,iu=null,As=1,Cs="";function ou(a,u){Bc[qc++]=Gg,Bc[qc++]=Hg,Hg=a,Gg=u}function I1(a,u,d){Li[Vi++]=As,Li[Vi++]=Cs,Li[Vi++]=iu,iu=a;var y=As;a=Cs;var T=32-yn(y)-1;y&=~(1<<T),d+=1;var w=32-yn(u)+T;if(30<w){var M=T-T%5;w=(y&(1<<M)-1).toString(32),y>>=M,T-=M,As=1<<32-yn(u)+T|d<<T|y,Cs=w+a}else As=1<<w|d<<T|y,Cs=a}function GT(a){a.return!==null&&(ou(a,1),I1(a,1,0))}function jT(a){for(;a===Hg;)Hg=Bc[--qc],Bc[qc]=null,Gg=Bc[--qc],Bc[qc]=null;for(;a===iu;)iu=Li[--Vi],Li[Vi]=null,Cs=Li[--Vi],Li[Vi]=null,As=Li[--Vi],Li[Vi]=null}var kr=null,fn=null,yt=!1,su=null,Vo=!1,KT=Error(r(519));function au(a){var u=Error(r(418,""));throw yh(ki(u,a)),KT}function R1(a){var u=a.stateNode,d=a.type,y=a.memoizedProps;switch(u[cn]=a,u[Cn]=y,d){case"dialog":it("cancel",u),it("close",u);break;case"iframe":case"object":case"embed":it("load",u);break;case"video":case"audio":for(d=0;d<qh.length;d++)it(qh[d],u);break;case"source":it("error",u);break;case"img":case"image":case"link":it("error",u),it("load",u);break;case"details":it("toggle",u);break;case"input":it("invalid",u),Gl(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Ac(u);break;case"select":it("invalid",u);break;case"textarea":it("invalid",u),jl(u,y.value,y.defaultValue,y.children),Ac(u)}d=y.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||y.suppressHydrationWarning===!0||jM(u.textContent,d)?(y.popover!=null&&(it("beforetoggle",u),it("toggle",u)),y.onScroll!=null&&it("scroll",u),y.onScrollEnd!=null&&it("scrollend",u),y.onClick!=null&&(u.onclick=Ay),u=!0):u=!1,u||au(a)}function P1(a){for(kr=a.return;kr;)switch(kr.tag){case 5:case 13:Vo=!1;return;case 27:case 3:Vo=!0;return;default:kr=kr.return}}function mh(a){if(a!==kr)return!1;if(!yt)return P1(a),yt=!0,!1;var u=a.tag,d;if((d=u!==3&&u!==27)&&((d=u===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||uw(a.type,a.memoizedProps)),d=!d),d&&fn&&au(a),P1(a),u===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(u===0){fn=ao(a.nextSibling);break e}u--}else d!=="$"&&d!=="$!"&&d!=="$?"||u++;a=a.nextSibling}fn=null}}else u===27?(u=fn,qa(a.type)?(a=hw,hw=null,fn=a):fn=u):fn=kr?ao(a.stateNode.nextSibling):null;return!0}function gh(){fn=kr=null,yt=!1}function M1(){var a=su;return a!==null&&(Yr===null?Yr=a:Yr.push.apply(Yr,a),su=null),a}function yh(a){su===null?su=[a]:su.push(a)}var WT=ae(null),lu=null,xs=null;function Ca(a,u,d){ve(WT,u._currentValue),u._currentValue=d}function Is(a){a._currentValue=WT.current,ue(WT)}function YT(a,u,d){for(;a!==null;){var y=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),a===d)break;a=a.return}}function JT(a,u,d,y){var T=a.child;for(T!==null&&(T.return=a);T!==null;){var w=T.dependencies;if(w!==null){var M=T.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=T;for(var j=0;j<u.length;j++)if(U.context===u[j]){w.lanes|=d,U=w.alternate,U!==null&&(U.lanes|=d),YT(w.return,d,a),y||(M=null);break e}w=U.next}}else if(T.tag===18){if(M=T.return,M===null)throw Error(r(341));M.lanes|=d,w=M.alternate,w!==null&&(w.lanes|=d),YT(M,d,a),M=null}else M=T.child;if(M!==null)M.return=T;else for(M=T;M!==null;){if(M===a){M=null;break}if(T=M.sibling,T!==null){T.return=M.return,M=T;break}M=M.return}T=M}}function vh(a,u,d,y){a=null;for(var T=u,w=!1;T!==null;){if(!w){if((T.flags&524288)!==0)w=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var M=T.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var U=T.type;si(T.pendingProps.value,M.value)||(a!==null?a.push(U):a=[U])}}else if(T===ln.current){if(M=T.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(a!==null?a.push(Kh):a=[Kh])}T=T.return}a!==null&&JT(u,a,d,y),u.flags|=262144}function jg(a){for(a=a.firstContext;a!==null;){if(!si(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function uu(a){lu=a,xs=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Er(a){return N1(lu,a)}function Kg(a,u){return lu===null&&uu(a),N1(a,u)}function N1(a,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},xs===null){if(a===null)throw Error(r(308));xs=u,a.dependencies={lanes:0,firstContext:u},a.flags|=524288}else xs=xs.next=u;return d}var DG=typeof AbortController<"u"?AbortController:function(){var a=[],u=this.signal={aborted:!1,addEventListener:function(d,y){a.push(y)}};this.abort=function(){u.aborted=!0,a.forEach(function(d){return d()})}},kG=t.unstable_scheduleCallback,OG=t.unstable_NormalPriority,Un={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function QT(){return{controller:new DG,data:new Map,refCount:0}}function _h(a){a.refCount--,a.refCount===0&&kG(OG,function(){a.controller.abort()})}var Th=null,XT=0,$c=0,zc=null;function LG(a,u){if(Th===null){var d=Th=[];XT=0,$c=ew(),zc={status:"pending",value:void 0,then:function(y){d.push(y)}}}return XT++,u.then(D1,D1),u}function D1(){if(--XT===0&&Th!==null){zc!==null&&(zc.status="fulfilled");var a=Th;Th=null,$c=0,zc=null;for(var u=0;u<a.length;u++)(0,a[u])()}}function VG(a,u){var d=[],y={status:"pending",value:null,reason:null,then:function(T){d.push(T)}};return a.then(function(){y.status="fulfilled",y.value=u;for(var T=0;T<d.length;T++)(0,d[T])(u)},function(T){for(y.status="rejected",y.reason=T,T=0;T<d.length;T++)(0,d[T])(void 0)}),y}var k1=ee.S;ee.S=function(a,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&LG(a,u),k1!==null&&k1(a,u)};var cu=ae(null);function ZT(){var a=cu.current;return a!==null?a:Vt.pooledCache}function Wg(a,u){u===null?ve(cu,cu.current):ve(cu,u.pool)}function O1(){var a=ZT();return a===null?null:{parent:Un._currentValue,pool:a}}var Eh=Error(r(460)),L1=Error(r(474)),Yg=Error(r(542)),eE={then:function(){}};function V1(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Jg(){}function U1(a,u,d){switch(d=a[d],d===void 0?a.push(u):d!==u&&(u.then(Jg,Jg),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,B1(a),a;default:if(typeof u.status=="string")u.then(Jg,Jg);else{if(a=Vt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=u,a.status="pending",a.then(function(y){if(u.status==="pending"){var T=u;T.status="fulfilled",T.value=y}},function(y){if(u.status==="pending"){var T=u;T.status="rejected",T.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,B1(a),a}throw wh=u,Eh}}var wh=null;function F1(){if(wh===null)throw Error(r(459));var a=wh;return wh=null,a}function B1(a){if(a===Eh||a===Yg)throw Error(r(483))}var xa=!1;function tE(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nE(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ia(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ra(a,u,d){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(bt&2)!==0){var T=y.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),y.pending=u,u=$g(a),C1(a,null,d),u}return qg(a,y,u,d),$g(a)}function bh(a,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194048)!==0)){var y=u.lanes;y&=a.pendingLanes,d|=y,u.lanes=d,Tt(a,d)}}function rE(a,u){var d=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var T=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var M={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?T=w=M:w=w.next=M,d=d.next}while(d!==null);w===null?T=w=u:w=w.next=u}else T=w=u;d={baseState:y.baseState,firstBaseUpdate:T,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=u}var iE=!1;function Sh(){if(iE){var a=zc;if(a!==null)throw a}}function Ah(a,u,d,y){iE=!1;var T=a.updateQueue;xa=!1;var w=T.firstBaseUpdate,M=T.lastBaseUpdate,U=T.shared.pending;if(U!==null){T.shared.pending=null;var j=U,Z=j.next;j.next=null,M===null?w=Z:M.next=Z,M=j;var le=a.alternate;le!==null&&(le=le.updateQueue,U=le.lastBaseUpdate,U!==M&&(U===null?le.firstBaseUpdate=Z:U.next=Z,le.lastBaseUpdate=j))}if(w!==null){var fe=T.baseState;M=0,le=Z=j=null,U=w;do{var te=U.lane&-536870913,ne=te!==U.lane;if(ne?(ft&te)===te:(y&te)===te){te!==0&&te===$c&&(iE=!0),le!==null&&(le=le.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Ke=a,qe=U;te=u;var Dt=d;switch(qe.tag){case 1:if(Ke=qe.payload,typeof Ke=="function"){fe=Ke.call(Dt,fe,te);break e}fe=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=qe.payload,te=typeof Ke=="function"?Ke.call(Dt,fe,te):Ke,te==null)break e;fe=h({},fe,te);break e;case 2:xa=!0}}te=U.callback,te!==null&&(a.flags|=64,ne&&(a.flags|=8192),ne=T.callbacks,ne===null?T.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:U.tag,payload:U.payload,callback:U.callback,next:null},le===null?(Z=le=ne,j=fe):le=le.next=ne,M|=te;if(U=U.next,U===null){if(U=T.shared.pending,U===null)break;ne=U,U=ne.next,ne.next=null,T.lastBaseUpdate=ne,T.shared.pending=null}}while(!0);le===null&&(j=fe),T.baseState=j,T.firstBaseUpdate=Z,T.lastBaseUpdate=le,w===null&&(T.shared.lanes=0),Va|=M,a.lanes=M,a.memoizedState=fe}}function q1(a,u){if(typeof a!="function")throw Error(r(191,a));a.call(u)}function $1(a,u){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)q1(d[a],u)}var Hc=ae(null),Qg=ae(0);function z1(a,u){a=Os,ve(Qg,a),ve(Hc,u),Os=a|u.baseLanes}function oE(){ve(Qg,Os),ve(Hc,Hc.current)}function sE(){Os=Qg.current,ue(Hc),ue(Qg)}var Pa=0,tt=null,Mt=null,In=null,Xg=!1,Gc=!1,fu=!1,Zg=0,Ch=0,jc=null,UG=0;function _n(){throw Error(r(321))}function aE(a,u){if(u===null)return!1;for(var d=0;d<u.length&&d<a.length;d++)if(!si(a[d],u[d]))return!1;return!0}function lE(a,u,d,y,T,w){return Pa=w,tt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ee.H=a===null||a.memoizedState===null?CP:xP,fu=!1,w=d(y,T),fu=!1,Gc&&(w=G1(u,d,y,T)),H1(a),w}function H1(a){ee.H=oy;var u=Mt!==null&&Mt.next!==null;if(Pa=0,In=Mt=tt=null,Xg=!1,Ch=0,jc=null,u)throw Error(r(300));a===null||Kn||(a=a.dependencies,a!==null&&jg(a)&&(Kn=!0))}function G1(a,u,d,y){tt=a;var T=0;do{if(Gc&&(jc=null),Ch=0,Gc=!1,25<=T)throw Error(r(301));if(T+=1,In=Mt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ee.H=GG,w=u(d,y)}while(Gc);return w}function FG(){var a=ee.H,u=a.useState()[0];return u=typeof u.then=="function"?xh(u):u,a=a.useState()[0],(Mt!==null?Mt.memoizedState:null)!==a&&(tt.flags|=1024),u}function uE(){var a=Zg!==0;return Zg=0,a}function cE(a,u,d){u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~d}function fE(a){if(Xg){for(a=a.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}Xg=!1}Pa=0,In=Mt=tt=null,Gc=!1,Ch=Zg=0,jc=null}function Kr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?tt.memoizedState=In=a:In=In.next=a,In}function Rn(){if(Mt===null){var a=tt.alternate;a=a!==null?a.memoizedState:null}else a=Mt.next;var u=In===null?tt.memoizedState:In.next;if(u!==null)In=u,Mt=a;else{if(a===null)throw tt.alternate===null?Error(r(467)):Error(r(310));Mt=a,a={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},In===null?tt.memoizedState=In=a:In=In.next=a}return In}function dE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xh(a){var u=Ch;return Ch+=1,jc===null&&(jc=[]),a=U1(jc,a,u),u=tt,(In===null?u.memoizedState:In.next)===null&&(u=u.alternate,ee.H=u===null||u.memoizedState===null?CP:xP),a}function ey(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return xh(a);if(a.$$typeof===D)return Er(a)}throw Error(r(438,String(a)))}function hE(a){var u=null,d=tt.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var y=tt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(T){return T.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=dE(),tt.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(a),y=0;y<a;y++)d[y]=$;return u.index++,d}function Rs(a,u){return typeof u=="function"?u(a):u}function ty(a){var u=Rn();return pE(u,Mt,a)}function pE(a,u,d){var y=a.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=d;var T=a.baseQueue,w=y.pending;if(w!==null){if(T!==null){var M=T.next;T.next=w.next,w.next=M}u.baseQueue=T=w,y.pending=null}if(w=a.baseState,T===null)a.memoizedState=w;else{u=T.next;var U=M=null,j=null,Z=u,le=!1;do{var fe=Z.lane&-536870913;if(fe!==Z.lane?(ft&fe)===fe:(Pa&fe)===fe){var te=Z.revertLane;if(te===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),fe===$c&&(le=!0);else if((Pa&te)===te){Z=Z.next,te===$c&&(le=!0);continue}else fe={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},j===null?(U=j=fe,M=w):j=j.next=fe,tt.lanes|=te,Va|=te;fe=Z.action,fu&&d(w,fe),w=Z.hasEagerState?Z.eagerState:d(w,fe)}else te={lane:fe,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},j===null?(U=j=te,M=w):j=j.next=te,tt.lanes|=fe,Va|=fe;Z=Z.next}while(Z!==null&&Z!==u);if(j===null?M=w:j.next=U,!si(w,a.memoizedState)&&(Kn=!0,le&&(d=zc,d!==null)))throw d;a.memoizedState=w,a.baseState=M,a.baseQueue=j,y.lastRenderedState=w}return T===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function mE(a){var u=Rn(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=a;var y=d.dispatch,T=d.pending,w=u.memoizedState;if(T!==null){d.pending=null;var M=T=T.next;do w=a(w,M.action),M=M.next;while(M!==T);si(w,u.memoizedState)||(Kn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),d.lastRenderedState=w}return[w,y]}function j1(a,u,d){var y=tt,T=Rn(),w=yt;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=u();var M=!si((Mt||T).memoizedState,d);M&&(T.memoizedState=d,Kn=!0),T=T.queue;var U=Y1.bind(null,y,T,a);if(Ih(2048,8,U,[a]),T.getSnapshot!==u||M||In!==null&&In.memoizedState.tag&1){if(y.flags|=2048,Kc(9,ny(),W1.bind(null,y,T,d,u),null),Vt===null)throw Error(r(349));w||(Pa&124)!==0||K1(y,u,d)}return d}function K1(a,u,d){a.flags|=16384,a={getSnapshot:u,value:d},u=tt.updateQueue,u===null?(u=dE(),tt.updateQueue=u,u.stores=[a]):(d=u.stores,d===null?u.stores=[a]:d.push(a))}function W1(a,u,d,y){u.value=d,u.getSnapshot=y,J1(u)&&Q1(a)}function Y1(a,u,d){return d(function(){J1(u)&&Q1(a)})}function J1(a){var u=a.getSnapshot;a=a.value;try{var d=u();return!si(a,d)}catch{return!0}}function Q1(a){var u=Uc(a,2);u!==null&&di(u,a,2)}function gE(a){var u=Kr();if(typeof a=="function"){var d=a;if(a=d(),fu){ar(!0);try{d()}finally{ar(!1)}}}return u.memoizedState=u.baseState=a,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:a},u}function X1(a,u,d,y){return a.baseState=d,pE(a,Mt,typeof y=="function"?y:Rs)}function BG(a,u,d,y,T){if(iy(a))throw Error(r(485));if(a=u.action,a!==null){var w={payload:T,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){w.listeners.push(M)}};ee.T!==null?d(!0):w.isTransition=!1,y(w),d=u.pending,d===null?(w.next=u.pending=w,Z1(u,w)):(w.next=d.next,u.pending=d.next=w)}}function Z1(a,u){var d=u.action,y=u.payload,T=a.state;if(u.isTransition){var w=ee.T,M={};ee.T=M;try{var U=d(T,y),j=ee.S;j!==null&&j(M,U),eP(a,u,U)}catch(Z){yE(a,u,Z)}finally{ee.T=w}}else try{w=d(T,y),eP(a,u,w)}catch(Z){yE(a,u,Z)}}function eP(a,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(y){tP(a,u,y)},function(y){return yE(a,u,y)}):tP(a,u,d)}function tP(a,u,d){u.status="fulfilled",u.value=d,nP(u),a.state=d,u=a.pending,u!==null&&(d=u.next,d===u?a.pending=null:(d=d.next,u.next=d,Z1(a,d)))}function yE(a,u,d){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=d,nP(u),u=u.next;while(u!==y)}a.action=null}function nP(a){a=a.listeners;for(var u=0;u<a.length;u++)(0,a[u])()}function rP(a,u){return u}function iP(a,u){if(yt){var d=Vt.formState;if(d!==null){e:{var y=tt;if(yt){if(fn){t:{for(var T=fn,w=Vo;T.nodeType!==8;){if(!w){T=null;break t}if(T=ao(T.nextSibling),T===null){T=null;break t}}w=T.data,T=w==="F!"||w==="F"?T:null}if(T){fn=ao(T.nextSibling),y=T.data==="F!";break e}}au(y)}y=!1}y&&(u=d[0])}}return d=Kr(),d.memoizedState=d.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rP,lastRenderedState:u},d.queue=y,d=bP.bind(null,tt,y),y.dispatch=d,y=gE(!1),w=wE.bind(null,tt,!1,y.queue),y=Kr(),T={state:u,dispatch:null,action:a,pending:null},y.queue=T,d=BG.bind(null,tt,T,w,d),T.dispatch=d,y.memoizedState=a,[u,d,!1]}function oP(a){var u=Rn();return sP(u,Mt,a)}function sP(a,u,d){if(u=pE(a,u,rP)[0],a=ty(Rs)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=xh(u)}catch(M){throw M===Eh?Yg:M}else y=u;u=Rn();var T=u.queue,w=T.dispatch;return d!==u.memoizedState&&(tt.flags|=2048,Kc(9,ny(),qG.bind(null,T,d),null)),[y,w,a]}function qG(a,u){a.action=u}function aP(a){var u=Rn(),d=Mt;if(d!==null)return sP(u,d,a);Rn(),u=u.memoizedState,d=Rn();var y=d.queue.dispatch;return d.memoizedState=a,[u,y,!1]}function Kc(a,u,d,y){return a={tag:a,create:d,deps:y,inst:u,next:null},u=tt.updateQueue,u===null&&(u=dE(),tt.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=a.next=a:(y=d.next,d.next=a,a.next=y,u.lastEffect=a),a}function ny(){return{destroy:void 0,resource:void 0}}function lP(){return Rn().memoizedState}function ry(a,u,d,y){var T=Kr();y=y===void 0?null:y,tt.flags|=a,T.memoizedState=Kc(1|u,ny(),d,y)}function Ih(a,u,d,y){var T=Rn();y=y===void 0?null:y;var w=T.memoizedState.inst;Mt!==null&&y!==null&&aE(y,Mt.memoizedState.deps)?T.memoizedState=Kc(u,w,d,y):(tt.flags|=a,T.memoizedState=Kc(1|u,w,d,y))}function uP(a,u){ry(8390656,8,a,u)}function cP(a,u){Ih(2048,8,a,u)}function fP(a,u){return Ih(4,2,a,u)}function dP(a,u){return Ih(4,4,a,u)}function hP(a,u){if(typeof u=="function"){a=a();var d=u(a);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function pP(a,u,d){d=d!=null?d.concat([a]):null,Ih(4,4,hP.bind(null,u,a),d)}function vE(){}function mP(a,u){var d=Rn();u=u===void 0?null:u;var y=d.memoizedState;return u!==null&&aE(u,y[1])?y[0]:(d.memoizedState=[a,u],a)}function gP(a,u){var d=Rn();u=u===void 0?null:u;var y=d.memoizedState;if(u!==null&&aE(u,y[1]))return y[0];if(y=a(),fu){ar(!0);try{a()}finally{ar(!1)}}return d.memoizedState=[y,u],y}function _E(a,u,d){return d===void 0||(Pa&1073741824)!==0?a.memoizedState=u:(a.memoizedState=d,a=_M(),tt.lanes|=a,Va|=a,d)}function yP(a,u,d,y){return si(d,u)?d:Hc.current!==null?(a=_E(a,d,y),si(a,u)||(Kn=!0),a):(Pa&42)===0?(Kn=!0,a.memoizedState=d):(a=_M(),tt.lanes|=a,Va|=a,u)}function vP(a,u,d,y,T){var w=he.p;he.p=w!==0&&8>w?w:8;var M=ee.T,U={};ee.T=U,wE(a,!1,u,d);try{var j=T(),Z=ee.S;if(Z!==null&&Z(U,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var le=VG(j,y);Rh(a,u,le,fi(a))}else Rh(a,u,y,fi(a))}catch(fe){Rh(a,u,{then:function(){},status:"rejected",reason:fe},fi())}finally{he.p=w,ee.T=M}}function $G(){}function TE(a,u,d,y){if(a.tag!==5)throw Error(r(476));var T=_P(a).queue;vP(a,T,u,Ee,d===null?$G:function(){return TP(a),d(y)})}function _P(a){var u=a.memoizedState;if(u!==null)return u;u={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:Ee},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:d},next:null},a.memoizedState=u,a=a.alternate,a!==null&&(a.memoizedState=u),u}function TP(a){var u=_P(a).next.queue;Rh(a,u,{},fi())}function EE(){return Er(Kh)}function EP(){return Rn().memoizedState}function wP(){return Rn().memoizedState}function zG(a){for(var u=a.return;u!==null;){switch(u.tag){case 24:case 3:var d=fi();a=Ia(d);var y=Ra(u,a,d);y!==null&&(di(y,u,d),bh(y,u,d)),u={cache:QT()},a.payload=u;return}u=u.return}}function HG(a,u,d){var y=fi();d={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},iy(a)?SP(u,d):(d=qT(a,u,d,y),d!==null&&(di(d,a,y),AP(d,u,y)))}function bP(a,u,d){var y=fi();Rh(a,u,d,y)}function Rh(a,u,d,y){var T={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(iy(a))SP(u,T);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var M=u.lastRenderedState,U=w(M,d);if(T.hasEagerState=!0,T.eagerState=U,si(U,M))return qg(a,u,T,0),Vt===null&&Bg(),!1}catch{}finally{}if(d=qT(a,u,T,y),d!==null)return di(d,a,y),AP(d,u,y),!0}return!1}function wE(a,u,d,y){if(y={lane:2,revertLane:ew(),action:y,hasEagerState:!1,eagerState:null,next:null},iy(a)){if(u)throw Error(r(479))}else u=qT(a,d,y,2),u!==null&&di(u,a,2)}function iy(a){var u=a.alternate;return a===tt||u!==null&&u===tt}function SP(a,u){Gc=Xg=!0;var d=a.pending;d===null?u.next=u:(u.next=d.next,d.next=u),a.pending=u}function AP(a,u,d){if((d&4194048)!==0){var y=u.lanes;y&=a.pendingLanes,d|=y,u.lanes=d,Tt(a,d)}}var oy={readContext:Er,use:ey,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n},CP={readContext:Er,use:ey,useCallback:function(a,u){return Kr().memoizedState=[a,u===void 0?null:u],a},useContext:Er,useEffect:uP,useImperativeHandle:function(a,u,d){d=d!=null?d.concat([a]):null,ry(4194308,4,hP.bind(null,u,a),d)},useLayoutEffect:function(a,u){return ry(4194308,4,a,u)},useInsertionEffect:function(a,u){ry(4,2,a,u)},useMemo:function(a,u){var d=Kr();u=u===void 0?null:u;var y=a();if(fu){ar(!0);try{a()}finally{ar(!1)}}return d.memoizedState=[y,u],y},useReducer:function(a,u,d){var y=Kr();if(d!==void 0){var T=d(u);if(fu){ar(!0);try{d(u)}finally{ar(!1)}}}else T=u;return y.memoizedState=y.baseState=T,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:T},y.queue=a,a=a.dispatch=HG.bind(null,tt,a),[y.memoizedState,a]},useRef:function(a){var u=Kr();return a={current:a},u.memoizedState=a},useState:function(a){a=gE(a);var u=a.queue,d=bP.bind(null,tt,u);return u.dispatch=d,[a.memoizedState,d]},useDebugValue:vE,useDeferredValue:function(a,u){var d=Kr();return _E(d,a,u)},useTransition:function(){var a=gE(!1);return a=vP.bind(null,tt,a.queue,!0,!1),Kr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,u,d){var y=tt,T=Kr();if(yt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=u(),Vt===null)throw Error(r(349));(ft&124)!==0||K1(y,u,d)}T.memoizedState=d;var w={value:d,getSnapshot:u};return T.queue=w,uP(Y1.bind(null,y,w,a),[a]),y.flags|=2048,Kc(9,ny(),W1.bind(null,y,w,d,u),null),d},useId:function(){var a=Kr(),u=Vt.identifierPrefix;if(yt){var d=Cs,y=As;d=(y&~(1<<32-yn(y)-1)).toString(32)+d,u="«"+u+"R"+d,d=Zg++,0<d&&(u+="H"+d.toString(32)),u+="»"}else d=UG++,u="«"+u+"r"+d.toString(32)+"»";return a.memoizedState=u},useHostTransitionStatus:EE,useFormState:iP,useActionState:iP,useOptimistic:function(a){var u=Kr();u.memoizedState=u.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=wE.bind(null,tt,!0,d),d.dispatch=u,[a,u]},useMemoCache:hE,useCacheRefresh:function(){return Kr().memoizedState=zG.bind(null,tt)}},xP={readContext:Er,use:ey,useCallback:mP,useContext:Er,useEffect:cP,useImperativeHandle:pP,useInsertionEffect:fP,useLayoutEffect:dP,useMemo:gP,useReducer:ty,useRef:lP,useState:function(){return ty(Rs)},useDebugValue:vE,useDeferredValue:function(a,u){var d=Rn();return yP(d,Mt.memoizedState,a,u)},useTransition:function(){var a=ty(Rs)[0],u=Rn().memoizedState;return[typeof a=="boolean"?a:xh(a),u]},useSyncExternalStore:j1,useId:EP,useHostTransitionStatus:EE,useFormState:oP,useActionState:oP,useOptimistic:function(a,u){var d=Rn();return X1(d,Mt,a,u)},useMemoCache:hE,useCacheRefresh:wP},GG={readContext:Er,use:ey,useCallback:mP,useContext:Er,useEffect:cP,useImperativeHandle:pP,useInsertionEffect:fP,useLayoutEffect:dP,useMemo:gP,useReducer:mE,useRef:lP,useState:function(){return mE(Rs)},useDebugValue:vE,useDeferredValue:function(a,u){var d=Rn();return Mt===null?_E(d,a,u):yP(d,Mt.memoizedState,a,u)},useTransition:function(){var a=mE(Rs)[0],u=Rn().memoizedState;return[typeof a=="boolean"?a:xh(a),u]},useSyncExternalStore:j1,useId:EP,useHostTransitionStatus:EE,useFormState:aP,useActionState:aP,useOptimistic:function(a,u){var d=Rn();return Mt!==null?X1(d,Mt,a,u):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:hE,useCacheRefresh:wP},Wc=null,Ph=0;function sy(a){var u=Ph;return Ph+=1,Wc===null&&(Wc=[]),U1(Wc,a,u)}function Mh(a,u){u=u.props.ref,a.ref=u!==void 0?u:null}function ay(a,u){throw u.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(u),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a)))}function IP(a){var u=a._init;return u(a._payload)}function RP(a){function u(Y,W){if(a){var X=Y.deletions;X===null?(Y.deletions=[W],Y.flags|=16):X.push(W)}}function d(Y,W){if(!a)return null;for(;W!==null;)u(Y,W),W=W.sibling;return null}function y(Y){for(var W=new Map;Y!==null;)Y.key!==null?W.set(Y.key,Y):W.set(Y.index,Y),Y=Y.sibling;return W}function T(Y,W){return Y=Ss(Y,W),Y.index=0,Y.sibling=null,Y}function w(Y,W,X){return Y.index=X,a?(X=Y.alternate,X!==null?(X=X.index,X<W?(Y.flags|=67108866,W):X):(Y.flags|=67108866,W)):(Y.flags|=1048576,W)}function M(Y){return a&&Y.alternate===null&&(Y.flags|=67108866),Y}function U(Y,W,X,ce){return W===null||W.tag!==6?(W=zT(X,Y.mode,ce),W.return=Y,W):(W=T(W,X),W.return=Y,W)}function j(Y,W,X,ce){var De=X.type;return De===b?le(Y,W,X.props.children,ce,X.key):W!==null&&(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===L&&IP(De)===W.type)?(W=T(W,X.props),Mh(W,X),W.return=Y,W):(W=zg(X.type,X.key,X.props,null,Y.mode,ce),Mh(W,X),W.return=Y,W)}function Z(Y,W,X,ce){return W===null||W.tag!==4||W.stateNode.containerInfo!==X.containerInfo||W.stateNode.implementation!==X.implementation?(W=HT(X,Y.mode,ce),W.return=Y,W):(W=T(W,X.children||[]),W.return=Y,W)}function le(Y,W,X,ce,De){return W===null||W.tag!==7?(W=ru(X,Y.mode,ce,De),W.return=Y,W):(W=T(W,X),W.return=Y,W)}function fe(Y,W,X){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=zT(""+W,Y.mode,X),W.return=Y,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return X=zg(W.type,W.key,W.props,null,Y.mode,X),Mh(X,W),X.return=Y,X;case E:return W=HT(W,Y.mode,X),W.return=Y,W;case L:var ce=W._init;return W=ce(W._payload),fe(Y,W,X)}if(Re(W)||G(W))return W=ru(W,Y.mode,X,null),W.return=Y,W;if(typeof W.then=="function")return fe(Y,sy(W),X);if(W.$$typeof===D)return fe(Y,Kg(Y,W),X);ay(Y,W)}return null}function te(Y,W,X,ce){var De=W!==null?W.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return De!==null?null:U(Y,W,""+X,ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case v:return X.key===De?j(Y,W,X,ce):null;case E:return X.key===De?Z(Y,W,X,ce):null;case L:return De=X._init,X=De(X._payload),te(Y,W,X,ce)}if(Re(X)||G(X))return De!==null?null:le(Y,W,X,ce,null);if(typeof X.then=="function")return te(Y,W,sy(X),ce);if(X.$$typeof===D)return te(Y,W,Kg(Y,X),ce);ay(Y,X)}return null}function ne(Y,W,X,ce,De){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Y=Y.get(X)||null,U(W,Y,""+ce,De);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case v:return Y=Y.get(ce.key===null?X:ce.key)||null,j(W,Y,ce,De);case E:return Y=Y.get(ce.key===null?X:ce.key)||null,Z(W,Y,ce,De);case L:var nt=ce._init;return ce=nt(ce._payload),ne(Y,W,X,ce,De)}if(Re(ce)||G(ce))return Y=Y.get(X)||null,le(W,Y,ce,De,null);if(typeof ce.then=="function")return ne(Y,W,X,sy(ce),De);if(ce.$$typeof===D)return ne(Y,W,X,Kg(W,ce),De);ay(W,ce)}return null}function Ke(Y,W,X,ce){for(var De=null,nt=null,Fe=W,He=W=0,Yn=null;Fe!==null&&He<X.length;He++){Fe.index>He?(Yn=Fe,Fe=null):Yn=Fe.sibling;var mt=te(Y,Fe,X[He],ce);if(mt===null){Fe===null&&(Fe=Yn);break}a&&Fe&&mt.alternate===null&&u(Y,Fe),W=w(mt,W,He),nt===null?De=mt:nt.sibling=mt,nt=mt,Fe=Yn}if(He===X.length)return d(Y,Fe),yt&&ou(Y,He),De;if(Fe===null){for(;He<X.length;He++)Fe=fe(Y,X[He],ce),Fe!==null&&(W=w(Fe,W,He),nt===null?De=Fe:nt.sibling=Fe,nt=Fe);return yt&&ou(Y,He),De}for(Fe=y(Fe);He<X.length;He++)Yn=ne(Fe,Y,He,X[He],ce),Yn!==null&&(a&&Yn.alternate!==null&&Fe.delete(Yn.key===null?He:Yn.key),W=w(Yn,W,He),nt===null?De=Yn:nt.sibling=Yn,nt=Yn);return a&&Fe.forEach(function(ja){return u(Y,ja)}),yt&&ou(Y,He),De}function qe(Y,W,X,ce){if(X==null)throw Error(r(151));for(var De=null,nt=null,Fe=W,He=W=0,Yn=null,mt=X.next();Fe!==null&&!mt.done;He++,mt=X.next()){Fe.index>He?(Yn=Fe,Fe=null):Yn=Fe.sibling;var ja=te(Y,Fe,mt.value,ce);if(ja===null){Fe===null&&(Fe=Yn);break}a&&Fe&&ja.alternate===null&&u(Y,Fe),W=w(ja,W,He),nt===null?De=ja:nt.sibling=ja,nt=ja,Fe=Yn}if(mt.done)return d(Y,Fe),yt&&ou(Y,He),De;if(Fe===null){for(;!mt.done;He++,mt=X.next())mt=fe(Y,mt.value,ce),mt!==null&&(W=w(mt,W,He),nt===null?De=mt:nt.sibling=mt,nt=mt);return yt&&ou(Y,He),De}for(Fe=y(Fe);!mt.done;He++,mt=X.next())mt=ne(Fe,Y,He,mt.value,ce),mt!==null&&(a&&mt.alternate!==null&&Fe.delete(mt.key===null?He:mt.key),W=w(mt,W,He),nt===null?De=mt:nt.sibling=mt,nt=mt);return a&&Fe.forEach(function(j9){return u(Y,j9)}),yt&&ou(Y,He),De}function Dt(Y,W,X,ce){if(typeof X=="object"&&X!==null&&X.type===b&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case v:e:{for(var De=X.key;W!==null;){if(W.key===De){if(De=X.type,De===b){if(W.tag===7){d(Y,W.sibling),ce=T(W,X.props.children),ce.return=Y,Y=ce;break e}}else if(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===L&&IP(De)===W.type){d(Y,W.sibling),ce=T(W,X.props),Mh(ce,X),ce.return=Y,Y=ce;break e}d(Y,W);break}else u(Y,W);W=W.sibling}X.type===b?(ce=ru(X.props.children,Y.mode,ce,X.key),ce.return=Y,Y=ce):(ce=zg(X.type,X.key,X.props,null,Y.mode,ce),Mh(ce,X),ce.return=Y,Y=ce)}return M(Y);case E:e:{for(De=X.key;W!==null;){if(W.key===De)if(W.tag===4&&W.stateNode.containerInfo===X.containerInfo&&W.stateNode.implementation===X.implementation){d(Y,W.sibling),ce=T(W,X.children||[]),ce.return=Y,Y=ce;break e}else{d(Y,W);break}else u(Y,W);W=W.sibling}ce=HT(X,Y.mode,ce),ce.return=Y,Y=ce}return M(Y);case L:return De=X._init,X=De(X._payload),Dt(Y,W,X,ce)}if(Re(X))return Ke(Y,W,X,ce);if(G(X)){if(De=G(X),typeof De!="function")throw Error(r(150));return X=De.call(X),qe(Y,W,X,ce)}if(typeof X.then=="function")return Dt(Y,W,sy(X),ce);if(X.$$typeof===D)return Dt(Y,W,Kg(Y,X),ce);ay(Y,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,W!==null&&W.tag===6?(d(Y,W.sibling),ce=T(W,X),ce.return=Y,Y=ce):(d(Y,W),ce=zT(X,Y.mode,ce),ce.return=Y,Y=ce),M(Y)):d(Y,W)}return function(Y,W,X,ce){try{Ph=0;var De=Dt(Y,W,X,ce);return Wc=null,De}catch(Fe){if(Fe===Eh||Fe===Yg)throw Fe;var nt=ai(29,Fe,null,Y.mode);return nt.lanes=ce,nt.return=Y,nt}finally{}}}var Yc=RP(!0),PP=RP(!1),Ui=ae(null),Uo=null;function Ma(a){var u=a.alternate;ve(Fn,Fn.current&1),ve(Ui,a),Uo===null&&(u===null||Hc.current!==null||u.memoizedState!==null)&&(Uo=a)}function MP(a){if(a.tag===22){if(ve(Fn,Fn.current),ve(Ui,a),Uo===null){var u=a.alternate;u!==null&&u.memoizedState!==null&&(Uo=a)}}else Na()}function Na(){ve(Fn,Fn.current),ve(Ui,Ui.current)}function Ps(a){ue(Ui),Uo===a&&(Uo=null),ue(Fn)}var Fn=ae(0);function ly(a){for(var u=a;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||dw(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function bE(a,u,d,y){u=a.memoizedState,d=d(y,u),d=d==null?u:h({},u,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var SE={enqueueSetState:function(a,u,d){a=a._reactInternals;var y=fi(),T=Ia(y);T.payload=u,d!=null&&(T.callback=d),u=Ra(a,T,y),u!==null&&(di(u,a,y),bh(u,a,y))},enqueueReplaceState:function(a,u,d){a=a._reactInternals;var y=fi(),T=Ia(y);T.tag=1,T.payload=u,d!=null&&(T.callback=d),u=Ra(a,T,y),u!==null&&(di(u,a,y),bh(u,a,y))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var d=fi(),y=Ia(d);y.tag=2,u!=null&&(y.callback=u),u=Ra(a,y,d),u!==null&&(di(u,a,d),bh(u,a,d))}};function NP(a,u,d,y,T,w,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,w,M):u.prototype&&u.prototype.isPureReactComponent?!hh(d,y)||!hh(T,w):!0}function DP(a,u,d,y){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,y),u.state!==a&&SE.enqueueReplaceState(u,u.state,null)}function du(a,u){var d=u;if("ref"in u){d={};for(var y in u)y!=="ref"&&(d[y]=u[y])}if(a=a.defaultProps){d===u&&(d=h({},d));for(var T in a)d[T]===void 0&&(d[T]=a[T])}return d}var uy=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function kP(a){uy(a)}function OP(a){console.error(a)}function LP(a){uy(a)}function cy(a,u){try{var d=a.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function VP(a,u,d){try{var y=a.onCaughtError;y(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function AE(a,u,d){return d=Ia(d),d.tag=3,d.payload={element:null},d.callback=function(){cy(a,u)},d}function UP(a){return a=Ia(a),a.tag=3,a}function FP(a,u,d,y){var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var w=y.value;a.payload=function(){return T(w)},a.callback=function(){VP(u,d,y)}}var M=d.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(a.callback=function(){VP(u,d,y),typeof T!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var U=y.stack;this.componentDidCatch(y.value,{componentStack:U!==null?U:""})})}function jG(a,u,d,y,T){if(d.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=d.alternate,u!==null&&vh(u,d,T,!0),d=Ui.current,d!==null){switch(d.tag){case 13:return Uo===null?YE():d.alternate===null&&dn===0&&(dn=3),d.flags&=-257,d.flags|=65536,d.lanes=T,y===eE?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([y]):u.add(y),QE(a,y,T)),!1;case 22:return d.flags|=65536,y===eE?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([y]):d.add(y)),QE(a,y,T)),!1}throw Error(r(435,d.tag))}return QE(a,y,T),YE(),!1}if(yt)return u=Ui.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=T,y!==KT&&(a=Error(r(422),{cause:y}),yh(ki(a,d)))):(y!==KT&&(u=Error(r(423),{cause:y}),yh(ki(u,d))),a=a.current.alternate,a.flags|=65536,T&=-T,a.lanes|=T,y=ki(y,d),T=AE(a.stateNode,y,T),rE(a,T),dn!==4&&(dn=2)),!1;var w=Error(r(520),{cause:y});if(w=ki(w,d),Uh===null?Uh=[w]:Uh.push(w),dn!==4&&(dn=2),u===null)return!0;y=ki(y,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,a=T&-T,d.lanes|=a,a=AE(d.stateNode,y,a),rE(d,a),!1;case 1:if(u=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ua===null||!Ua.has(w))))return d.flags|=65536,T&=-T,d.lanes|=T,T=UP(T),FP(T,a,d,y),rE(d,T),!1}d=d.return}while(d!==null);return!1}var BP=Error(r(461)),Kn=!1;function cr(a,u,d,y){u.child=a===null?PP(u,null,d,y):Yc(u,a.child,d,y)}function qP(a,u,d,y,T){d=d.render;var w=u.ref;if("ref"in y){var M={};for(var U in y)U!=="ref"&&(M[U]=y[U])}else M=y;return uu(u),y=lE(a,u,d,M,w,T),U=uE(),a!==null&&!Kn?(cE(a,u,T),Ms(a,u,T)):(yt&&U&&GT(u),u.flags|=1,cr(a,u,y,T),u.child)}function $P(a,u,d,y,T){if(a===null){var w=d.type;return typeof w=="function"&&!$T(w)&&w.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=w,zP(a,u,w,y,T)):(a=zg(d.type,null,y,u,u.mode,T),a.ref=u.ref,a.return=u,u.child=a)}if(w=a.child,!DE(a,T)){var M=w.memoizedProps;if(d=d.compare,d=d!==null?d:hh,d(M,y)&&a.ref===u.ref)return Ms(a,u,T)}return u.flags|=1,a=Ss(w,y),a.ref=u.ref,a.return=u,u.child=a}function zP(a,u,d,y,T){if(a!==null){var w=a.memoizedProps;if(hh(w,y)&&a.ref===u.ref)if(Kn=!1,u.pendingProps=y=w,DE(a,T))(a.flags&131072)!==0&&(Kn=!0);else return u.lanes=a.lanes,Ms(a,u,T)}return CE(a,u,d,y,T)}function HP(a,u,d){var y=u.pendingProps,T=y.children,w=a!==null?a.memoizedState:null;if(y.mode==="hidden"){if((u.flags&128)!==0){if(y=w!==null?w.baseLanes|d:d,a!==null){for(T=u.child=a.child,w=0;T!==null;)w=w|T.lanes|T.childLanes,T=T.sibling;u.childLanes=w&~y}else u.childLanes=0,u.child=null;return GP(a,u,y,d)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},a!==null&&Wg(u,w!==null?w.cachePool:null),w!==null?z1(u,w):oE(),MP(u);else return u.lanes=u.childLanes=536870912,GP(a,u,w!==null?w.baseLanes|d:d,d)}else w!==null?(Wg(u,w.cachePool),z1(u,w),Na(),u.memoizedState=null):(a!==null&&Wg(u,null),oE(),Na());return cr(a,u,T,d),u.child}function GP(a,u,d,y){var T=ZT();return T=T===null?null:{parent:Un._currentValue,pool:T},u.memoizedState={baseLanes:d,cachePool:T},a!==null&&Wg(u,null),oE(),MP(u),a!==null&&vh(a,u,y,!0),null}function fy(a,u){var d=u.ref;if(d===null)a!==null&&a.ref!==null&&(u.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(a===null||a.ref!==d)&&(u.flags|=4194816)}}function CE(a,u,d,y,T){return uu(u),d=lE(a,u,d,y,void 0,T),y=uE(),a!==null&&!Kn?(cE(a,u,T),Ms(a,u,T)):(yt&&y&&GT(u),u.flags|=1,cr(a,u,d,T),u.child)}function jP(a,u,d,y,T,w){return uu(u),u.updateQueue=null,d=G1(u,y,d,T),H1(a),y=uE(),a!==null&&!Kn?(cE(a,u,w),Ms(a,u,w)):(yt&&y&&GT(u),u.flags|=1,cr(a,u,d,w),u.child)}function KP(a,u,d,y,T){if(uu(u),u.stateNode===null){var w=Fc,M=d.contextType;typeof M=="object"&&M!==null&&(w=Er(M)),w=new d(y,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=SE,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=y,w.state=u.memoizedState,w.refs={},tE(u),M=d.contextType,w.context=typeof M=="object"&&M!==null?Er(M):Fc,w.state=u.memoizedState,M=d.getDerivedStateFromProps,typeof M=="function"&&(bE(u,d,M,y),w.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(M=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),M!==w.state&&SE.enqueueReplaceState(w,w.state,null),Ah(u,y,w,T),Sh(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(a===null){w=u.stateNode;var U=u.memoizedProps,j=du(d,U);w.props=j;var Z=w.context,le=d.contextType;M=Fc,typeof le=="object"&&le!==null&&(M=Er(le));var fe=d.getDerivedStateFromProps;le=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=u.pendingProps!==U,le||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||Z!==M)&&DP(u,w,y,M),xa=!1;var te=u.memoizedState;w.state=te,Ah(u,y,w,T),Sh(),Z=u.memoizedState,U||te!==Z||xa?(typeof fe=="function"&&(bE(u,d,fe,y),Z=u.memoizedState),(j=xa||NP(u,d,j,y,te,Z,M))?(le||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=Z),w.props=y,w.state=Z,w.context=M,y=j):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{w=u.stateNode,nE(a,u),M=u.memoizedProps,le=du(d,M),w.props=le,fe=u.pendingProps,te=w.context,Z=d.contextType,j=Fc,typeof Z=="object"&&Z!==null&&(j=Er(Z)),U=d.getDerivedStateFromProps,(Z=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M!==fe||te!==j)&&DP(u,w,y,j),xa=!1,te=u.memoizedState,w.state=te,Ah(u,y,w,T),Sh();var ne=u.memoizedState;M!==fe||te!==ne||xa||a!==null&&a.dependencies!==null&&jg(a.dependencies)?(typeof U=="function"&&(bE(u,d,U,y),ne=u.memoizedState),(le=xa||NP(u,d,le,y,te,ne,j)||a!==null&&a.dependencies!==null&&jg(a.dependencies))?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,ne,j),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,ne,j)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||M===a.memoizedProps&&te===a.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&te===a.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=ne),w.props=y,w.state=ne,w.context=j,y=le):(typeof w.componentDidUpdate!="function"||M===a.memoizedProps&&te===a.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&te===a.memoizedState||(u.flags|=1024),y=!1)}return w=y,fy(a,u),y=(u.flags&128)!==0,w||y?(w=u.stateNode,d=y&&typeof d.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,a!==null&&y?(u.child=Yc(u,a.child,null,T),u.child=Yc(u,null,d,T)):cr(a,u,d,T),u.memoizedState=w.state,a=u.child):a=Ms(a,u,T),a}function WP(a,u,d,y){return gh(),u.flags|=256,cr(a,u,d,y),u.child}var xE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function IE(a){return{baseLanes:a,cachePool:O1()}}function RE(a,u,d){return a=a!==null?a.childLanes&~d:0,u&&(a|=Fi),a}function YP(a,u,d){var y=u.pendingProps,T=!1,w=(u.flags&128)!==0,M;if((M=w)||(M=a!==null&&a.memoizedState===null?!1:(Fn.current&2)!==0),M&&(T=!0,u.flags&=-129),M=(u.flags&32)!==0,u.flags&=-33,a===null){if(yt){if(T?Ma(u):Na(),yt){var U=fn,j;if(j=U){e:{for(j=U,U=Vo;j.nodeType!==8;){if(!U){U=null;break e}if(j=ao(j.nextSibling),j===null){U=null;break e}}U=j}U!==null?(u.memoizedState={dehydrated:U,treeContext:iu!==null?{id:As,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},j=ai(18,null,null,0),j.stateNode=U,j.return=u,u.child=j,kr=u,fn=null,j=!0):j=!1}j||au(u)}if(U=u.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return dw(U)?u.lanes=32:u.lanes=536870912,null;Ps(u)}return U=y.children,y=y.fallback,T?(Na(),T=u.mode,U=dy({mode:"hidden",children:U},T),y=ru(y,T,d,null),U.return=u,y.return=u,U.sibling=y,u.child=U,T=u.child,T.memoizedState=IE(d),T.childLanes=RE(a,M,d),u.memoizedState=xE,y):(Ma(u),PE(u,U))}if(j=a.memoizedState,j!==null&&(U=j.dehydrated,U!==null)){if(w)u.flags&256?(Ma(u),u.flags&=-257,u=ME(a,u,d)):u.memoizedState!==null?(Na(),u.child=a.child,u.flags|=128,u=null):(Na(),T=y.fallback,U=u.mode,y=dy({mode:"visible",children:y.children},U),T=ru(T,U,d,null),T.flags|=2,y.return=u,T.return=u,y.sibling=T,u.child=y,Yc(u,a.child,null,d),y=u.child,y.memoizedState=IE(d),y.childLanes=RE(a,M,d),u.memoizedState=xE,u=T);else if(Ma(u),dw(U)){if(M=U.nextSibling&&U.nextSibling.dataset,M)var Z=M.dgst;M=Z,y=Error(r(419)),y.stack="",y.digest=M,yh({value:y,source:null,stack:null}),u=ME(a,u,d)}else if(Kn||vh(a,u,d,!1),M=(d&a.childLanes)!==0,Kn||M){if(M=Vt,M!==null&&(y=d&-d,y=(y&42)!==0?1:On(y),y=(y&(M.suspendedLanes|d))!==0?0:y,y!==0&&y!==j.retryLane))throw j.retryLane=y,Uc(a,y),di(M,a,y),BP;U.data==="$?"||YE(),u=ME(a,u,d)}else U.data==="$?"?(u.flags|=192,u.child=a.child,u=null):(a=j.treeContext,fn=ao(U.nextSibling),kr=u,yt=!0,su=null,Vo=!1,a!==null&&(Li[Vi++]=As,Li[Vi++]=Cs,Li[Vi++]=iu,As=a.id,Cs=a.overflow,iu=u),u=PE(u,y.children),u.flags|=4096);return u}return T?(Na(),T=y.fallback,U=u.mode,j=a.child,Z=j.sibling,y=Ss(j,{mode:"hidden",children:y.children}),y.subtreeFlags=j.subtreeFlags&65011712,Z!==null?T=Ss(Z,T):(T=ru(T,U,d,null),T.flags|=2),T.return=u,y.return=u,y.sibling=T,u.child=y,y=T,T=u.child,U=a.child.memoizedState,U===null?U=IE(d):(j=U.cachePool,j!==null?(Z=Un._currentValue,j=j.parent!==Z?{parent:Z,pool:Z}:j):j=O1(),U={baseLanes:U.baseLanes|d,cachePool:j}),T.memoizedState=U,T.childLanes=RE(a,M,d),u.memoizedState=xE,y):(Ma(u),d=a.child,a=d.sibling,d=Ss(d,{mode:"visible",children:y.children}),d.return=u,d.sibling=null,a!==null&&(M=u.deletions,M===null?(u.deletions=[a],u.flags|=16):M.push(a)),u.child=d,u.memoizedState=null,d)}function PE(a,u){return u=dy({mode:"visible",children:u},a.mode),u.return=a,a.child=u}function dy(a,u){return a=ai(22,a,null,u),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ME(a,u,d){return Yc(u,a.child,null,d),a=PE(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function JP(a,u,d){a.lanes|=u;var y=a.alternate;y!==null&&(y.lanes|=u),YT(a.return,u,d)}function NE(a,u,d,y,T){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:T}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=y,w.tail=d,w.tailMode=T)}function QP(a,u,d){var y=u.pendingProps,T=y.revealOrder,w=y.tail;if(cr(a,u,y.children,d),y=Fn.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&JP(a,d,u);else if(a.tag===19)JP(a,d,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}switch(ve(Fn,y),T){case"forwards":for(d=u.child,T=null;d!==null;)a=d.alternate,a!==null&&ly(a)===null&&(T=d),d=d.sibling;d=T,d===null?(T=u.child,u.child=null):(T=d.sibling,d.sibling=null),NE(u,!1,T,d,w);break;case"backwards":for(d=null,T=u.child,u.child=null;T!==null;){if(a=T.alternate,a!==null&&ly(a)===null){u.child=T;break}a=T.sibling,T.sibling=d,d=T,T=a}NE(u,!0,d,null,w);break;case"together":NE(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ms(a,u,d){if(a!==null&&(u.dependencies=a.dependencies),Va|=u.lanes,(d&u.childLanes)===0)if(a!==null){if(vh(a,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(a!==null&&u.child!==a.child)throw Error(r(153));if(u.child!==null){for(a=u.child,d=Ss(a,a.pendingProps),u.child=d,d.return=u;a.sibling!==null;)a=a.sibling,d=d.sibling=Ss(a,a.pendingProps),d.return=u;d.sibling=null}return u.child}function DE(a,u){return(a.lanes&u)!==0?!0:(a=a.dependencies,!!(a!==null&&jg(a)))}function KG(a,u,d){switch(u.tag){case 3:_t(u,u.stateNode.containerInfo),Ca(u,Un,a.memoizedState.cache),gh();break;case 27:case 5:je(u);break;case 4:_t(u,u.stateNode.containerInfo);break;case 10:Ca(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Ma(u),u.flags|=128,null):(d&u.child.childLanes)!==0?YP(a,u,d):(Ma(u),a=Ms(a,u,d),a!==null?a.sibling:null);Ma(u);break;case 19:var T=(a.flags&128)!==0;if(y=(d&u.childLanes)!==0,y||(vh(a,u,d,!1),y=(d&u.childLanes)!==0),T){if(y)return QP(a,u,d);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ve(Fn,Fn.current),y)break;return null;case 22:case 23:return u.lanes=0,HP(a,u,d);case 24:Ca(u,Un,a.memoizedState.cache)}return Ms(a,u,d)}function XP(a,u,d){if(a!==null)if(a.memoizedProps!==u.pendingProps)Kn=!0;else{if(!DE(a,d)&&(u.flags&128)===0)return Kn=!1,KG(a,u,d);Kn=(a.flags&131072)!==0}else Kn=!1,yt&&(u.flags&1048576)!==0&&I1(u,Gg,u.index);switch(u.lanes=0,u.tag){case 16:e:{a=u.pendingProps;var y=u.elementType,T=y._init;if(y=T(y._payload),u.type=y,typeof y=="function")$T(y)?(a=du(y,a),u.tag=1,u=KP(null,u,y,a,d)):(u.tag=0,u=CE(null,u,y,a,d));else{if(y!=null){if(T=y.$$typeof,T===V){u.tag=11,u=qP(null,u,y,a,d);break e}else if(T===O){u.tag=14,u=$P(null,u,y,a,d);break e}}throw u=Ae(y)||y,Error(r(306,u,""))}}return u;case 0:return CE(a,u,u.type,u.pendingProps,d);case 1:return y=u.type,T=du(y,u.pendingProps),KP(a,u,y,T,d);case 3:e:{if(_t(u,u.stateNode.containerInfo),a===null)throw Error(r(387));y=u.pendingProps;var w=u.memoizedState;T=w.element,nE(a,u),Ah(u,y,null,d);var M=u.memoizedState;if(y=M.cache,Ca(u,Un,y),y!==w.cache&&JT(u,[Un],d,!0),Sh(),y=M.element,w.isDehydrated)if(w={element:y,isDehydrated:!1,cache:M.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=WP(a,u,y,d);break e}else if(y!==T){T=ki(Error(r(424)),u),yh(T),u=WP(a,u,y,d);break e}else{switch(a=u.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(fn=ao(a.firstChild),kr=u,yt=!0,su=null,Vo=!0,d=PP(u,null,y,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(gh(),y===T){u=Ms(a,u,d);break e}cr(a,u,y,d)}u=u.child}return u;case 26:return fy(a,u),a===null?(d=nN(u.type,null,u.pendingProps,null))?u.memoizedState=d:yt||(d=u.type,a=u.pendingProps,y=Cy(ze.current).createElement(d),y[cn]=u,y[Cn]=a,dr(y,d,a),vn(y),u.stateNode=y):u.memoizedState=nN(u.type,a.memoizedProps,u.pendingProps,a.memoizedState),null;case 27:return je(u),a===null&&yt&&(y=u.stateNode=ZM(u.type,u.pendingProps,ze.current),kr=u,Vo=!0,T=fn,qa(u.type)?(hw=T,fn=ao(y.firstChild)):fn=T),cr(a,u,u.pendingProps.children,d),fy(a,u),a===null&&(u.flags|=4194304),u.child;case 5:return a===null&&yt&&((T=y=fn)&&(y=E9(y,u.type,u.pendingProps,Vo),y!==null?(u.stateNode=y,kr=u,fn=ao(y.firstChild),Vo=!1,T=!0):T=!1),T||au(u)),je(u),T=u.type,w=u.pendingProps,M=a!==null?a.memoizedProps:null,y=w.children,uw(T,w)?y=null:M!==null&&uw(T,M)&&(u.flags|=32),u.memoizedState!==null&&(T=lE(a,u,FG,null,null,d),Kh._currentValue=T),fy(a,u),cr(a,u,y,d),u.child;case 6:return a===null&&yt&&((a=d=fn)&&(d=w9(d,u.pendingProps,Vo),d!==null?(u.stateNode=d,kr=u,fn=null,a=!0):a=!1),a||au(u)),null;case 13:return YP(a,u,d);case 4:return _t(u,u.stateNode.containerInfo),y=u.pendingProps,a===null?u.child=Yc(u,null,y,d):cr(a,u,y,d),u.child;case 11:return qP(a,u,u.type,u.pendingProps,d);case 7:return cr(a,u,u.pendingProps,d),u.child;case 8:return cr(a,u,u.pendingProps.children,d),u.child;case 12:return cr(a,u,u.pendingProps.children,d),u.child;case 10:return y=u.pendingProps,Ca(u,u.type,y.value),cr(a,u,y.children,d),u.child;case 9:return T=u.type._context,y=u.pendingProps.children,uu(u),T=Er(T),y=y(T),u.flags|=1,cr(a,u,y,d),u.child;case 14:return $P(a,u,u.type,u.pendingProps,d);case 15:return zP(a,u,u.type,u.pendingProps,d);case 19:return QP(a,u,d);case 31:return y=u.pendingProps,d=u.mode,y={mode:y.mode,children:y.children},a===null?(d=dy(y,d),d.ref=u.ref,u.child=d,d.return=u,u=d):(d=Ss(a.child,y),d.ref=u.ref,u.child=d,d.return=u,u=d),u;case 22:return HP(a,u,d);case 24:return uu(u),y=Er(Un),a===null?(T=ZT(),T===null&&(T=Vt,w=QT(),T.pooledCache=w,w.refCount++,w!==null&&(T.pooledCacheLanes|=d),T=w),u.memoizedState={parent:y,cache:T},tE(u),Ca(u,Un,T)):((a.lanes&d)!==0&&(nE(a,u),Ah(u,null,null,d),Sh()),T=a.memoizedState,w=u.memoizedState,T.parent!==y?(T={parent:y,cache:y},u.memoizedState=T,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=T),Ca(u,Un,y)):(y=w.cache,Ca(u,Un,y),y!==T.cache&&JT(u,[Un],d,!0))),cr(a,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Ns(a){a.flags|=4}function ZP(a,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!aN(u)){if(u=Ui.current,u!==null&&((ft&4194048)===ft?Uo!==null:(ft&62914560)!==ft&&(ft&536870912)===0||u!==Uo))throw wh=eE,L1;a.flags|=8192}}function hy(a,u){u!==null&&(a.flags|=4),a.flags&16384&&(u=a.tag!==22?Ie():536870912,a.lanes|=u,Zc|=u)}function Nh(a,u){if(!yt)switch(a.tailMode){case"hidden":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function rn(a){var u=a.alternate!==null&&a.alternate.child===a.child,d=0,y=0;if(u)for(var T=a.child;T!==null;)d|=T.lanes|T.childLanes,y|=T.subtreeFlags&65011712,y|=T.flags&65011712,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)d|=T.lanes|T.childLanes,y|=T.subtreeFlags,y|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=y,a.childLanes=d,u}function WG(a,u,d){var y=u.pendingProps;switch(jT(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(u),null;case 1:return rn(u),null;case 3:return d=u.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Is(Un),Se(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(mh(u)?Ns(u):a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,M1())),rn(u),null;case 26:return d=u.memoizedState,a===null?(Ns(u),d!==null?(rn(u),ZP(u,d)):(rn(u),u.flags&=-16777217)):d?d!==a.memoizedState?(Ns(u),rn(u),ZP(u,d)):(rn(u),u.flags&=-16777217):(a.memoizedProps!==y&&Ns(u),rn(u),u.flags&=-16777217),null;case 27:Ye(u),d=ze.current;var T=u.type;if(a!==null&&u.stateNode!=null)a.memoizedProps!==y&&Ns(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return rn(u),null}a=Pe.current,mh(u)?R1(u):(a=ZM(T,y,d),u.stateNode=a,Ns(u))}return rn(u),null;case 5:if(Ye(u),d=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==y&&Ns(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return rn(u),null}if(a=Pe.current,mh(u))R1(u);else{switch(T=Cy(ze.current),a){case 1:a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=T.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof y.is=="string"?T.createElement("select",{is:y.is}):T.createElement("select"),y.multiple?a.multiple=!0:y.size&&(a.size=y.size);break;default:a=typeof y.is=="string"?T.createElement(d,{is:y.is}):T.createElement(d)}}a[cn]=u,a[Cn]=y;e:for(T=u.child;T!==null;){if(T.tag===5||T.tag===6)a.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===u)break e;for(;T.sibling===null;){if(T.return===null||T.return===u)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}u.stateNode=a;e:switch(dr(a,d,y),d){case"button":case"input":case"select":case"textarea":a=!!y.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ns(u)}}return rn(u),u.flags&=-16777217,null;case 6:if(a&&u.stateNode!=null)a.memoizedProps!==y&&Ns(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(r(166));if(a=ze.current,mh(u)){if(a=u.stateNode,d=u.memoizedProps,y=null,T=kr,T!==null)switch(T.tag){case 27:case 5:y=T.memoizedProps}a[cn]=u,a=!!(a.nodeValue===d||y!==null&&y.suppressHydrationWarning===!0||jM(a.nodeValue,d)),a||au(u)}else a=Cy(a).createTextNode(y),a[cn]=u,u.stateNode=a}return rn(u),null;case 13:if(y=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(T=mh(u),y!==null&&y.dehydrated!==null){if(a===null){if(!T)throw Error(r(318));if(T=u.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[cn]=u}else gh(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;rn(u),T=!1}else T=M1(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=T),T=!0;if(!T)return u.flags&256?(Ps(u),u):(Ps(u),null)}if(Ps(u),(u.flags&128)!==0)return u.lanes=d,u;if(d=y!==null,a=a!==null&&a.memoizedState!==null,d){y=u.child,T=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(T=y.alternate.memoizedState.cachePool.pool);var w=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==T&&(y.flags|=2048)}return d!==a&&d&&(u.child.flags|=8192),hy(u,u.updateQueue),rn(u),null;case 4:return Se(),a===null&&iw(u.stateNode.containerInfo),rn(u),null;case 10:return Is(u.type),rn(u),null;case 19:if(ue(Fn),T=u.memoizedState,T===null)return rn(u),null;if(y=(u.flags&128)!==0,w=T.rendering,w===null)if(y)Nh(T,!1);else{if(dn!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(w=ly(a),w!==null){for(u.flags|=128,Nh(T,!1),a=w.updateQueue,u.updateQueue=a,hy(u,a),u.subtreeFlags=0,a=d,d=u.child;d!==null;)x1(d,a),d=d.sibling;return ve(Fn,Fn.current&1|2),u.child}a=a.sibling}T.tail!==null&&Wt()>gy&&(u.flags|=128,y=!0,Nh(T,!1),u.lanes=4194304)}else{if(!y)if(a=ly(w),a!==null){if(u.flags|=128,y=!0,a=a.updateQueue,u.updateQueue=a,hy(u,a),Nh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!w.alternate&&!yt)return rn(u),null}else 2*Wt()-T.renderingStartTime>gy&&d!==536870912&&(u.flags|=128,y=!0,Nh(T,!1),u.lanes=4194304);T.isBackwards?(w.sibling=u.child,u.child=w):(a=T.last,a!==null?a.sibling=w:u.child=w,T.last=w)}return T.tail!==null?(u=T.tail,T.rendering=u,T.tail=u.sibling,T.renderingStartTime=Wt(),u.sibling=null,a=Fn.current,ve(Fn,y?a&1|2:a&1),u):(rn(u),null);case 22:case 23:return Ps(u),sE(),y=u.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(d&536870912)!==0&&(u.flags&128)===0&&(rn(u),u.subtreeFlags&6&&(u.flags|=8192)):rn(u),d=u.updateQueue,d!==null&&hy(u,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==d&&(u.flags|=2048),a!==null&&ue(cu),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),Is(Un),rn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function YG(a,u){switch(jT(u),u.tag){case 1:return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Is(Un),Se(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 26:case 27:case 5:return Ye(u),null;case 13:if(Ps(u),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(r(340));gh()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return ue(Fn),null;case 4:return Se(),null;case 10:return Is(u.type),null;case 22:case 23:return Ps(u),sE(),a!==null&&ue(cu),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 24:return Is(Un),null;case 25:return null;default:return null}}function eM(a,u){switch(jT(u),u.tag){case 3:Is(Un),Se();break;case 26:case 27:case 5:Ye(u);break;case 4:Se();break;case 13:Ps(u);break;case 19:ue(Fn);break;case 10:Is(u.type);break;case 22:case 23:Ps(u),sE(),a!==null&&ue(cu);break;case 24:Is(Un)}}function Dh(a,u){try{var d=u.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var T=y.next;d=T;do{if((d.tag&a)===a){y=void 0;var w=d.create,M=d.inst;y=w(),M.destroy=y}d=d.next}while(d!==T)}}catch(U){Ot(u,u.return,U)}}function Da(a,u,d){try{var y=u.updateQueue,T=y!==null?y.lastEffect:null;if(T!==null){var w=T.next;y=w;do{if((y.tag&a)===a){var M=y.inst,U=M.destroy;if(U!==void 0){M.destroy=void 0,T=u;var j=d,Z=U;try{Z()}catch(le){Ot(T,j,le)}}}y=y.next}while(y!==w)}}catch(le){Ot(u,u.return,le)}}function tM(a){var u=a.updateQueue;if(u!==null){var d=a.stateNode;try{$1(u,d)}catch(y){Ot(a,a.return,y)}}}function nM(a,u,d){d.props=du(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(y){Ot(a,u,y)}}function kh(a,u){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof d=="function"?a.refCleanup=d(y):d.current=y}}catch(T){Ot(a,u,T)}}function Fo(a,u){var d=a.ref,y=a.refCleanup;if(d!==null)if(typeof y=="function")try{y()}catch(T){Ot(a,u,T)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(T){Ot(a,u,T)}else d.current=null}function rM(a){var u=a.type,d=a.memoizedProps,y=a.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&y.focus();break e;case"img":d.src?y.src=d.src:d.srcSet&&(y.srcset=d.srcSet)}}catch(T){Ot(a,a.return,T)}}function kE(a,u,d){try{var y=a.stateNode;g9(y,a.type,d,u),y[Cn]=u}catch(T){Ot(a,a.return,T)}}function iM(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&qa(a.type)||a.tag===4}function OE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||iM(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&qa(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function LE(a,u,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,u?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,u):(u=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,u.appendChild(a),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=Ay));else if(y!==4&&(y===27&&qa(a.type)&&(d=a.stateNode,u=null),a=a.child,a!==null))for(LE(a,u,d),a=a.sibling;a!==null;)LE(a,u,d),a=a.sibling}function py(a,u,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,u?d.insertBefore(a,u):d.appendChild(a);else if(y!==4&&(y===27&&qa(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(py(a,u,d),a=a.sibling;a!==null;)py(a,u,d),a=a.sibling}function oM(a){var u=a.stateNode,d=a.memoizedProps;try{for(var y=a.type,T=u.attributes;T.length;)u.removeAttributeNode(T[0]);dr(u,y,d),u[cn]=a,u[Cn]=d}catch(w){Ot(a,a.return,w)}}var Ds=!1,Tn=!1,VE=!1,sM=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function JG(a,u){if(a=a.containerInfo,aw=Ny,a=y1(a),OT(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var T=y.anchorOffset,w=y.focusNode;y=y.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var M=0,U=-1,j=-1,Z=0,le=0,fe=a,te=null;t:for(;;){for(var ne;fe!==d||T!==0&&fe.nodeType!==3||(U=M+T),fe!==w||y!==0&&fe.nodeType!==3||(j=M+y),fe.nodeType===3&&(M+=fe.nodeValue.length),(ne=fe.firstChild)!==null;)te=fe,fe=ne;for(;;){if(fe===a)break t;if(te===d&&++Z===T&&(U=M),te===w&&++le===y&&(j=M),(ne=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ne}d=U===-1||j===-1?null:{start:U,end:j}}else d=null}d=d||{start:0,end:0}}else d=null;for(lw={focusedElem:a,selectionRange:d},Ny=!1,Wn=u;Wn!==null;)if(u=Wn,a=u.child,(u.subtreeFlags&1024)!==0&&a!==null)a.return=u,Wn=a;else for(;Wn!==null;){switch(u=Wn,w=u.alternate,a=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,d=u,T=w.memoizedProps,w=w.memoizedState,y=d.stateNode;try{var Ke=du(d.type,T,d.elementType===d.type);a=y.getSnapshotBeforeUpdate(Ke,w),y.__reactInternalSnapshotBeforeUpdate=a}catch(qe){Ot(d,d.return,qe)}}break;case 3:if((a&1024)!==0){if(a=u.stateNode.containerInfo,d=a.nodeType,d===9)fw(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":fw(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=u.sibling,a!==null){a.return=u.return,Wn=a;break}Wn=u.return}}function aM(a,u,d){var y=d.flags;switch(d.tag){case 0:case 11:case 15:ka(a,d),y&4&&Dh(5,d);break;case 1:if(ka(a,d),y&4)if(a=d.stateNode,u===null)try{a.componentDidMount()}catch(M){Ot(d,d.return,M)}else{var T=du(d.type,u.memoizedProps);u=u.memoizedState;try{a.componentDidUpdate(T,u,a.__reactInternalSnapshotBeforeUpdate)}catch(M){Ot(d,d.return,M)}}y&64&&tM(d),y&512&&kh(d,d.return);break;case 3:if(ka(a,d),y&64&&(a=d.updateQueue,a!==null)){if(u=null,d.child!==null)switch(d.child.tag){case 27:case 5:u=d.child.stateNode;break;case 1:u=d.child.stateNode}try{$1(a,u)}catch(M){Ot(d,d.return,M)}}break;case 27:u===null&&y&4&&oM(d);case 26:case 5:ka(a,d),u===null&&y&4&&rM(d),y&512&&kh(d,d.return);break;case 12:ka(a,d);break;case 13:ka(a,d),y&4&&cM(a,d),y&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=o9.bind(null,d),b9(a,d))));break;case 22:if(y=d.memoizedState!==null||Ds,!y){u=u!==null&&u.memoizedState!==null||Tn,T=Ds;var w=Tn;Ds=y,(Tn=u)&&!w?Oa(a,d,(d.subtreeFlags&8772)!==0):ka(a,d),Ds=T,Tn=w}break;case 30:break;default:ka(a,d)}}function lM(a){var u=a.alternate;u!==null&&(a.alternate=null,lM(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&wa(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Jt=null,Wr=!1;function ks(a,u,d){for(d=d.child;d!==null;)uM(a,u,d),d=d.sibling}function uM(a,u,d){if(Ue&&typeof Ue.onCommitFiberUnmount=="function")try{Ue.onCommitFiberUnmount(Yt,d)}catch{}switch(d.tag){case 26:Tn||Fo(d,u),ks(a,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Tn||Fo(d,u);var y=Jt,T=Wr;qa(d.type)&&(Jt=d.stateNode,Wr=!1),ks(a,u,d),zh(d.stateNode),Jt=y,Wr=T;break;case 5:Tn||Fo(d,u);case 6:if(y=Jt,T=Wr,Jt=null,ks(a,u,d),Jt=y,Wr=T,Jt!==null)if(Wr)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(d.stateNode)}catch(w){Ot(d,u,w)}else try{Jt.removeChild(d.stateNode)}catch(w){Ot(d,u,w)}break;case 18:Jt!==null&&(Wr?(a=Jt,QM(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Qh(a)):QM(Jt,d.stateNode));break;case 4:y=Jt,T=Wr,Jt=d.stateNode.containerInfo,Wr=!0,ks(a,u,d),Jt=y,Wr=T;break;case 0:case 11:case 14:case 15:Tn||Da(2,d,u),Tn||Da(4,d,u),ks(a,u,d);break;case 1:Tn||(Fo(d,u),y=d.stateNode,typeof y.componentWillUnmount=="function"&&nM(d,u,y)),ks(a,u,d);break;case 21:ks(a,u,d);break;case 22:Tn=(y=Tn)||d.memoizedState!==null,ks(a,u,d),Tn=y;break;default:ks(a,u,d)}}function cM(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Qh(a)}catch(d){Ot(u,u.return,d)}}function QG(a){switch(a.tag){case 13:case 19:var u=a.stateNode;return u===null&&(u=a.stateNode=new sM),u;case 22:return a=a.stateNode,u=a._retryCache,u===null&&(u=a._retryCache=new sM),u;default:throw Error(r(435,a.tag))}}function UE(a,u){var d=QG(a);u.forEach(function(y){var T=s9.bind(null,a,y);d.has(y)||(d.add(y),y.then(T,T))})}function li(a,u){var d=u.deletions;if(d!==null)for(var y=0;y<d.length;y++){var T=d[y],w=a,M=u,U=M;e:for(;U!==null;){switch(U.tag){case 27:if(qa(U.type)){Jt=U.stateNode,Wr=!1;break e}break;case 5:Jt=U.stateNode,Wr=!1;break e;case 3:case 4:Jt=U.stateNode.containerInfo,Wr=!0;break e}U=U.return}if(Jt===null)throw Error(r(160));uM(w,M,T),Jt=null,Wr=!1,w=T.alternate,w!==null&&(w.return=null),T.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)fM(u,a),u=u.sibling}var so=null;function fM(a,u){var d=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:li(u,a),ui(a),y&4&&(Da(3,a,a.return),Dh(3,a),Da(5,a,a.return));break;case 1:li(u,a),ui(a),y&512&&(Tn||d===null||Fo(d,d.return)),y&64&&Ds&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?y:d.concat(y))));break;case 26:var T=so;if(li(u,a),ui(a),y&512&&(Tn||d===null||Fo(d,d.return)),y&4){var w=d!==null?d.memoizedState:null;if(y=a.memoizedState,d===null)if(y===null)if(a.stateNode===null){e:{y=a.type,d=a.memoizedProps,T=T.ownerDocument||T;t:switch(y){case"title":w=T.getElementsByTagName("title")[0],(!w||w[ql]||w[cn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=T.createElement(y),T.head.insertBefore(w,T.querySelector("head > title"))),dr(w,y,d),w[cn]=a,vn(w),y=w;break e;case"link":var M=oN("link","href",T).get(y+(d.href||""));if(M){for(var U=0;U<M.length;U++)if(w=M[U],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){M.splice(U,1);break t}}w=T.createElement(y),dr(w,y,d),T.head.appendChild(w);break;case"meta":if(M=oN("meta","content",T).get(y+(d.content||""))){for(U=0;U<M.length;U++)if(w=M[U],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){M.splice(U,1);break t}}w=T.createElement(y),dr(w,y,d),T.head.appendChild(w);break;default:throw Error(r(468,y))}w[cn]=a,vn(w),y=w}a.stateNode=y}else sN(T,a.type,a.stateNode);else a.stateNode=iN(T,y,a.memoizedProps);else w!==y?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,y===null?sN(T,a.type,a.stateNode):iN(T,y,a.memoizedProps)):y===null&&a.stateNode!==null&&kE(a,a.memoizedProps,d.memoizedProps)}break;case 27:li(u,a),ui(a),y&512&&(Tn||d===null||Fo(d,d.return)),d!==null&&y&4&&kE(a,a.memoizedProps,d.memoizedProps);break;case 5:if(li(u,a),ui(a),y&512&&(Tn||d===null||Fo(d,d.return)),a.flags&32){T=a.stateNode;try{Pi(T,"")}catch(ne){Ot(a,a.return,ne)}}y&4&&a.stateNode!=null&&(T=a.memoizedProps,kE(a,T,d!==null?d.memoizedProps:T)),y&1024&&(VE=!0);break;case 6:if(li(u,a),ui(a),y&4){if(a.stateNode===null)throw Error(r(162));y=a.memoizedProps,d=a.stateNode;try{d.nodeValue=y}catch(ne){Ot(a,a.return,ne)}}break;case 3:if(Ry=null,T=so,so=xy(u.containerInfo),li(u,a),so=T,ui(a),y&4&&d!==null&&d.memoizedState.isDehydrated)try{Qh(u.containerInfo)}catch(ne){Ot(a,a.return,ne)}VE&&(VE=!1,dM(a));break;case 4:y=so,so=xy(a.stateNode.containerInfo),li(u,a),ui(a),so=y;break;case 12:li(u,a),ui(a);break;case 13:li(u,a),ui(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(HE=Wt()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,UE(a,y)));break;case 22:T=a.memoizedState!==null;var j=d!==null&&d.memoizedState!==null,Z=Ds,le=Tn;if(Ds=Z||T,Tn=le||j,li(u,a),Tn=le,Ds=Z,ui(a),y&8192)e:for(u=a.stateNode,u._visibility=T?u._visibility&-2:u._visibility|1,T&&(d===null||j||Ds||Tn||hu(a)),d=null,u=a;;){if(u.tag===5||u.tag===26){if(d===null){j=d=u;try{if(w=j.stateNode,T)M=w.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{U=j.stateNode;var fe=j.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;U.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ne){Ot(j,j.return,ne)}}}else if(u.tag===6){if(d===null){j=u;try{j.stateNode.nodeValue=T?"":j.memoizedProps}catch(ne){Ot(j,j.return,ne)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=a.updateQueue,y!==null&&(d=y.retryQueue,d!==null&&(y.retryQueue=null,UE(a,d))));break;case 19:li(u,a),ui(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,UE(a,y)));break;case 30:break;case 21:break;default:li(u,a),ui(a)}}function ui(a){var u=a.flags;if(u&2){try{for(var d,y=a.return;y!==null;){if(iM(y)){d=y;break}y=y.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var T=d.stateNode,w=OE(a);py(a,w,T);break;case 5:var M=d.stateNode;d.flags&32&&(Pi(M,""),d.flags&=-33);var U=OE(a);py(a,U,M);break;case 3:case 4:var j=d.stateNode.containerInfo,Z=OE(a);LE(a,Z,j);break;default:throw Error(r(161))}}catch(le){Ot(a,a.return,le)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function dM(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var u=a;dM(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),a=a.sibling}}function ka(a,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)aM(a,u.alternate,u),u=u.sibling}function hu(a){for(a=a.child;a!==null;){var u=a;switch(u.tag){case 0:case 11:case 14:case 15:Da(4,u,u.return),hu(u);break;case 1:Fo(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&nM(u,u.return,d),hu(u);break;case 27:zh(u.stateNode);case 26:case 5:Fo(u,u.return),hu(u);break;case 22:u.memoizedState===null&&hu(u);break;case 30:hu(u);break;default:hu(u)}a=a.sibling}}function Oa(a,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,T=a,w=u,M=w.flags;switch(w.tag){case 0:case 11:case 15:Oa(T,w,d),Dh(4,w);break;case 1:if(Oa(T,w,d),y=w,T=y.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Z){Ot(y,y.return,Z)}if(y=w,T=y.updateQueue,T!==null){var U=y.stateNode;try{var j=T.shared.hiddenCallbacks;if(j!==null)for(T.shared.hiddenCallbacks=null,T=0;T<j.length;T++)q1(j[T],U)}catch(Z){Ot(y,y.return,Z)}}d&&M&64&&tM(w),kh(w,w.return);break;case 27:oM(w);case 26:case 5:Oa(T,w,d),d&&y===null&&M&4&&rM(w),kh(w,w.return);break;case 12:Oa(T,w,d);break;case 13:Oa(T,w,d),d&&M&4&&cM(T,w);break;case 22:w.memoizedState===null&&Oa(T,w,d),kh(w,w.return);break;case 30:break;default:Oa(T,w,d)}u=u.sibling}}function FE(a,u){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(a=u.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&_h(d))}function BE(a,u){a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&_h(a))}function Bo(a,u,d,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)hM(a,u,d,y),u=u.sibling}function hM(a,u,d,y){var T=u.flags;switch(u.tag){case 0:case 11:case 15:Bo(a,u,d,y),T&2048&&Dh(9,u);break;case 1:Bo(a,u,d,y);break;case 3:Bo(a,u,d,y),T&2048&&(a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&_h(a)));break;case 12:if(T&2048){Bo(a,u,d,y),a=u.stateNode;try{var w=u.memoizedProps,M=w.id,U=w.onPostCommit;typeof U=="function"&&U(M,u.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(j){Ot(u,u.return,j)}}else Bo(a,u,d,y);break;case 13:Bo(a,u,d,y);break;case 23:break;case 22:w=u.stateNode,M=u.alternate,u.memoizedState!==null?w._visibility&2?Bo(a,u,d,y):Oh(a,u):w._visibility&2?Bo(a,u,d,y):(w._visibility|=2,Jc(a,u,d,y,(u.subtreeFlags&10256)!==0)),T&2048&&FE(M,u);break;case 24:Bo(a,u,d,y),T&2048&&BE(u.alternate,u);break;default:Bo(a,u,d,y)}}function Jc(a,u,d,y,T){for(T=T&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var w=a,M=u,U=d,j=y,Z=M.flags;switch(M.tag){case 0:case 11:case 15:Jc(w,M,U,j,T),Dh(8,M);break;case 23:break;case 22:var le=M.stateNode;M.memoizedState!==null?le._visibility&2?Jc(w,M,U,j,T):Oh(w,M):(le._visibility|=2,Jc(w,M,U,j,T)),T&&Z&2048&&FE(M.alternate,M);break;case 24:Jc(w,M,U,j,T),T&&Z&2048&&BE(M.alternate,M);break;default:Jc(w,M,U,j,T)}u=u.sibling}}function Oh(a,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=a,y=u,T=y.flags;switch(y.tag){case 22:Oh(d,y),T&2048&&FE(y.alternate,y);break;case 24:Oh(d,y),T&2048&&BE(y.alternate,y);break;default:Oh(d,y)}u=u.sibling}}var Lh=8192;function Qc(a){if(a.subtreeFlags&Lh)for(a=a.child;a!==null;)pM(a),a=a.sibling}function pM(a){switch(a.tag){case 26:Qc(a),a.flags&Lh&&a.memoizedState!==null&&L9(so,a.memoizedState,a.memoizedProps);break;case 5:Qc(a);break;case 3:case 4:var u=so;so=xy(a.stateNode.containerInfo),Qc(a),so=u;break;case 22:a.memoizedState===null&&(u=a.alternate,u!==null&&u.memoizedState!==null?(u=Lh,Lh=16777216,Qc(a),Lh=u):Qc(a));break;default:Qc(a)}}function mM(a){var u=a.alternate;if(u!==null&&(a=u.child,a!==null)){u.child=null;do u=a.sibling,a.sibling=null,a=u;while(a!==null)}}function Vh(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var y=u[d];Wn=y,yM(y,a)}mM(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)gM(a),a=a.sibling}function gM(a){switch(a.tag){case 0:case 11:case 15:Vh(a),a.flags&2048&&Da(9,a,a.return);break;case 3:Vh(a);break;case 12:Vh(a);break;case 22:var u=a.stateNode;a.memoizedState!==null&&u._visibility&2&&(a.return===null||a.return.tag!==13)?(u._visibility&=-3,my(a)):Vh(a);break;default:Vh(a)}}function my(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var y=u[d];Wn=y,yM(y,a)}mM(a)}for(a=a.child;a!==null;){switch(u=a,u.tag){case 0:case 11:case 15:Da(8,u,u.return),my(u);break;case 22:d=u.stateNode,d._visibility&2&&(d._visibility&=-3,my(u));break;default:my(u)}a=a.sibling}}function yM(a,u){for(;Wn!==null;){var d=Wn;switch(d.tag){case 0:case 11:case 15:Da(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var y=d.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:_h(d.memoizedState.cache)}if(y=d.child,y!==null)y.return=d,Wn=y;else e:for(d=a;Wn!==null;){y=Wn;var T=y.sibling,w=y.return;if(lM(y),y===d){Wn=null;break e}if(T!==null){T.return=w,Wn=T;break e}Wn=w}}}var XG={getCacheForType:function(a){var u=Er(Un),d=u.data.get(a);return d===void 0&&(d=a(),u.data.set(a,d)),d}},ZG=typeof WeakMap=="function"?WeakMap:Map,bt=0,Vt=null,rt=null,ft=0,St=0,ci=null,La=!1,Xc=!1,qE=!1,Os=0,dn=0,Va=0,pu=0,$E=0,Fi=0,Zc=0,Uh=null,Yr=null,zE=!1,HE=0,gy=1/0,yy=null,Ua=null,fr=0,Fa=null,ef=null,tf=0,GE=0,jE=null,vM=null,Fh=0,KE=null;function fi(){if((bt&2)!==0&&ft!==0)return ft&-ft;if(ee.T!==null){var a=$c;return a!==0?a:ew()}return An()}function _M(){Fi===0&&(Fi=(ft&536870912)===0||yt?be():536870912);var a=Ui.current;return a!==null&&(a.flags|=32),Fi}function di(a,u,d){(a===Vt&&(St===2||St===9)||a.cancelPendingCommit!==null)&&(nf(a,0),Ba(a,ft,Fi,!1)),lt(a,d),((bt&2)===0||a!==Vt)&&(a===Vt&&((bt&2)===0&&(pu|=d),dn===4&&Ba(a,ft,Fi,!1)),qo(a))}function TM(a,u,d){if((bt&6)!==0)throw Error(r(327));var y=!d&&(u&124)===0&&(u&a.expiredLanes)===0||ge(a,u),T=y?n9(a,u):JE(a,u,!0),w=y;do{if(T===0){Xc&&!y&&Ba(a,u,0,!1);break}else{if(d=a.current.alternate,w&&!e9(d)){T=JE(a,u,!1),w=!1;continue}if(T===2){if(w=u,a.errorRecoveryDisabledLanes&w)var M=0;else M=a.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){u=M;e:{var U=a;T=Uh;var j=U.current.memoizedState.isDehydrated;if(j&&(nf(U,M).flags|=256),M=JE(U,M,!1),M!==2){if(qE&&!j){U.errorRecoveryDisabledLanes|=w,pu|=w,T=4;break e}w=Yr,Yr=T,w!==null&&(Yr===null?Yr=w:Yr.push.apply(Yr,w))}T=M}if(w=!1,T!==2)continue}}if(T===1){nf(a,0),Ba(a,u,0,!0);break}e:{switch(y=a,w=T,w){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Ba(y,u,Fi,!La);break e;case 2:Yr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(T=HE+300-Wt(),10<T)){if(Ba(y,u,Fi,!La),re(y,0,!0)!==0)break e;y.timeoutHandle=YM(EM.bind(null,y,d,Yr,yy,zE,u,Fi,pu,Zc,La,w,2,-0,0),T);break e}EM(y,d,Yr,yy,zE,u,Fi,pu,Zc,La,w,0,-0,0)}}break}while(!0);qo(a)}function EM(a,u,d,y,T,w,M,U,j,Z,le,fe,te,ne){if(a.timeoutHandle=-1,fe=u.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(jh={stylesheets:null,count:0,unsuspend:O9},pM(u),fe=V9(),fe!==null)){a.cancelPendingCommit=fe(IM.bind(null,a,u,w,d,y,T,M,U,j,le,1,te,ne)),Ba(a,w,M,!Z);return}IM(a,u,w,d,y,T,M,U,j)}function e9(a){for(var u=a;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var y=0;y<d.length;y++){var T=d[y],w=T.getSnapshot;T=T.value;try{if(!si(w(),T))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ba(a,u,d,y){u&=~$E,u&=~pu,a.suspendedLanes|=u,a.pingedLanes&=~u,y&&(a.warmLanes|=u),y=a.expirationTimes;for(var T=u;0<T;){var w=31-yn(T),M=1<<w;y[w]=-1,T&=~M}d!==0&&Je(a,d,u)}function vy(){return(bt&6)===0?(Bh(0),!1):!0}function WE(){if(rt!==null){if(St===0)var a=rt.return;else a=rt,xs=lu=null,fE(a),Wc=null,Ph=0,a=rt;for(;a!==null;)eM(a.alternate,a),a=a.return;rt=null}}function nf(a,u){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,v9(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),WE(),Vt=a,rt=d=Ss(a.current,null),ft=u,St=0,ci=null,La=!1,Xc=ge(a,u),qE=!1,Zc=Fi=$E=pu=Va=dn=0,Yr=Uh=null,zE=!1,(u&8)!==0&&(u|=u&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=u;0<y;){var T=31-yn(y),w=1<<T;u|=a[T],y&=~w}return Os=u,Bg(),d}function wM(a,u){tt=null,ee.H=oy,u===Eh||u===Yg?(u=F1(),St=3):u===L1?(u=F1(),St=4):St=u===BP?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ci=u,rt===null&&(dn=1,cy(a,ki(u,a.current)))}function bM(){var a=ee.H;return ee.H=oy,a===null?oy:a}function SM(){var a=ee.A;return ee.A=XG,a}function YE(){dn=4,La||(ft&4194048)!==ft&&Ui.current!==null||(Xc=!0),(Va&134217727)===0&&(pu&134217727)===0||Vt===null||Ba(Vt,ft,Fi,!1)}function JE(a,u,d){var y=bt;bt|=2;var T=bM(),w=SM();(Vt!==a||ft!==u)&&(yy=null,nf(a,u)),u=!1;var M=dn;e:do try{if(St!==0&&rt!==null){var U=rt,j=ci;switch(St){case 8:WE(),M=6;break e;case 3:case 2:case 9:case 6:Ui.current===null&&(u=!0);var Z=St;if(St=0,ci=null,rf(a,U,j,Z),d&&Xc){M=0;break e}break;default:Z=St,St=0,ci=null,rf(a,U,j,Z)}}t9(),M=dn;break}catch(le){wM(a,le)}while(!0);return u&&a.shellSuspendCounter++,xs=lu=null,bt=y,ee.H=T,ee.A=w,rt===null&&(Vt=null,ft=0,Bg()),M}function t9(){for(;rt!==null;)AM(rt)}function n9(a,u){var d=bt;bt|=2;var y=bM(),T=SM();Vt!==a||ft!==u?(yy=null,gy=Wt()+500,nf(a,u)):Xc=ge(a,u);e:do try{if(St!==0&&rt!==null){u=rt;var w=ci;t:switch(St){case 1:St=0,ci=null,rf(a,u,w,1);break;case 2:case 9:if(V1(w)){St=0,ci=null,CM(u);break}u=function(){St!==2&&St!==9||Vt!==a||(St=7),qo(a)},w.then(u,u);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:V1(w)?(St=0,ci=null,CM(u)):(St=0,ci=null,rf(a,u,w,7));break;case 5:var M=null;switch(rt.tag){case 26:M=rt.memoizedState;case 5:case 27:var U=rt;if(!M||aN(M)){St=0,ci=null;var j=U.sibling;if(j!==null)rt=j;else{var Z=U.return;Z!==null?(rt=Z,_y(Z)):rt=null}break t}}St=0,ci=null,rf(a,u,w,5);break;case 6:St=0,ci=null,rf(a,u,w,6);break;case 8:WE(),dn=6;break e;default:throw Error(r(462))}}r9();break}catch(le){wM(a,le)}while(!0);return xs=lu=null,ee.H=y,ee.A=T,bt=d,rt!==null?0:(Vt=null,ft=0,Bg(),dn)}function r9(){for(;rt!==null&&!nn();)AM(rt)}function AM(a){var u=XP(a.alternate,a,Os);a.memoizedProps=a.pendingProps,u===null?_y(a):rt=u}function CM(a){var u=a,d=u.alternate;switch(u.tag){case 15:case 0:u=jP(d,u,u.pendingProps,u.type,void 0,ft);break;case 11:u=jP(d,u,u.pendingProps,u.type.render,u.ref,ft);break;case 5:fE(u);default:eM(d,u),u=rt=x1(u,Os),u=XP(d,u,Os)}a.memoizedProps=a.pendingProps,u===null?_y(a):rt=u}function rf(a,u,d,y){xs=lu=null,fE(u),Wc=null,Ph=0;var T=u.return;try{if(jG(a,T,u,d,ft)){dn=1,cy(a,ki(d,a.current)),rt=null;return}}catch(w){if(T!==null)throw rt=T,w;dn=1,cy(a,ki(d,a.current)),rt=null;return}u.flags&32768?(yt||y===1?a=!0:Xc||(ft&536870912)!==0?a=!1:(La=a=!0,(y===2||y===9||y===3||y===6)&&(y=Ui.current,y!==null&&y.tag===13&&(y.flags|=16384))),xM(u,a)):_y(u)}function _y(a){var u=a;do{if((u.flags&32768)!==0){xM(u,La);return}a=u.return;var d=WG(u.alternate,u,Os);if(d!==null){rt=d;return}if(u=u.sibling,u!==null){rt=u;return}rt=u=a}while(u!==null);dn===0&&(dn=5)}function xM(a,u){do{var d=YG(a.alternate,a);if(d!==null){d.flags&=32767,rt=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(a=a.sibling,a!==null)){rt=a;return}rt=a=d}while(a!==null);dn=6,rt=null}function IM(a,u,d,y,T,w,M,U,j){a.cancelPendingCommit=null;do Ty();while(fr!==0);if((bt&6)!==0)throw Error(r(327));if(u!==null){if(u===a.current)throw Error(r(177));if(w=u.lanes|u.childLanes,w|=BT,un(a,d,w,M,U,j),a===Vt&&(rt=Vt=null,ft=0),ef=u,Fa=a,tf=d,GE=w,jE=T,vM=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,a9(hs,function(){return DM(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=ee.T,ee.T=null,T=he.p,he.p=2,M=bt,bt|=4;try{JG(a,u,d)}finally{bt=M,he.p=T,ee.T=y}}fr=1,RM(),PM(),MM()}}function RM(){if(fr===1){fr=0;var a=Fa,u=ef,d=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||d){d=ee.T,ee.T=null;var y=he.p;he.p=2;var T=bt;bt|=4;try{fM(u,a);var w=lw,M=y1(a.containerInfo),U=w.focusedElem,j=w.selectionRange;if(M!==U&&U&&U.ownerDocument&&g1(U.ownerDocument.documentElement,U)){if(j!==null&&OT(U)){var Z=j.start,le=j.end;if(le===void 0&&(le=Z),"selectionStart"in U)U.selectionStart=Z,U.selectionEnd=Math.min(le,U.value.length);else{var fe=U.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ne=te.getSelection(),Ke=U.textContent.length,qe=Math.min(j.start,Ke),Dt=j.end===void 0?qe:Math.min(j.end,Ke);!ne.extend&&qe>Dt&&(M=Dt,Dt=qe,qe=M);var Y=m1(U,qe),W=m1(U,Dt);if(Y&&W&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==W.node||ne.focusOffset!==W.offset)){var X=fe.createRange();X.setStart(Y.node,Y.offset),ne.removeAllRanges(),qe>Dt?(ne.addRange(X),ne.extend(W.node,W.offset)):(X.setEnd(W.node,W.offset),ne.addRange(X))}}}}for(fe=[],ne=U;ne=ne.parentNode;)ne.nodeType===1&&fe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<fe.length;U++){var ce=fe[U];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Ny=!!aw,lw=aw=null}finally{bt=T,he.p=y,ee.T=d}}a.current=u,fr=2}}function PM(){if(fr===2){fr=0;var a=Fa,u=ef,d=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||d){d=ee.T,ee.T=null;var y=he.p;he.p=2;var T=bt;bt|=4;try{aM(a,u.alternate,u)}finally{bt=T,he.p=y,ee.T=d}}fr=3}}function MM(){if(fr===4||fr===3){fr=0,Sn();var a=Fa,u=ef,d=tf,y=vM;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?fr=5:(fr=0,ef=Fa=null,NM(a,a.pendingLanes));var T=a.pendingLanes;if(T===0&&(Ua=null),ii(d),u=u.stateNode,Ue&&typeof Ue.onCommitFiberRoot=="function")try{Ue.onCommitFiberRoot(Yt,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=ee.T,T=he.p,he.p=2,ee.T=null;try{for(var w=a.onRecoverableError,M=0;M<y.length;M++){var U=y[M];w(U.value,{componentStack:U.stack})}}finally{ee.T=u,he.p=T}}(tf&3)!==0&&Ty(),qo(a),T=a.pendingLanes,(d&4194090)!==0&&(T&42)!==0?a===KE?Fh++:(Fh=0,KE=a):Fh=0,Bh(0)}}function NM(a,u){(a.pooledCacheLanes&=u)===0&&(u=a.pooledCache,u!=null&&(a.pooledCache=null,_h(u)))}function Ty(a){return RM(),PM(),MM(),DM()}function DM(){if(fr!==5)return!1;var a=Fa,u=GE;GE=0;var d=ii(tf),y=ee.T,T=he.p;try{he.p=32>d?32:d,ee.T=null,d=jE,jE=null;var w=Fa,M=tf;if(fr=0,ef=Fa=null,tf=0,(bt&6)!==0)throw Error(r(331));var U=bt;if(bt|=4,gM(w.current),hM(w,w.current,M,d),bt=U,Bh(0,!1),Ue&&typeof Ue.onPostCommitFiberRoot=="function")try{Ue.onPostCommitFiberRoot(Yt,w)}catch{}return!0}finally{he.p=T,ee.T=y,NM(a,u)}}function kM(a,u,d){u=ki(d,u),u=AE(a.stateNode,u,2),a=Ra(a,u,2),a!==null&&(lt(a,2),qo(a))}function Ot(a,u,d){if(a.tag===3)kM(a,a,d);else for(;u!==null;){if(u.tag===3){kM(u,a,d);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ua===null||!Ua.has(y))){a=ki(d,a),d=UP(2),y=Ra(u,d,2),y!==null&&(FP(d,y,u,a),lt(y,2),qo(y));break}}u=u.return}}function QE(a,u,d){var y=a.pingCache;if(y===null){y=a.pingCache=new ZG;var T=new Set;y.set(u,T)}else T=y.get(u),T===void 0&&(T=new Set,y.set(u,T));T.has(d)||(qE=!0,T.add(d),a=i9.bind(null,a,u,d),u.then(a,a))}function i9(a,u,d){var y=a.pingCache;y!==null&&y.delete(u),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,Vt===a&&(ft&d)===d&&(dn===4||dn===3&&(ft&62914560)===ft&&300>Wt()-HE?(bt&2)===0&&nf(a,0):$E|=d,Zc===ft&&(Zc=0)),qo(a)}function OM(a,u){u===0&&(u=Ie()),a=Uc(a,u),a!==null&&(lt(a,u),qo(a))}function o9(a){var u=a.memoizedState,d=0;u!==null&&(d=u.retryLane),OM(a,d)}function s9(a,u){var d=0;switch(a.tag){case 13:var y=a.stateNode,T=a.memoizedState;T!==null&&(d=T.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(u),OM(a,d)}function a9(a,u){return Kt(a,u)}var Ey=null,of=null,XE=!1,wy=!1,ZE=!1,mu=0;function qo(a){a!==of&&a.next===null&&(of===null?Ey=of=a:of=of.next=a),wy=!0,XE||(XE=!0,u9())}function Bh(a,u){if(!ZE&&wy){ZE=!0;do for(var d=!1,y=Ey;y!==null;){if(a!==0){var T=y.pendingLanes;if(T===0)var w=0;else{var M=y.suspendedLanes,U=y.pingedLanes;w=(1<<31-yn(42|a)+1)-1,w&=T&~(M&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,FM(y,w))}else w=ft,w=re(y,y===Vt?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(w&3)===0||ge(y,w)||(d=!0,FM(y,w));y=y.next}while(d);ZE=!1}}function l9(){LM()}function LM(){wy=XE=!1;var a=0;mu!==0&&(y9()&&(a=mu),mu=0);for(var u=Wt(),d=null,y=Ey;y!==null;){var T=y.next,w=VM(y,u);w===0?(y.next=null,d===null?Ey=T:d.next=T,T===null&&(of=d)):(d=y,(a!==0||(w&3)!==0)&&(wy=!0)),y=T}Bh(a)}function VM(a,u){for(var d=a.suspendedLanes,y=a.pingedLanes,T=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var M=31-yn(w),U=1<<M,j=T[M];j===-1?((U&d)===0||(U&y)!==0)&&(T[M]=xe(U,u)):j<=u&&(a.expiredLanes|=U),w&=~U}if(u=Vt,d=ft,d=re(a,a===u?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,d===0||a===u&&(St===2||St===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&et(y),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||ge(a,d)){if(u=d&-d,u===a.callbackPriority)return u;switch(y!==null&&et(y),ii(d)){case 2:case 8:d=bo;break;case 32:d=hs;break;case 268435456:d=_a;break;default:d=hs}return y=UM.bind(null,a),d=Kt(d,y),a.callbackPriority=u,a.callbackNode=d,u}return y!==null&&y!==null&&et(y),a.callbackPriority=2,a.callbackNode=null,2}function UM(a,u){if(fr!==0&&fr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(Ty()&&a.callbackNode!==d)return null;var y=ft;return y=re(a,a===Vt?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(TM(a,y,u),VM(a,Wt()),a.callbackNode!=null&&a.callbackNode===d?UM.bind(null,a):null)}function FM(a,u){if(Ty())return null;TM(a,u,!0)}function u9(){_9(function(){(bt&6)!==0?Kt(Fl,l9):LM()})}function ew(){return mu===0&&(mu=be()),mu}function BM(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Cc(""+a)}function qM(a,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,a.id&&d.setAttribute("form",a.id),u.parentNode.insertBefore(d,u),a=new FormData(a),d.parentNode.removeChild(d),a}function c9(a,u,d,y,T){if(u==="submit"&&d&&d.stateNode===T){var w=BM((T[Cn]||null).action),M=y.submitter;M&&(u=(u=M[Cn]||null)?BM(u.formAction):M.getAttribute("formAction"),u!==null&&(w=u,M=null));var U=new xc("action","action",null,y,T);a.push({event:U,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(mu!==0){var j=M?qM(T,M):new FormData(T);TE(d,{pending:!0,data:j,method:T.method,action:w},null,j)}}else typeof w=="function"&&(U.preventDefault(),j=M?qM(T,M):new FormData(T),TE(d,{pending:!0,data:j,method:T.method,action:w},w,j))},currentTarget:T}]})}}for(var tw=0;tw<FT.length;tw++){var nw=FT[tw],f9=nw.toLowerCase(),d9=nw[0].toUpperCase()+nw.slice(1);oo(f9,"on"+d9)}oo(T1,"onAnimationEnd"),oo(E1,"onAnimationIteration"),oo(w1,"onAnimationStart"),oo("dblclick","onDoubleClick"),oo("focusin","onFocus"),oo("focusout","onBlur"),oo(RG,"onTransitionRun"),oo(PG,"onTransitionStart"),oo(MG,"onTransitionCancel"),oo(b1,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ro("onBeforeInput",["compositionend","keypress","textInput","paste"]),ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qh));function $M(a,u){u=(u&4)!==0;for(var d=0;d<a.length;d++){var y=a[d],T=y.event;y=y.listeners;e:{var w=void 0;if(u)for(var M=y.length-1;0<=M;M--){var U=y[M],j=U.instance,Z=U.currentTarget;if(U=U.listener,j!==w&&T.isPropagationStopped())break e;w=U,T.currentTarget=Z;try{w(T)}catch(le){uy(le)}T.currentTarget=null,w=j}else for(M=0;M<y.length;M++){if(U=y[M],j=U.instance,Z=U.currentTarget,U=U.listener,j!==w&&T.isPropagationStopped())break e;w=U,T.currentTarget=Z;try{w(T)}catch(le){uy(le)}T.currentTarget=null,w=j}}}}function it(a,u){var d=u[Xd];d===void 0&&(d=u[Xd]=new Set);var y=a+"__bubble";d.has(y)||(zM(u,a,2,!1),d.add(y))}function rw(a,u,d){var y=0;u&&(y|=4),zM(d,a,y,u)}var by="_reactListening"+Math.random().toString(36).slice(2);function iw(a){if(!a[by]){a[by]=!0,Zd.forEach(function(d){d!=="selectionchange"&&(h9.has(d)||rw(d,!1,a),rw(d,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[by]||(u[by]=!0,rw("selectionchange",!1,u))}}function zM(a,u,d,y){switch(hN(u)){case 2:var T=B9;break;case 8:T=q9;break;default:T=vw}d=T.bind(null,u,d,a),T=void 0,!Ni||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),y?T!==void 0?a.addEventListener(u,d,{capture:!0,passive:T}):a.addEventListener(u,d,!0):T!==void 0?a.addEventListener(u,d,{passive:T}):a.addEventListener(u,d,!1)}function ow(a,u,d,y,T){var w=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var M=y.tag;if(M===3||M===4){var U=y.stateNode.containerInfo;if(U===T)break;if(M===4)for(M=y.return;M!==null;){var j=M.tag;if((j===3||j===4)&&M.stateNode.containerInfo===T)return;M=M.return}for(;U!==null;){if(M=ps(U),M===null)return;if(j=M.tag,j===5||j===6||j===26||j===27){y=w=M;continue e}U=U.parentNode}}y=y.return}Ag(function(){var Z=w,le=Mi(d),fe=[];e:{var te=S1.get(a);if(te!==void 0){var ne=xc,Ke=a;switch(a){case"keypress":if(No(d)===0)break e;case"keydown":case"keyup":ne=Dc;break;case"focusin":Ke="focus",ne=Pc;break;case"focusout":Ke="blur",ne=Pc;break;case"beforeblur":case"afterblur":ne=Pc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Di;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=MT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Dg;break;case T1:case E1:case w1:ne=Mc;break;case b1:ne=Og;break;case"scroll":case"scrollend":ne=Cg;break;case"wheel":ne=kc;break;case"copy":case"cut":case"paste":ne=Nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=fh;break;case"toggle":case"beforetoggle":ne=Vg}var qe=(u&4)!==0,Dt=!qe&&(a==="scroll"||a==="scrollend"),Y=qe?te!==null?te+"Capture":null:te;qe=[];for(var W=Z,X;W!==null;){var ce=W;if(X=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||X===null||Y===null||(ce=Wl(W,Y),ce!=null&&qe.push($h(W,ce,X))),Dt)break;W=W.return}0<qe.length&&(te=new ne(te,Ke,null,d,le),fe.push({event:te,listeners:qe}))}}if((u&7)===0){e:{if(te=a==="mouseover"||a==="pointerover",ne=a==="mouseout"||a==="pointerout",te&&d!==vs&&(Ke=d.relatedTarget||d.fromElement)&&(ps(Ke)||Ke[Ri]))break e;if((ne||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(Ke=d.relatedTarget||d.toElement,ne=Z,Ke=Ke?ps(Ke):null,Ke!==null&&(Dt=o(Ke),qe=Ke.tag,Ke!==Dt||qe!==5&&qe!==27&&qe!==6)&&(Ke=null)):(ne=null,Ke=Z),ne!==Ke)){if(qe=Di,ce="onMouseLeave",Y="onMouseEnter",W="mouse",(a==="pointerout"||a==="pointerover")&&(qe=fh,ce="onPointerLeave",Y="onPointerEnter",W="pointer"),Dt=ne==null?te:Io(ne),X=Ke==null?te:Io(Ke),te=new qe(ce,W+"leave",ne,d,le),te.target=Dt,te.relatedTarget=X,ce=null,ps(le)===Z&&(qe=new qe(Y,W+"enter",Ke,d,le),qe.target=X,qe.relatedTarget=Dt,ce=qe),Dt=ce,ne&&Ke)t:{for(qe=ne,Y=Ke,W=0,X=qe;X;X=sf(X))W++;for(X=0,ce=Y;ce;ce=sf(ce))X++;for(;0<W-X;)qe=sf(qe),W--;for(;0<X-W;)Y=sf(Y),X--;for(;W--;){if(qe===Y||Y!==null&&qe===Y.alternate)break t;qe=sf(qe),Y=sf(Y)}qe=null}else qe=null;ne!==null&&HM(fe,te,ne,qe,!1),Ke!==null&&Dt!==null&&HM(fe,Dt,Ke,qe,!0)}}e:{if(te=Z?Io(Z):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var De=u1;else if(Vn(te))if(c1)De=CG;else{De=SG;var nt=bG}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&ih(Z.elementType)&&(De=u1):De=AG;if(De&&(De=De(a,Z))){bs(fe,De,d,le);break e}nt&&nt(a,te,Z),a==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&Sa(te,"number",te.value)}switch(nt=Z?Io(Z):window,a){case"focusin":(Vn(nt)||nt.contentEditable==="true")&&(Oc=nt,LT=Z,ph=null);break;case"focusout":ph=LT=Oc=null;break;case"mousedown":VT=!0;break;case"contextmenu":case"mouseup":case"dragend":VT=!1,v1(fe,d,le);break;case"selectionchange":if(IG)break;case"keydown":case"keyup":v1(fe,d,le)}var Fe;if(Oo)e:{switch(a){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else ut?oe(a,d)&&(He="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(He="onCompositionStart");He&&(x&&d.locale!=="ko"&&(ut||He!=="onCompositionStart"?He==="onCompositionEnd"&&ut&&(Fe=sh()):(Mo=le,Aa="value"in Mo?Mo.value:Mo.textContent,ut=!0)),nt=Sy(Z,He),0<nt.length&&(He=new uh(He,a,null,d,le),fe.push({event:He,listeners:nt}),Fe?He.data=Fe:(Fe=_e(d),Fe!==null&&(He.data=Fe)))),(Fe=C?Ln(a,d):ct(a,d))&&(He=Sy(Z,"onBeforeInput"),0<He.length&&(nt=new uh("onBeforeInput","beforeinput",null,d,le),fe.push({event:nt,listeners:He}),nt.data=Fe)),c9(fe,a,Z,d,le)}$M(fe,u)})}function $h(a,u,d){return{instance:a,listener:u,currentTarget:d}}function Sy(a,u){for(var d=u+"Capture",y=[];a!==null;){var T=a,w=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||w===null||(T=Wl(a,d),T!=null&&y.unshift($h(a,T,w)),T=Wl(a,u),T!=null&&y.push($h(a,T,w))),a.tag===3)return y;a=a.return}return[]}function sf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function HM(a,u,d,y,T){for(var w=u._reactName,M=[];d!==null&&d!==y;){var U=d,j=U.alternate,Z=U.stateNode;if(U=U.tag,j!==null&&j===y)break;U!==5&&U!==26&&U!==27||Z===null||(j=Z,T?(Z=Wl(d,w),Z!=null&&M.unshift($h(d,Z,j))):T||(Z=Wl(d,w),Z!=null&&M.push($h(d,Z,j)))),d=d.return}M.length!==0&&a.push({event:u,listeners:M})}var p9=/\r\n?/g,m9=/\u0000|\uFFFD/g;function GM(a){return(typeof a=="string"?a:""+a).replace(p9,`
`).replace(m9,"")}function jM(a,u){return u=GM(u),GM(a)===u}function Ay(){}function Nt(a,u,d,y,T,w){switch(d){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||Pi(a,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&Pi(a,""+y);break;case"className":Ro(a,"class",y);break;case"tabIndex":Ro(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Ro(a,d,y);break;case"style":rh(a,y,w);break;case"data":if(u!=="object"){Ro(a,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||d!=="href")){a.removeAttribute(d);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(d);break}y=Cc(""+y),a.setAttribute(d,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(u!=="input"&&Nt(a,u,"name",T.name,T,null),Nt(a,u,"formEncType",T.formEncType,T,null),Nt(a,u,"formMethod",T.formMethod,T,null),Nt(a,u,"formTarget",T.formTarget,T,null)):(Nt(a,u,"encType",T.encType,T,null),Nt(a,u,"method",T.method,T,null),Nt(a,u,"target",T.target,T,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(d);break}y=Cc(""+y),a.setAttribute(d,y);break;case"onClick":y!=null&&(a.onclick=Ay);break;case"onScroll":y!=null&&it("scroll",a);break;case"onScrollEnd":y!=null&&it("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(d=y.__html,d!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}d=Cc(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,""+y):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":y===!0?a.setAttribute(d,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,y):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(d,y):a.removeAttribute(d);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(d):a.setAttribute(d,y);break;case"popover":it("beforetoggle",a),it("toggle",a),ba(a,"popover",y);break;case"xlinkActuate":lr(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":lr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":lr(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":lr(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":lr(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":lr(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":lr(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":lr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":lr(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":ba(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=RT.get(d)||d,ba(a,d,y))}}function sw(a,u,d,y,T,w){switch(d){case"style":rh(a,y,w);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(d=y.__html,d!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"children":typeof y=="string"?Pi(a,y):(typeof y=="number"||typeof y=="bigint")&&Pi(a,""+y);break;case"onScroll":y!=null&&it("scroll",a);break;case"onScrollEnd":y!=null&&it("scrollend",a);break;case"onClick":y!=null&&(a.onclick=Ay);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ec.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(T=d.endsWith("Capture"),u=d.slice(2,T?d.length-7:void 0),w=a[Cn]||null,w=w!=null?w[d]:null,typeof w=="function"&&a.removeEventListener(u,w,T),typeof y=="function")){typeof w!="function"&&w!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(u,y,T);break e}d in a?a[d]=y:y===!0?a.setAttribute(d,""):ba(a,d,y)}}}function dr(a,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",a),it("load",a);var y=!1,T=!1,w;for(w in d)if(d.hasOwnProperty(w)){var M=d[w];if(M!=null)switch(w){case"src":y=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Nt(a,u,w,M,d,null)}}T&&Nt(a,u,"srcSet",d.srcSet,d,null),y&&Nt(a,u,"src",d.src,d,null);return;case"input":it("invalid",a);var U=w=M=T=null,j=null,Z=null;for(y in d)if(d.hasOwnProperty(y)){var le=d[y];if(le!=null)switch(y){case"name":T=le;break;case"type":M=le;break;case"checked":j=le;break;case"defaultChecked":Z=le;break;case"value":w=le;break;case"defaultValue":U=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,u));break;default:Nt(a,u,y,le,d,null)}}Gl(a,w,U,j,Z,M,T,!1),Ac(a);return;case"select":it("invalid",a),y=M=w=null;for(T in d)if(d.hasOwnProperty(T)&&(U=d[T],U!=null))switch(T){case"value":w=U;break;case"defaultValue":M=U;break;case"multiple":y=U;default:Nt(a,u,T,U,d,null)}u=w,d=M,a.multiple=!!y,u!=null?ys(a,!!y,u,!1):d!=null&&ys(a,!!y,d,!0);return;case"textarea":it("invalid",a),w=T=y=null;for(M in d)if(d.hasOwnProperty(M)&&(U=d[M],U!=null))switch(M){case"value":y=U;break;case"defaultValue":T=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:Nt(a,u,M,U,d,null)}jl(a,y,T,w),Ac(a);return;case"option":for(j in d)if(d.hasOwnProperty(j)&&(y=d[j],y!=null))switch(j){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Nt(a,u,j,y,d,null)}return;case"dialog":it("beforetoggle",a),it("toggle",a),it("cancel",a),it("close",a);break;case"iframe":case"object":it("load",a);break;case"video":case"audio":for(y=0;y<qh.length;y++)it(qh[y],a);break;case"image":it("error",a),it("load",a);break;case"details":it("toggle",a);break;case"embed":case"source":case"link":it("error",a),it("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in d)if(d.hasOwnProperty(Z)&&(y=d[Z],y!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Nt(a,u,Z,y,d,null)}return;default:if(ih(u)){for(le in d)d.hasOwnProperty(le)&&(y=d[le],y!==void 0&&sw(a,u,le,y,d,void 0));return}}for(U in d)d.hasOwnProperty(U)&&(y=d[U],y!=null&&Nt(a,u,U,y,d,null))}function g9(a,u,d,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,w=null,M=null,U=null,j=null,Z=null,le=null;for(ne in d){var fe=d[ne];if(d.hasOwnProperty(ne)&&fe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":j=fe;default:y.hasOwnProperty(ne)||Nt(a,u,ne,null,y,fe)}}for(var te in y){var ne=y[te];if(fe=d[te],y.hasOwnProperty(te)&&(ne!=null||fe!=null))switch(te){case"type":w=ne;break;case"name":T=ne;break;case"checked":Z=ne;break;case"defaultChecked":le=ne;break;case"value":M=ne;break;case"defaultValue":U=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,u));break;default:ne!==fe&&Nt(a,u,te,ne,y,fe)}}oi(a,M,U,j,Z,le,w,T);return;case"select":ne=M=U=te=null;for(w in d)if(j=d[w],d.hasOwnProperty(w)&&j!=null)switch(w){case"value":break;case"multiple":ne=j;default:y.hasOwnProperty(w)||Nt(a,u,w,null,y,j)}for(T in y)if(w=y[T],j=d[T],y.hasOwnProperty(T)&&(w!=null||j!=null))switch(T){case"value":te=w;break;case"defaultValue":U=w;break;case"multiple":M=w;default:w!==j&&Nt(a,u,T,w,y,j)}u=U,d=M,y=ne,te!=null?ys(a,!!d,te,!1):!!y!=!!d&&(u!=null?ys(a,!!d,u,!0):ys(a,!!d,d?[]:"",!1));return;case"textarea":ne=te=null;for(U in d)if(T=d[U],d.hasOwnProperty(U)&&T!=null&&!y.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Nt(a,u,U,null,y,T)}for(M in y)if(T=y[M],w=d[M],y.hasOwnProperty(M)&&(T!=null||w!=null))switch(M){case"value":te=T;break;case"defaultValue":ne=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==w&&Nt(a,u,M,T,y,w)}Pt(a,te,ne);return;case"option":for(var Ke in d)if(te=d[Ke],d.hasOwnProperty(Ke)&&te!=null&&!y.hasOwnProperty(Ke))switch(Ke){case"selected":a.selected=!1;break;default:Nt(a,u,Ke,null,y,te)}for(j in y)if(te=y[j],ne=d[j],y.hasOwnProperty(j)&&te!==ne&&(te!=null||ne!=null))switch(j){case"selected":a.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Nt(a,u,j,te,y,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in d)te=d[qe],d.hasOwnProperty(qe)&&te!=null&&!y.hasOwnProperty(qe)&&Nt(a,u,qe,null,y,te);for(Z in y)if(te=y[Z],ne=d[Z],y.hasOwnProperty(Z)&&te!==ne&&(te!=null||ne!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,u));break;default:Nt(a,u,Z,te,y,ne)}return;default:if(ih(u)){for(var Dt in d)te=d[Dt],d.hasOwnProperty(Dt)&&te!==void 0&&!y.hasOwnProperty(Dt)&&sw(a,u,Dt,void 0,y,te);for(le in y)te=y[le],ne=d[le],!y.hasOwnProperty(le)||te===ne||te===void 0&&ne===void 0||sw(a,u,le,te,y,ne);return}}for(var Y in d)te=d[Y],d.hasOwnProperty(Y)&&te!=null&&!y.hasOwnProperty(Y)&&Nt(a,u,Y,null,y,te);for(fe in y)te=y[fe],ne=d[fe],!y.hasOwnProperty(fe)||te===ne||te==null&&ne==null||Nt(a,u,fe,te,y,ne)}var aw=null,lw=null;function Cy(a){return a.nodeType===9?a:a.ownerDocument}function KM(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WM(a,u){if(a===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&u==="foreignObject"?0:a}function uw(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var cw=null;function y9(){var a=window.event;return a&&a.type==="popstate"?a===cw?!1:(cw=a,!0):(cw=null,!1)}var YM=typeof setTimeout=="function"?setTimeout:void 0,v9=typeof clearTimeout=="function"?clearTimeout:void 0,JM=typeof Promise=="function"?Promise:void 0,_9=typeof queueMicrotask=="function"?queueMicrotask:typeof JM<"u"?function(a){return JM.resolve(null).then(a).catch(T9)}:YM;function T9(a){setTimeout(function(){throw a})}function qa(a){return a==="head"}function QM(a,u){var d=u,y=0,T=0;do{var w=d.nextSibling;if(a.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(0<y&&8>y){d=y;var M=a.ownerDocument;if(d&1&&zh(M.documentElement),d&2&&zh(M.body),d&4)for(d=M.head,zh(d),M=d.firstChild;M;){var U=M.nextSibling,j=M.nodeName;M[ql]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&M.rel.toLowerCase()==="stylesheet"||d.removeChild(M),M=U}}if(T===0){a.removeChild(w),Qh(u);return}T--}else d==="$"||d==="$?"||d==="$!"?T++:y=d.charCodeAt(0)-48;else y=0;d=w}while(d);Qh(u)}function fw(a){var u=a.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":fw(d),wa(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function E9(a,u,d,y){for(;a.nodeType===1;){var T=d;if(a.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[ql])switch(u){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==T.rel||a.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||a.getAttribute("title")!==(T.title==null?null:T.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(T.src==null?null:T.src)||a.getAttribute("type")!==(T.type==null?null:T.type)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(u==="input"&&a.type==="hidden"){var w=T.name==null?null:""+T.name;if(T.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=ao(a.nextSibling),a===null)break}return null}function w9(a,u,d){if(u==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=ao(a.nextSibling),a===null))return null;return a}function dw(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function b9(a,u){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")u();else{var y=function(){u(),d.removeEventListener("DOMContentLoaded",y)};d.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function ao(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return a}var hw=null;function XM(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(u===0)return a;u--}else d==="/$"&&u++}a=a.previousSibling}return null}function ZM(a,u,d){switch(u=Cy(d),a){case"html":if(a=u.documentElement,!a)throw Error(r(452));return a;case"head":if(a=u.head,!a)throw Error(r(453));return a;case"body":if(a=u.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function zh(a){for(var u=a.attributes;u.length;)a.removeAttributeNode(u[0]);wa(a)}var Bi=new Map,eN=new Set;function xy(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ls=he.d;he.d={f:S9,r:A9,D:C9,C:x9,L:I9,m:R9,X:M9,S:P9,M:N9};function S9(){var a=Ls.f(),u=vy();return a||u}function A9(a){var u=xo(a);u!==null&&u.tag===5&&u.type==="form"?TP(u):Ls.r(a)}var af=typeof document>"u"?null:document;function tN(a,u,d){var y=af;if(y&&typeof u=="string"&&u){var T=xn(u);T='link[rel="'+a+'"][href="'+T+'"]',typeof d=="string"&&(T+='[crossorigin="'+d+'"]'),eN.has(T)||(eN.add(T),a={rel:a,crossOrigin:d,href:u},y.querySelector(T)===null&&(u=y.createElement("link"),dr(u,"link",a),vn(u),y.head.appendChild(u)))}}function C9(a){Ls.D(a),tN("dns-prefetch",a,null)}function x9(a,u){Ls.C(a,u),tN("preconnect",a,u)}function I9(a,u,d){Ls.L(a,u,d);var y=af;if(y&&a&&u){var T='link[rel="preload"][as="'+xn(u)+'"]';u==="image"&&d&&d.imageSrcSet?(T+='[imagesrcset="'+xn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(T+='[imagesizes="'+xn(d.imageSizes)+'"]')):T+='[href="'+xn(a)+'"]';var w=T;switch(u){case"style":w=lf(a);break;case"script":w=uf(a)}Bi.has(w)||(a=h({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:a,as:u},d),Bi.set(w,a),y.querySelector(T)!==null||u==="style"&&y.querySelector(Hh(w))||u==="script"&&y.querySelector(Gh(w))||(u=y.createElement("link"),dr(u,"link",a),vn(u),y.head.appendChild(u)))}}function R9(a,u){Ls.m(a,u);var d=af;if(d&&a){var y=u&&typeof u.as=="string"?u.as:"script",T='link[rel="modulepreload"][as="'+xn(y)+'"][href="'+xn(a)+'"]',w=T;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=uf(a)}if(!Bi.has(w)&&(a=h({rel:"modulepreload",href:a},u),Bi.set(w,a),d.querySelector(T)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Gh(w)))return}y=d.createElement("link"),dr(y,"link",a),vn(y),d.head.appendChild(y)}}}function P9(a,u,d){Ls.S(a,u,d);var y=af;if(y&&a){var T=Mr(y).hoistableStyles,w=lf(a);u=u||"default";var M=T.get(w);if(!M){var U={loading:0,preload:null};if(M=y.querySelector(Hh(w)))U.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":u},d),(d=Bi.get(w))&&pw(a,d);var j=M=y.createElement("link");vn(j),dr(j,"link",a),j._p=new Promise(function(Z,le){j.onload=Z,j.onerror=le}),j.addEventListener("load",function(){U.loading|=1}),j.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Iy(M,u,y)}M={type:"stylesheet",instance:M,count:1,state:U},T.set(w,M)}}}function M9(a,u){Ls.X(a,u);var d=af;if(d&&a){var y=Mr(d).hoistableScripts,T=uf(a),w=y.get(T);w||(w=d.querySelector(Gh(T)),w||(a=h({src:a,async:!0},u),(u=Bi.get(T))&&mw(a,u),w=d.createElement("script"),vn(w),dr(w,"link",a),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(T,w))}}function N9(a,u){Ls.M(a,u);var d=af;if(d&&a){var y=Mr(d).hoistableScripts,T=uf(a),w=y.get(T);w||(w=d.querySelector(Gh(T)),w||(a=h({src:a,async:!0,type:"module"},u),(u=Bi.get(T))&&mw(a,u),w=d.createElement("script"),vn(w),dr(w,"link",a),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(T,w))}}function nN(a,u,d,y){var T=(T=ze.current)?xy(T):null;if(!T)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=lf(d.href),d=Mr(T).hoistableStyles,y=d.get(u),y||(y={type:"style",instance:null,count:0,state:null},d.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=lf(d.href);var w=Mr(T).hoistableStyles,M=w.get(a);if(M||(T=T.ownerDocument||T,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,M),(w=T.querySelector(Hh(a)))&&!w._p&&(M.instance=w,M.state.loading=5),Bi.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Bi.set(a,d),w||D9(T,a,d,M.state))),u&&y===null)throw Error(r(528,""));return M}if(u&&y!==null)throw Error(r(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=uf(d),d=Mr(T).hoistableScripts,y=d.get(u),y||(y={type:"script",instance:null,count:0,state:null},d.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function lf(a){return'href="'+xn(a)+'"'}function Hh(a){return'link[rel="stylesheet"]['+a+"]"}function rN(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function D9(a,u,d,y){a.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=a.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),dr(u,"link",d),vn(u),a.head.appendChild(u))}function uf(a){return'[src="'+xn(a)+'"]'}function Gh(a){return"script[async]"+a}function iN(a,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var y=a.querySelector('style[data-href~="'+xn(d.href)+'"]');if(y)return u.instance=y,vn(y),y;var T=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),vn(y),dr(y,"style",T),Iy(y,d.precedence,a),u.instance=y;case"stylesheet":T=lf(d.href);var w=a.querySelector(Hh(T));if(w)return u.state.loading|=4,u.instance=w,vn(w),w;y=rN(d),(T=Bi.get(T))&&pw(y,T),w=(a.ownerDocument||a).createElement("link"),vn(w);var M=w;return M._p=new Promise(function(U,j){M.onload=U,M.onerror=j}),dr(w,"link",y),u.state.loading|=4,Iy(w,d.precedence,a),u.instance=w;case"script":return w=uf(d.src),(T=a.querySelector(Gh(w)))?(u.instance=T,vn(T),T):(y=d,(T=Bi.get(w))&&(y=h({},d),mw(y,T)),a=a.ownerDocument||a,T=a.createElement("script"),vn(T),dr(T,"link",y),a.head.appendChild(T),u.instance=T);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,Iy(y,d.precedence,a));return u.instance}function Iy(a,u,d){for(var y=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=y.length?y[y.length-1]:null,w=T,M=0;M<y.length;M++){var U=y[M];if(U.dataset.precedence===u)w=U;else if(w!==T)break}w?w.parentNode.insertBefore(a,w.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(a,u.firstChild))}function pw(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.title==null&&(a.title=u.title)}function mw(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.integrity==null&&(a.integrity=u.integrity)}var Ry=null;function oN(a,u,d){if(Ry===null){var y=new Map,T=Ry=new Map;T.set(d,y)}else T=Ry,y=T.get(d),y||(y=new Map,T.set(d,y));if(y.has(a))return y;for(y.set(a,null),d=d.getElementsByTagName(a),T=0;T<d.length;T++){var w=d[T];if(!(w[ql]||w[cn]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var M=w.getAttribute(u)||"";M=a+M;var U=y.get(M);U?U.push(w):y.set(M,[w])}}return y}function sN(a,u,d){a=a.ownerDocument||a,a.head.insertBefore(d,u==="title"?a.querySelector("head > title"):null)}function k9(a,u,d){if(d===1||u.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return a=u.disabled,typeof u.precedence=="string"&&a==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function aN(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var jh=null;function O9(){}function L9(a,u,d){if(jh===null)throw Error(r(475));var y=jh;if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var T=lf(d.href),w=a.querySelector(Hh(T));if(w){a=w._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(y.count++,y=Py.bind(y),a.then(y,y)),u.state.loading|=4,u.instance=w,vn(w);return}w=a.ownerDocument||a,d=rN(d),(T=Bi.get(T))&&pw(d,T),w=w.createElement("link"),vn(w);var M=w;M._p=new Promise(function(U,j){M.onload=U,M.onerror=j}),dr(w,"link",d),u.instance=w}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(y.count++,u=Py.bind(y),a.addEventListener("load",u),a.addEventListener("error",u))}}function V9(){if(jh===null)throw Error(r(475));var a=jh;return a.stylesheets&&a.count===0&&gw(a,a.stylesheets),0<a.count?function(u){var d=setTimeout(function(){if(a.stylesheets&&gw(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(d)}}:null}function Py(){if(this.count--,this.count===0){if(this.stylesheets)gw(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var My=null;function gw(a,u){a.stylesheets=null,a.unsuspend!==null&&(a.count++,My=new Map,u.forEach(U9,a),My=null,Py.call(a))}function U9(a,u){if(!(u.state.loading&4)){var d=My.get(a);if(d)var y=d.get(null);else{d=new Map,My.set(a,d);for(var T=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<T.length;w++){var M=T[w];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(d.set(M.dataset.precedence,M),y=M)}y&&d.set(null,y)}T=u.instance,M=T.getAttribute("data-precedence"),w=d.get(M)||y,w===y&&d.set(null,T),d.set(M,T),this.count++,y=Py.bind(this),T.addEventListener("load",y),T.addEventListener("error",y),w?w.parentNode.insertBefore(T,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(T,a.firstChild)),u.state.loading|=4}}var Kh={$$typeof:D,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function F9(a,u,d,y,T,w,M,U){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ge(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ge(0),this.hiddenUpdates=Ge(null),this.identifierPrefix=y,this.onUncaughtError=T,this.onCaughtError=w,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function lN(a,u,d,y,T,w,M,U,j,Z,le,fe){return a=new F9(a,u,d,M,U,j,Z,fe),u=1,w===!0&&(u|=24),w=ai(3,null,null,u),a.current=w,w.stateNode=a,u=QT(),u.refCount++,a.pooledCache=u,u.refCount++,w.memoizedState={element:y,isDehydrated:d,cache:u},tE(w),a}function uN(a){return a?(a=Fc,a):Fc}function cN(a,u,d,y,T,w){T=uN(T),y.context===null?y.context=T:y.pendingContext=T,y=Ia(u),y.payload={element:d},w=w===void 0?null:w,w!==null&&(y.callback=w),d=Ra(a,y,u),d!==null&&(di(d,a,u),bh(d,a,u))}function fN(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<u?d:u}}function yw(a,u){fN(a,u),(a=a.alternate)&&fN(a,u)}function dN(a){if(a.tag===13){var u=Uc(a,67108864);u!==null&&di(u,a,67108864),yw(a,67108864)}}var Ny=!0;function B9(a,u,d,y){var T=ee.T;ee.T=null;var w=he.p;try{he.p=2,vw(a,u,d,y)}finally{he.p=w,ee.T=T}}function q9(a,u,d,y){var T=ee.T;ee.T=null;var w=he.p;try{he.p=8,vw(a,u,d,y)}finally{he.p=w,ee.T=T}}function vw(a,u,d,y){if(Ny){var T=_w(y);if(T===null)ow(a,u,y,Dy,d),pN(a,y);else if(z9(T,a,u,d,y))y.stopPropagation();else if(pN(a,y),u&4&&-1<$9.indexOf(a)){for(;T!==null;){var w=xo(T);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var M=jr(w.pendingLanes);if(M!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;M;){var j=1<<31-yn(M);U.entanglements[1]|=j,M&=~j}qo(w),(bt&6)===0&&(gy=Wt()+500,Bh(0))}}break;case 13:U=Uc(w,2),U!==null&&di(U,w,2),vy(),yw(w,2)}if(w=_w(y),w===null&&ow(a,u,y,Dy,d),w===T)break;T=w}T!==null&&y.stopPropagation()}else ow(a,u,y,null,d)}}function _w(a){return a=Mi(a),Tw(a)}var Dy=null;function Tw(a){if(Dy=null,a=ps(a),a!==null){var u=o(a);if(u===null)a=null;else{var d=u.tag;if(d===13){if(a=s(u),a!==null)return a;a=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null)}}return Dy=a,null}function hN(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(va()){case Fl:return 2;case bo:return 8;case hs:case Qd:return 32;case _a:return 268435456;default:return 32}default:return 32}}var Ew=!1,$a=null,za=null,Ha=null,Wh=new Map,Yh=new Map,Ga=[],$9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pN(a,u){switch(a){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":Wh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yh.delete(u.pointerId)}}function Jh(a,u,d,y,T,w){return a===null||a.nativeEvent!==w?(a={blockedOn:u,domEventName:d,eventSystemFlags:y,nativeEvent:w,targetContainers:[T]},u!==null&&(u=xo(u),u!==null&&dN(u)),a):(a.eventSystemFlags|=y,u=a.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),a)}function z9(a,u,d,y,T){switch(u){case"focusin":return $a=Jh($a,a,u,d,y,T),!0;case"dragenter":return za=Jh(za,a,u,d,y,T),!0;case"mouseover":return Ha=Jh(Ha,a,u,d,y,T),!0;case"pointerover":var w=T.pointerId;return Wh.set(w,Jh(Wh.get(w)||null,a,u,d,y,T)),!0;case"gotpointercapture":return w=T.pointerId,Yh.set(w,Jh(Yh.get(w)||null,a,u,d,y,T)),!0}return!1}function mN(a){var u=ps(a.target);if(u!==null){var d=o(u);if(d!==null){if(u=d.tag,u===13){if(u=s(d),u!==null){a.blockedOn=u,Tr(a.priority,function(){if(d.tag===13){var y=fi();y=On(y);var T=Uc(d,y);T!==null&&di(T,d,y),yw(d,y)}});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ky(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var d=_w(a.nativeEvent);if(d===null){d=a.nativeEvent;var y=new d.constructor(d.type,d);vs=y,d.target.dispatchEvent(y),vs=null}else return u=xo(d),u!==null&&dN(u),a.blockedOn=d,!1;u.shift()}return!0}function gN(a,u,d){ky(a)&&d.delete(u)}function H9(){Ew=!1,$a!==null&&ky($a)&&($a=null),za!==null&&ky(za)&&(za=null),Ha!==null&&ky(Ha)&&(Ha=null),Wh.forEach(gN),Yh.forEach(gN)}function Oy(a,u){a.blockedOn===u&&(a.blockedOn=null,Ew||(Ew=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,H9)))}var Ly=null;function yN(a){Ly!==a&&(Ly=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ly===a&&(Ly=null);for(var u=0;u<a.length;u+=3){var d=a[u],y=a[u+1],T=a[u+2];if(typeof y!="function"){if(Tw(y||d)===null)continue;break}var w=xo(d);w!==null&&(a.splice(u,3),u-=3,TE(w,{pending:!0,data:T,method:d.method,action:y},y,T))}}))}function Qh(a){function u(j){return Oy(j,a)}$a!==null&&Oy($a,a),za!==null&&Oy(za,a),Ha!==null&&Oy(Ha,a),Wh.forEach(u),Yh.forEach(u);for(var d=0;d<Ga.length;d++){var y=Ga[d];y.blockedOn===a&&(y.blockedOn=null)}for(;0<Ga.length&&(d=Ga[0],d.blockedOn===null);)mN(d),d.blockedOn===null&&Ga.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(y=0;y<d.length;y+=3){var T=d[y],w=d[y+1],M=T[Cn]||null;if(typeof w=="function")M||yN(d);else if(M){var U=null;if(w&&w.hasAttribute("formAction")){if(T=w,M=w[Cn]||null)U=M.formAction;else if(Tw(T)!==null)continue}else U=M.action;typeof U=="function"?d[y+1]=U:(d.splice(y,3),y-=3),yN(d)}}}function ww(a){this._internalRoot=a}Vy.prototype.render=ww.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(r(409));var d=u.current,y=fi();cN(d,y,a,u,null,null)},Vy.prototype.unmount=ww.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;cN(a.current,2,null,a,null,null),vy(),u[Ri]=null}};function Vy(a){this._internalRoot=a}Vy.prototype.unstable_scheduleHydration=function(a){if(a){var u=An();a={blockedOn:null,target:a,priority:u};for(var d=0;d<Ga.length&&u!==0&&u<Ga[d].priority;d++);Ga.splice(d,0,a),d===0&&mN(a)}};var vN=e.version;if(vN!=="19.1.1")throw Error(r(527,vN,"19.1.1"));he.findDOMNode=function(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=c(u),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var G9={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uy.isDisabled&&Uy.supportsFiber)try{Yt=Uy.inject(G9),Ue=Uy}catch{}}return Zh.createRoot=function(a,u){if(!i(a))throw Error(r(299));var d=!1,y="",T=kP,w=OP,M=LP,U=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(U=u.unstable_transitionCallbacks)),u=lN(a,1,!1,null,null,d,y,T,w,M,U,null),a[Ri]=u.current,iw(a),new ww(u)},Zh.hydrateRoot=function(a,u,d){if(!i(a))throw Error(r(299));var y=!1,T="",w=kP,M=OP,U=LP,j=null,Z=null;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(M=d.onCaughtError),d.onRecoverableError!==void 0&&(U=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(j=d.unstable_transitionCallbacks),d.formState!==void 0&&(Z=d.formState)),u=lN(a,1,!0,u,d??null,y,T,w,M,U,j,Z),u.context=uN(null),d=u.current,y=fi(),y=On(y),T=Ia(y),T.callback=null,Ra(d,T,y),d=y,u.current.lanes=d,lt(u,d),qo(u),a[Ri]=u.current,iw(a),new Vy(u)},Zh.version="19.1.1",Zh}var IN;function i8(){if(IN)return Cw.exports;IN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cw.exports=r8(),Cw.exports}var o8=i8();const s8=cs(o8);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var RN="popstate";function a8(t={}){function e(i,o){let{pathname:s="/",search:l="",hash:c=""}=sc(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),LS("",{pathname:s,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),l="";if(s&&s.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");l=f===-1?c:c.slice(0,f)}return l+"#"+(typeof o=="string"?o:Jp(o))}function r(i,o){Ji(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return u8(e,n,r,t)}function tn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ji(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l8(){return Math.random().toString(36).substring(2,10)}function PN(t,e){return{usr:t.state,key:t.key,idx:e}}function LS(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?sc(e):e,state:n,key:e&&e.key||r||l8()}}function Jp({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function sc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function u8(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l="POP",c=null,f=h();f==null&&(f=0,s.replaceState({...s.state,idx:f},""));function h(){return(s.state||{idx:null}).idx}function g(){l="POP";let A=h(),I=A==null?null:A-f;f=A,c&&c({action:l,location:S.location,delta:I})}function v(A,I){l="PUSH";let N=LS(S.location,A,I);n&&n(N,A),f=h()+1;let D=PN(N,f),V=S.createHref(N);try{s.pushState(D,"",V)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(V)}o&&c&&c({action:l,location:S.location,delta:1})}function E(A,I){l="REPLACE";let N=LS(S.location,A,I);n&&n(N,A),f=h();let D=PN(N,f),V=S.createHref(N);s.replaceState(D,"",V),o&&c&&c({action:l,location:S.location,delta:0})}function b(A){return c8(A)}let S={get action(){return l},get location(){return t(i,s)},listen(A){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(RN,g),c=A,()=>{i.removeEventListener(RN,g),c=null}},createHref(A){return e(i,A)},createURL:b,encodeLocation(A){let I=b(A);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:v,replace:E,go(A){return s.go(A)}};return S}function c8(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),tn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Jp(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function y4(t,e,n="/"){return f8(t,e,n,!1)}function f8(t,e,n,r){let i=typeof e=="string"?sc(e):e,o=Ws(i.pathname||"/",n);if(o==null)return null;let s=v4(t);d8(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let f=b8(o);l=E8(s[c],f,r)}return l}function v4(t,e=[],n=[],r="",i=!1){let o=(s,l,c=i,f)=>{let h={relativePath:f===void 0?s.path||"":f,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;tn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let g=zs([r,h.relativePath]),v=n.concat(h);s.children&&s.children.length>0&&(tn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),v4(s.children,e,v,g,c)),!(s.path==null&&!s.index)&&e.push({path:g,score:_8(g,s.index),routesMeta:v})};return t.forEach((s,l)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))o(s,l);else for(let f of _4(s.path))o(s,l,!0,f)}),e}function _4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=_4(r.join("/")),l=[];return l.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&l.push(...s),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function d8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:T8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var h8=/^:[\w-]+$/,p8=3,m8=2,g8=1,y8=10,v8=-2,MN=t=>t==="*";function _8(t,e){let n=t.split("/"),r=n.length;return n.some(MN)&&(r+=v8),e&&(r+=m8),n.filter(i=>!MN(i)).reduce((i,o)=>i+(h8.test(o)?p8:o===""?g8:y8),r)}function T8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function E8(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,h=o==="/"?e:e.slice(o.length)||"/",g=Vv({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!g&&f&&n&&!r[r.length-1].route.index&&(g=Vv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),s.push({params:i,pathname:zs([o,g.pathname]),pathnameBase:x8(zs([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=zs([o,g.pathnameBase]))}return s}function Vv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=w8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:g},v)=>{if(h==="*"){let b=l[v]||"";s=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const E=l[v];return g&&!E?f[h]=void 0:f[h]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:s,pattern:t}}function w8(t,e=!1,n=!0){Ji(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function b8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ji(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ws(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function S8(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?sc(t):t;return{pathname:n?n.startsWith("/")?n:A8(n,e):e,search:I8(r),hash:R8(i)}}function A8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Pw(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function C8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function RC(t){let e=C8(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function PC(t,e,n,r=!1){let i;typeof t=="string"?i=sc(t):(i={...t},tn(!i.pathname||!i.pathname.includes("?"),Pw("?","pathname","search",i)),tn(!i.pathname||!i.pathname.includes("#"),Pw("#","pathname","hash",i)),tn(!i.search||!i.search.includes("#"),Pw("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let g=e.length-1;if(!r&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}l=g>=0?e[g]:"/"}let c=S8(i,l),f=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}var zs=t=>t.join("/").replace(/\/\/+/g,"/"),x8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),I8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,R8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function P8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var T4=["POST","PUT","PATCH","DELETE"];new Set(T4);var M8=["GET",...T4];new Set(M8);var Ed=R.createContext(null);Ed.displayName="DataRouter";var Q_=R.createContext(null);Q_.displayName="DataRouterState";R.createContext(!1);var E4=R.createContext({isTransitioning:!1});E4.displayName="ViewTransition";var N8=R.createContext(new Map);N8.displayName="Fetchers";var D8=R.createContext(null);D8.displayName="Await";var _o=R.createContext(null);_o.displayName="Navigation";var Nm=R.createContext(null);Nm.displayName="Location";var To=R.createContext({outlet:null,matches:[],isDataRoute:!1});To.displayName="Route";var MC=R.createContext(null);MC.displayName="RouteError";function k8(t,{relative:e}={}){tn(wd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(_o),{hash:i,pathname:o,search:s}=Dm(t,{relative:e}),l=o;return n!=="/"&&(l=o==="/"?n:zs([n,o])),r.createHref({pathname:l,search:s,hash:i})}function wd(){return R.useContext(Nm)!=null}function fs(){return tn(wd(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Nm).location}var w4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function b4(t){R.useContext(_o).static||R.useLayoutEffect(t)}function X_(){let{isDataRoute:t}=R.useContext(To);return t?K8():O8()}function O8(){tn(wd(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Ed),{basename:e,navigator:n}=R.useContext(_o),{matches:r}=R.useContext(To),{pathname:i}=fs(),o=JSON.stringify(RC(r)),s=R.useRef(!1);return b4(()=>{s.current=!0}),R.useCallback((c,f={})=>{if(Ji(s.current,w4),!s.current)return;if(typeof c=="number"){n.go(c);return}let h=PC(c,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:zs([e,h.pathname])),(f.replace?n.replace:n.push)(h,f.state,f)},[e,n,o,i,t])}R.createContext(null);function S4(){let{matches:t}=R.useContext(To),e=t[t.length-1];return e?e.params:{}}function Dm(t,{relative:e}={}){let{matches:n}=R.useContext(To),{pathname:r}=fs(),i=JSON.stringify(RC(n));return R.useMemo(()=>PC(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function L8(t,e){return A4(t,e)}function A4(t,e,n,r,i){var N;tn(wd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=R.useContext(_o),{matches:s}=R.useContext(To),l=s[s.length-1],c=l?l.params:{},f=l?l.pathname:"/",h=l?l.pathnameBase:"/",g=l&&l.route;{let D=g&&g.path||"";C4(f,!g||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let v=fs(),E;if(e){let D=typeof e=="string"?sc(e):e;tn(h==="/"||((N=D.pathname)==null?void 0:N.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${D.pathname}" was given in the \`location\` prop.`),E=D}else E=v;let b=E.pathname||"/",S=b;if(h!=="/"){let D=h.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(D.length).join("/")}let A=y4(t,{pathname:S});Ji(g||A!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Ji(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=q8(A&&A.map(D=>Object.assign({},D,{params:Object.assign({},c,D.params),pathname:zs([h,o.encodeLocation?o.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?h:zs([h,o.encodeLocation?o.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),s,n,r,i);return e&&I?R.createElement(Nm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},I):I}function V8(){let t=j8(),e=P8(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:o},"ErrorBoundary")," or"," ",R.createElement("code",{style:o},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,s)}var U8=R.createElement(V8,null),F8=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(To.Provider,{value:this.props.routeContext},R.createElement(MC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function B8({routeContext:t,match:e,children:n}){let r=R.useContext(Ed);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(To.Provider,{value:t},n)}function q8(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let f=o.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);tn(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let l=!1,c=-1;if(n)for(let f=0;f<o.length;f++){let h=o[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:v}=n,E=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,h,g)=>{let v,E=!1,b=null,S=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,b=h.route.errorElement||U8,l&&(c<0&&g===0?(C4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,S=null):c===g&&(E=!0,S=h.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,g+1)),I=()=>{let N;return v?N=b:E?N=S:h.route.Component?N=R.createElement(h.route.Component,null):h.route.element?N=h.route.element:N=f,R.createElement(B8,{match:h,routeContext:{outlet:f,matches:A,isDataRoute:n!=null},children:N})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?R.createElement(F8,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:r}):I()},null)}function NC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $8(t){let e=R.useContext(Ed);return tn(e,NC(t)),e}function z8(t){let e=R.useContext(Q_);return tn(e,NC(t)),e}function H8(t){let e=R.useContext(To);return tn(e,NC(t)),e}function DC(t){let e=H8(t),n=e.matches[e.matches.length-1];return tn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function G8(){return DC("useRouteId")}function j8(){var r;let t=R.useContext(MC),e=z8("useRouteError"),n=DC("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function K8(){let{router:t}=$8("useNavigate"),e=DC("useNavigate"),n=R.useRef(!1);return b4(()=>{n.current=!0}),R.useCallback(async(i,o={})=>{Ji(n.current,w4),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var NN={};function C4(t,e,n){!e&&!NN[t]&&(NN[t]=!0,Ji(!1,n))}R.memo(W8);function W8({routes:t,future:e,state:n,unstable_onError:r}){return A4(t,void 0,n,r,e)}function DN({to:t,replace:e,state:n,relative:r}){tn(wd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=R.useContext(_o);Ji(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=R.useContext(To),{pathname:s}=fs(),l=X_(),c=PC(t,RC(o),s,r==="path"),f=JSON.stringify(c);return R.useEffect(()=>{l(JSON.parse(f),{replace:e,state:n,relative:r})},[l,f,r,e,n]),null}function Jr(t){tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Y8({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){tn(!wd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),l=R.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=sc(n));let{pathname:c="/",search:f="",hash:h="",state:g=null,key:v="default"}=n,E=R.useMemo(()=>{let b=Ws(c,s);return b==null?null:{location:{pathname:b,search:f,hash:h,state:g,key:v},navigationType:r}},[s,c,f,h,g,v,r]);return Ji(E!=null,`<Router basename="${s}"> is not able to match the URL "${c}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:R.createElement(_o.Provider,{value:l},R.createElement(Nm.Provider,{children:e,value:E}))}function kN({children:t,location:e}){return L8(VS(t),e)}function VS(t,e=[]){let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let o=[...e,i];if(r.type===R.Fragment){n.push.apply(n,VS(r.props.children,o));return}tn(r.type===Jr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=VS(r.props.children,o)),n.push(s)}),n}var mv="get",gv="application/x-www-form-urlencoded";function Z_(t){return t!=null&&typeof t.tagName=="string"}function J8(t){return Z_(t)&&t.tagName.toLowerCase()==="button"}function Q8(t){return Z_(t)&&t.tagName.toLowerCase()==="form"}function X8(t){return Z_(t)&&t.tagName.toLowerCase()==="input"}function Z8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function e7(t,e){return t.button===0&&(!e||e==="_self")&&!Z8(t)}var Fy=null;function t7(){if(Fy===null)try{new FormData(document.createElement("form"),0),Fy=!1}catch{Fy=!0}return Fy}var n7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mw(t){return t!=null&&!n7.has(t)?(Ji(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gv}"`),null):t}function r7(t,e){let n,r,i,o,s;if(Q8(t)){let l=t.getAttribute("action");r=l?Ws(l,e):null,n=t.getAttribute("method")||mv,i=Mw(t.getAttribute("enctype"))||gv,o=new FormData(t)}else if(J8(t)||X8(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?Ws(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||mv,i=Mw(t.getAttribute("formenctype"))||Mw(l.getAttribute("enctype"))||gv,o=new FormData(l,t),!t7()){let{name:f,type:h,value:g}=t;if(h==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,g)}}else{if(Z_(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=mv,r=null,i=gv,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kC(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function i7(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ws(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function o7(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function s7(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function a7(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await o7(o,n);return s.links?s.links():[]}return[]}));return f7(r.flat(1).filter(s7).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function ON(t,e,n,r,i,o){let s=(c,f)=>n[f]?c.route.id!==n[f].route.id:!0,l=(c,f)=>{var h;return n[f].pathname!==c.pathname||((h=n[f].route.path)==null?void 0:h.endsWith("*"))&&n[f].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,f)=>s(c,f)||l(c,f)):o==="data"?e.filter((c,f)=>{var g;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(s(c,f)||l(c,f))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function l7(t,e,{includeHydrateFallback:n}={}){return u7(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function u7(t){return[...new Set(t)]}function c7(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function f7(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(c7(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function x4(){let t=R.useContext(Ed);return kC(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function d7(){let t=R.useContext(Q_);return kC(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var OC=R.createContext(void 0);OC.displayName="FrameworkContext";function I4(){let t=R.useContext(OC);return kC(t,"You must render this element inside a <HydratedRouter> element"),t}function h7(t,e){let n=R.useContext(OC),[r,i]=R.useState(!1),[o,s]=R.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:f,onMouseLeave:h,onTouchStart:g}=e,v=R.useRef(null);R.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let S=I=>{I.forEach(N=>{s(N.isIntersecting)})},A=new IntersectionObserver(S,{threshold:.5});return v.current&&A.observe(v.current),()=>{A.disconnect()}}},[t]),R.useEffect(()=>{if(r){let S=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:ep(l,E),onBlur:ep(c,b),onMouseEnter:ep(f,E),onMouseLeave:ep(h,b),onTouchStart:ep(g,E)}]:[!1,v,{}]}function ep(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function p7({page:t,...e}){let{router:n}=x4(),r=R.useMemo(()=>y4(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(g7,{page:t,matches:r,...e}):null}function m7(t){let{manifest:e,routeModules:n}=I4(),[r,i]=R.useState([]);return R.useEffect(()=>{let o=!1;return a7(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function g7({page:t,matches:e,...n}){let r=fs(),{manifest:i,routeModules:o}=I4(),{basename:s}=x4(),{loaderData:l,matches:c}=d7(),f=R.useMemo(()=>ON(t,e,c,i,r,"data"),[t,e,c,i,r]),h=R.useMemo(()=>ON(t,e,c,i,r,"assets"),[t,e,c,i,r]),g=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,S=!1;if(e.forEach(I=>{var D;let N=i.routes[I.route.id];!N||!N.hasLoader||(!f.some(V=>V.route.id===I.route.id)&&I.route.id in l&&((D=o[I.route.id])!=null&&D.shouldRevalidate)||N.hasClientLoader?S=!0:b.add(I.route.id))}),b.size===0)return[];let A=i7(t,s,"data");return S&&b.size>0&&A.searchParams.set("_routes",e.filter(I=>b.has(I.route.id)).map(I=>I.route.id).join(",")),[A.pathname+A.search]},[s,l,r,i,f,e,t,o]),v=R.useMemo(()=>l7(h,i),[h,i]),E=m7(h);return R.createElement(R.Fragment,null,g.map(b=>R.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),v.map(b=>R.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),E.map(({key:b,link:S})=>R.createElement("link",{key:b,nonce:n.nonce,...S})))}function y7(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var R4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{R4&&(window.__reactRouterVersion="7.8.2")}catch{}function v7({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=a8({window:n,v5Compat:!0}));let i=r.current,[o,s]=R.useState({action:i.action,location:i.location}),l=R.useCallback(c=>{R.startTransition(()=>s(c))},[s]);return R.useLayoutEffect(()=>i.listen(l),[i,l]),R.createElement(Y8,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var P4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,M4=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:l,target:c,to:f,preventScrollReset:h,viewTransition:g,...v},E){let{basename:b}=R.useContext(_o),S=typeof f=="string"&&P4.test(f),A,I=!1;if(typeof f=="string"&&S&&(A=f,R4))try{let k=new URL(window.location.href),$=f.startsWith("//")?new URL(k.protocol+f):new URL(f),F=Ws($.pathname,b);$.origin===k.origin&&F!=null?f=F+$.search+$.hash:I=!0}catch{Ji(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=k8(f,{relative:i}),[D,V,q]=h7(r,v),z=w7(f,{replace:s,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:g});function O(k){e&&e(k),k.defaultPrevented||z(k)}let L=R.createElement("a",{...v,...q,href:A||N,onClick:I||o?e:O,ref:y7(E,V),target:c,"data-discover":!S&&n==="render"?"true":void 0});return D&&!S?R.createElement(R.Fragment,null,L,R.createElement(p7,{page:N})):L});M4.displayName="Link";var _7=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:l,children:c,...f},h){let g=Dm(s,{relative:f.relative}),v=fs(),E=R.useContext(Q_),{navigator:b,basename:S}=R.useContext(_o),A=E!=null&&x7(g)&&l===!0,I=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,N=v.pathname,D=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(N=N.toLowerCase(),D=D?D.toLowerCase():null,I=I.toLowerCase()),D&&S&&(D=Ws(D,S)||D);const V=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let q=N===I||!i&&N.startsWith(I)&&N.charAt(V)==="/",z=D!=null&&(D===I||!i&&D.startsWith(I)&&D.charAt(I.length)==="/"),O={isActive:q,isPending:z,isTransitioning:A},L=q?e:void 0,k;typeof r=="function"?k=r(O):k=[r,q?"active":null,z?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let $=typeof o=="function"?o(O):o;return R.createElement(M4,{...f,"aria-current":L,className:k,ref:h,style:$,to:s,viewTransition:l},typeof c=="function"?c(O):c)});_7.displayName="NavLink";var T7=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=mv,action:l,onSubmit:c,relative:f,preventScrollReset:h,viewTransition:g,...v},E)=>{let b=A7(),S=C7(l,{relative:f}),A=s.toLowerCase()==="get"?"get":"post",I=typeof l=="string"&&P4.test(l),N=D=>{if(c&&c(D),D.defaultPrevented)return;D.preventDefault();let V=D.nativeEvent.submitter,q=(V==null?void 0:V.getAttribute("formmethod"))||s;b(V||D.currentTarget,{fetcherKey:e,method:q,navigate:n,replace:i,state:o,relative:f,preventScrollReset:h,viewTransition:g})};return R.createElement("form",{ref:E,method:A,action:S,onSubmit:r?c:N,...v,"data-discover":!I&&t==="render"?"true":void 0})});T7.displayName="Form";function E7(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function N4(t){let e=R.useContext(Ed);return tn(e,E7(t)),e}function w7(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let l=X_(),c=fs(),f=Dm(t,{relative:o});return R.useCallback(h=>{if(e7(h,e)){h.preventDefault();let g=n!==void 0?n:Jp(c)===Jp(f);l(t,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[c,l,f,n,r,e,t,i,o,s])}var b7=0,S7=()=>`__${String(++b7)}__`;function A7(){let{router:t}=N4("useSubmit"),{basename:e}=R.useContext(_o),n=G8();return R.useCallback(async(r,i={})=>{let{action:o,method:s,encType:l,formData:c,body:f}=r7(r,e);if(i.navigate===!1){let h=i.fetcherKey||S7();await t.fetch(h,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||s,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||s,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function C7(t,{relative:e}={}){let{basename:n}=R.useContext(_o),r=R.useContext(To);tn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Dm(t||".",{relative:e})},s=fs();if(t==null){o.search=s.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(g=>g).forEach(g=>l.append("index",g));let h=l.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:zs([n,o.pathname])),Jp(o)}function x7(t,{relative:e}={}){let n=R.useContext(E4);tn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=N4("useViewTransitionState"),i=Dm(t,{relative:e});if(!n.isTransitioning)return!1;let o=Ws(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Ws(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Vv(i.pathname,s)!=null||Vv(i.pathname,o)!=null}var I7=g4();const R7=()=>{};var LN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},P7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},k4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,h=o>>2,g=(o&3)<<4|l>>4;let v=(l&15)<<2|f>>6,E=f&63;c||(E=64,s||(v=64)),r.push(n[h],n[g],n[v],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(D4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):P7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||f==null||g==null)throw new M7;const v=o<<2|l>>4;if(r.push(v),f!==64){const E=l<<4&240|f>>2;if(r.push(E),g!==64){const b=f<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class M7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N7=function(t){const e=D4(t);return k4.encodeByteArray(e,!0)},Uv=function(t){return N7(t).replace(/\./g,"")},LC=function(t){try{return k4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!D7(n)||(t[n]=Fv(t[n],e[n]));return t}function D7(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7=()=>VC().__FIREBASE_DEFAULTS__,O7=()=>{if(typeof process>"u"||typeof LN>"u")return;const t=LN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},L7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LC(t[1]);return e&&JSON.parse(e)},e0=()=>{try{return R7()||k7()||O7()||L7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},O4=t=>{var e,n;return(n=(e=e0())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},L4=t=>{const e=O4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},UC=()=>{var t;return(t=e0())==null?void 0:t.config},V4=t=>{var e;return(e=e0())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function FC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Uv(JSON.stringify(n)),Uv(JSON.stringify(s)),""].join(".")}const Mp={};function U7(){const t={prod:[],emulator:[]};for(const e of Object.keys(Mp))Mp[e]?t.emulator.push(e):t.prod.push(e);return t}function F7(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let VN=!1;function BC(t,e){if(typeof window>"u"||typeof document>"u"||!Sl(window.location.host)||Mp[t]===e||Mp[t]||VN)return;Mp[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=U7().prod.length>0;function s(){const v=document.getElementById(r);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,E){v.setAttribute("width","24"),v.setAttribute("id",E),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{VN=!0,s()},v}function h(v,E){v.setAttribute("id",E),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=F7(r),E=n("text"),b=document.getElementById(E)||document.createElement("span"),S=n("learnmore"),A=document.getElementById(S)||document.createElement("a"),I=n("preprendIcon"),N=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const D=v.element;l(D),h(A,S);const V=f();c(N,I),D.append(N,b,A,V),document.body.appendChild(D)}o?(b.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function B7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function t0(){var e;const t=(e=e0())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function q7(){return typeof window<"u"||F4()}function F4(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function B4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function q4(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $4(){return!t0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z4(){return!t0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Qp(){try{return typeof indexedDB=="object"}catch{return!1}}function z7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7="FirebaseError";class Rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=H7,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ac.prototype.create)}}class ac{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?G7(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Rr(i,l,r)}}function G7(t,e){return t.replace(j7,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const j7=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function K7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ys(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(FN(o)&&FN(s)){if(!Ys(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function FN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ep(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function H4(t,e){const n=new W7(t,e);return n.subscribe.bind(n)}class W7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Y7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Nw),i.error===void 0&&(i.error=Nw),i.complete===void 0&&(i.complete=Nw);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Y7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class Qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J7=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new V7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X7(e))try{this.getOrInitializeService({instanceIdentifier:vu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=vu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vu){return this.instances.has(e)}getOptions(e=vu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vu){return this.component?this.component.multipleInstances?e:vu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Q7(t){return t===vu?void 0:t}function X7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new J7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=[];var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const j4={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},Z7=ot.INFO,ej={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},tj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=ej[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class n0{constructor(e){this.name=e,this._logLevel=Z7,this._logHandler=tj,this._userLogHandler=null,$C.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}function nj(t){$C.forEach(e=>{e.setLogLevel(t)})}function rj(t,e){for(const n of $C){let r=null;e&&e.level&&(r=j4[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,o,...s)=>{const l=s.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");o>=(r??i.logLevel)&&t({level:ot[o].toLowerCase(),message:l,args:s,type:i.name})}}}const ij=(t,e)=>e.some(n=>t instanceof n);let BN,qN;function oj(){return BN||(BN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sj(){return qN||(qN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K4=new WeakMap,US=new WeakMap,W4=new WeakMap,Dw=new WeakMap,zC=new WeakMap;function aj(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(il(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&K4.set(n,t)}).catch(()=>{}),zC.set(e,t),e}function lj(t){if(US.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});US.set(t,e)}let FS={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return US.get(t);if(e==="objectStoreNames")return t.objectStoreNames||W4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return il(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uj(t){FS=t(FS)}function cj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(kw(this),e,...n);return W4.set(r,e.sort?e.sort():[e]),il(r)}:sj().includes(t)?function(...e){return t.apply(kw(this),e),il(K4.get(this))}:function(...e){return il(t.apply(kw(this),e))}}function fj(t){return typeof t=="function"?cj(t):(t instanceof IDBTransaction&&lj(t),ij(t,oj())?new Proxy(t,FS):t)}function il(t){if(t instanceof IDBRequest)return aj(t);if(Dw.has(t))return Dw.get(t);const e=fj(t);return e!==t&&(Dw.set(t,e),zC.set(e,t)),e}const kw=t=>zC.get(t);function dj(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=il(s);return r&&s.addEventListener("upgradeneeded",c=>{r(il(s.result),c.oldVersion,c.newVersion,il(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const hj=["get","getKey","getAll","getAllKeys","count"],pj=["put","add","delete","clear"],Ow=new Map;function $N(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ow.get(e))return Ow.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=pj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||hj.includes(n)))return;const o=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&c.done]))[0]};return Ow.set(e,o),o}uj(t=>({...t,get:(e,n,r)=>$N(e,n)||t.get(e,n,r),has:(e,n)=>!!$N(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bv="@firebase/app",BS="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new n0("@firebase/app"),yj="@firebase/app-compat",vj="@firebase/analytics-compat",_j="@firebase/analytics",Tj="@firebase/app-check-compat",Ej="@firebase/app-check",wj="@firebase/auth",bj="@firebase/auth-compat",Sj="@firebase/database",Aj="@firebase/data-connect",Cj="@firebase/database-compat",xj="@firebase/functions",Ij="@firebase/functions-compat",Rj="@firebase/installations",Pj="@firebase/installations-compat",Mj="@firebase/messaging",Nj="@firebase/messaging-compat",Dj="@firebase/performance",kj="@firebase/performance-compat",Oj="@firebase/remote-config",Lj="@firebase/remote-config-compat",Vj="@firebase/storage",Uj="@firebase/storage-compat",Fj="@firebase/firestore",Bj="@firebase/ai",qj="@firebase/firestore-compat",$j="firebase",zj="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl="[DEFAULT]",Hj={[Bv]:"fire-core",[yj]:"fire-core-compat",[_j]:"fire-analytics",[vj]:"fire-analytics-compat",[Ej]:"fire-app-check",[Tj]:"fire-app-check-compat",[wj]:"fire-auth",[bj]:"fire-auth-compat",[Sj]:"fire-rtdb",[Aj]:"fire-data-connect",[Cj]:"fire-rtdb-compat",[xj]:"fire-fn",[Ij]:"fire-fn-compat",[Rj]:"fire-iid",[Pj]:"fire-iid-compat",[Mj]:"fire-fcm",[Nj]:"fire-fcm-compat",[Dj]:"fire-perf",[kj]:"fire-perf-compat",[Oj]:"fire-rc",[Lj]:"fire-rc-compat",[Vj]:"fire-gcs",[Uj]:"fire-gcs-compat",[Fj]:"fire-fst",[qj]:"fire-fst-compat",[Bj]:"fire-vertex","fire-js":"fire-js",[$j]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new Map,Bf=new Map,qf=new Map;function Xp(t,e){try{t.container.addComponent(e)}catch(n){Js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Y4(t,e){t.container.addOrOverwriteComponent(e)}function Qs(t){const e=t.name;if(qf.has(e))return Js.debug(`There were multiple attempts to register component ${e}.`),!1;qf.set(e,t);for(const n of dl.values())Xp(n,t);for(const n of Bf.values())Xp(n,t);return!0}function Sd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Gj(t,e,n=fl){Sd(t,e).clearInstance(n)}function HC(t){return t.options!==void 0}function J4(t){return HC(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Ht(t){return t==null?!1:t.settings!==void 0}function jj(){qf.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wi=new ac("app","Firebase",Kj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q4=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e){const n=LC(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(n).exp*1e3,o=new Date().getTime();i-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class Wj extends Q4{constructor(e,n,r,i){const o=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,s={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,s,i);else{const l=e;super(l.options,s,i)}this._serverConfig={automaticDataCollectionEnabled:o,...n},this._serverConfig.authIdToken&&zN(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&zN(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,bi(Bv,BS,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){jC(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw wi.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=zj;function GC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:fl,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw wi.create("bad-app-name",{appName:String(i)});if(n||(n=UC()),!n)throw wi.create("no-options");const o=dl.get(i);if(o){if(Ys(n,o.options)&&Ys(r,o.config))return o;throw wi.create("duplicate-app",{appName:i})}const s=new G4(i);for(const c of qf.values())s.addComponent(c);const l=new Q4(n,r,s);return dl.set(i,l),l}function Yj(t,e={}){if(q7()&&!F4())throw wi.create("invalid-server-app-environment");let n,r=e||{};if(t&&(HC(t)?n=t.options:J4(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=UC()),!n)throw wi.create("no-options");const i={...r,...n};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const o=h=>[...h].reduce((g,v)=>Math.imul(31,g)+v.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw wi.create("finalization-registry-not-supported",{});const s=""+o(JSON.stringify(i)),l=Bf.get(s);if(l)return l.incRefCount(r.releaseOnDeref),l;const c=new G4(s);for(const h of qf.values())c.addComponent(h);const f=new Wj(n,r,s,c);return Bf.set(s,f),f}function r0(t=fl){const e=dl.get(t);if(!e&&t===fl&&UC())return GC();if(!e)throw wi.create("no-app",{appName:t});return e}function Jj(){return Array.from(dl.values())}async function jC(t){let e=!1;const n=t.name;dl.has(n)?(e=!0,dl.delete(n)):Bf.has(n)&&t.decRefCount()<=0&&(Bf.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function bi(t,e,n){let r=Hj[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Js.warn(s.join(" "));return}Qs(new Qi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function X4(t,e){if(t!==null&&typeof t!="function")throw wi.create("invalid-log-argument");rj(t,e)}function Z4(t){nj(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj="firebase-heartbeat-database",Xj=1,Zp="firebase-heartbeat-store";let Lw=null;function eF(){return Lw||(Lw=dj(Qj,Xj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zp)}catch(n){console.warn(n)}}}}).catch(t=>{throw wi.create("idb-open",{originalErrorMessage:t.message})})),Lw}async function Zj(t){try{const n=(await eF()).transaction(Zp),r=await n.objectStore(Zp).get(tF(t));return await n.done,r}catch(e){if(e instanceof Rr)Js.warn(e.message);else{const n=wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Js.warn(n.message)}}}async function HN(t,e){try{const r=(await eF()).transaction(Zp,"readwrite");await r.objectStore(Zp).put(e,tF(t)),await r.done}catch(n){if(n instanceof Rr)Js.warn(n.message);else{const r=wi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Js.warn(r.message)}}}function tF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eK=1024,tK=30;class nK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=GN();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>tK){const s=oK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Js.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=GN(),{heartbeatsToSend:r,unsentEntries:i}=rK(this._heartbeatsCache.heartbeats),o=Uv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Js.warn(n),""}}}function GN(){return new Date().toISOString().substring(0,10)}function rK(t,e=eK){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),jN(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),jN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qp()?z7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Zj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return HN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return HN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jN(t){return Uv(JSON.stringify({version:2,heartbeats:t})).length}function oK(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(t){Qs(new Qi("platform-logger",e=>new mj(e),"PRIVATE")),Qs(new Qi("heartbeat",e=>new nK(e),"PRIVATE")),bi(Bv,BS,t),bi(Bv,BS,"esm2020"),bi("fire-js","")}sK("");const aK=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Rr,SDK_VERSION:oa,_DEFAULT_ENTRY_NAME:fl,_addComponent:Xp,_addOrOverwriteComponent:Y4,_apps:dl,_clearComponents:jj,_components:qf,_getProvider:Sd,_isFirebaseApp:HC,_isFirebaseServerApp:Ht,_isFirebaseServerAppSettings:J4,_registerComponent:Qs,_removeServiceInstance:Gj,_serverApps:Bf,deleteApp:jC,getApp:r0,getApps:Jj,initializeApp:GC,initializeServerApp:Yj,onLog:X4,registerVersion:bi,setLogLevel:Z4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lK{constructor(e,n){this._delegate=e,this.firebase=n,Xp(e,new Qi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),jC(this._delegate)))}_getService(e,n=fl){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=fl){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Xp(this._delegate,e)}_addOrOverwriteComponent(e){Y4(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},KN=new ac("app-compat","Firebase",uK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cK(t){const e={},n={__esModule:!0,initializeApp:o,app:i,registerVersion:bi,setLogLevel:Z4,onLog:X4,apps:null,SDK_VERSION:oa,INTERNAL:{registerComponent:l,removeApp:r,useAsService:c,modularAPIs:aK}};n.default=n,Object.defineProperty(n,"apps",{get:s});function r(f){delete e[f]}function i(f){if(f=f||fl,!UN(e,f))throw KN.create("no-app",{appName:f});return e[f]}i.App=t;function o(f,h={}){const g=GC(f,h);if(UN(e,g.name))return e[g.name];const v=new t(g,n);return e[g.name]=v,v}function s(){return Object.keys(e).map(f=>e[f])}function l(f){const h=f.name,g=h.replace("-compat","");if(Qs(f)&&f.type==="PUBLIC"){const v=(E=i())=>{if(typeof E[g]!="function")throw KN.create("invalid-app-argument",{appName:h});return E[g]()};f.serviceProps!==void 0&&Fv(v,f.serviceProps),n[g]=v,t.prototype[g]=function(...E){return this._getService.bind(this,h).apply(this,f.multipleInstances?E:[])}}return f.type==="PUBLIC"?n[g]:null}function c(f,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(){const t=cK(lK);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:nF,extendNamespace:e,createSubscribe:H4,ErrorFactory:ac,deepExtend:Fv};function e(n){Fv(t,n)}return t}const fK=nF();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new n0("@firebase/app-compat"),dK="@firebase/app-compat",hK="0.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pK(t){bi(dK,hK,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=VC();if(t.firebase!==void 0){WN.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&WN.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Al=fK;pK();var mK="firebase",gK="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Al.registerVersion(mK,gK,"app-compat");const tp={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},cf={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yK(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function rF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vK=yK,_K=rF,iF=new ac("auth","Firebase",rF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new n0("@firebase/auth");function TK(t,...e){qv.logLevel<=ot.WARN&&qv.warn(`Auth (${oa}): ${t}`,...e)}function yv(t,...e){qv.logLevel<=ot.ERROR&&qv.error(`Auth (${oa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,...e){throw WC(t,...e)}function qn(t,...e){return WC(t,...e)}function KC(t,e,n){const r={..._K(),[e]:n};return new ac("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return KC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ad(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&tr(t,"argument-error"),KC(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function WC(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return iF.create(t,...e)}function ye(t,e,...n){if(!t)throw WC(e,...n)}function Jo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yv(e),new Error(e)}function yo(t,e){t||Jo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function YC(){return YN()==="http:"||YN()==="https:"}function YN(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YC()||B4()||"connection"in navigator)?navigator.onLine:!0}function wK(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.shortDelay=e,this.longDelay=n,yo(n>e,"Short delay should be less than long delay!"),this.isMobile=B7()||qC()}get(){return EK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t,e){yo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AK=new km(3e4,6e4);function mn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function gn(t,e,n,r,i={}){return sF(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const l=bd({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...o};return $7()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Sl(t.emulatorConfig.host)&&(f.credentials="include"),oF.fetch()(await aF(t,t.config.apiHost,n,l),f)})}async function sF(t,e,n){t._canInitEmulator=!1;const r={...bK,...e};try{const i=new xK(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw wp(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const l=o.ok?s.errorMessage:s.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw wp(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw wp(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw wp(t,"user-disabled",s);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw KC(t,h,f);tr(t,h)}}catch(i){if(i instanceof Rr)throw i;tr(t,"network-request-failed",{message:String(i)})}}async function sa(t,e,n,r,i={}){const o=await gn(t,e,n,r,i);return"mfaPendingCredential"in o&&tr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function aF(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?JC(t.config,i):`${t.config.apiScheme}://${i}`;return SK.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function CK(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xK{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qn(this.auth,"network-request-failed")),AK.get())})}}function wp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t){return t!==void 0&&t.getResponse!==void 0}function QN(t){return t!==void 0&&t.enterprise!==void 0}class lF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CK(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IK(t){return(await gn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function uF(t,e){return gn(t,"GET","/v2/recaptchaConfig",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RK(t,e){return gn(t,"POST","/v1/accounts:delete",e)}async function PK(t,e){return gn(t,"POST","/v1/accounts:update",e)}async function $v(t,e){return gn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MK(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),i=i0(r);ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Np(Vw(i.auth_time)),issuedAtTime:Np(Vw(i.iat)),expirationTime:Np(Vw(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Vw(t){return Number(t)*1e3}function i0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yv("JWT malformed, contained fewer than 3 sections"),null;try{const i=LC(n);return i?JSON.parse(i):(yv("Failed to decode base64 JWT payload"),null)}catch(i){return yv("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function XN(t){const e=i0(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rr&&NK(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function NK({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Np(this.lastLoginAt),this.creationTime=Np(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tm(t){var g;const e=t.auth,n=await t.getIdToken(),r=await Xs(t,$v(e,{idToken:n}));ye(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(g=i.providerUserInfo)!=null&&g.length?cF(i.providerUserInfo):[],s=OK(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),f=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new qS(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function kK(t){const e=Ne(t);await tm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OK(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cF(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LK(t,e){const n=await sF(t,{},async()=>{const r=bd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await aF(t,i,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Sl(t.emulatorConfig.host)&&(c.credentials="include"),oF.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VK(t,e){return gn(t,"POST","/v2/accounts:revokeToken",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=XN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await LK(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new If;return r&&(ye(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ye(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new If,this.toJSON())}_performRefresh(){return Jo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ho{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new DK(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Xs(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return MK(this,e)}reload(){return kK(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ho({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ht(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await Xs(this,RK(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,f=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:E,providerData:b,stsTokenManager:S}=n;ye(g&&S,e,"internal-error");const A=If.fromJSON(this.name,S);ye(typeof g=="string",e,"internal-error"),Ka(r,e.name),Ka(i,e.name),ye(typeof v=="boolean",e,"internal-error"),ye(typeof E=="boolean",e,"internal-error"),Ka(o,e.name),Ka(s,e.name),Ka(l,e.name),Ka(c,e.name),Ka(f,e.name),Ka(h,e.name);const I=new ho({uid:g,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:E,photoURL:s,phoneNumber:o,tenantId:l,stsTokenManager:A,createdAt:f,lastLoginAt:h});return b&&Array.isArray(b)&&(I.providerData=b.map(N=>({...N}))),c&&(I._redirectEventId=c),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new If;i.updateFromServerResponse(n);const o=new ho({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await tm(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ye(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?cF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),l=new If;l.updateFromIdToken(r);const c=new ho({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new qS(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new Map;function _i(t){yo(t instanceof Function,"Expected a class definition");let e=ZN.get(t);return e?(yo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ZN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fF.type="NONE";const $f=fF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){return`firebase:${t}:${e}:${n}`}class Rf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Lu(this.userKey,i.apiKey,o),this.fullPersistenceKey=Lu("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $v(this.auth,{idToken:e}).catch(()=>{});return n?ho._fromGetAccountInfoResponse(this.auth,n,e):null}return ho._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Rf(_i($f),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||_i($f);const s=Lu(r,e.config.apiKey,e.name);let l=null;for(const f of n)try{const h=await f._get(s);if(h){let g;if(typeof h=="string"){const v=await $v(e,{idToken:h}).catch(()=>{});if(!v)break;g=await ho._fromGetAccountInfoResponse(e,v,h)}else g=ho._fromJSON(e,h);f!==o&&(l=g),o=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Rf(o,e,r):(o=c[0],l&&await o._set(s,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(s)}catch{}})),new Rf(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gF(e))return"Blackberry";if(yF(e))return"Webos";if(hF(e))return"Safari";if((e.includes("chrome/")||pF(e))&&!e.includes("edge/"))return"Chrome";if(Om(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function dF(t=on()){return/firefox\//i.test(t)}function hF(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pF(t=on()){return/crios\//i.test(t)}function mF(t=on()){return/iemobile/i.test(t)}function Om(t=on()){return/android/i.test(t)}function gF(t=on()){return/blackberry/i.test(t)}function yF(t=on()){return/webos/i.test(t)}function Lm(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UK(t=on()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function FK(t=on()){var e;return Lm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function BK(){return q4()&&document.documentMode===10}function vF(t=on()){return Lm(t)||Om(t)||yF(t)||gF(t)||/windows phone/i.test(t)||mF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(t,e=[]){let n;switch(t){case"Browser":n=eD(on());break;case"Worker":n=`${eD(on())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${oa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qK{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,l)=>{try{const c=e(o);s(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $K(t,e={}){return gn(t,"GET","/v2/passwordPolicy",mn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zK=6;class HK{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zK,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tD(this),this.idTokenSubscription=new tD(this),this.beforeStateQueue=new qK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_i(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Rf.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $v(this,{idToken:e}),r=await ho._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Ht(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===l)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wK()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ht(this.app))return Promise.reject(er(this));const n=e?Ne(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ht(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ht(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $K(this),n=new HK(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ac("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await VK(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_i(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Rf.create(this,[_i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_F(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ht(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&TK(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function sn(t){return Ne(t)}class tD{constructor(e){this.auth=e,this.observer=null,this.addObserver=H4(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jK(t){Vm=t}function QC(t){return Vm.loadJS(t)}function KK(){return Vm.recaptchaV2Script}function WK(){return Vm.recaptchaEnterpriseScript}function YK(){return Vm.gapiScript}function TF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JK=500,QK=6e4,By=1e12;class XK{constructor(e){this.auth=e,this.counter=By,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new tW(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||By;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||By;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||By;return(r=this._widgets.get(n))==null||r.execute(),""}}class ZK{constructor(){this.enterprise=new eW}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eW{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tW{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;ye(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=nW(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},QK)},JK))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function nW(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const rW="recaptcha-enterprise",Dp="NO_RECAPTCHA";class EF{constructor(e){this.type=rW,this.auth=sn(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,l)=>{uF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new lF(c);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,s(f.siteKey)}}).catch(c=>{l(c)})})}function i(o,s,l){const c=window.grecaptcha;QN(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(f=>{s(f)}).catch(()=>{s(Dp)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZK().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(l=>{if(!n&&QN(window.grecaptcha))i(l,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=WK();c.length!==0&&(c+=l),QC(c).then(()=>{i(l,o,s)}).catch(f=>{s(f)})}}).catch(l=>{s(l)})})}}async function np(t,e,n,r=!1,i=!1){const o=new EF(t);let s;if(i)s=Dp;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ol(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await np(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await np(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("PHONE_PROVIDER")){const l=await np(t,e,n);return r(t,l).catch(async c=>{var f;if(((f=t._getRecaptchaConfig())==null?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await np(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)})}else{const l=await np(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(i+" provider is not supported.")}async function iW(t){const e=sn(t),n=await uF(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new lF(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new EF(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oW(t,e){const n=Sd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Ys(o,e??{}))return i;tr(i,"already-initialized")}return n.initialize({options:e})}function sW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_i);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wF(t,e,n){const r=sn(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=bF(e),{host:s,port:l}=aW(e),c=l===null?"":`:${l}`,f={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Ys(f,r.config.emulator)&&Ys(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Sl(s)?(FC(`${o}//${s}${c}`),BC("Auth",!0)):i||lW()}function bF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function aW(t){const e=bF(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:nD(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:nD(s)}}}function nD(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jo("not implemented")}_getIdTokenResponse(e){return Jo("not implemented")}_linkToIdToken(e,n){return Jo("not implemented")}_getReauthenticationResolver(e){return Jo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SF(t,e){return gn(t,"POST","/v1/accounts:resetPassword",mn(t,e))}async function uW(t,e){return gn(t,"POST","/v1/accounts:update",e)}async function cW(t,e){return gn(t,"POST","/v1/accounts:signUp",e)}async function fW(t,e){return gn(t,"POST","/v1/accounts:update",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dW(t,e){return sa(t,"POST","/v1/accounts:signInWithPassword",mn(t,e))}async function o0(t,e){return gn(t,"POST","/v1/accounts:sendOobCode",mn(t,e))}async function hW(t,e){return o0(t,e)}async function pW(t,e){return o0(t,e)}async function mW(t,e){return o0(t,e)}async function gW(t,e){return o0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yW(t,e){return sa(t,"POST","/v1/accounts:signInWithEmailLink",mn(t,e))}async function vW(t,e){return sa(t,"POST","/v1/accounts:signInWithEmailLink",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends Cd{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new nm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new nm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ol(e,n,"signInWithPassword",dW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return yW(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ol(e,r,"signUpPassword",cW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vW(e,{idToken:n,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hs(t,e){return sa(t,"POST","/v1/accounts:signInWithIdp",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W="http://localhost";class os extends Cd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const s=new os(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hs(e,n)}buildRequest(){const e={requestUri:_W,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(t,e){return gn(t,"POST","/v1/accounts:sendVerificationCode",mn(t,e))}async function TW(t,e){return sa(t,"POST","/v1/accounts:signInWithPhoneNumber",mn(t,e))}async function EW(t,e){const n=await sa(t,"POST","/v1/accounts:signInWithPhoneNumber",mn(t,e));if(n.temporaryProof)throw wp(t,"account-exists-with-different-credential",n);return n}const wW={USER_NOT_FOUND:"user-not-found"};async function bW(t,e){const n={...e,operation:"REAUTH"};return sa(t,"POST","/v1/accounts:signInWithPhoneNumber",mn(t,n),wW)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends Cd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Vu({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Vu({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return TW(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return EW(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return bW(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!n&&!i&&!o?null:new Vu({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AW(t){const e=Sf(Ep(t)).link,n=e?Sf(Ep(e)).deep_link_id:null,r=Sf(Ep(t)).deep_link_id;return(r?Sf(Ep(r)).link:null)||r||n||e||t}class s0{constructor(e){const n=Sf(Ep(e)),r=n.apiKey??null,i=n.oobCode??null,o=SW(n.mode??null);ye(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=AW(e);try{return new s0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.providerId=Cl.PROVIDER_ID}static credential(e,n){return nm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=s0.parseLink(n);return ye(r,"argument-error"),nm._fromEmailAndCode(e,r.code,r.tenantId)}}Cl.PROVIDER_ID="password";Cl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends aa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Pf extends xd{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return ye("providerId"in n&&"signInMethod"in n,"argument-error"),os._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return ye(e.idToken||e.accessToken,"argument-error"),os._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Pf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Pf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:l}=e;if(!r&&!i&&!n&&!o||!l)return null;try{return new Pf(l)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends xd{constructor(){super("facebook.com")}static credential(e){return os._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ho.credential(e.oauthAccessToken)}catch{return null}}}Ho.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ho.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends xd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return os._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Go.credential(n,r)}catch{return null}}}Go.GOOGLE_SIGN_IN_METHOD="google.com";Go.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends xd{constructor(){super("github.com")}static credential(e){return os._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jo.credential(e.oauthAccessToken)}catch{return null}}}jo.GITHUB_SIGN_IN_METHOD="github.com";jo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW="http://localhost";class zf extends Cd{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hs(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=n;return!r||!i||!o||r!==i?null:new zf(r,o)}static _create(e,n){return new zf(e,n)}buildRequest(){return{requestUri:CW,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xW="saml.";class zv extends aa{constructor(e){ye(e.startsWith(xW),"argument-error"),super(e)}static credentialFromResult(e){return zv.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return zv.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=zf.fromJSON(e);return ye(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return zf._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends xd{constructor(){super("twitter.com")}static credential(e,n){return os._fromParams({providerId:Ko.PROVIDER_ID,signInMethod:Ko.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ko.credentialFromTaggedObject(e)}static credentialFromError(e){return Ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ko.credential(n,r)}catch{return null}}}Ko.TWITTER_SIGN_IN_METHOD="twitter.com";Ko.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AF(t,e){return sa(t,"POST","/v1/accounts:signUp",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await ho._fromIdTokenResponse(e,r,i),s=iD(r);return new Xi({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=iD(r);return new Xi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function iD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IW(t){var i;if(Ht(t.app))return Promise.reject(er(t));const e=sn(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new Xi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await AF(e,{returnSecureToken:!0}),r=await Xi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv extends Rr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Hv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Hv(e,n,r,i)}}function CF(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Hv._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RW(t,e){const n=Ne(t);await a0(!0,n,e);const{providerUserInfo:r}=await PK(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=xF(r||[]);return n.providerData=n.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function XC(t,e,n=!1){const r=await Xs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xi._forOperation(t,"link",r)}async function a0(t,e,n){await tm(e);const r=xF(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";ye(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IF(t,e,n=!1){const{auth:r}=t;if(Ht(r.app))return Promise.reject(er(r));const i="reauthenticate";try{const o=await Xs(t,CF(r,i,e,t),n);ye(o.idToken,r,"internal-error");const s=i0(o.idToken);ye(s,r,"internal-error");const{sub:l}=s;return ye(t.uid===l,r,"user-mismatch"),Xi._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&tr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e,n=!1){if(Ht(t.app))return Promise.reject(er(t));const r="signIn",i=await CF(t,r,e),o=await Xi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function l0(t,e){return RF(sn(t),e)}async function PF(t,e){const n=Ne(t);return await a0(!1,n,e.providerId),XC(n,e)}async function MF(t,e){return IF(Ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PW(t,e){return sa(t,"POST","/v1/accounts:signInWithCustomToken",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MW(t,e){if(Ht(t.app))return Promise.reject(er(t));const n=sn(t),r=await PW(n,{token:e,returnSecureToken:!0}),i=await Xi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?ZC._fromServerResponse(e,n):"totpInfo"in n?ex._fromServerResponse(e,n):tr(e,"internal-error")}}class ZC extends Um{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new ZC(n)}}class ex extends Um{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new ex(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e,n){var r;ye(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),ye(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),ye(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ye(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ye(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(t){const e=sn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NW(t,e,n){const r=sn(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&u0(r,i,n),await ol(r,i,"getOobCode",pW,"EMAIL_PASSWORD_PROVIDER")}async function DW(t,e,n){await SF(Ne(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tx(t),r})}async function kW(t,e){await fW(Ne(t),{oobCode:e})}async function NF(t,e){const n=Ne(t),r=await SF(n,{oobCode:e}),i=r.requestType;switch(ye(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ye(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ye(r.mfaInfo,n,"internal-error");default:ye(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Um._fromServerResponse(sn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function OW(t,e){const{data:n}=await NF(Ne(t),e);return n.email}async function LW(t,e,n){if(Ht(t.app))return Promise.reject(er(t));const r=sn(t),s=await ol(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AF,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&tx(t),c}),l=await Xi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(l.user),l}function DF(t,e,n){return Ht(t.app)?Promise.reject(er(t)):l0(Ne(t),Cl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tx(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VW(t,e,n){const r=sn(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,l){ye(l.handleCodeInApp,r,"argument-error"),l&&u0(r,s,l)}o(i,n),await ol(r,i,"getOobCode",mW,"EMAIL_PASSWORD_PROVIDER")}function UW(t,e){const n=s0.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function FW(t,e,n){if(Ht(t.app))return Promise.reject(er(t));const r=Ne(t),i=Cl.credentialWithLink(e,n||em());return ye(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),l0(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BW(t,e){return gn(t,"POST","/v1/accounts:createAuthUri",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qW(t,e){const n=YC()?em():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await BW(Ne(t),r);return i||[]}async function $W(t,e){const n=Ne(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&u0(n.auth,i,e);const{email:o}=await hW(n.auth,i);o!==t.email&&await t.reload()}async function zW(t,e,n){const r=Ne(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&u0(r.auth,o,n);const{email:s}=await gW(r.auth,o);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HW(t,e){return gn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GW(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ne(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Xs(r,HW(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function jW(t,e){const n=Ne(t);return Ht(n.auth.app)?Promise.reject(er(n.auth)):OF(n,e,null)}function kF(t,e){return OF(Ne(t),null,e)}async function OF(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await Xs(t,uW(r,o));await t._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KW(t){var i,o;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const s=(o=(i=i0(t.idToken))==null?void 0:i.firebase)==null?void 0:o.sign_in_provider;if(s){const l=s!=="anonymous"&&s!=="custom"?s:null;return new Mf(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new WW(r,n);case"github.com":return new YW(r,n);case"google.com":return new JW(r,n);case"twitter.com":return new QW(r,n,t.screenName||null);case"custom":case"anonymous":return new Mf(r,null);default:return new Mf(r,e,n)}}class Mf{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class LF extends Mf{constructor(e,n,r,i){super(e,n,r),this.username=i}}class WW extends Mf{constructor(e,n){super(e,"facebook.com",n)}}class YW extends LF{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class JW extends Mf{constructor(e,n){super(e,"google.com",n)}}class QW extends LF{constructor(e,n,r){super(e,"twitter.com",n,r)}}function XW(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:KW(n)}function ZW(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function eY(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function tY(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function nY(t){return Ne(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ru("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ru("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Ru._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return Ru._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=sn(e),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(l=>Um._fromServerResponse(r,l));ye(i.mfaPendingCredential,r,"internal-error");const s=Ru._fromMfaPendingCredential(i.mfaPendingCredential);return new nx(s,o,async l=>{const c=await l._process(r,s);delete i.mfaInfo,delete i.mfaPendingCredential;const f={...i,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const h=await Xi._fromIdTokenResponse(r,n.operationType,f);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return ye(n.user,r,"internal-error"),Xi._forOperation(n.user,n.operationType,f);default:tr(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function rY(t,e){var i;const n=Ne(t),r=e;return ye(e.customData.operationType,n,"argument-error"),ye((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),nx._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t,e){return gn(t,"POST","/v2/accounts/mfaEnrollment:start",mn(t,e))}function iY(t,e){return gn(t,"POST","/v2/accounts/mfaEnrollment:finalize",mn(t,e))}function oY(t,e){return gn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",mn(t,e))}class rx{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Um._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new rx(e)}async getSession(){return Ru._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),o=await Xs(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Xs(this.user,oY(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Uw=new WeakMap;function sY(t){const e=Ne(t);return Uw.has(e)||Uw.set(e,rx._fromUser(e)),Uw.get(e)}const Gv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gv,"1"),this.storage.removeItem(Gv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aY=1e3,lY=10;class UF extends VF{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);BK()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,lY):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},aY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UF.type="LOCAL";const c0=UF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF extends VF{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}FF.type="SESSION";const hl=FF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uY(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new f0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(s).map(async f=>f(n.origin,o)),c=await uY(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}f0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((l,c)=>{const f=Fm("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(v.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function fY(t){Mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function dY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hY(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function pY(){return ix()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="firebaseLocalStorageDb",mY=1,jv="firebaseLocalStorage",qF="fbase_key";class Bm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function d0(t,e){return t.transaction([jv],e?"readwrite":"readonly").objectStore(jv)}function gY(){const t=indexedDB.deleteDatabase(BF);return new Bm(t).toPromise()}function $S(){const t=indexedDB.open(BF,mY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jv,{keyPath:qF})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jv)?e(r):(r.close(),await gY(),e(await $S()))})})}async function sD(t,e,n){const r=d0(t,!0).put({[qF]:e,value:n});return new Bm(r).toPromise()}async function yY(t,e){const n=d0(t,!1).get(e),r=await new Bm(n).toPromise();return r===void 0?null:r.value}function aD(t,e){const n=d0(t,!0).delete(e);return new Bm(n).toPromise()}const vY=800,_Y=3;class $F{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $S(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_Y)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ix()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=f0._getInstance(pY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await dY(),!this.activeServiceWorker)return;this.sender=new cY(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $S();return await sD(e,Gv,"1"),await aD(e,Gv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sD(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>aD(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=d0(i,!1).getAll();return new Bm(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$F.type="LOCAL";const Hf=$F;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(t,e){return gn(t,"POST","/v2/accounts/mfaSignIn:start",mn(t,e))}function TY(t,e){return gn(t,"POST","/v2/accounts/mfaSignIn:finalize",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=TF("rcb"),EY=new km(3e4,6e4);class wY{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Mn().grecaptcha)!=null&&e.render)}load(e,n=""){return ye(bY(n),e,"argument-error"),this.shouldResolveImmediately(n)&&JN(Mn().grecaptcha)?Promise.resolve(Mn().grecaptcha):new Promise((r,i)=>{const o=Mn().setTimeout(()=>{i(qn(e,"network-request-failed"))},EY.get());Mn()[Fw]=()=>{Mn().clearTimeout(o),delete Mn()[Fw];const l=Mn().grecaptcha;if(!l||!JN(l)){i(qn(e,"internal-error"));return}const c=l.render;l.render=(f,h)=>{const g=c(f,h);return this.counter++,g},this.hostLanguage=n,r(l)};const s=`${KK()}?${bd({onload:Fw,render:"explicit",hl:n})}`;QC(s).catch(()=>{clearTimeout(o),i(qn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Mn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function bY(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class SY{async load(e){return new XK(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="recaptcha",AY={theme:"light",type:"image"};let CY=class{constructor(e,n,r={...AY}){this.parameters=r,this.type=kp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=sn(e),this.isInvisible=this.parameters.size==="invisible",ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;ye(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new SY:new wY,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Mn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ye(YC()&&!ix(),this.auth,"internal-error"),await xY(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await IK(this.auth);ye(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function xY(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Vu._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function IY(t,e,n){if(Ht(t.app))return Promise.reject(er(t));const r=sn(t),i=await h0(r,e,Ne(n));return new ox(i,o=>l0(r,o))}async function RY(t,e,n){const r=Ne(t);await a0(!1,r,"phone");const i=await h0(r.auth,e,Ne(n));return new ox(i,o=>PF(r,o))}async function PY(t,e,n){const r=Ne(t);if(Ht(r.auth.app))return Promise.reject(er(r.auth));const i=await h0(r.auth,e,Ne(n));return new ox(i,o=>MF(r,o))}async function h0(t,e,n){var r;if(!t._getRecaptchaConfig())try{await iW(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i){ye(o.type==="enroll",t,"internal-error");const s={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ol(t,s,"mfaSmsEnrollment",async(h,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===Dp){ye((n==null?void 0:n.type)===kp,h,"argument-error");const v=await Bw(h,g,n);return oD(h,v)}return oD(h,g)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{ye(o.type==="signin",t,"internal-error");const s=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;ye(s,t,"missing-multi-factor-info");const l={mfaPendingCredential:o.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ol(t,l,"mfaSmsSignIn",async(g,v)=>{if(v.phoneSignInInfo.captchaResponse===Dp){ye((n==null?void 0:n.type)===kp,g,"argument-error");const E=await Bw(g,v,n);return lD(g,E)}return lD(g,v)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ol(t,o,"sendVerificationCode",async(f,h)=>{if(h.captchaResponse===Dp){ye((n==null?void 0:n.type)===kp,f,"argument-error");const g=await Bw(f,h,n);return rD(f,g)}return rD(f,h)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{n==null||n._reset()}}async function MY(t,e){const n=Ne(t);if(Ht(n.auth.app))return Promise.reject(er(n.auth));await XC(n,e)}async function Bw(t,e,n){ye(n.type===kp,t,"argument-error");const r=await n.verify();ye(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const o=i.phoneEnrollmentInfo.phoneNumber,s=i.phoneEnrollmentInfo.captchaResponse,l=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:s,clientType:l,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const o=i.phoneSignInInfo.captchaResponse,s=i.phoneSignInInfo.clientType,l=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:s,recaptchaVersion:l}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu=class vv{constructor(e){this.providerId=vv.PROVIDER_ID,this.auth=sn(e)}verifyPhoneNumber(e,n){return h0(this.auth,e,Ne(n))}static credential(e,n){return Vu._fromVerification(e,n)}static credentialFromResult(e){const n=e;return vv.credentialFromTaggedObject(n)}static credentialFromError(e){return vv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Vu._fromTokenResponse(n,r):null}};Hu.PROVIDER_ID="phone";Hu.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,e){return e?_i(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx extends Cd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function NY(t){return RF(t.auth,new sx(t),t.bypassAuthState)}function DY(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),IF(n,new sx(t),t.bypassAuthState)}async function kY(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),XC(n,new sx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:l}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NY;case"linkViaPopup":case"linkViaRedirect":return kY;case"reauthViaPopup":case"reauthViaRedirect":return DY;default:tr(this.auth,"internal-error")}}resolve(e){yo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OY=new km(2e3,1e4);async function LY(t,e,n){if(Ht(t.app))return Promise.reject(qn(t,"operation-not-supported-in-this-environment"));const r=sn(t);Ad(t,e,aa);const i=lc(r,n);return new Fs(r,"signInViaPopup",e,i).executeNotNull()}async function VY(t,e,n){const r=Ne(t);if(Ht(r.auth.app))return Promise.reject(qn(r.auth,"operation-not-supported-in-this-environment"));Ad(r.auth,e,aa);const i=lc(r.auth,n);return new Fs(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function UY(t,e,n){const r=Ne(t);Ad(r.auth,e,aa);const i=lc(r.auth,n);return new Fs(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Fs extends zF{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){yo(this.filter.length===1,"Popup operations only handle one event");const e=Fm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OY.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FY="pendingRedirect",Op=new Map;class BY extends zF{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Op.get(this.auth._key());if(!e){try{const r=await qY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Op.set(this.auth._key(),e)}return this.bypassAuthState||Op.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qY(t,e){const n=GF(e),r=HF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function ax(t,e){return HF(t)._set(GF(e),"true")}function $Y(){Op.clear()}function lx(t,e){Op.set(t._key(),e)}function HF(t){return _i(t._redirectPersistence)}function GF(t){return Lu(FY,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zY(t,e,n){return HY(t,e,n)}async function HY(t,e,n){if(Ht(t.app))return Promise.reject(er(t));const r=sn(t);Ad(t,e,aa),await r._initializationPromise;const i=lc(r,n);return await ax(i,r),i._openRedirect(r,e,"signInViaRedirect")}function GY(t,e,n){return jY(t,e,n)}async function jY(t,e,n){const r=Ne(t);if(Ad(r.auth,e,aa),Ht(r.auth.app))return Promise.reject(er(r.auth));await r.auth._initializationPromise;const i=lc(r.auth,n);await ax(i,r.auth);const o=await jF(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function KY(t,e,n){return WY(t,e,n)}async function WY(t,e,n){const r=Ne(t);Ad(r.auth,e,aa),await r.auth._initializationPromise;const i=lc(r.auth,n);await a0(!1,r,e.providerId),await ax(i,r.auth);const o=await jF(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function YY(t,e){return await sn(t)._initializationPromise,p0(t,e,!1)}async function p0(t,e,n=!1){if(Ht(t.app))return Promise.reject(er(t));const r=sn(t),i=lc(r,e),s=await new BY(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function jF(t){const e=Fm(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JY=600*1e3;class KF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WF(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JY&&this.cachedEventUids.clear(),this.cachedEventUids.has(uD(e))}saveEventToCache(e){this.cachedEventUids.add(uD(e)),this.lastProcessedEventTime=Date.now()}}function uD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YF(t,e={}){return gn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZY=/^https?/;async function eJ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YF(t);for(const n of e)try{if(tJ(n))return}catch{}tr(t,"unauthorized-domain")}function tJ(t){const e=em(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!ZY.test(n))return!1;if(XY.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nJ=new km(3e4,6e4);function cD(){const t=Mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rJ(t){return new Promise((e,n)=>{var i,o,s;function r(){cD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cD(),n(qn(t,"network-request-failed"))},timeout:nJ.get()})}if((o=(i=Mn().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((s=Mn().gapi)!=null&&s.load)r();else{const l=TF("iframefcb");return Mn()[l]=()=>{gapi.load?r():n(qn(t,"network-request-failed"))},QC(`${YK()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw _v=null,e})}let _v=null;function iJ(t){return _v=_v||rJ(t),_v}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oJ=new km(5e3,15e3),sJ="__/auth/iframe",aJ="emulator/auth/iframe",lJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cJ(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?JC(e,aJ):`https://${t.config.authDomain}/${sJ}`,r={apiKey:e.apiKey,appName:t.name,v:oa},i=uJ.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${bd(r).slice(1)}`}async function fJ(t){const e=await iJ(t),n=Mn().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:cJ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lJ,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=qn(t,"network-request-failed"),l=Mn().setTimeout(()=>{o(s)},oJ.get());function c(){Mn().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hJ=500,pJ=600,mJ="_blank",gJ="http://localhost";class fD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yJ(t,e,n,r=hJ,i=pJ){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...dJ,width:r.toString(),height:i.toString(),top:o,left:s},f=on().toLowerCase();n&&(l=pF(f)?mJ:n),dF(f)&&(e=e||gJ,c.scrollbars="yes");const h=Object.entries(c).reduce((v,[E,b])=>`${v}${E}=${b},`,"");if(FK(f)&&l!=="_self")return vJ(e||"",l),new fD(null);const g=window.open(e||"",l,h);ye(g,t,"popup-blocked");try{g.focus()}catch{}return new fD(g)}function vJ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _J="__/auth/handler",TJ="emulator/auth/handler",EJ=encodeURIComponent("fac");async function zS(t,e,n,r,i,o){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:oa,eventId:i};if(e instanceof aa){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",K7(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries(o||{}))s[h]=g}if(e instanceof xd){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),f=c?`#${EJ}=${encodeURIComponent(c)}`:"";return`${wJ(t)}?${bd(l).slice(1)}${f}`}function wJ({config:t}){return t.emulator?JC(t,TJ):`https://${t.authDomain}/${_J}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="webStorageSupport";class bJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hl,this._completeRedirectFn=p0,this._overrideRedirectResult=lx}async _openPopup(e,n,r,i){var s;yo((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await zS(e,n,r,em(),i);return yJ(e,o,Fm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await zS(e,n,r,em(),i);return fY(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(yo(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fJ(e),r=new KF(e);return n.register("authEvent",i=>(ye(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qw,{type:qw},i=>{var s;const o=(s=i==null?void 0:i[0])==null?void 0:s[qw];o!==void 0&&n(!!o),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eJ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vF()||hF()||Lm()}}const JF=bJ;class SJ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Jo("unexpected MultiFactorSessionType")}}}class ux extends SJ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ux(e)}_finalizeEnroll(e,n,r){return iY(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return TY(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class QF{constructor(){}static assertion(e){return ux._fromCredential(e)}}QF.FACTOR_ID="phone";var dD="@firebase/auth",hD="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xJ(t){Qs(new Qi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=r.options;ye(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_F(t)},f=new GK(r,i,o,c);return sW(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qs(new Qi("auth-internal",e=>{const n=sn(e.getProvider("auth").getImmediate());return(r=>new AJ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bi(dD,hD,CJ(t)),bi(dD,hD,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IJ=300,RJ=V4("authIdTokenMaxAge")||IJ;let pD=null;const PJ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RJ)return;const i=n==null?void 0:n.token;pD!==i&&(pD=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function MJ(t=r0()){const e=Sd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oW(t,{popupRedirectResolver:JF,persistence:[Hf,c0,hl]}),r=V4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=PJ(o.toString());eY(n,s,()=>s(n.currentUser)),ZW(n,l=>s(l))}}const i=O4("auth");return i&&wF(n,`http://${i}`),n}function NJ(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}jK({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=qn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",NJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xJ("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ=2e3;async function kJ(t,e,n){const{BuildInfo:r}=Gu();yo(e.sessionId,"AuthEvent did not contain a session ID");const i=await FJ(e.sessionId),o={};return Lm()?o.ibi=r.packageName:Om()?o.apn=r.packageName:tr(t,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=i,zS(t,n,e.type,void 0,e.eventId??void 0,o)}async function OJ(t){const{BuildInfo:e}=Gu(),n={};Lm()?n.iosBundleId=e.packageName:Om()?n.androidPackageName=e.packageName:tr(t,"operation-not-supported-in-this-environment"),await YF(t,n)}function LJ(t){const{cordova:e}=Gu();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,UK()?"_blank":"_system","location=yes"),n(i)})})}async function VJ(t,e,n){const{cordova:r}=Gu();let i=()=>{};try{await new Promise((o,s)=>{let l=null;function c(){var v;o();const g=(v=r.plugins.browsertab)==null?void 0:v.close;typeof g=="function"&&g(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function f(){l||(l=window.setTimeout(()=>{s(qn(t,"redirect-cancelled-by-user"))},DJ))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&f()}e.addPassiveListener(c),document.addEventListener("resume",f,!1),Om()&&document.addEventListener("visibilitychange",h,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",f,!1),document.removeEventListener("visibilitychange",h,!1),l&&window.clearTimeout(l)}})}finally{i()}}function UJ(t){var n,r,i,o,s,l,c,f,h,g;const e=Gu();ye(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ye(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ye(typeof((s=(o=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:o.browsertab)==null?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye(typeof((f=(c=(l=e==null?void 0:e.cordova)==null?void 0:l.plugins)==null?void 0:c.browsertab)==null?void 0:f.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye(typeof((g=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:g.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function FJ(t){const e=BJ(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function BJ(t){if(yo(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qJ=20;class $J extends KF{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function zJ(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:jJ(),postBody:null,tenantId:t.tenantId,error:qn(t,"no-auth-event")}}function HJ(t,e){return HS()._set(GS(t),e)}async function mD(t){const e=await HS()._get(GS(t));return e&&await HS()._remove(GS(t)),e}function GJ(t,e){var r,i;const n=WJ(e);if(n.includes("/__/auth/callback")){const o=Tv(n),s=o.firebaseError?KJ(decodeURIComponent(o.firebaseError)):null,l=(i=(r=s==null?void 0:s.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],c=l?qn(l):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function jJ(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<qJ;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function HS(){return _i(c0)}function GS(t){return Lu("authEvent",t.config.apiKey,t.name)}function KJ(t){try{return JSON.parse(t)}catch{return null}}function WJ(t){const e=Tv(t),n=e.link?decodeURIComponent(e.link):void 0,r=Tv(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Tv(i).link||i||r||n||t}function Tv(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Sf(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YJ=500;class JJ{constructor(){this._redirectPersistence=hl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=p0,this._overrideRedirectResult=lx}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new $J(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){tr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){UJ(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),$Y(),await this._originValidation(e);const s=zJ(e,r,i);await HJ(e,s);const l=await kJ(e,s,n),c=await LJ(l);return VJ(e,o,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OJ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:o}=Gu(),s=setTimeout(async()=>{await mD(e),n.onEvent(gD())},YJ),l=async h=>{clearTimeout(s);const g=await mD(e);let v=null;g&&(h!=null&&h.url)&&(v=GJ(g,h.url)),n.onEvent(v||gD())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,l);const c=i,f=`${o.packageName.toLowerCase()}://`;Gu().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(f)&&l({url:h}),typeof c=="function")try{c(h)}catch(g){console.error(g)}}}}const QJ=JJ;function gD(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:qn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XJ(t,e){sn(t)._logFramework(e)}var ZJ="@firebase/auth-compat",eQ="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tQ=1e3;function Lp(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function nQ(){return Lp()==="http:"||Lp()==="https:"}function XF(t=on()){return!!((Lp()==="file:"||Lp()==="ionic:"||Lp()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function rQ(){return qC()||t0()}function iQ(){return q4()&&(document==null?void 0:document.documentMode)===11}function oQ(t=on()){return/Edge\/\d+/.test(t)}function sQ(t=on()){return iQ()||oQ(t)}function ZF(){try{const t=self.localStorage,e=Fm();if(t)return t.setItem(e,"1"),t.removeItem(e),sQ()?Qp():!0}catch{return cx()&&Qp()}return!1}function cx(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function $w(){return(nQ()||B4()||XF())&&!rQ()&&ZF()&&!cx()}function eB(){return XF()&&typeof document<"u"}async function aQ(){return eB()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},tQ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function lQ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi={LOCAL:"local",NONE:"none",SESSION:"session"},rp=ye,tB="persistence";function uQ(t,e){if(rp(Object.values(yi).includes(e),t,"invalid-persistence-type"),qC()){rp(e!==yi.SESSION,t,"unsupported-persistence-type");return}if(t0()){rp(e===yi.NONE,t,"unsupported-persistence-type");return}if(cx()){rp(e===yi.NONE||e===yi.LOCAL&&Qp(),t,"unsupported-persistence-type");return}rp(e===yi.NONE||ZF(),t,"unsupported-persistence-type")}async function jS(t){await t._initializationPromise;const e=nB(),n=Lu(tB,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function cQ(t,e){const n=nB();if(!n)return[];const r=Lu(tB,t,e);switch(n.getItem(r)){case yi.NONE:return[$f];case yi.LOCAL:return[Hf,hl];case yi.SESSION:return[hl];default:return[]}}function nB(){var t;try{return((t=lQ())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fQ=ye;class tl{constructor(){this.browserResolver=_i(JF),this.cordovaResolver=_i(QJ),this.underlyingResolver=null,this._redirectPersistence=hl,this._completeRedirectFn=p0,this._overrideRedirectResult=lx}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return eB()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fQ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await aQ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(t){return t.unwrap()}function dQ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hQ(t){return iB(t)}function pQ(t,e){var r;const n=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new mQ(t,rY(t,e))}else if(n){const i=iB(e),o=e;i&&(o.credential=i,o.tenantId=n.tenantId||void 0,o.email=n.email||void 0,o.phoneNumber=n.phoneNumber||void 0)}}function iB(t){const{_tokenResponse:e}=t instanceof Rr?t.customData:t;if(!e)return null;if(!(t instanceof Rr)&&"temporaryProof"in e&&"phoneNumber"in e)return Hu.credentialFromResult(t);const n=e.providerId;if(!n||n===tp.PASSWORD)return null;let r;switch(n){case tp.GOOGLE:r=Go;break;case tp.FACEBOOK:r=Ho;break;case tp.GITHUB:r=jo;break;case tp.TWITTER:r=Ko;break;default:const{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:s,pendingToken:l,nonce:c}=e;return!o&&!s&&!i&&!l?null:l?n.startsWith("saml.")?zf._create(n,l):os._fromParams({providerId:n,signInMethod:n,pendingToken:l,idToken:i,accessToken:o}):new Pf(n).credential({idToken:i,accessToken:o,rawNonce:c})}return t instanceof Rr?r.credentialFromError(t):r.credentialFromResult(t)}function Xr(t,e){return e.catch(n=>{throw n instanceof Rr&&pQ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:hQ(n),additionalUserInfo:XW(n),user:m0.getOrCreate(i)}})}async function KS(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Xr(t,n.confirm(r))}}class mQ{constructor(e,n){this.resolver=n,this.auth=dQ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Xr(rB(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m0=class bp{constructor(e){this._delegate=e,this.multiFactor=sY(e)}static getOrCreate(e){return bp.USER_MAP.has(e)||bp.USER_MAP.set(e,new bp(e)),bp.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Xr(this.auth,PF(this._delegate,e))}async linkWithPhoneNumber(e,n){return KS(this.auth,RY(this._delegate,e,n))}async linkWithPopup(e){return Xr(this.auth,UY(this._delegate,e,tl))}async linkWithRedirect(e){return await jS(sn(this.auth)),KY(this._delegate,e,tl)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Xr(this.auth,MF(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return KS(this.auth,PY(this._delegate,e,n))}reauthenticateWithPopup(e){return Xr(this.auth,VY(this._delegate,e,tl))}async reauthenticateWithRedirect(e){return await jS(sn(this.auth)),GY(this._delegate,e,tl)}sendEmailVerification(e){return $W(this._delegate,e)}async unlink(e){return await RW(this._delegate,e),this}updateEmail(e){return jW(this._delegate,e)}updatePassword(e){return kF(this._delegate,e)}updatePhoneNumber(e){return MY(this._delegate,e)}updateProfile(e){return GW(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return zW(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};m0.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=ye;class WS{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;ip(r,"invalid-api-key",{appName:e.name}),ip(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?tl:void 0;this._delegate=n.initialize({options:{persistence:gQ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(vK),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?m0.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){wF(this._delegate,e,n)}applyActionCode(e){return kW(this._delegate,e)}checkActionCode(e){return NF(this._delegate,e)}confirmPasswordReset(e,n){return DW(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Xr(this._delegate,LW(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return qW(this._delegate,e)}isSignInWithEmailLink(e){return UW(this._delegate,e)}async getRedirectResult(){ip($w(),this._delegate,"operation-not-supported-in-this-environment");const e=await YY(this._delegate,tl);return e?Xr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){XJ(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:o,complete:s}=yD(e,n,r);return this._delegate.onAuthStateChanged(i,o,s)}onIdTokenChanged(e,n,r){const{next:i,error:o,complete:s}=yD(e,n,r);return this._delegate.onIdTokenChanged(i,o,s)}sendSignInLinkToEmail(e,n){return VW(this._delegate,e,n)}sendPasswordResetEmail(e,n){return NW(this._delegate,e,n||void 0)}async setPersistence(e){uQ(this._delegate,e);let n;switch(e){case yi.SESSION:n=hl;break;case yi.LOCAL:n=await _i(Hf)._isAvailable()?Hf:c0;break;case yi.NONE:n=$f;break;default:return tr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Xr(this._delegate,IW(this._delegate))}signInWithCredential(e){return Xr(this._delegate,l0(this._delegate,e))}signInWithCustomToken(e){return Xr(this._delegate,MW(this._delegate,e))}signInWithEmailAndPassword(e,n){return Xr(this._delegate,DF(this._delegate,e,n))}signInWithEmailLink(e,n){return Xr(this._delegate,FW(this._delegate,e,n))}signInWithPhoneNumber(e,n){return KS(this._delegate,IY(this._delegate,e,n))}async signInWithPopup(e){return ip($w(),this._delegate,"operation-not-supported-in-this-environment"),Xr(this._delegate,LY(this._delegate,e,tl))}async signInWithRedirect(e){return ip($w(),this._delegate,"operation-not-supported-in-this-environment"),await jS(this._delegate),zY(this._delegate,e,tl)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return OW(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}WS.Persistence=yi;function yD(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:s=>i(s&&m0.getOrCreate(s)),error:e,complete:n}}function gQ(t,e){const n=cQ(t,e);if(typeof self<"u"&&!n.includes(Hf)&&n.push(Hf),typeof window<"u")for(const r of[c0,hl])n.includes(r)||n.push(r);return n.includes($f)||n.push($f),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{static credential(e,n){return Hu.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new Hu(rB(Al.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}fx.PHONE_SIGN_IN_METHOD=Hu.PHONE_SIGN_IN_METHOD;fx.PROVIDER_ID=Hu.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yQ=ye;class vQ{constructor(e,n,r=Al.app()){var i;yQ((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new CY(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Q="auth-compat";function TQ(t){t.INTERNAL.registerComponent(new Qi(_Q,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new WS(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:cf.EMAIL_SIGNIN,PASSWORD_RESET:cf.PASSWORD_RESET,RECOVER_EMAIL:cf.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:cf.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:cf.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:cf.VERIFY_EMAIL}},EmailAuthProvider:Cl,FacebookAuthProvider:Ho,GithubAuthProvider:jo,GoogleAuthProvider:Go,OAuthProvider:Pf,SAMLAuthProvider:zv,PhoneAuthProvider:fx,PhoneMultiFactorGenerator:QF,RecaptchaVerifier:vQ,TwitterAuthProvider:Ko,Auth:WS,AuthCredential:Cd,Error:Rr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(ZJ,eQ)}TQ(Al);var vD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sl,oB;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,L){function k(){}k.prototype=L.prototype,O.D=L.prototype,O.prototype=new k,O.prototype.constructor=O,O.C=function($,F,G){for(var H=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)H[Ae-2]=arguments[Ae];return L.prototype[F].apply($,H)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(O,L,k){k||(k=0);var $=Array(16);if(typeof L=="string")for(var F=0;16>F;++F)$[F]=L.charCodeAt(k++)|L.charCodeAt(k++)<<8|L.charCodeAt(k++)<<16|L.charCodeAt(k++)<<24;else for(F=0;16>F;++F)$[F]=L[k++]|L[k++]<<8|L[k++]<<16|L[k++]<<24;L=O.g[0],k=O.g[1],F=O.g[2];var G=O.g[3],H=L+(G^k&(F^G))+$[0]+3614090360&4294967295;L=k+(H<<7&4294967295|H>>>25),H=G+(F^L&(k^F))+$[1]+3905402710&4294967295,G=L+(H<<12&4294967295|H>>>20),H=F+(k^G&(L^k))+$[2]+606105819&4294967295,F=G+(H<<17&4294967295|H>>>15),H=k+(L^F&(G^L))+$[3]+3250441966&4294967295,k=F+(H<<22&4294967295|H>>>10),H=L+(G^k&(F^G))+$[4]+4118548399&4294967295,L=k+(H<<7&4294967295|H>>>25),H=G+(F^L&(k^F))+$[5]+1200080426&4294967295,G=L+(H<<12&4294967295|H>>>20),H=F+(k^G&(L^k))+$[6]+2821735955&4294967295,F=G+(H<<17&4294967295|H>>>15),H=k+(L^F&(G^L))+$[7]+4249261313&4294967295,k=F+(H<<22&4294967295|H>>>10),H=L+(G^k&(F^G))+$[8]+1770035416&4294967295,L=k+(H<<7&4294967295|H>>>25),H=G+(F^L&(k^F))+$[9]+2336552879&4294967295,G=L+(H<<12&4294967295|H>>>20),H=F+(k^G&(L^k))+$[10]+4294925233&4294967295,F=G+(H<<17&4294967295|H>>>15),H=k+(L^F&(G^L))+$[11]+2304563134&4294967295,k=F+(H<<22&4294967295|H>>>10),H=L+(G^k&(F^G))+$[12]+1804603682&4294967295,L=k+(H<<7&4294967295|H>>>25),H=G+(F^L&(k^F))+$[13]+4254626195&4294967295,G=L+(H<<12&4294967295|H>>>20),H=F+(k^G&(L^k))+$[14]+2792965006&4294967295,F=G+(H<<17&4294967295|H>>>15),H=k+(L^F&(G^L))+$[15]+1236535329&4294967295,k=F+(H<<22&4294967295|H>>>10),H=L+(F^G&(k^F))+$[1]+4129170786&4294967295,L=k+(H<<5&4294967295|H>>>27),H=G+(k^F&(L^k))+$[6]+3225465664&4294967295,G=L+(H<<9&4294967295|H>>>23),H=F+(L^k&(G^L))+$[11]+643717713&4294967295,F=G+(H<<14&4294967295|H>>>18),H=k+(G^L&(F^G))+$[0]+3921069994&4294967295,k=F+(H<<20&4294967295|H>>>12),H=L+(F^G&(k^F))+$[5]+3593408605&4294967295,L=k+(H<<5&4294967295|H>>>27),H=G+(k^F&(L^k))+$[10]+38016083&4294967295,G=L+(H<<9&4294967295|H>>>23),H=F+(L^k&(G^L))+$[15]+3634488961&4294967295,F=G+(H<<14&4294967295|H>>>18),H=k+(G^L&(F^G))+$[4]+3889429448&4294967295,k=F+(H<<20&4294967295|H>>>12),H=L+(F^G&(k^F))+$[9]+568446438&4294967295,L=k+(H<<5&4294967295|H>>>27),H=G+(k^F&(L^k))+$[14]+3275163606&4294967295,G=L+(H<<9&4294967295|H>>>23),H=F+(L^k&(G^L))+$[3]+4107603335&4294967295,F=G+(H<<14&4294967295|H>>>18),H=k+(G^L&(F^G))+$[8]+1163531501&4294967295,k=F+(H<<20&4294967295|H>>>12),H=L+(F^G&(k^F))+$[13]+2850285829&4294967295,L=k+(H<<5&4294967295|H>>>27),H=G+(k^F&(L^k))+$[2]+4243563512&4294967295,G=L+(H<<9&4294967295|H>>>23),H=F+(L^k&(G^L))+$[7]+1735328473&4294967295,F=G+(H<<14&4294967295|H>>>18),H=k+(G^L&(F^G))+$[12]+2368359562&4294967295,k=F+(H<<20&4294967295|H>>>12),H=L+(k^F^G)+$[5]+4294588738&4294967295,L=k+(H<<4&4294967295|H>>>28),H=G+(L^k^F)+$[8]+2272392833&4294967295,G=L+(H<<11&4294967295|H>>>21),H=F+(G^L^k)+$[11]+1839030562&4294967295,F=G+(H<<16&4294967295|H>>>16),H=k+(F^G^L)+$[14]+4259657740&4294967295,k=F+(H<<23&4294967295|H>>>9),H=L+(k^F^G)+$[1]+2763975236&4294967295,L=k+(H<<4&4294967295|H>>>28),H=G+(L^k^F)+$[4]+1272893353&4294967295,G=L+(H<<11&4294967295|H>>>21),H=F+(G^L^k)+$[7]+4139469664&4294967295,F=G+(H<<16&4294967295|H>>>16),H=k+(F^G^L)+$[10]+3200236656&4294967295,k=F+(H<<23&4294967295|H>>>9),H=L+(k^F^G)+$[13]+681279174&4294967295,L=k+(H<<4&4294967295|H>>>28),H=G+(L^k^F)+$[0]+3936430074&4294967295,G=L+(H<<11&4294967295|H>>>21),H=F+(G^L^k)+$[3]+3572445317&4294967295,F=G+(H<<16&4294967295|H>>>16),H=k+(F^G^L)+$[6]+76029189&4294967295,k=F+(H<<23&4294967295|H>>>9),H=L+(k^F^G)+$[9]+3654602809&4294967295,L=k+(H<<4&4294967295|H>>>28),H=G+(L^k^F)+$[12]+3873151461&4294967295,G=L+(H<<11&4294967295|H>>>21),H=F+(G^L^k)+$[15]+530742520&4294967295,F=G+(H<<16&4294967295|H>>>16),H=k+(F^G^L)+$[2]+3299628645&4294967295,k=F+(H<<23&4294967295|H>>>9),H=L+(F^(k|~G))+$[0]+4096336452&4294967295,L=k+(H<<6&4294967295|H>>>26),H=G+(k^(L|~F))+$[7]+1126891415&4294967295,G=L+(H<<10&4294967295|H>>>22),H=F+(L^(G|~k))+$[14]+2878612391&4294967295,F=G+(H<<15&4294967295|H>>>17),H=k+(G^(F|~L))+$[5]+4237533241&4294967295,k=F+(H<<21&4294967295|H>>>11),H=L+(F^(k|~G))+$[12]+1700485571&4294967295,L=k+(H<<6&4294967295|H>>>26),H=G+(k^(L|~F))+$[3]+2399980690&4294967295,G=L+(H<<10&4294967295|H>>>22),H=F+(L^(G|~k))+$[10]+4293915773&4294967295,F=G+(H<<15&4294967295|H>>>17),H=k+(G^(F|~L))+$[1]+2240044497&4294967295,k=F+(H<<21&4294967295|H>>>11),H=L+(F^(k|~G))+$[8]+1873313359&4294967295,L=k+(H<<6&4294967295|H>>>26),H=G+(k^(L|~F))+$[15]+4264355552&4294967295,G=L+(H<<10&4294967295|H>>>22),H=F+(L^(G|~k))+$[6]+2734768916&4294967295,F=G+(H<<15&4294967295|H>>>17),H=k+(G^(F|~L))+$[13]+1309151649&4294967295,k=F+(H<<21&4294967295|H>>>11),H=L+(F^(k|~G))+$[4]+4149444226&4294967295,L=k+(H<<6&4294967295|H>>>26),H=G+(k^(L|~F))+$[11]+3174756917&4294967295,G=L+(H<<10&4294967295|H>>>22),H=F+(L^(G|~k))+$[2]+718787259&4294967295,F=G+(H<<15&4294967295|H>>>17),H=k+(G^(F|~L))+$[9]+3951481745&4294967295,O.g[0]=O.g[0]+L&4294967295,O.g[1]=O.g[1]+(F+(H<<21&4294967295|H>>>11))&4294967295,O.g[2]=O.g[2]+F&4294967295,O.g[3]=O.g[3]+G&4294967295}r.prototype.u=function(O,L){L===void 0&&(L=O.length);for(var k=L-this.blockSize,$=this.B,F=this.h,G=0;G<L;){if(F==0)for(;G<=k;)i(this,O,G),G+=this.blockSize;if(typeof O=="string"){for(;G<L;)if($[F++]=O.charCodeAt(G++),F==this.blockSize){i(this,$),F=0;break}}else for(;G<L;)if($[F++]=O[G++],F==this.blockSize){i(this,$),F=0;break}}this.h=F,this.o+=L},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var L=1;L<O.length-8;++L)O[L]=0;var k=8*this.o;for(L=O.length-8;L<O.length;++L)O[L]=k&255,k/=256;for(this.u(O),O=Array(16),L=k=0;4>L;++L)for(var $=0;32>$;$+=8)O[k++]=this.g[L]>>>$&255;return O};function o(O,L){var k=l;return Object.prototype.hasOwnProperty.call(k,O)?k[O]:k[O]=L(O)}function s(O,L){this.h=L;for(var k=[],$=!0,F=O.length-1;0<=F;F--){var G=O[F]|0;$&&G==L||(k[F]=G,$=!1)}this.g=k}var l={};function c(O){return-128<=O&&128>O?o(O,function(L){return new s([L|0],0>L?-1:0)}):new s([O|0],0>O?-1:0)}function f(O){if(isNaN(O)||!isFinite(O))return g;if(0>O)return A(f(-O));for(var L=[],k=1,$=0;O>=k;$++)L[$]=O/k|0,k*=4294967296;return new s(L,0)}function h(O,L){if(O.length==0)throw Error("number format error: empty string");if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(O.charAt(0)=="-")return A(h(O.substring(1),L));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=f(Math.pow(L,8)),$=g,F=0;F<O.length;F+=8){var G=Math.min(8,O.length-F),H=parseInt(O.substring(F,F+G),L);8>G?(G=f(Math.pow(L,G)),$=$.j(G).add(f(H))):($=$.j(k),$=$.add(f(H)))}return $}var g=c(0),v=c(1),E=c(16777216);t=s.prototype,t.m=function(){if(S(this))return-A(this).m();for(var O=0,L=1,k=0;k<this.g.length;k++){var $=this.i(k);O+=(0<=$?$:4294967296+$)*L,L*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(b(this))return"0";if(S(this))return"-"+A(this).toString(O);for(var L=f(Math.pow(O,6)),k=this,$="";;){var F=V(k,L).g;k=I(k,F.j(L));var G=((0<k.g.length?k.g[0]:k.h)>>>0).toString(O);if(k=F,b(k))return G+$;for(;6>G.length;)G="0"+G;$=G+$}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function b(O){if(O.h!=0)return!1;for(var L=0;L<O.g.length;L++)if(O.g[L]!=0)return!1;return!0}function S(O){return O.h==-1}t.l=function(O){return O=I(this,O),S(O)?-1:b(O)?0:1};function A(O){for(var L=O.g.length,k=[],$=0;$<L;$++)k[$]=~O.g[$];return new s(k,~O.h).add(v)}t.abs=function(){return S(this)?A(this):this},t.add=function(O){for(var L=Math.max(this.g.length,O.g.length),k=[],$=0,F=0;F<=L;F++){var G=$+(this.i(F)&65535)+(O.i(F)&65535),H=(G>>>16)+(this.i(F)>>>16)+(O.i(F)>>>16);$=H>>>16,G&=65535,H&=65535,k[F]=H<<16|G}return new s(k,k[k.length-1]&-2147483648?-1:0)};function I(O,L){return O.add(A(L))}t.j=function(O){if(b(this)||b(O))return g;if(S(this))return S(O)?A(this).j(A(O)):A(A(this).j(O));if(S(O))return A(this.j(A(O)));if(0>this.l(E)&&0>O.l(E))return f(this.m()*O.m());for(var L=this.g.length+O.g.length,k=[],$=0;$<2*L;$++)k[$]=0;for($=0;$<this.g.length;$++)for(var F=0;F<O.g.length;F++){var G=this.i($)>>>16,H=this.i($)&65535,Ae=O.i(F)>>>16,Re=O.i(F)&65535;k[2*$+2*F]+=H*Re,N(k,2*$+2*F),k[2*$+2*F+1]+=G*Re,N(k,2*$+2*F+1),k[2*$+2*F+1]+=H*Ae,N(k,2*$+2*F+1),k[2*$+2*F+2]+=G*Ae,N(k,2*$+2*F+2)}for($=0;$<L;$++)k[$]=k[2*$+1]<<16|k[2*$];for($=L;$<2*L;$++)k[$]=0;return new s(k,0)};function N(O,L){for(;(O[L]&65535)!=O[L];)O[L+1]+=O[L]>>>16,O[L]&=65535,L++}function D(O,L){this.g=O,this.h=L}function V(O,L){if(b(L))throw Error("division by zero");if(b(O))return new D(g,g);if(S(O))return L=V(A(O),L),new D(A(L.g),A(L.h));if(S(L))return L=V(O,A(L)),new D(A(L.g),L.h);if(30<O.g.length){if(S(O)||S(L))throw Error("slowDivide_ only works with positive integers.");for(var k=v,$=L;0>=$.l(O);)k=q(k),$=q($);var F=z(k,1),G=z($,1);for($=z($,2),k=z(k,2);!b($);){var H=G.add($);0>=H.l(O)&&(F=F.add(k),G=H),$=z($,1),k=z(k,1)}return L=I(O,F.j(L)),new D(F,L)}for(F=g;0<=O.l(L);){for(k=Math.max(1,Math.floor(O.m()/L.m())),$=Math.ceil(Math.log(k)/Math.LN2),$=48>=$?1:Math.pow(2,$-48),G=f(k),H=G.j(L);S(H)||0<H.l(O);)k-=$,G=f(k),H=G.j(L);b(G)&&(G=v),F=F.add(G),O=I(O,H)}return new D(F,O)}t.A=function(O){return V(this,O).h},t.and=function(O){for(var L=Math.max(this.g.length,O.g.length),k=[],$=0;$<L;$++)k[$]=this.i($)&O.i($);return new s(k,this.h&O.h)},t.or=function(O){for(var L=Math.max(this.g.length,O.g.length),k=[],$=0;$<L;$++)k[$]=this.i($)|O.i($);return new s(k,this.h|O.h)},t.xor=function(O){for(var L=Math.max(this.g.length,O.g.length),k=[],$=0;$<L;$++)k[$]=this.i($)^O.i($);return new s(k,this.h^O.h)};function q(O){for(var L=O.g.length+1,k=[],$=0;$<L;$++)k[$]=O.i($)<<1|O.i($-1)>>>31;return new s(k,O.h)}function z(O,L){var k=L>>5;L%=32;for(var $=O.g.length-k,F=[],G=0;G<$;G++)F[G]=0<L?O.i(G+k)>>>L|O.i(G+k+1)<<32-L:O.i(G+k);return new s(F,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,oB=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,sl=s}).apply(typeof vD<"u"?vD:typeof self<"u"?self:typeof window<"u"?window:{});var qy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sB,Sp,aB,Ev,YS,lB,uB,cB;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,C,x){return _==Array.prototype||_==Object.prototype||(_[C]=x.value),_};function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof qy=="object"&&qy];for(var C=0;C<_.length;++C){var x=_[C];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function i(_,C){if(C)e:{var x=r;_=_.split(".");for(var B=0;B<_.length-1;B++){var J=_[B];if(!(J in x))break e;x=x[J]}_=_[_.length-1],B=x[_],C=C(B),C!=B&&C!=null&&e(x,_,{configurable:!0,writable:!0,value:C})}}function o(_,C){_ instanceof String&&(_+="");var x=0,B=!1,J={next:function(){if(!B&&x<_.length){var oe=x++;return{value:C(oe,_[oe]),done:!1}}return B=!0,{done:!0,value:void 0}}};return J[Symbol.iterator]=function(){return J},J}i("Array.prototype.values",function(_){return _||function(){return o(this,function(C,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function c(_){var C=typeof _;return C=C!="object"?C:_?Array.isArray(_)?"array":C:"null",C=="array"||C=="object"&&typeof _.length=="number"}function f(_){var C=typeof _;return C=="object"&&_!=null||C=="function"}function h(_,C,x){return _.call.apply(_.bind,arguments)}function g(_,C,x){if(!_)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var J=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(J,B),_.apply(C,J)}}return function(){return _.apply(C,arguments)}}function v(_,C,x){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,v.apply(null,arguments)}function E(_,C){var x=Array.prototype.slice.call(arguments,1);return function(){var B=x.slice();return B.push.apply(B,arguments),_.apply(this,B)}}function b(_,C){function x(){}x.prototype=C.prototype,_.aa=C.prototype,_.prototype=new x,_.prototype.constructor=_,_.Qb=function(B,J,oe){for(var _e=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)_e[ut-2]=arguments[ut];return C.prototype[J].apply(B,_e)}}function S(_){const C=_.length;if(0<C){const x=Array(C);for(let B=0;B<C;B++)x[B]=_[B];return x}return[]}function A(_,C){for(let x=1;x<arguments.length;x++){const B=arguments[x];if(c(B)){const J=_.length||0,oe=B.length||0;_.length=J+oe;for(let _e=0;_e<oe;_e++)_[J+_e]=B[_e]}else _.push(B)}}class I{constructor(C,x){this.i=C,this.j=x,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function N(_){return/^[\s\xa0]*$/.test(_)}function D(){var _=l.navigator;return _&&(_=_.userAgent)?_:""}function V(_){return V[" "](_),_}V[" "]=function(){};var q=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function z(_,C,x){for(const B in _)C.call(x,_[B],B,_)}function O(_,C){for(const x in _)C.call(void 0,_[x],x,_)}function L(_){const C={};for(const x in _)C[x]=_[x];return C}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(_,C){let x,B;for(let J=1;J<arguments.length;J++){B=arguments[J];for(x in B)_[x]=B[x];for(let oe=0;oe<k.length;oe++)x=k[oe],Object.prototype.hasOwnProperty.call(B,x)&&(_[x]=B[x])}}function F(_){var C=1;_=_.split(":");const x=[];for(;0<C&&_.length;)x.push(_.shift()),C--;return _.length&&x.push(_.join(":")),x}function G(_){l.setTimeout(()=>{throw _},0)}function H(){var _=Le;let C=null;return _.g&&(C=_.g,_.g=_.g.next,_.g||(_.h=null),C.next=null),C}class Ae{constructor(){this.h=this.g=null}add(C,x){const B=Re.get();B.set(C,x),this.h?this.h.next=B:this.g=B,this.h=B}}var Re=new I(()=>new ee,_=>_.reset());class ee{constructor(){this.next=this.g=this.h=null}set(C,x){this.h=C,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let he,Ee=!1,Le=new Ae,K=()=>{const _=l.Promise.resolve(void 0);he=()=>{_.then(ae)}};var ae=()=>{for(var _;_=H();){try{_.h.call(_.g)}catch(x){G(x)}var C=Re;C.j(_),100>C.h&&(C.h++,_.next=C.g,C.g=_)}Ee=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(_,C){this.type=_,this.g=this.target=C,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Pe=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var _=!1,C=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const x=()=>{};l.addEventListener("test",x,C),l.removeEventListener("test",x,C)}catch{}return _})();function Be(_,C){if(ve.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var x=this.type=_.type,B=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=C,C=_.relatedTarget){if(q){e:{try{V(C.nodeName);var J=!0;break e}catch{}J=!1}J||(C=null)}}else x=="mouseover"?C=_.fromElement:x=="mouseout"&&(C=_.toElement);this.relatedTarget=C,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:ze[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&Be.aa.h.call(this)}}b(Be,ve);var ze={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var ln="closure_listenable_"+(1e6*Math.random()|0),_t=0;function Se(_,C,x,B,J){this.listener=_,this.proxy=null,this.src=C,this.type=x,this.capture=!!B,this.ha=J,this.key=++_t,this.da=this.fa=!1}function je(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Ye(_){this.src=_,this.g={},this.h=0}Ye.prototype.add=function(_,C,x,B,J){var oe=_.toString();_=this.g[oe],_||(_=this.g[oe]=[],this.h++);var _e=Kt(_,C,B,J);return-1<_e?(C=_[_e],x||(C.fa=!1)):(C=new Se(C,this.src,oe,!!B,J),C.fa=x,_.push(C)),C};function me(_,C){var x=C.type;if(x in _.g){var B=_.g[x],J=Array.prototype.indexOf.call(B,C,void 0),oe;(oe=0<=J)&&Array.prototype.splice.call(B,J,1),oe&&(je(C),_.g[x].length==0&&(delete _.g[x],_.h--))}}function Kt(_,C,x,B){for(var J=0;J<_.length;++J){var oe=_[J];if(!oe.da&&oe.listener==C&&oe.capture==!!x&&oe.ha==B)return J}return-1}var et="closure_lm_"+(1e6*Math.random()|0),nn={};function Sn(_,C,x,B,J){if(Array.isArray(C)){for(var oe=0;oe<C.length;oe++)Sn(_,C[oe],x,B,J);return null}return x=_c(x),_&&_[ln]?_.K(C,x,f(B)?!!B.capture:!1,J):Wt(_,C,x,!1,B,J)}function Wt(_,C,x,B,J,oe){if(!C)throw Error("Invalid event type");var _e=f(J)?!!J.capture:!!J,ut=_a(_);if(ut||(_[et]=ut=new Ye(_)),x=ut.add(C,x,B,_e,oe),x.proxy)return x;if(B=va(),x.proxy=B,B.src=_,B.listener=x,_.addEventListener)Pe||(J=_e),J===void 0&&(J=!1),_.addEventListener(C.toString(),B,J);else if(_.attachEvent)_.attachEvent(hs(C.toString()),B);else if(_.addListener&&_.removeListener)_.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return x}function va(){function _(x){return C.call(_.src,_.listener,x)}const C=Qd;return _}function Fl(_,C,x,B,J){if(Array.isArray(C))for(var oe=0;oe<C.length;oe++)Fl(_,C[oe],x,B,J);else B=f(B)?!!B.capture:!!B,x=_c(x),_&&_[ln]?(_=_.i,C=String(C).toString(),C in _.g&&(oe=_.g[C],x=Kt(oe,x,B,J),-1<x&&(je(oe[x]),Array.prototype.splice.call(oe,x,1),oe.length==0&&(delete _.g[C],_.h--)))):_&&(_=_a(_))&&(C=_.g[C.toString()],_=-1,C&&(_=Kt(C,x,B,J)),(x=-1<_?C[_]:null)&&bo(x))}function bo(_){if(typeof _!="number"&&_&&!_.da){var C=_.src;if(C&&C[ln])me(C.i,_);else{var x=_.type,B=_.proxy;C.removeEventListener?C.removeEventListener(x,B,_.capture):C.detachEvent?C.detachEvent(hs(x),B):C.addListener&&C.removeListener&&C.removeListener(B),(x=_a(C))?(me(x,_),x.h==0&&(x.src=null,C[et]=null)):je(_)}}}function hs(_){return _ in nn?nn[_]:nn[_]="on"+_}function Qd(_,C){if(_.da)_=!0;else{C=new Be(C,this);var x=_.listener,B=_.ha||_.src;_.fa&&bo(_),_=x.call(B,C)}return _}function _a(_){return _=_[et],_ instanceof Ye?_:null}var Bl="__closure_events_fn_"+(1e9*Math.random()>>>0);function _c(_){return typeof _=="function"?_:(_[Bl]||(_[Bl]=function(C){return _.handleEvent(C)}),_[Bl])}function Yt(){ue.call(this),this.i=new Ye(this),this.M=this,this.F=null}b(Yt,ue),Yt.prototype[ln]=!0,Yt.prototype.removeEventListener=function(_,C,x,B){Fl(this,_,C,x,B)};function Ue(_,C){var x,B=_.F;if(B)for(x=[];B;B=B.F)x.push(B);if(_=_.M,B=C.type||C,typeof C=="string")C=new ve(C,_);else if(C instanceof ve)C.target=C.target||_;else{var J=C;C=new ve(B,_),$(C,J)}if(J=!0,x)for(var oe=x.length-1;0<=oe;oe--){var _e=C.g=x[oe];J=ar(_e,B,!0,C)&&J}if(_e=C.g=_,J=ar(_e,B,!0,C)&&J,J=ar(_e,B,!1,C)&&J,x)for(oe=0;oe<x.length;oe++)_e=C.g=x[oe],J=ar(_e,B,!1,C)&&J}Yt.prototype.N=function(){if(Yt.aa.N.call(this),this.i){var _=this.i,C;for(C in _.g){for(var x=_.g[C],B=0;B<x.length;B++)je(x[B]);delete _.g[C],_.h--}}this.F=null},Yt.prototype.K=function(_,C,x,B){return this.i.add(String(_),C,!1,x,B)},Yt.prototype.L=function(_,C,x,B){return this.i.add(String(_),C,!0,x,B)};function ar(_,C,x,B){if(C=_.i.g[String(C)],!C)return!0;C=C.concat();for(var J=!0,oe=0;oe<C.length;++oe){var _e=C[oe];if(_e&&!_e.da&&_e.capture==x){var ut=_e.listener,Ln=_e.ha||_e.src;_e.fa&&me(_.i,_e),J=ut.call(Ln,B)!==!1&&J}}return J&&!B.defaultPrevented}function yn(_,C,x){if(typeof _=="function")x&&(_=v(_,x));else if(_&&typeof _.handleEvent=="function")_=v(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:l.setTimeout(_,C||0)}function Ta(_){_.g=yn(()=>{_.g=null,_.i&&(_.i=!1,Ta(_))},_.l);const C=_.h;_.h=null,_.m.apply(null,C)}class Tc extends ue{constructor(C,x){super(),this.m=C,this.l=x,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:Ta(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function So(_){ue.call(this),this.h=_,this.g={}}b(So,ue);var Ao=[];function Co(_){z(_.g,function(C,x){this.g.hasOwnProperty(x)&&bo(C)},_),_.g={}}So.prototype.N=function(){So.aa.N.call(this),Co(this)},So.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jr=l.JSON.stringify,re=l.JSON.parse,ge=class{stringify(_){return l.JSON.stringify(_,void 0)}parse(_){return l.JSON.parse(_,void 0)}};function xe(){}xe.prototype.h=null;function be(_){return _.h||(_.h=_.i())}function Ie(){}var Ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lt(){ve.call(this,"d")}b(lt,ve);function un(){ve.call(this,"c")}b(un,ve);var Je={},Tt=null;function On(){return Tt=Tt||new Yt}Je.La="serverreachability";function ii(_){ve.call(this,Je.La,_)}b(ii,ve);function An(_){const C=On();Ue(C,new ii(C))}Je.STAT_EVENT="statevent";function Tr(_,C){ve.call(this,Je.STAT_EVENT,_),this.stat=C}b(Tr,ve);function Rt(_){const C=On();Ue(C,new Tr(C,_))}Je.Ma="timingevent";function cn(_,C){ve.call(this,Je.Ma,_),this.size=C}b(cn,ve);function Cn(_,C){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){_()},C)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function Xd(_,C,x,B,J,oe){_.info(function(){if(_.g)if(oe)for(var _e="",ut=oe.split("&"),Ln=0;Ln<ut.length;Ln++){var ct=ut[Ln].split("=");if(1<ct.length){var jn=ct[0];ct=ct[1];var Vn=jn.split("_");_e=2<=Vn.length&&Vn[1]=="type"?_e+(jn+"="+ct+"&"):_e+(jn+"=redacted&")}}else _e=null;else _e=oe;return"XMLHTTP REQ ("+B+") [attempt "+J+"]: "+C+`
`+x+`
`+_e})}function CT(_,C,x,B,J,oe,_e){_.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+J+"]: "+C+`
`+x+`
`+oe+" "+_e})}function Ea(_,C,x,B){_.info(function(){return"XMLHTTP TEXT ("+C+"): "+ql(_,x)+(B?" "+B:"")})}function _g(_,C){_.info(function(){return"TIMEOUT: "+C})}Ri.prototype.info=function(){};function ql(_,C){if(!_.g)return C;if(!C)return null;try{var x=JSON.parse(C);if(x){for(_=0;_<x.length;_++)if(Array.isArray(x[_])){var B=x[_];if(!(2>B.length)){var J=B[1];if(Array.isArray(J)&&!(1>J.length)){var oe=J[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var _e=1;_e<J.length;_e++)J[_e]=""}}}}return jr(x)}catch{return C}}var wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ps={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xo;function Io(){}b(Io,xe),Io.prototype.g=function(){return new XMLHttpRequest},Io.prototype.i=function(){return{}},xo=new Io;function Mr(_,C,x,B){this.j=_,this.i=C,this.l=x,this.R=B||1,this.U=new So(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vn}function vn(){this.i=null,this.g="",this.h=!1}var Zd={},Ec={};function ro(_,C,x){_.L=1,_.v=jl(oi(C)),_.m=x,_.P=!0,ms(_,null)}function ms(_,C){_.F=Date.now(),$l(_),_.A=oi(_.v);var x=_.A,B=_.R;Array.isArray(B)||(B=[String(B)]),oh(x.i,"t",B),_.C=0,x=_.j.J,_.h=new vn,_.g=Og(_.j,x?C:null,!_.m),0<_.O&&(_.M=new Tc(v(_.Y,_,_.g),_.O)),C=_.U,x=_.g,B=_.ca;var J="readystatechange";Array.isArray(J)||(J&&(Ao[0]=J.toString()),J=Ao);for(var oe=0;oe<J.length;oe++){var _e=Sn(x,J[oe],B||C.handleEvent,!1,C.h||C);if(!_e)break;C.g[_e.key]=_e}C=_.H?L(_.H):{},_.m?(_.u||(_.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,C)):(_.u="GET",_.g.ea(_.A,_.u,null,C)),An(),Xd(_.i,_.u,_.A,_.l,_.R,_.m)}Mr.prototype.ca=function(_){_=_.target;const C=this.M;C&&Di(_)==3?C.j():this.Y(_)},Mr.prototype.Y=function(_){try{if(_==this.g)e:{const Vn=Di(this.g);var C=this.g.Ba();const bs=this.g.Z();if(!(3>Vn)&&(Vn!=3||this.g&&(this.h.h||this.g.oa()||xg(this.g)))){this.J||Vn!=4||C==7||(C==8||0>=bs?An(3):An(2)),ba(this);var x=this.g.Z();this.X=x;t:if(Tg(this)){var B=xg(this.g);_="";var J=B.length,oe=Di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),Ro(this);var _e="";break t}this.h.i=new l.TextDecoder}for(C=0;C<J;C++)this.h.h=!0,_+=this.h.i.decode(B[C],{stream:!(oe&&C==J-1)});B.length=0,this.h.g+=_,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=x==200,CT(this.i,this.u,this.A,this.l,this.R,Vn,x),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Ln=this.g;if((ut=Ln.g?Ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(ut)){var ct=ut;break t}}ct=null}if(x=ct)Ea(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zl(this,x);else{this.o=!1,this.s=3,Rt(12),lr(this),Ro(this);break e}}if(this.P){x=!0;let ur;for(;!this.J&&this.C<_e.length;)if(ur=Eg(this,_e),ur==Ec){Vn==4&&(this.s=4,Rt(14),x=!1),Ea(this.i,this.l,null,"[Incomplete Response]");break}else if(ur==Zd){this.s=4,Rt(15),Ea(this.i,this.l,_e,"[Invalid Chunk]"),x=!1;break}else Ea(this.i,this.l,ur,null),zl(this,ur);if(Tg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vn!=4||_e.length!=0||this.h.h||(this.s=1,Rt(16),x=!1),this.o=this.o&&x,!x)Ea(this.i,this.l,_e,"[Invalid Chunked Response]"),lr(this),Ro(this);else if(0<_e.length&&!this.W){this.W=!0;var jn=this.j;jn.g==this&&jn.ba&&!jn.M&&(jn.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),eu(jn),jn.M=!0,Rt(11))}}else Ea(this.i,this.l,_e,null),zl(this,_e);Vn==4&&lr(this),this.o&&!this.J&&(Vn==4?Ng(this.j,this):(this.o=!1,$l(this)))}else MT(this.g),x==400&&0<_e.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),lr(this),Ro(this)}}}catch{}finally{}};function Tg(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function Eg(_,C){var x=_.C,B=C.indexOf(`
`,x);return B==-1?Ec:(x=Number(C.substring(x,B)),isNaN(x)?Zd:(B+=1,B+x>C.length?Ec:(C=C.slice(B,B+x),_.C=B+x,C)))}Mr.prototype.cancel=function(){this.J=!0,lr(this)};function $l(_){_.S=Date.now()+_.I,wg(_,_.I)}function wg(_,C){if(_.B!=null)throw Error("WatchDog timer not null");_.B=Cn(v(_.ba,_),C)}function ba(_){_.B&&(l.clearTimeout(_.B),_.B=null)}Mr.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(_g(this.i,this.A),this.L!=2&&(An(),Rt(17)),lr(this),this.s=2,Ro(this)):wg(this,this.S-_)};function Ro(_){_.j.G==0||_.J||Ng(_.j,_)}function lr(_){ba(_);var C=_.M;C&&typeof C.ma=="function"&&C.ma(),_.M=null,Co(_.U),_.g&&(C=_.g,_.g=null,C.abort(),C.ma())}function zl(_,C){try{var x=_.j;if(x.G!=0&&(x.g==_||eh(x.h,_))){if(!_.K&&eh(x.h,_)&&x.G==3){try{var B=x.Da.g.parse(C)}catch{B=null}if(Array.isArray(B)&&B.length==3){var J=B;if(J[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<_.F)Dc(x),Mc(x);else break e;ch(x),Rt(18)}}else x.za=J[1],0<x.za-x.T&&37500>J[2]&&x.F&&x.v==0&&!x.C&&(x.C=Cn(v(x.Za,x),6e3));if(1>=bc(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else ws(x,11)}else if((_.K||x.g==_)&&Dc(x),!N(C))for(J=x.Da.g.parse(C),C=0;C<J.length;C++){let ct=J[C];if(x.T=ct[0],ct=ct[1],x.G==2)if(ct[0]=="c"){x.K=ct[1],x.ia=ct[2];const jn=ct[3];jn!=null&&(x.la=jn,x.j.info("VER="+x.la));const Vn=ct[4];Vn!=null&&(x.Aa=Vn,x.j.info("SVER="+x.Aa));const bs=ct[5];bs!=null&&typeof bs=="number"&&0<bs&&(B=1.5*bs,x.L=B,x.j.info("backChannelRequestTimeoutMs_="+B)),B=x;const ur=_.g;if(ur){const Lo=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lo){var oe=B.h;oe.g||Lo.indexOf("spdy")==-1&&Lo.indexOf("quic")==-1&&Lo.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(Sc(oe,oe.h),oe.h=null))}if(B.D){const dh=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;dh&&(B.ya=dh,Pt(B.I,B.D,dh))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-_.F,x.j.info("Handshake RTT: "+x.R+"ms")),B=x;var _e=_;if(B.qa=kg(B,B.J?B.ia:null,B.W),_e.K){Nr(B.h,_e);var ut=_e,Ln=B.L;Ln&&(ut.I=Ln),ut.B&&(ba(ut),$l(ut)),B.g=_e}else Pg(B);0<x.i.length&&Nc(x)}else ct[0]!="stop"&&ct[0]!="close"||ws(x,7);else x.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?ws(x,7):lh(x):ct[0]!="noop"&&x.l&&x.l.ta(ct),x.v=0)}}An(4)}catch{}}var bg=class{constructor(_,C){this.g=_,this.map=C}};function gs(_){this.l=_||10,l.PerformanceNavigationTiming?(_=l.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wc(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function bc(_){return _.h?1:_.g?_.g.size:0}function eh(_,C){return _.h?_.h==C:_.g?_.g.has(C):!1}function Sc(_,C){_.g?_.g.add(C):_.h=C}function Nr(_,C){_.h&&_.h==C?_.h=null:_.g&&_.g.has(C)&&_.g.delete(C)}gs.prototype.cancel=function(){if(this.i=th(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function th(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let C=_.i;for(const x of _.g.values())C=C.concat(x.D);return C}return S(_.i)}function xT(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(c(_)){for(var C=[],x=_.length,B=0;B<x;B++)C.push(_[B]);return C}C=[],x=0;for(B in _)C[x++]=_[B];return C}function Ac(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(c(_)||typeof _=="string"){var C=[];_=_.length;for(var x=0;x<_;x++)C.push(x);return C}C=[],x=0;for(const B in _)C[x++]=B;return C}}}function nh(_,C){if(_.forEach&&typeof _.forEach=="function")_.forEach(C,void 0);else if(c(_)||typeof _=="string")Array.prototype.forEach.call(_,C,void 0);else for(var x=Ac(_),B=xT(_),J=B.length,oe=0;oe<J;oe++)C.call(void 0,B[oe],x&&x[oe],_)}var Hl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function IT(_,C){if(_){_=_.split("&");for(var x=0;x<_.length;x++){var B=_[x].indexOf("="),J=null;if(0<=B){var oe=_[x].substring(0,B);J=_[x].substring(B+1)}else oe=_[x];C(oe,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function xn(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof xn){this.h=_.h,Gl(this,_.j),this.o=_.o,this.g=_.g,Sa(this,_.s),this.l=_.l;var C=_.i,x=new vs;x.i=C.i,C.g&&(x.g=new Map(C.g),x.h=C.h),ys(this,x),this.m=_.m}else _&&(C=String(_).match(Hl))?(this.h=!1,Gl(this,C[1]||"",!0),this.o=Pi(C[2]||""),this.g=Pi(C[3]||"",!0),Sa(this,C[4]),this.l=Pi(C[5]||"",!0),ys(this,C[6]||"",!0),this.m=Pi(C[7]||"")):(this.h=!1,this.i=new vs(null,this.h))}xn.prototype.toString=function(){var _=[],C=this.j;C&&_.push(Kl(C,rh,!0),":");var x=this.g;return(x||C=="file")&&(_.push("//"),(C=this.o)&&_.push(Kl(C,rh,!0),"@"),_.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&_.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&_.push("/"),_.push(Kl(x,x.charAt(0)=="/"?RT:ih,!0))),(x=this.i.toString())&&_.push("?",x),(x=this.m)&&_.push("#",Kl(x,Cc)),_.join("")};function oi(_){return new xn(_)}function Gl(_,C,x){_.j=x?Pi(C,!0):C,_.j&&(_.j=_.j.replace(/:$/,""))}function Sa(_,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);_.s=C}else _.s=null}function ys(_,C,x){C instanceof vs?(_.i=C,Ag(_.i,_.h)):(x||(C=Kl(C,PT)),_.i=new vs(C,_.h))}function Pt(_,C,x){_.i.set(C,x)}function jl(_){return Pt(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function Pi(_,C){return _?C?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Kl(_,C,x){return typeof _=="string"?(_=encodeURI(_).replace(C,Sg),x&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Sg(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var rh=/[#\/\?@]/g,ih=/[#\?:]/g,RT=/[#\?]/g,PT=/[#\?@]/g,Cc=/#/g;function vs(_,C){this.h=this.g=null,this.i=_||null,this.j=!!C}function Mi(_){_.g||(_.g=new Map,_.h=0,_.i&&IT(_.i,function(C,x){_.add(decodeURIComponent(C.replace(/\+/g," ")),x)}))}t=vs.prototype,t.add=function(_,C){Mi(this),this.i=null,_=Po(this,_);var x=this.g.get(_);return x||this.g.set(_,x=[]),x.push(C),this.h+=1,this};function _s(_,C){Mi(_),C=Po(_,C),_.g.has(C)&&(_.i=null,_.h-=_.g.get(C).length,_.g.delete(C))}function Ts(_,C){return Mi(_),C=Po(_,C),_.g.has(C)}t.forEach=function(_,C){Mi(this),this.g.forEach(function(x,B){x.forEach(function(J){_.call(C,J,B,this)},this)},this)},t.na=function(){Mi(this);const _=Array.from(this.g.values()),C=Array.from(this.g.keys()),x=[];for(let B=0;B<C.length;B++){const J=_[B];for(let oe=0;oe<J.length;oe++)x.push(C[B])}return x},t.V=function(_){Mi(this);let C=[];if(typeof _=="string")Ts(this,_)&&(C=C.concat(this.g.get(Po(this,_))));else{_=Array.from(this.g.values());for(let x=0;x<_.length;x++)C=C.concat(_[x])}return C},t.set=function(_,C){return Mi(this),this.i=null,_=Po(this,_),Ts(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[C]),this.h+=1,this},t.get=function(_,C){return _?(_=this.V(_),0<_.length?String(_[0]):C):C};function oh(_,C,x){_s(_,C),0<x.length&&(_.i=null,_.g.set(Po(_,C),S(x)),_.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],C=Array.from(this.g.keys());for(var x=0;x<C.length;x++){var B=C[x];const oe=encodeURIComponent(String(B)),_e=this.V(B);for(B=0;B<_e.length;B++){var J=oe;_e[B]!==""&&(J+="="+encodeURIComponent(String(_e[B]))),_.push(J)}}return this.i=_.join("&")};function Po(_,C){return C=String(C),_.j&&(C=C.toLowerCase()),C}function Ag(_,C){C&&!_.j&&(Mi(_),_.i=null,_.g.forEach(function(x,B){var J=B.toLowerCase();B!=J&&(_s(this,B),oh(this,J,x))},_)),_.j=C}function Wl(_,C){const x=new Ri;if(l.Image){const B=new Image;B.onload=E(Ni,x,"TestLoadImage: loaded",!0,C,B),B.onerror=E(Ni,x,"TestLoadImage: error",!1,C,B),B.onabort=E(Ni,x,"TestLoadImage: abort",!1,C,B),B.ontimeout=E(Ni,x,"TestLoadImage: timeout",!1,C,B),l.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=_}else C(!1)}function io(_,C){const x=new Ri,B=new AbortController,J=setTimeout(()=>{B.abort(),Ni(x,"TestPingServer: timeout",!1,C)},1e4);fetch(_,{signal:B.signal}).then(oe=>{clearTimeout(J),oe.ok?Ni(x,"TestPingServer: ok",!0,C):Ni(x,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(J),Ni(x,"TestPingServer: error",!1,C)})}function Ni(_,C,x,B,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),B(x)}catch{}}function Yl(){this.g=new ge}function Mo(_,C,x){const B=x||"";try{nh(_,function(J,oe){let _e=J;f(J)&&(_e=jr(J)),C.push(B+oe+"="+encodeURIComponent(_e))})}catch(J){throw C.push(B+"type="+encodeURIComponent("_badmap")),J}}function Aa(_){this.l=_.Ub||null,this.j=_.eb||!1}b(Aa,xe),Aa.prototype.g=function(){return new Es(this.l,this.j)},Aa.prototype.i=(function(_){return function(){return _}})({});function Es(_,C){Yt.call(this),this.D=_,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Es,Yt),t=Es.prototype,t.open=function(_,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=C,this.readyState=1,Do(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(C.body=_),(this.D||l).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,No(this)),this.readyState=0},t.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Do(this)),this.g&&(this.readyState=3,Do(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sh(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function sh(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}t.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var C=_.value?_.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!_.done}))&&(this.response=this.responseText+=C)}_.done?No(this):Do(this),this.readyState==3&&sh(this)}},t.Ra=function(_){this.g&&(this.response=this.responseText=_,No(this))},t.Qa=function(_){this.g&&(this.response=_,No(this))},t.ga=function(){this.g&&No(this)};function No(_){_.readyState=4,_.l=null,_.j=null,_.v=null,Do(_)}t.setRequestHeader=function(_,C){this.u.append(_,C)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],C=this.h.entries();for(var x=C.next();!x.done;)x=x.value,_.push(x[0]+": "+x[1]),x=C.next();return _.join(`\r
`)};function Do(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function ah(_){let C="";return z(_,function(x,B){C+=B,C+=":",C+=x,C+=`\r
`}),C}function Gn(_,C,x){e:{for(B in x){var B=!1;break e}B=!0}B||(x=ah(x),typeof _=="string"?x!=null&&encodeURIComponent(String(x)):Pt(_,C,x))}function Et(_){Yt.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Et,Yt);var xc=/^https?$/i,Jl=["POST","PUT"];t=Et.prototype,t.Ha=function(_){this.J=_},t.ea=function(_,C,x,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);C=C?C.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xo.g(),this.v=this.o?be(this.o):be(xo),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(C,String(_),!0),this.B=!1}catch(oe){Cg(this,oe);return}if(_=x||"",x=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var J in B)x.set(J,B[J]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const oe of B.keys())x.set(oe,B.get(oe));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(x.keys()).find(oe=>oe.toLowerCase()=="content-type"),J=l.FormData&&_ instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Jl,C,void 0))||B||J||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,_e]of x)this.g.setRequestHeader(oe,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ql(this),this.u=!0,this.g.send(_),this.u=!1}catch(oe){Cg(this,oe)}};function Cg(_,C){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=C,_.m=5,Ic(_),ko(_)}function Ic(_){_.A||(_.A=!0,Ue(_,"complete"),Ue(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,Ue(this,"complete"),Ue(this,"abort"),ko(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ko(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rc(this):this.bb())},t.bb=function(){Rc(this)};function Rc(_){if(_.h&&typeof s<"u"&&(!_.v[1]||Di(_)!=4||_.Z()!=2)){if(_.u&&Di(_)==4)yn(_.Ea,0,_);else if(Ue(_,"readystatechange"),Di(_)==4){_.h=!1;try{const _e=_.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var x;if(!(x=C)){var B;if(B=_e===0){var J=String(_.D).match(Hl)[1]||null;!J&&l.self&&l.self.location&&(J=l.self.location.protocol.slice(0,-1)),B=!xc.test(J?J.toLowerCase():"")}x=B}if(x)Ue(_,"complete"),Ue(_,"success");else{_.m=6;try{var oe=2<Di(_)?_.g.statusText:""}catch{oe=""}_.l=oe+" ["+_.Z()+"]",Ic(_)}}finally{ko(_)}}}}function ko(_,C){if(_.g){Ql(_);const x=_.g,B=_.v[0]?()=>{}:null;_.g=null,_.v=null,C||Ue(_,"ready");try{x.onreadystatechange=B}catch{}}}function Ql(_){_.I&&(l.clearTimeout(_.I),_.I=null)}t.isActive=function(){return!!this.g};function Di(_){return _.g?_.g.readyState:0}t.Z=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(_){if(this.g){var C=this.g.responseText;return _&&C.indexOf(_)==0&&(C=C.substring(_.length)),re(C)}};function xg(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function MT(_){const C={};_=(_.g&&2<=Di(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<_.length;B++){if(N(_[B]))continue;var x=F(_[B]);const J=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const oe=C[J]||[];C[J]=oe,oe.push(x)}O(C,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xl(_,C,x){return x&&x.internalChannelParams&&x.internalChannelParams[_]||C}function Pc(_){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xl("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xl("baseRetryDelayMs",5e3,_),this.cb=Xl("retryDelaySeedMs",1e4,_),this.Wa=Xl("forwardChannelMaxRetries",2,_),this.wa=Xl("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new gs(_&&_.concurrentRequestLimit),this.Da=new Yl,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pc.prototype,t.la=8,t.G=1,t.connect=function(_,C,x,B){Rt(0),this.W=_,this.H=C||{},x&&B!==void 0&&(this.H.OSID=x,this.H.OAID=B),this.F=this.X,this.I=kg(this,null,this.W),Nc(this)};function lh(_){if(Ig(_),_.G==3){var C=_.U++,x=oi(_.I);if(Pt(x,"SID",_.K),Pt(x,"RID",C),Pt(x,"TYPE","terminate"),Zl(_,x),C=new Mr(_,_.j,C),C.L=2,C.v=jl(oi(x)),x=!1,l.navigator&&l.navigator.sendBeacon)try{x=l.navigator.sendBeacon(C.v.toString(),"")}catch{}!x&&l.Image&&(new Image().src=C.v,x=!0),x||(C.g=Og(C.j,null),C.g.ea(C.v)),C.F=Date.now(),$l(C)}Dg(_)}function Mc(_){_.g&&(eu(_),_.g.cancel(),_.g=null)}function Ig(_){Mc(_),_.u&&(l.clearTimeout(_.u),_.u=null),Dc(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&l.clearTimeout(_.s),_.s=null)}function Nc(_){if(!wc(_.h)&&!_.s){_.s=!0;var C=_.Ga;he||K(),Ee||(he(),Ee=!0),Le.add(C,_),_.B=0}}function NT(_,C){return bc(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=C.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=Cn(v(_.Ga,_,C),fh(_,_.B)),_.B++,!0)}t.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const J=new Mr(this,this.j,_);let oe=this.o;if(this.S&&(oe?(oe=L(oe),$(oe,this.S)):oe=this.S),this.m!==null||this.O||(J.H=oe,oe=null),this.P)e:{for(var C=0,x=0;x<this.i.length;x++){t:{var B=this.i[x];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(C+=B,4096<C){C=x;break e}if(C===4096||x===this.i.length-1){C=x+1;break e}}C=1e3}else C=1e3;C=Rg(this,J,C),x=oi(this.I),Pt(x,"RID",_),Pt(x,"CVER",22),this.D&&Pt(x,"X-HTTP-Session-Id",this.D),Zl(this,x),oe&&(this.O?C="headers="+encodeURIComponent(String(ah(oe)))+"&"+C:this.m&&Gn(x,this.m,oe)),Sc(this.h,J),this.Ua&&Pt(x,"TYPE","init"),this.P?(Pt(x,"$req",C),Pt(x,"SID","null"),J.T=!0,ro(J,x,null)):ro(J,x,C),this.G=2}}else this.G==3&&(_?uh(this,_):this.i.length==0||wc(this.h)||uh(this))};function uh(_,C){var x;C?x=C.l:x=_.U++;const B=oi(_.I);Pt(B,"SID",_.K),Pt(B,"RID",x),Pt(B,"AID",_.T),Zl(_,B),_.m&&_.o&&Gn(B,_.m,_.o),x=new Mr(_,_.j,x,_.B+1),_.m===null&&(x.H=_.o),C&&(_.i=C.D.concat(_.i)),C=Rg(_,x,1e3),x.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),Sc(_.h,x),ro(x,B,C)}function Zl(_,C){_.H&&z(_.H,function(x,B){Pt(C,B,x)}),_.l&&nh({},function(x,B){Pt(C,B,x)})}function Rg(_,C,x){x=Math.min(_.i.length,x);var B=_.l?v(_.l.Na,_.l,_):null;e:{var J=_.i;let oe=-1;for(;;){const _e=["count="+x];oe==-1?0<x?(oe=J[0].g,_e.push("ofs="+oe)):oe=0:_e.push("ofs="+oe);let ut=!0;for(let Ln=0;Ln<x;Ln++){let ct=J[Ln].g;const jn=J[Ln].map;if(ct-=oe,0>ct)oe=Math.max(0,J[Ln].g-100),ut=!1;else try{Mo(jn,_e,"req"+ct+"_")}catch{B&&B(jn)}}if(ut){B=_e.join("&");break e}}}return _=_.i.splice(0,x),C.D=_,B}function Pg(_){if(!_.g&&!_.u){_.Y=1;var C=_.Fa;he||K(),Ee||(he(),Ee=!0),Le.add(C,_),_.v=0}}function ch(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=Cn(v(_.Fa,_),fh(_,_.v)),_.v++,!0)}t.Fa=function(){if(this.u=null,Mg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=Cn(v(this.ab,this),_)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),Mc(this),Mg(this))};function eu(_){_.A!=null&&(l.clearTimeout(_.A),_.A=null)}function Mg(_){_.g=new Mr(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var C=oi(_.qa);Pt(C,"RID","rpc"),Pt(C,"SID",_.K),Pt(C,"AID",_.T),Pt(C,"CI",_.F?"0":"1"),!_.F&&_.ja&&Pt(C,"TO",_.ja),Pt(C,"TYPE","xmlhttp"),Zl(_,C),_.m&&_.o&&Gn(C,_.m,_.o),_.L&&(_.g.I=_.L);var x=_.g;_=_.ia,x.L=1,x.v=jl(oi(C)),x.m=null,x.P=!0,ms(x,_)}t.Za=function(){this.C!=null&&(this.C=null,Mc(this),ch(this),Rt(19))};function Dc(_){_.C!=null&&(l.clearTimeout(_.C),_.C=null)}function Ng(_,C){var x=null;if(_.g==C){Dc(_),eu(_),_.g=null;var B=2}else if(eh(_.h,C))x=C.D,Nr(_.h,C),B=1;else return;if(_.G!=0){if(C.o)if(B==1){x=C.m?C.m.length:0,C=Date.now()-C.F;var J=_.B;B=On(),Ue(B,new cn(B,x)),Nc(_)}else Pg(_);else if(J=C.s,J==3||J==0&&0<C.X||!(B==1&&NT(_,C)||B==2&&ch(_)))switch(x&&0<x.length&&(C=_.h,C.i=C.i.concat(x)),J){case 1:ws(_,5);break;case 4:ws(_,10);break;case 3:ws(_,6);break;default:ws(_,2)}}}function fh(_,C){let x=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(x*=2),x*C}function ws(_,C){if(_.j.info("Error code "+C),C==2){var x=v(_.fb,_),B=_.Xa;const J=!B;B=new xn(B||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Gl(B,"https"),jl(B),J?Wl(B.toString(),x):io(B.toString(),x)}else Rt(2);_.G=0,_.l&&_.l.sa(C),Dg(_),Ig(_)}t.fb=function(_){_?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Dg(_){if(_.G=0,_.ka=[],_.l){const C=th(_.h);(C.length!=0||_.i.length!=0)&&(A(_.ka,C),A(_.ka,_.i),_.h.i.length=0,S(_.i),_.i.length=0),_.l.ra()}}function kg(_,C,x){var B=x instanceof xn?oi(x):new xn(x);if(B.g!="")C&&(B.g=C+"."+B.g),Sa(B,B.s);else{var J=l.location;B=J.protocol,C=C?C+"."+J.hostname:J.hostname,J=+J.port;var oe=new xn(null);B&&Gl(oe,B),C&&(oe.g=C),J&&Sa(oe,J),x&&(oe.l=x),B=oe}return x=_.D,C=_.ya,x&&C&&Pt(B,x,C),Pt(B,"VER",_.la),Zl(_,B),B}function Og(_,C,x){if(C&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=_.Ca&&!_.pa?new Et(new Aa({eb:x})):new Et(_.pa),C.Ha(_.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lg(){}t=Lg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function kc(){}kc.prototype.g=function(_,C){return new Dr(_,C)};function Dr(_,C){Yt.call(this),this.g=new Pc(C),this.l=_,this.h=C&&C.messageUrlParams||null,_=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(_?_["X-WebChannel-Content-Type"]=C.messageContentType:_={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(_?_["X-WebChannel-Client-Profile"]=C.va:_={"X-WebChannel-Client-Profile":C.va}),this.g.S=_,(_=C&&C.Sb)&&!N(_)&&(this.g.m=_),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!N(C)&&(this.g.D=C,_=this.h,_!==null&&C in _&&(_=this.h,C in _&&delete _[C])),this.j=new Oo(this)}b(Dr,Yt),Dr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dr.prototype.close=function(){lh(this.g)},Dr.prototype.o=function(_){var C=this.g;if(typeof _=="string"){var x={};x.__data__=_,_=x}else this.u&&(x={},x.__data__=jr(_),_=x);C.i.push(new bg(C.Ya++,_)),C.G==3&&Nc(C)},Dr.prototype.N=function(){this.g.l=null,delete this.j,lh(this.g),delete this.g,Dr.aa.N.call(this)};function Vg(_){lt.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var C=_.__sm__;if(C){e:{for(const x in C){_=x;break e}_=void 0}(this.i=_)&&(_=this.i,C=C!==null&&_ in C?C[_]:void 0),this.data=C}else this.data=_}b(Vg,lt);function Ug(){un.call(this),this.status=1}b(Ug,un);function Oo(_){this.g=_}b(Oo,Lg),Oo.prototype.ua=function(){Ue(this.g,"a")},Oo.prototype.ta=function(_){Ue(this.g,new Vg(_))},Oo.prototype.sa=function(_){Ue(this.g,new Ug)},Oo.prototype.ra=function(){Ue(this.g,"b")},kc.prototype.createWebChannel=kc.prototype.g,Dr.prototype.send=Dr.prototype.o,Dr.prototype.open=Dr.prototype.m,Dr.prototype.close=Dr.prototype.close,cB=function(){return new kc},uB=function(){return On()},lB=Je,YS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,Ev=wa,ps.COMPLETE="complete",aB=ps,Ie.EventType=Ge,Ge.OPEN="a",Ge.CLOSE="b",Ge.ERROR="c",Ge.MESSAGE="d",Yt.prototype.listen=Yt.prototype.K,Sp=Ie,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,sB=Et}).apply(typeof qy<"u"?qy:typeof self<"u"?self:typeof window<"u"?window:{});const _D="@firebase/firestore",TD="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=new n0("@firebase/firestore");function _f(){return pl.logLevel}function EQ(t){pl.setLogLevel(t)}function pe(t,...e){if(pl.logLevel<=ot.DEBUG){const n=e.map(dx);pl.debug(`Firestore (${Id}): ${t}`,...n)}}function wn(t,...e){if(pl.logLevel<=ot.ERROR){const n=e.map(dx);pl.error(`Firestore (${Id}): ${t}`,...n)}}function ss(t,...e){if(pl.logLevel<=ot.WARN){const n=e.map(dx);pl.warn(`Firestore (${Id}): ${t}`,...n)}}function dx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fB(t,r,n)}function fB(t,e,n){let r=`FIRESTORE (${Id}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wn(r),new Error(r)}function Oe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||fB(e,i,r)}function wQ(t,e){t||Ce(57014,e)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xn.UNAUTHENTICATED)))}shutdown(){}}class SQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class AQ{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vr,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},l=c=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vr)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string",31837,{l:r}),new dB(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new Xn(e)}}class CQ{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xQ{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new CQ(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ED{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IQ{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ht(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const r=o=>{o.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,pe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ED(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ED(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=RQ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function We(t,e){return t<e?-1:t>e?1:0}function JS(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return zw(i)===zw(o)?We(i,o):zw(i)?1:-1}return We(t.length,e.length)}const PQ=55296,MQ=57343;function zw(t){const e=t.charCodeAt(0);return e>=PQ&&e<=MQ}function Gf(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function hB(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD="__name__";class $o{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $o.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $o?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=$o.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return We(e.length,n.length)}static compareSegments(e,n){const r=$o.isNumericId(e),i=$o.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?$o.extractNumericId(e).compare($o.extractNumericId(n)):JS(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sl.fromString(e.substring(4,e.length-2))}}class st extends $o{construct(e,n,r){return new st(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new st(n)}static emptyPath(){return new st([])}}const NQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends $o{construct(e,n,r){return new Xt(e,n,r)}static isValidIdentifier(e){return NQ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wD}static keyField(){return new Xt([wD])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new de(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new de(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new de(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new de(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(st.fromString(e))}static fromName(e){return new Te(st.fromString(e).popFirst(5))}static empty(){return new Te(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t,e,n){if(!n)throw new de(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pB(t,e,n,r){if(e===!0&&r===!0)throw new de(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bD(t){if(!Te.isDocumentKey(t))throw new de(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function SD(t){if(Te.isDocumentKey(t))throw new de(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mB(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function g0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce(12329,{type:typeof t})}function pt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=g0(t);throw new de(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function gB(t,e){if(e<=0)throw new de(ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,e){const n={typeString:t};return e&&(n.value=e),n}function qm(t,e){if(!mB(t))throw new de(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new de(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=-62135596800,CD=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*CD);return new wt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<AD)throw new de(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CD}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qm(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-AD;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Nn("string",wt._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new wt(0,0))}static max(){return new Ve(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=-1;class Kv{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function QS(t){return t.fields.find((e=>e.kind===2))}function _u(t){return t.fields.filter((e=>e.kind!==2))}Kv.UNKNOWN_ID=-1;class wv{constructor(e,n){this.fieldPath=e,this.kind=n}}class rm{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new rm(0,Ai.min())}}function yB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ve.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new Ai(i,Te.empty(),e)}function vB(t){return new Ai(t.readTime,t.key,jf)}class Ai{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ai(Ve.min(),Te.empty(),jf)}static max(){return new Ai(Ve.max(),Te.empty(),jf)}}function mx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xl(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==_B)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Q.reject(n)}static resolve(e){return new Q(((n,r)=>{n(e)}))}static reject(e){return new Q(((n,r)=>{r(e)}))}static waitFor(e){return new Q(((n,r)=>{let i=0,o=0,s=!1;e.forEach((l=>{++i,l.next((()=>{++o,s&&o===i&&n()}),(c=>r(c)))})),s=!0,o===i&&n()}))}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next((i=>i?Q.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new Q(((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next((h=>{s[f]=h,++l,l===o&&r(s)}),(h=>i(h)))}}))}static doWhile(e,n){return new Q(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="SimpleDb";class y0{static open(e,n,r,i){try{return new y0(n,e.transaction(i,r))}catch(o){throw new Vp(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new vr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Vp(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=gx(r.target.error);this.S.reject(new Vp(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(pe(mi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new kQ(n)}}class es{static delete(e){return pe(mi,"Removing database:",e),Su(VC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Qp())return!1;if(es.F())return!0;const e=on(),n=es.M(e),r=0<n&&n<10,i=EB(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,es.M(on())===12.2&&wn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(pe(mi,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;n(s)},i.onblocked=()=>{r(new Vp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?r(new de(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new de(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Vp(e,s))},i.onupgradeneeded=o=>{pe(mi,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.N.k(s,i.transaction,o.oldVersion,this.version).next((()=>{pe(mi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const o=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const l=y0.open(this.db,e,o?"readonly":"readwrite",r),c=i(l).next((f=>(l.C(),f))).catch((f=>(l.abort(f),Q.reject(f)))).toPromise();return c.catch((()=>{})),await l.D,c}catch(l){const c=l,f=c.name!=="FirebaseError"&&s<3;if(pe(mi,"Transaction failed with error:",c.message,"Retrying:",f),this.close(),!f)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function EB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class DQ{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Su(this.U.delete())}}class Vp extends de{constructor(e,n){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Il(t){return t.name==="IndexedDbTransactionError"}class kQ{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(pe(mi,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(pe(mi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Su(r)}add(e){return pe(mi,"ADD",this.store.name,e,e),Su(this.store.add(e))}get(e){return Su(this.store.get(e)).next((n=>(n===void 0&&(n=null),pe(mi,"GET",this.store.name,e,n),n)))}delete(e){return pe(mi,"DELETE",this.store.name,e),Su(this.store.delete(e))}count(){return pe(mi,"COUNT",this.store.name),Su(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new Q(((s,l)=>{o.onerror=c=>{l(c.target.error)},o.onsuccess=c=>{s(c.target.result)}}))}{const o=this.cursor(r),s=[];return this.H(o,((l,c)=>{s.push(c)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Q(((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){pe(mi,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((o,s,l)=>l.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new Q(((r,i)=>{n.onerror=o=>{const s=gx(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next((l=>{l?s.continue():r()})):r()}}))}H(e,n){const r=[];return new Q(((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const l=s.target.result;if(!l)return void i();const c=new DQ(l),f=n(l.primaryKey,l.value,c);if(f instanceof Q){const h=f.catch((g=>(c.done(),Q.reject(g))));r.push(h)}c.isDone?i():c.G===null?l.continue():l.continue(c.G)}})).next((()=>Q.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Su(t){return new Q(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=gx(r.target.error);n(i)}}))}let xD=!1;function gx(t){const e=es.M(on());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xD||(xD=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Up="IndexBackfiller";class OQ{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){pe(Up,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();pe(Up,`Documents written: ${n}`)}catch(n){Il(n)?pe(Up,"Ignoring IndexedDB error during index backfill: ",n):await xl(n)}await this.re(6e4)}))}}class LQ{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,o=!0;return Q.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return pe(Up,`Processing collection: ${s}`),this.oe(e,s,i).next((l=>{i-=l,r.add(s)}));o=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,o))).next((l=>(pe(Up,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,o)=>{const s=vB(o);mx(s,r)>0&&(r=s)})),new Ai(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=-1;function $m(t){return t==null}function im(t){return t===0&&1/t==-1/0}function wB(t){return typeof t=="number"&&Number.isInteger(t)&&!im(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="";function Pr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ID(e)),e=VQ(t.get(n),e);return ID(e)}function VQ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case Wv:n+="";break;default:n+=o}}return n}function ID(t){return t+Wv+""}function Qo(t){const e=t.length;if(Oe(e>=2,64408,{path:t}),e===2)return Oe(t.charAt(0)===Wv&&t.charAt(1)==="",56145,{path:t}),st.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf(Wv,o);switch((s<0||s>n)&&Ce(50515,{path:t}),t.charAt(s+1)){case"":const l=t.substring(o,s);let c;i.length===0?c=l:(i+=l,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Ce(61167,{path:t})}o=s+2}return new st(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu="remoteDocuments",zm="owner",ff="owner",om="mutationQueues",UQ="userId",lo="mutations",RD="batchId",Pu="userMutationsIndex",PD=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(t,e){return[t,Pr(e)]}function bB(t,e,n){return[t,Pr(e),n]}const FQ={},Kf="documentMutations",Yv="remoteDocumentsV14",BQ=["prefixPath","collectionGroup","readTime","documentId"],Sv="documentKeyIndex",qQ=["prefixPath","collectionGroup","documentId"],SB="collectionGroupIndex",$Q=["collectionGroup","readTime","prefixPath","documentId"],sm="remoteDocumentGlobal",XS="remoteDocumentGlobalKey",Wf="targets",AB="queryTargetsIndex",zQ=["canonicalId","targetId"],Yf="targetDocuments",HQ=["targetId","path"],yx="documentTargetsIndex",GQ=["path","targetId"],Jv="targetGlobalKey",Uu="targetGlobal",am="collectionParents",jQ=["collectionId","parent"],Jf="clientMetadata",KQ="clientId",v0="bundles",WQ="bundleId",_0="namedQueries",YQ="name",vx="indexConfiguration",JQ="indexId",ZS="collectionGroupIndex",QQ="collectionGroup",Fp="indexState",XQ=["indexId","uid"],CB="sequenceNumberIndex",ZQ=["uid","sequenceNumber"],Bp="indexEntries",eX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xB="documentKeyIndex",tX=["indexId","uid","orderedDocumentKey"],T0="documentOverlays",nX=["userId","collectionPath","documentId"],eA="collectionPathOverlayIndex",rX=["userId","collectionPath","largestBatchId"],IB="collectionGroupOverlayIndex",iX=["userId","collectionGroup","largestBatchId"],_x="globals",oX="name",RB=[om,lo,Kf,Tu,Wf,zm,Uu,Yf,Jf,sm,am,v0,_0],sX=[...RB,T0],PB=[om,lo,Kf,Yv,Wf,zm,Uu,Yf,Jf,sm,am,v0,_0,T0],MB=PB,Tx=[...MB,vx,Fp,Bp],aX=Tx,NB=[...Tx,_x],lX=NB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA extends TB{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function $n(t,e){const n=we(t);return es.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){this.comparator=e,this.root=n||pr.EMPTY}insert(e,n){return new Bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $y(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $y(this.root,e,this.comparator,!1)}getReverseIterator(){return new $y(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $y(this.root,e,this.comparator,!0)}}class $y{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??pr.RED,this.left=i??pr.EMPTY,this.right=o??pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new pr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return pr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1;pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ND(this.data.getIterator())}getIteratorFrom(e){return new ND(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class ND{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function df(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new ei([])}unionWith(e){let n=new xt(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gf(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uX(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kB("Invalid base64 string: "+o):o}})(e);return new hn(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const cX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zs(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=cX.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qt(t.seconds),nanos:Qt(t.nanos)}}function Qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ea(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB="server_timestamp",LB="__type__",VB="__previous_value__",UB="__local_write_time__";function E0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[LB])==null?void 0:r.stringValue)===OB}function w0(t){const e=t.mapValue.fields[VB];return E0(e)?w0(e):e}function lm(t){const e=Zs(t.mapValue.fields[UB].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fX{constructor(e,n,r,i,o,s,l,c,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const Qv="(default)";class ml{constructor(e,n){this.projectId=e,this.database=n||Qv}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database===Qv}isEqual(e){return e instanceof ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="__type__",FB="__max__",nl={mapValue:{fields:{__type__:{stringValue:FB}}}},wx="__vector__",Qf="value",Av={nullValue:"NULL_VALUE"};function gl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?E0(t)?4:BB(t)?9007199254740991:b0(t)?10:11:Ce(28295,{value:t})}function as(t,e){if(t===e)return!0;const n=gl(t);if(n!==gl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lm(t).isEqual(lm(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Zs(i.timestampValue),l=Zs(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return ea(i.bytesValue).isEqual(ea(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Qt(i.geoPointValue.latitude)===Qt(o.geoPointValue.latitude)&&Qt(i.geoPointValue.longitude)===Qt(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Qt(i.integerValue)===Qt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Qt(i.doubleValue),l=Qt(o.doubleValue);return s===l?im(s)===im(l):isNaN(s)&&isNaN(l)}return!1})(t,e);case 9:return Gf(t.arrayValue.values||[],e.arrayValue.values||[],as);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(MD(s)!==MD(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!as(s[c],l[c])))return!1;return!0})(t,e);default:return Ce(52216,{left:t})}}function um(t,e){return(t.values||[]).find((n=>as(n,e)))!==void 0}function yl(t,e){if(t===e)return 0;const n=gl(t),r=gl(e);if(n!==r)return We(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return(function(o,s){const l=Qt(o.integerValue||o.doubleValue),c=Qt(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return DD(t.timestampValue,e.timestampValue);case 4:return DD(lm(t),lm(e));case 5:return JS(t.stringValue,e.stringValue);case 6:return(function(o,s){const l=ea(o),c=ea(s);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){const l=o.split("/"),c=s.split("/");for(let f=0;f<l.length&&f<c.length;f++){const h=We(l[f],c[f]);if(h!==0)return h}return We(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){const l=We(Qt(o.latitude),Qt(s.latitude));return l!==0?l:We(Qt(o.longitude),Qt(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return kD(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var v,E,b,S;const l=o.fields||{},c=s.fields||{},f=(v=l[Qf])==null?void 0:v.arrayValue,h=(E=c[Qf])==null?void 0:E.arrayValue,g=We(((b=f==null?void 0:f.values)==null?void 0:b.length)||0,((S=h==null?void 0:h.values)==null?void 0:S.length)||0);return g!==0?g:kD(f,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===nl.mapValue&&s===nl.mapValue)return 0;if(o===nl.mapValue)return 1;if(s===nl.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),f=s.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){const v=JS(c[g],h[g]);if(v!==0)return v;const E=yl(l[c[g]],f[h[g]]);if(E!==0)return E}return We(c.length,h.length)})(t.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function DD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=Zs(t),r=Zs(e),i=We(n.seconds,r.seconds);return i!==0?i:We(n.nanos,r.nanos)}function kD(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=yl(n[i],r[i]);if(o)return o}return We(n.length,r.length)}function Xf(t){return nA(t)}function nA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Zs(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ea(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=nA(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${nA(n.fields[s])}`;return i+"}"})(t.mapValue):Ce(61005,{value:t})}function Cv(t){switch(gl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=w0(t);return e?16+Cv(e):16;case 5:return 2*t.stringValue.length;case 6:return ea(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Cv(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Rl(r.fields,((o,s)=>{i+=o.length+Cv(s)})),i})(t.mapValue);default:throw Ce(13486,{value:t})}}function ju(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rA(t){return!!t&&"integerValue"in t}function cm(t){return!!t&&"arrayValue"in t}function OD(t){return!!t&&"nullValue"in t}function LD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xv(t){return!!t&&"mapValue"in t}function b0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Ex])==null?void 0:r.stringValue)===wx}function qp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Rl(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=qp(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qp(t.arrayValue.values[n]);return e}return{...t}}function BB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===FB}const qB={mapValue:{fields:{[Ex]:{stringValue:wx},[Qf]:{arrayValue:{}}}}};function dX(t){return"nullValue"in t?Av:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ju(ml.empty(),Te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?b0(t)?qB:{mapValue:{}}:Ce(35942,{value:t})}function hX(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ju(ml.empty(),Te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?qB:"mapValue"in t?b0(t)?{mapValue:{}}:nl:Ce(61959,{value:t})}function VD(t,e){const n=yl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function UD(t,e){const n=yl(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qp(n)}setAll(e){let n=Xt.emptyPath(),r={},i=[];e.forEach(((s,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=qp(s):i.push(l.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());xv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return as(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];xv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Rl(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new gr(qp(this.value))}}function $B(t){const e=[];return Rl(t.fields,((n,r)=>{const i=new Xt([n]);if(xv(r)){const o=$B(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new ei(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new zt(e,0,Ve.min(),Ve.min(),Ve.min(),gr.empty(),0)}static newFoundDocument(e,n,r,i){return new zt(e,1,n,Ve.min(),r,i,0)}static newNoDocument(e,n){return new zt(e,2,n,Ve.min(),Ve.min(),gr.empty(),0)}static newUnknownDocument(e,n){return new zt(e,3,n,Ve.min(),Ve.min(),gr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){this.position=e,this.inclusive=n}}function FD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Te.comparator(Te.fromName(s.referenceValue),n.key):r=yl(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function BD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!as(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n="asc"){this.field=e,this.dir=n}}function pX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{}class at extends zB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mX(e,n,r):n==="array-contains"?new vX(e,r):n==="in"?new YB(e,r):n==="not-in"?new _X(e,r):n==="array-contains-any"?new TX(e,r):new at(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new gX(e,r):new yX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yl(n,this.value)):n!==null&&gl(this.value)===gl(n)&&this.matchesComparison(yl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ct extends zB{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ct(e,n)}matches(e){return Zf(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zf(t){return t.op==="and"}function iA(t){return t.op==="or"}function bx(t){return HB(t)&&Zf(t)}function HB(t){for(const e of t.filters)if(e instanceof Ct)return!1;return!0}function oA(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+Xf(t.value);if(bx(t))return t.filters.map((e=>oA(e))).join(",");{const e=t.filters.map((n=>oA(n))).join(",");return`${t.op}(${e})`}}function GB(t,e){return t instanceof at?(function(r,i){return i instanceof at&&r.op===i.op&&r.field.isEqual(i.field)&&as(r.value,i.value)})(t,e):t instanceof Ct?(function(r,i){return i instanceof Ct&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,l)=>o&&GB(s,i.filters[l])),!0):!1})(t,e):void Ce(19439)}function jB(t,e){const n=t.filters.concat(e);return Ct.create(n,t.op)}function KB(t){return t instanceof at?(function(n){return`${n.field.canonicalString()} ${n.op} ${Xf(n.value)}`})(t):t instanceof Ct?(function(n){return n.op.toString()+" {"+n.getFilters().map(KB).join(" ,")+"}"})(t):"Filter"}class mX extends at{constructor(e,n,r){super(e,n,r),this.key=Te.fromName(r.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class gX extends at{constructor(e,n){super(e,"in",n),this.keys=WB("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class yX extends at{constructor(e,n){super(e,"not-in",n),this.keys=WB("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function WB(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Te.fromName(r.referenceValue)))}class vX extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cm(n)&&um(n.arrayValue,this.value)}}class YB extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&um(this.value.arrayValue,n)}}class _X extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(um(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!um(this.value.arrayValue,n)}}class TX extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>um(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EX{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.Te=null}}function sA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new EX(t,e,n,r,i,o,s)}function Ku(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>oA(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),$m(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Xf(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Xf(r))).join(",")),e.Te=n}return e.Te}function Hm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BD(t.startAt,e.startAt)&&BD(t.endAt,e.endAt)}function Xv(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Zv(t,e){return t.filters.filter((n=>n instanceof at&&n.field.isEqual(e)))}function qD(t,e,n){let r=Av,i=!0;for(const o of Zv(t,e)){let s=Av,l=!0;switch(o.op){case"<":case"<=":s=dX(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,l=!1;break;case"!=":case"not-in":s=Av}VD({value:r,inclusive:i},{value:s,inclusive:l})<0&&(r=s,i=l)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];VD({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function $D(t,e,n){let r=nl,i=!0;for(const o of Zv(t,e)){let s=nl,l=!0;switch(o.op){case">=":case">":s=hX(o.value),l=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,l=!1;break;case"!=":case"not-in":s=nl}UD({value:r,inclusive:i},{value:s,inclusive:l})>0&&(r=s,i=l)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];UD({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JB(t,e,n,r,i,o,s,l){return new la(t,e,n,r,i,o,s,l)}function Rd(t){return new la(t)}function zD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Sx(t){return t.collectionGroup!==null}function Nf(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new xt(Xt.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new fm(o,r))})),n.has(Xt.keyField().canonicalString())||e.Ie.push(new fm(Xt.keyField(),r))}return e.Ie}function zr(t){const e=we(t);return e.Ee||(e.Ee=wX(e,Nf(t))),e.Ee}function wX(t,e){if(t.limitType==="F")return sA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new fm(i.field,o)}));const n=t.endAt?new vl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vl(t.startAt.position,t.startAt.inclusive):null;return sA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function aA(t,e){const n=t.filters.concat([e]);return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function e_(t,e,n){return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gm(t,e){return Hm(zr(t),zr(e))&&t.limitType===e.limitType}function QB(t){return`${Ku(zr(t))}|lt:${t.limitType}`}function Tf(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>KB(i))).join(", ")}]`),$m(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Xf(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Xf(i))).join(",")),`Target(${r})`})(zr(t))}; limitType=${t.limitType})`}function jm(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of Nf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,l,c){const f=FD(s,l,c);return s.inclusive?f<=0:f<0})(r.startAt,Nf(r),i)||r.endAt&&!(function(s,l,c){const f=FD(s,l,c);return s.inclusive?f>=0:f>0})(r.endAt,Nf(r),i))})(t,e)}function XB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZB(t){return(e,n)=>{let r=!1;for(const i of Nf(t)){const o=bX(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function bX(t,e,n){const r=t.field.isKeyField()?Te.comparator(e.key,n.key):(function(o,s,l){const c=s.data.field(o),f=l.data.field(o);return c!==null&&f!==null?yl(c,f):Ce(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rl(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return DB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SX=new Bt(Te.comparator);function ti(){return SX}const eq=new Bt(Te.comparator);function Ap(...t){let e=eq;for(const n of t)e=e.insert(n.key,n);return e}function tq(t){let e=eq;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Xo(){return $p()}function nq(){return $p()}function $p(){return new ua((t=>t.toString()),((t,e)=>t.isEqual(e)))}const AX=new Bt(Te.comparator),CX=new xt(Te.comparator);function Xe(...t){let e=CX;for(const n of t)e=e.add(n);return e}const xX=new xt(We);function Ax(){return xX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:im(e)?"-0":e}}function rq(t){return{integerValue:""+t}}function iq(t,e){return wB(e)?rq(e):Cx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this._=void 0}}function IX(t,e,n){return t instanceof ed?(function(i,o){const s={fields:{[LB]:{stringValue:OB},[UB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&E0(o)&&(o=w0(o)),o&&(s.fields[VB]=o),{mapValue:s}})(n,e):t instanceof Wu?sq(t,e):t instanceof Yu?aq(t,e):(function(i,o){const s=oq(i,o),l=HD(s)+HD(i.Ae);return rA(s)&&rA(i.Ae)?rq(l):Cx(i.serializer,l)})(t,e)}function RX(t,e,n){return t instanceof Wu?sq(t,e):t instanceof Yu?aq(t,e):n}function oq(t,e){return t instanceof td?(function(r){return rA(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class ed extends S0{}class Wu extends S0{constructor(e){super(),this.elements=e}}function sq(t,e){const n=lq(e);for(const r of t.elements)n.some((i=>as(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Yu extends S0{constructor(e){super(),this.elements=e}}function aq(t,e){let n=lq(e);for(const r of t.elements)n=n.filter((i=>!as(i,r)));return{arrayValue:{values:n}}}class td extends S0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function HD(t){return Qt(t.integerValue||t.doubleValue)}function lq(t){return cm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n){this.field=e,this.transform=n}}function PX(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Wu&&i instanceof Wu||r instanceof Yu&&i instanceof Yu?Gf(r.elements,i.elements,as):r instanceof td&&i instanceof td?as(r.Ae,i.Ae):r instanceof ed&&i instanceof ed})(t.transform,e.transform)}class MX{constructor(e,n){this.version=e,this.transformResults=n}}class Zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Iv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class A0{}function uq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Md(t.key,Zt.none()):new Pd(t.key,t.data,Zt.none());{const n=t.data,r=gr.empty();let i=new xt(Xt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ca(t.key,r,new ei(i.toArray()),Zt.none())}}function NX(t,e,n){t instanceof Pd?(function(i,o,s){const l=i.value.clone(),c=jD(i.fieldTransforms,o,s.transformResults);l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(t,e,n):t instanceof ca?(function(i,o,s){if(!Iv(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=jD(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(cq(i)),c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function zp(t,e,n,r){return t instanceof Pd?(function(o,s,l,c){if(!Iv(o.precondition,s))return l;const f=o.value.clone(),h=KD(o.fieldTransforms,c,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof ca?(function(o,s,l,c){if(!Iv(o.precondition,s))return l;const f=KD(o.fieldTransforms,c,s),h=s.data;return h.setAll(cq(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(o,s,l){return Iv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(t,e,n)}function DX(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=oq(r.transform,i||null);o!=null&&(n===null&&(n=gr.empty()),n.set(r.field,o))}return n||null}function GD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Gf(r,i,((o,s)=>PX(o,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pd extends A0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ca extends A0{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function cq(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function jD(t,e,n){const r=new Map;Oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,RX(s,l,n[i]))}return r}function KD(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,IX(o,s,e))}return r}class Md extends A0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xx extends A0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&NX(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nq();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const c=uq(s,l);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ve.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&Gf(this.mutations,e.mutations,((n,r)=>GD(n,r)))&&Gf(this.baseMutations,e.baseMutations,((n,r)=>GD(n,r)))}}class Rx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return AX})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Rx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kX{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn,dt;function fq(t){switch(t){case ie.OK:return Ce(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ce(15467,{code:t})}}function dq(t){if(t===void 0)return wn("GRPC error has no .code"),ie.UNKNOWN;switch(t){case Pn.OK:return ie.OK;case Pn.CANCELLED:return ie.CANCELLED;case Pn.UNKNOWN:return ie.UNKNOWN;case Pn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Pn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Pn.INTERNAL:return ie.INTERNAL;case Pn.UNAVAILABLE:return ie.UNAVAILABLE;case Pn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Pn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Pn.NOT_FOUND:return ie.NOT_FOUND;case Pn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Pn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Pn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Pn.ABORTED:return ie.ABORTED;case Pn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Pn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Pn.DATA_LOSS:return ie.DATA_LOSS;default:return Ce(39323,{code:t})}}(dt=Pn||(Pn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OX=new sl([4294967295,4294967295],0);function WD(t){const e=hq().encode(t),n=new oB;return n.update(e),new Uint8Array(n.digest())}function YD(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new sl([n,r],0),new sl([i,o],0)]}class Mx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cp(`Invalid padding: ${n}`);if(r<0)throw new Cp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cp(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=sl.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(sl.fromNumber(r)));return i.compare(OX)===1&&(i=new sl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=WD(e),[r,i]=YD(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Mx(o,i,n);return r.forEach((l=>s.insert(l))),s}insert(e){if(this.ge===0)return;const n=WD(e),[r,i]=YD(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ym.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Wm(Ve.min(),i,new Bt(We),ti(),Xe())}}class Ym{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ym(r,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class pq{constructor(e,n){this.targetId=e,this.Ce=n}}class mq{constructor(e,n,r=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class JD{constructor(){this.ve=0,this.Fe=QD(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),n=Xe(),r=Xe();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ce(38017,{changeType:o})}})),new Ym(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=QD()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LX{constructor(e){this.Ge=e,this.ze=new Map,this.je=ti(),this.Je=zy(),this.He=zy(),this.Ye=new Bt(We)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Xv(o))if(r===0){const s=new Te(o.path);this.et(n,s,zt.newNoDocument(s,Ve.min()))}else Oe(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const l=this.ut(e),c=l?this.ct(l,e,s):1;if(c!==0){this.it(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=ea(r).toUint8Array()}catch(c){if(c instanceof kB)return ss("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Mx(s,i,o)}catch(c){return ss(c instanceof Cp?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,s)=>{const l=this.ot(s);if(l){if(o.current&&Xv(l.target)){const c=new Te(l.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,zt.newNoDocument(c,e))}o.Be&&(n.set(s,o.ke()),o.qe())}}));let r=Xe();this.He.forEach(((o,s)=>{let l=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new Wm(e,n,this.Ye,this.je,r);return this.je=ti(),this.Je=zy(),this.He=zy(),this.Ye=new Bt(We),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new JD,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xt(We),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xt(We),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new JD),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function zy(){return new Bt(Te.comparator)}function QD(){return new Bt(Te.comparator)}const VX={asc:"ASCENDING",desc:"DESCENDING"},UX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FX={and:"AND",or:"OR"};class BX{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lA(t,e){return t.useProto3Json||$m(e)?e:{value:e}}function nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qX(t,e){return nd(t,e.toTimestamp())}function bn(t){return Oe(!!t,49232),Ve.fromTimestamp((function(n){const r=Zs(n);return new wt(r.seconds,r.nanos)})(t))}function Nx(t,e){return uA(t,e).canonicalString()}function uA(t,e){const n=(function(i){return new st(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function yq(t){const e=st.fromString(t);return Oe(xq(e),10190,{key:e.toString()}),e}function dm(t,e){return Nx(t.databaseId,e.path)}function ts(t,e){const n=yq(e);if(n.get(1)!==t.databaseId.projectId)throw new de(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Te(Tq(n))}function vq(t,e){return Nx(t.databaseId,e)}function _q(t){const e=yq(t);return e.length===4?st.emptyPath():Tq(e)}function cA(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tq(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function XD(t,e,n){return{name:dm(t,e),fields:n.value.mapValue.fields}}function Eq(t,e,n){const r=ts(t,e.name),i=bn(e.updateTime),o=e.createTime?bn(e.createTime):Ve.min(),s=new gr({mapValue:{fields:e.fields}}),l=zt.newFoundDocument(r,i,o,s);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function $X(t,e){return"found"in e?(function(r,i){Oe(!!i.found,43571),i.found.name,i.found.updateTime;const o=ts(r,i.found.name),s=bn(i.found.updateTime),l=i.found.createTime?bn(i.found.createTime):Ve.min(),c=new gr({mapValue:{fields:i.found.fields}});return zt.newFoundDocument(o,s,l,c)})(t,e):"missing"in e?(function(r,i){Oe(!!i.missing,3894),Oe(!!i.readTime,22933);const o=ts(r,i.missing),s=bn(i.readTime);return zt.newNoDocument(o,s)})(t,e):Ce(7234,{result:e})}function zX(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ce(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,h){return f.useProto3Json?(Oe(h===void 0||typeof h=="string",58123),hn.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),hn.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(f){const h=f.code===void 0?ie.UNKNOWN:dq(f.code);return new de(h,f.message||"")})(s);n=new mq(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ts(t,r.document.name),o=bn(r.document.updateTime),s=r.document.createTime?bn(r.document.createTime):Ve.min(),l=new gr({mapValue:{fields:r.document.fields}}),c=zt.newFoundDocument(i,o,s,l),f=r.targetIds||[],h=r.removedTargetIds||[];n=new Rv(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ts(t,r.document),o=r.readTime?bn(r.readTime):Ve.min(),s=zt.newNoDocument(i,o),l=r.removedTargetIds||[];n=new Rv([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ts(t,r.document),o=r.removedTargetIds||[];n=new Rv([],o,i,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new kX(i,o),l=r.targetId;n=new pq(l,s)}}return n}function hm(t,e){let n;if(e instanceof Pd)n={update:XD(t,e.key,e.value)};else if(e instanceof Md)n={delete:dm(t,e.key)};else if(e instanceof ca)n={update:XD(t,e.key,e.data),updateMask:YX(e.fieldMask)};else{if(!(e instanceof xx))return Ce(16599,{Vt:e.type});n={verify:dm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const l=s.transform;if(l instanceof ed)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Wu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Yu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof td)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw Ce(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:qX(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ce(27497)})(t,e.precondition)),n}function fA(t,e){const n=e.currentDocument?(function(o){return o.updateTime!==void 0?Zt.updateTime(bn(o.updateTime)):o.exists!==void 0?Zt.exists(o.exists):Zt.none()})(e.currentDocument):Zt.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,l){let c=null;if("setToServerValue"in l)Oe(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new ed;else if("appendMissingElements"in l){const h=l.appendMissingElements.values||[];c=new Wu(h)}else if("removeAllFromArray"in l){const h=l.removeAllFromArray.values||[];c=new Yu(h)}else"increment"in l?c=new td(s,l.increment):Ce(16584,{proto:l});const f=Xt.fromServerFormat(l.fieldPath);return new Km(f,c)})(t,i))):[];if(e.update){e.update.name;const i=ts(t,e.update.name),o=new gr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const f=c.fieldPaths||[];return new ei(f.map((h=>Xt.fromServerFormat(h))))})(e.updateMask);return new ca(i,o,s,n,r)}return new Pd(i,o,n,r)}if(e.delete){const i=ts(t,e.delete);return new Md(i,n)}if(e.verify){const i=ts(t,e.verify);return new xx(i,n)}return Ce(1463,{proto:e})}function HX(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map((n=>(function(i,o){let s=i.updateTime?bn(i.updateTime):bn(o);return s.isEqual(Ve.min())&&(s=bn(o)),new MX(s,i.transformResults||[])})(n,e)))):[]}function wq(t,e){return{documents:[vq(t,e.path)]}}function bq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vq(t,i);const o=(function(f){if(f.length!==0)return Cq(Ct.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const s=(function(f){if(f.length!==0)return f.map((h=>(function(v){return{field:Ef(v.field),direction:jX(v.dir)}})(h)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=lA(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:i}}function Sq(t){let e=_q(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Oe(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(g){const v=Aq(g);return v instanceof Ct&&bx(v)?v.getFilters():[v]})(n.where));let s=[];n.orderBy&&(s=(function(g){return g.map((v=>(function(b){return new fm(wf(b.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v)))})(n.orderBy));let l=null;n.limit&&(l=(function(g){let v;return v=typeof g=="object"?g.value:g,$m(v)?null:v})(n.limit));let c=null;n.startAt&&(c=(function(g){const v=!!g.before,E=g.values||[];return new vl(E,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(g){const v=!g.before,E=g.values||[];return new vl(E,v)})(n.endAt)),JB(e,i,s,o,l,"F",c,f)}function GX(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Aq(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wf(n.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wf(n.unaryFilter.field);return at.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=wf(n.unaryFilter.field);return at.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=wf(n.unaryFilter.field);return at.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(t):t.fieldFilter!==void 0?(function(n){return at.create(wf(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ct.create(n.compositeFilter.filters.map((r=>Aq(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(n.compositeFilter.op))})(t):Ce(30097,{filter:t})}function jX(t){return VX[t]}function KX(t){return UX[t]}function WX(t){return FX[t]}function Ef(t){return{fieldPath:t.canonicalString()}}function wf(t){return Xt.fromServerFormat(t.fieldPath)}function Cq(t){return t instanceof at?(function(n){if(n.op==="=="){if(LD(n.value))return{unaryFilter:{field:Ef(n.field),op:"IS_NAN"}};if(OD(n.value))return{unaryFilter:{field:Ef(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(LD(n.value))return{unaryFilter:{field:Ef(n.field),op:"IS_NOT_NAN"}};if(OD(n.value))return{unaryFilter:{field:Ef(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ef(n.field),op:KX(n.op),value:n.value}}})(t):t instanceof Ct?(function(n){const r=n.getFilters().map((i=>Cq(i)));return r.length===1?r[0]:{compositeFilter:{op:WX(n.op),filters:r}}})(t):Ce(54877,{filter:t})}function YX(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function xq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,i,o=Ve.min(),s=Ve.min(),l=hn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e){this.yt=e}}function JX(t,e){let n;if(e.document)n=Eq(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Te.fromSegments(e.noDocument.path),i=Qu(e.noDocument.readTime);n=zt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ce(56709);{const r=Te.fromSegments(e.unknownDocument.path),i=Qu(e.unknownDocument.version);n=zt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const o=new wt(i[0],i[1]);return Ve.fromTimestamp(o)})(e.readTime)),n}function ZD(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:t_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:dm(o,s.key),fields:s.data.value.mapValue.fields,updateTime:nd(o,s.version.toTimestamp()),createTime:nd(o,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ju(e.version)};else{if(!e.isUnknownDocument())return Ce(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Ju(e.version)}}return r}function t_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ju(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qu(t){const e=new wt(t.seconds,t.nanoseconds);return Ve.fromTimestamp(e)}function Au(t,e){const n=(e.baseMutations||[]).map((o=>fA(t.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const l=e.mutations[o+1];s.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>fA(t.yt,o))),i=wt.fromMillis(e.localWriteTimeMs);return new Ix(e.batchId,i,n,r)}function xp(t){const e=Qu(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Qu(t.lastLimboFreeSnapshotVersion):Ve.min();let r;return r=(function(o){return o.documents!==void 0})(t.query)?(function(o){const s=o.documents.length;return Oe(s===1,1966,{count:s}),zr(Rd(_q(o.documents[0])))})(t.query):(function(o){return zr(Sq(o))})(t.query),new Bs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,hn.fromBase64String(t.resumeToken))}function Rq(t,e){const n=Ju(e.snapshotVersion),r=Ju(e.lastLimboFreeSnapshotVersion);let i;i=Xv(e.target)?wq(t.yt,e.target):bq(t.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ku(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Dx(t){const e=Sq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?e_(e,e.limit,"L"):e}function Hw(t,e){return new Px(e.largestBatchId,fA(t.yt,e.overlayMutation))}function ek(t,e){const n=e.path.lastSegment();return[t,Pr(e.path.popLast()),n]}function tk(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ju(r.readTime),documentKey:Pr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QX{getBundleMetadata(e,n){return nk(e).get(n).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:Qu(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,n){return nk(e).put((function(i){return{bundleId:i.id,createTime:Ju(bn(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return rk(e).get(n).next((r=>{if(r)return(function(o){return{name:o.name,query:Dx(o.bundledQuery),readTime:Qu(o.readTime)}})(r)}))}saveNamedQuery(e,n){return rk(e).put((function(i){return{name:i.name,readTime:Ju(bn(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function nk(t){return $n(t,v0)}function rk(t){return $n(t,_0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new C0(e,r)}getOverlay(e,n){return op(e).get(ek(this.userId,n)).next((r=>r?Hw(this.serializer,r):null))}getOverlays(e,n){const r=Xo();return Q.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((o,s)=>{const l=new Px(n,s);i.push(this.St(e,l))})),Q.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(Pr(s.getCollectionPath()))));const o=[];return i.forEach((s=>{const l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(op(e).Z(eA,l))})),Q.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Xo(),o=Pr(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return op(e).J(eA,s).next((l=>{for(const c of l){const f=Hw(this.serializer,c);i.set(f.getKey(),f)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const o=Xo();let s;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return op(e).ee({index:IB,range:l},((c,f,h)=>{const g=Hw(this.serializer,f);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()})).next((()=>o))}St(e,n){return op(e).put((function(i,o,s){const[l,c,f]=ek(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:hm(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function op(t){return $n(t,T0)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XX{bt(e){return $n(e,_x)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?hn.fromUint8Array(r):hn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Qt(e.integerValue));else if("doubleValue"in e){const r=Qt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),im(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Zs(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ea(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?BB(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):b0(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ce(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var s,l;const r=e.fields||{};this.Ft(n,53);const i=Qf,o=((l=(s=r[i].arrayValue)==null?void 0:s.values)==null?void 0:l.length)||0;this.Ft(n,15),n.Mt(Qt(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Te.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Cu.Kt=new Cu;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=255;function ZX(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function ik(t){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const s=ZX(255&r[o]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class eZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=ik(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=ik(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(hf),this.sn(255)}_n(){this.an(hf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===hf?(this.sn(hf),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===hf?(this.an(hf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class tZ{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class nZ{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class sp{constructor(){this.cn=new eZ,this.ln=new tZ(this.cn),this.hn=new nZ(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new xu(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:Pv(this.En),directionalValue:Pv(this.dn),orderedDocumentKey:Pv(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Wa(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=ok(t.En,e.En),n!==0?n:(n=ok(t.dn,e.dn),n!==0?n:Te.comparator(t.In,e.In)))}function ok(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function Pv(t){return z4()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function sk(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class ak{constructor(e){this.mn=new xt(((n,r)=>Xt.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Oe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=QS(e);if(n!==void 0&&!this.wn(n))return!1;const r=_u(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!i.has(l.field.canonicalString())){const c=r[o];if(!this.Sn(l,c)||!this.bn(this.fn[s++],c))return!1}++o}for(;o<r.length;++o){const l=r[o];if(s>=this.fn.length||!this.bn(this.fn[s++],l))return!1}return!0}Dn(){if(this.pn)return null;let e=new xt(Xt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new wv(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new wv(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new wv(r.field,r.dir==="asc"?0:1)));return new Kv(Kv.UNKNOWN_ID,this.collectionId,n,rm.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(t){var n,r;if(Oe(t instanceof at||t instanceof Ct,20012),t instanceof at){if(t instanceof YB){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((o=>at.create(t.field,"==",o))))||[];return Ct.create(i,"or")}return t}const e=t.filters.map((i=>Pq(i)));return Ct.create(e,t.op)}function rZ(t){if(t.getFilters().length===0)return[];const e=pA(Pq(t));return Oe(Mq(e),7391),dA(e)||hA(e)?[e]:e.getFilters()}function dA(t){return t instanceof at}function hA(t){return t instanceof Ct&&bx(t)}function Mq(t){return dA(t)||hA(t)||(function(n){if(n instanceof Ct&&iA(n)){for(const r of n.getFilters())if(!dA(r)&&!hA(r))return!1;return!0}return!1})(t)}function pA(t){if(Oe(t instanceof at||t instanceof Ct,34018),t instanceof at)return t;if(t.filters.length===1)return pA(t.filters[0]);const e=t.filters.map((r=>pA(r)));let n=Ct.create(e,t.op);return n=n_(n),Mq(n)?n:(Oe(n instanceof Ct,64498),Oe(Zf(n),40251),Oe(n.filters.length>1,57927),n.filters.reduce(((r,i)=>kx(r,i))))}function kx(t,e){let n;return Oe(t instanceof at||t instanceof Ct,38388),Oe(e instanceof at||e instanceof Ct,25473),n=t instanceof at?e instanceof at?(function(i,o){return Ct.create([i,o],"and")})(t,e):lk(t,e):e instanceof at?lk(e,t):(function(i,o){if(Oe(i.filters.length>0&&o.filters.length>0,48005),Zf(i)&&Zf(o))return jB(i,o.getFilters());const s=iA(i)?i:o,l=iA(i)?o:i,c=s.filters.map((f=>kx(f,l)));return Ct.create(c,"or")})(t,e),n_(n)}function lk(t,e){if(Zf(e))return jB(e,t.getFilters());{const n=e.filters.map((r=>kx(t,r)));return Ct.create(n,"or")}}function n_(t){if(Oe(t instanceof at||t instanceof Ct,11850),t instanceof at)return t;const e=t.getFilters();if(e.length===1)return n_(e[0]);if(HB(t))return t;const n=e.map((i=>n_(i))),r=[];return n.forEach((i=>{i instanceof at?r.push(i):i instanceof Ct&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ct.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(){this.Cn=new Ox}addToCollectionParentIndex(e,n){return this.Cn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Ai.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class Ox{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xt(st.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="IndexedDbIndexManager",Hy=new Uint8Array(0);class oZ{constructor(e,n){this.databaseId=n,this.vn=new Ox,this.Fn=new ua((r=>Ku(r)),((r,i)=>Hm(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const o={collectionId:r,parent:Pr(i)};return ck(e).put(o)}return Q.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[hB(n),""],!1,!0);return ck(e).J(i).next((o=>{for(const s of o){if(s.collectionId!==n)break;r.push(Qo(s.parent))}return r}))}addFieldIndex(e,n){const r=ap(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const o=r.add(i);if(n.indexState){const s=mf(e);return o.next((l=>{s.put(tk(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return o.next()}deleteFieldIndex(e,n){const r=ap(e),i=mf(e),o=pf(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=ap(e),r=pf(e),i=mf(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return Q.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new ak(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,n){const r=pf(e);let i=!0;const o=new Map;return Q.forEach(this.Mn(n),(s=>this.xn(e,s).next((l=>{i&&(i=!!l),o.set(s,l)})))).next((()=>{if(i){let s=Xe();const l=[];return Q.forEach(o,((c,f)=>{pe(uk,`Using index ${(function(D){return`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map((V=>`${V.fieldPath}:${V.kind}`)).join(",")}`})(c)} to execute ${Ku(n)}`);const h=(function(D,V){const q=QS(V);if(q===void 0)return null;for(const z of Zv(D,q.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(f,c),g=(function(D,V){const q=new Map;for(const z of _u(V))for(const O of Zv(D,z.fieldPath))switch(O.op){case"==":case"in":q.set(z.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return q.set(z.fieldPath.canonicalString(),O.value),Array.from(q.values())}return null})(f,c),v=(function(D,V){const q=[];let z=!0;for(const O of _u(V)){const L=O.kind===0?qD(D,O.fieldPath,D.startAt):$D(D,O.fieldPath,D.startAt);q.push(L.value),z&&(z=L.inclusive)}return new vl(q,z)})(f,c),E=(function(D,V){const q=[];let z=!0;for(const O of _u(V)){const L=O.kind===0?$D(D,O.fieldPath,D.endAt):qD(D,O.fieldPath,D.endAt);q.push(L.value),z&&(z=L.inclusive)}return new vl(q,z)})(f,c),b=this.On(c,f,v),S=this.On(c,f,E),A=this.Nn(c,f,g),I=this.Bn(c.indexId,h,b,v.inclusive,S,E.inclusive,A);return Q.forEach(I,(N=>r.Y(N,n.limit).next((D=>{D.forEach((V=>{const q=Te.fromSegments(V.documentKey);s.has(q)||(s=s.add(q),l.push(q))}))}))))})).next((()=>l))}return Q.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=rZ(Ct.create(e.filters,"and")).map((r=>sA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,o,s,l){const c=(n!=null?n.length:1)*Math.max(r.length,o.length),f=c/(n!=null?n.length:1),h=[];for(let g=0;g<c;++g){const v=n?this.Ln(n[g/f]):Hy,E=this.kn(e,v,r[g%f],i),b=this.qn(e,v,o[g%f],s),S=l.map((A=>this.kn(e,v,A,!0)));h.push(...this.createRange(E,b,S))}return h}kn(e,n,r,i){const o=new xu(e,Te.empty(),n,r);return i?o:o.An()}qn(e,n,r,i){const o=new xu(e,Te.empty(),n,r);return i?o.An():o}xn(e,n){const r=new ak(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let s=null;for(const l of o)r.yn(l)&&(!s||l.fields.length>s.fields.length)&&(s=l);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return Q.forEach(i,(o=>this.xn(e,o).next((s=>{s?r!==0&&s.fields.length<(function(c){let f=new xt(Xt.comparator),h=!1;for(const g of c.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?h=!0:f=f.add(v.field));for(const g of c.orderBy)g.field.isKeyField()||(f=f.add(g.field));return f.size+(h?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new sp;for(const i of _u(e)){const o=n.data.field(i.fieldPath);if(o==null)return null;const s=r.Pn(i.kind);Cu.Kt.Dt(o,s)}return r.un()}Ln(e){const n=new sp;return Cu.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new sp;return Cu.Kt.Dt(ju(this.databaseId,n),r.Pn((function(o){const s=_u(o);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new sp);let o=0;for(const s of _u(e)){const l=r[o++];for(const c of i)if(this.Un(n,s.fieldPath)&&cm(l))i=this.Kn(i,s,l);else{const f=c.Pn(s.kind);Cu.Kt.Dt(l,f)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const l of i){const c=new sp;c.seed(l.un()),Cu.Kt.Dt(s,c.Pn(n.kind)),o.push(c)}return o}Un(e,n){return!!e.filters.find((r=>r instanceof at&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=ap(e),i=mf(e);return(n?r.J(ZS,IDBKeyRange.bound(n,n)):r.J()).next((o=>{const s=[];return Q.forEach(o,(l=>i.get([l.indexId,this.uid]).next((c=>{s.push((function(h,g){const v=g?new rm(g.sequenceNumber,new Ai(Qu(g.readTime),new Te(Qo(g.documentKey)),g.largestBatchId)):rm.empty(),E=h.fields.map((([b,S])=>new wv(Xt.fromServerFormat(b),S)));return new Kv(h.indexId,h.collectionGroup,E,v)})(l,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:We(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=ap(e),o=mf(e);return this.Gn(e).next((s=>i.J(ZS,IDBKeyRange.bound(n,n)).next((l=>Q.forEach(l,(c=>o.put(tk(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return Q.forEach(n,((i,o)=>{const s=r.get(i.collectionGroup);return(s?Q.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(r.set(i.collectionGroup,l),Q.forEach(l,(c=>this.zn(e,i,c).next((f=>{const h=this.jn(o,c);return f.isEqual(h)?Q.resolve():this.Jn(e,o,c,f,h)})))))))}))}Hn(e,n,r,i){return pf(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return pf(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=pf(e);let o=new xt(Wa);return i.ee({index:xB,range:IDBKeyRange.only([r.indexId,this.uid,Pv(this.$n(r,n))])},((s,l)=>{o=o.add(new xu(r.indexId,n,sk(l.arrayValue),sk(l.directionalValue)))})).next((()=>o))}jn(e,n){let r=new xt(Wa);const i=this.Qn(n,e);if(i==null)return r;const o=QS(n);if(o!=null){const s=e.data.field(o.fieldPath);if(cm(s))for(const l of s.arrayValue.values||[])r=r.add(new xu(n.indexId,e.key,this.Ln(l),i))}else r=r.add(new xu(n.indexId,e.key,Hy,i));return r}Jn(e,n,r,i,o){pe(uk,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,f,h,g,v){const E=c.getIterator(),b=f.getIterator();let S=df(E),A=df(b);for(;S||A;){let I=!1,N=!1;if(S&&A){const D=h(S,A);D<0?N=!0:D>0&&(I=!0)}else S!=null?N=!0:I=!0;I?(g(A),A=df(b)):N?(v(S),S=df(E)):(S=df(E),A=df(b))}})(i,o,Wa,(l=>{s.push(this.Hn(e,n,r,l))}),(l=>{s.push(this.Yn(e,n,r,l))})),Q.waitFor(s)}Gn(e){let n=1;return mf(e).ee({index:CB,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,l)=>Wa(s,l))).filter(((s,l,c)=>!l||Wa(s,c[l-1])!==0));const i=[];i.push(e);for(const s of r){const l=Wa(s,e),c=Wa(s,n);if(l===0)i[0]=e.An();else if(l>0&&c<0)i.push(s),i.push(s.An());else if(c>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const l=i[s].Vn(this.uid,Hy,Te.empty()),c=i[s+1].Vn(this.uid,Hy,Te.empty());o.push(IDBKeyRange.bound(l,c))}return o}Zn(e,n){return Wa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(fk)}getMinOffset(e,n){return Q.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Ce(44426))))).next(fk)}}function ck(t){return $n(t,am)}function pf(t){return $n(t,Bp)}function ap(t){return $n(t,vx)}function mf(t){return $n(t,Fp)}function fk(t){Oe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;mx(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ai(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nq=41943040;class Ar{static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dq(t,e,n){const r=t.store(lo),i=t.store(Kf),o=[],s=IDBKeyRange.only(n.batchId);let l=0;const c=r.ee({range:s},((h,g,v)=>(l++,v.delete())));o.push(c.next((()=>{Oe(l===1,47070,{batchId:n.batchId})})));const f=[];for(const h of n.mutations){const g=bB(e,h.key.path,n.batchId);o.push(i.delete(g)),f.push(h.key)}return Q.waitFor(o).next((()=>f))}function r_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ce(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(Nq,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);class x0{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){Oe(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new x0(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ya(e).ee({index:Pu,range:r},((i,o,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const o=bf(e),s=Ya(e);return s.add({}).next((l=>{Oe(typeof l=="number",49019);const c=new Ix(l,n,r,i),f=(function(E,b,S){const A=S.baseMutations.map((N=>hm(E.yt,N))),I=S.mutations.map((N=>hm(E.yt,N)));return{userId:b,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:A,mutations:I}})(this.serializer,this.userId,c),h=[];let g=new xt(((v,E)=>We(v.canonicalString(),E.canonicalString())));for(const v of i){const E=bB(this.userId,v.key.path,l);g=g.add(v.key.path.popLast()),h.push(s.put(f)),h.push(o.put(E,FQ))}return g.forEach((v=>{h.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[l]=c.keys()})),Q.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return Ya(e).get(n).next((r=>r?(Oe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Au(this.serializer,r)):null))}er(e,n){return this.Xn[n]?Q.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Ya(e).ee({index:Pu,range:i},((s,l,c)=>{l.userId===this.userId&&(Oe(l.batchId>=r,47524,{tr:r}),o=Au(this.serializer,l)),c.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=al;return Ya(e).ee({index:Pu,range:n,reverse:!0},((i,o,s)=>{r=o.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,al],[this.userId,Number.POSITIVE_INFINITY]);return Ya(e).J(Pu,n).next((r=>r.map((i=>Au(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=bv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return bf(e).ee({range:i},((s,l,c)=>{const[f,h,g]=s,v=Qo(h);if(f===this.userId&&n.path.isEqual(v))return Ya(e).get(g).next((E=>{if(!E)throw Ce(61480,{nr:s,batchId:g});Oe(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:g}),o.push(Au(this.serializer,E))}));c.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(We);const i=[];return n.forEach((o=>{const s=bv(this.userId,o.path),l=IDBKeyRange.lowerBound(s),c=bf(e).ee({range:l},((f,h,g)=>{const[v,E,b]=f,S=Qo(E);v===this.userId&&o.path.isEqual(S)?r=r.add(b):g.done()}));i.push(c)})),Q.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=bv(this.userId,r),s=IDBKeyRange.lowerBound(o);let l=new xt(We);return bf(e).ee({range:s},((c,f,h)=>{const[g,v,E]=c,b=Qo(v);g===this.userId&&r.isPrefixOf(b)?b.length===i&&(l=l.add(E)):h.done()})).next((()=>this.rr(e,l)))}rr(e,n){const r=[],i=[];return n.forEach((o=>{i.push(Ya(e).get(o).next((s=>{if(s===null)throw Ce(35274,{batchId:o});Oe(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Au(this.serializer,s))})))})),Q.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return Dq(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),Q.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return Q.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return bf(e).ee({range:r},((o,s,l)=>{if(o[0]===this.userId){const c=Qo(o[1]);i.push(c)}else l.done()})).next((()=>{Oe(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,n){return kq(e,this.userId,n)}_r(e){return Oq(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:al,lastStreamToken:""}))}}function kq(t,e,n){const r=bv(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return bf(t).ee({range:o,X:!0},((l,c,f)=>{const[h,g,v]=l;h===e&&g===i&&(s=!0),f.done()})).next((()=>s))}function Ya(t){return $n(t,lo)}function bf(t){return $n(t,Kf)}function Oq(t){return $n(t,om)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xu(0)}static cr(){return new Xu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Xu(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Ve.fromTimestamp(new wt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>gf(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(Oe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const o=[];return gf(e).ee(((s,l)=>{const c=xp(l);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))})).next((()=>Q.waitFor(o))).next((()=>i))}forEachTarget(e,n){return gf(e).ee(((r,i)=>{const o=xp(i);n(o)}))}lr(e){return hk(e).get(Jv).next((n=>(Oe(n!==null,2888),n)))}hr(e,n){return hk(e).put(Jv,n)}Pr(e,n){return gf(e).put(Rq(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Ku(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return gf(e).ee({range:i,index:AB},((s,l,c)=>{const f=xp(l);Hm(n,f.target)&&(o=f,c.done())})).next((()=>o))}addMatchingKeys(e,n,r){const i=[],o=Za(e);return n.forEach((s=>{const l=Pr(s.path);i.push(o.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,s))})),Q.waitFor(i)}removeMatchingKeys(e,n,r){const i=Za(e);return Q.forEach(n,(o=>{const s=Pr(o.path);return Q.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,n){const r=Za(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Za(e);let o=Xe();return i.ee({range:r,X:!0},((s,l,c)=>{const f=Qo(s[1]),h=new Te(f);o=o.add(h)})).next((()=>o))}containsKey(e,n){const r=Pr(n.path),i=IDBKeyRange.bound([r],[hB(r)],!1,!0);let o=0;return Za(e).ee({index:yx,X:!0,range:i},(([s,l],c,f)=>{s!==0&&(o++,f.done())})).next((()=>o>0))}At(e,n){return gf(e).get(n).next((r=>r?xp(r):null))}}function gf(t){return $n(t,Wf)}function hk(t){return $n(t,Uu)}function Za(t){return $n(t,Yf)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="LruGarbageCollector",aZ=1048576;function mk([t,e],[n,r]){const i=We(t,n);return i===0?We(e,r):i}class lZ{constructor(e){this.Ir=e,this.buffer=new xt(mk),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();mk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Lq{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){pe(pk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Il(n)?pe(pk,"Ignoring IndexedDB error during garbage collection: ",n):await xl(n)}await this.Vr(3e5)}))}}class uZ{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(Zr.ce);const r=new lZ(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(dk)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dk):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,l,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,l=Date.now(),this.removeTargets(e,r,n)))).next((g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(f=Date.now(),_f()<=ot.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g}))))}}function Vq(t,e){return new uZ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(e,n){this.db=e,this.garbageCollector=Vq(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return Gy(e,r)}removeReference(e,n,r){return Gy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Gy(e,n)}br(e,n){return(function(i,o){let s=!1;return Oq(i).te((l=>kq(i,l,o).next((c=>(c&&(s=!0),Q.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((s,l)=>{if(l<=n){const c=this.br(e,s).next((f=>{if(!f)return o++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Ve.min()),Za(e).delete((function(g){return[0,Pr(g.path)]})(s)))))}));i.push(c)}})).next((()=>Q.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Gy(e,n)}Sr(e,n){const r=Za(e);let i,o=Zr.ce;return r.ee({index:yx},(([s,l],{path:c,sequenceNumber:f})=>{s===0?(o!==Zr.ce&&n(new Te(Qo(i)),o),o=f,i=c):o=Zr.ce})).next((()=>{o!==Zr.ce&&n(new Te(Qo(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gy(t,e){return Za(t).put((function(r,i){return{targetId:0,path:Pr(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uq{constructor(){this.changes=new ua((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return gu(e).put(r)}removeEntry(e,n,r){return gu(e).delete((function(o,s){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],t_(s),l[l.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=zt.newInvalidDocument(n);return gu(e).ee({index:Sv,range:IDBKeyRange.only(lp(n))},((i,o)=>{r=this.Cr(n,o)})).next((()=>r))}vr(e,n){let r={size:0,document:zt.newInvalidDocument(n)};return gu(e).ee({index:Sv,range:IDBKeyRange.only(lp(n))},((i,o)=>{r={document:this.Cr(n,o),size:r_(o)}})).next((()=>r))}getEntries(e,n){let r=ti();return this.Fr(e,n,((i,o)=>{const s=this.Cr(i,o);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=ti(),i=new Bt(Te.comparator);return this.Fr(e,n,((o,s)=>{const l=this.Cr(o,s);r=r.insert(o,l),i=i.insert(o,r_(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return Q.resolve();let i=new xt(vk);n.forEach((c=>i=i.add(c)));const o=IDBKeyRange.bound(lp(i.first()),lp(i.last())),s=i.getIterator();let l=s.getNext();return gu(e).ee({index:Sv,range:o},((c,f,h)=>{const g=Te.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;l&&vk(l,g)<0;)r(l,null),l=s.getNext();l&&l.isEqual(g)&&(r(l,f),l=s.hasNext()?s.getNext():null),l?h.j(lp(l)):h.done()})).next((()=>{for(;l;)r(l,null),l=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,l=[s.popLast().toArray(),s.lastSegment(),t_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gu(e).J(IDBKeyRange.bound(l,c,!0)).next((f=>{o==null||o.incrementDocumentReadCount(f.length);let h=ti();for(const g of f){const v=this.Cr(Te.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(jm(n,v)||i.has(v.key))&&(h=h.insert(v.key,v))}return h}))}getAllFromCollectionGroup(e,n,r,i){let o=ti();const s=yk(n,r),l=yk(n,Ai.max());return gu(e).ee({index:SB,range:IDBKeyRange.bound(s,l,!0)},((c,f,h)=>{const g=this.Cr(Te.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(g.key,g),o.size===i&&h.done()})).next((()=>o))}newChangeBuffer(e){return new dZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return gk(e).get(XS).next((n=>(Oe(!!n,20021),n)))}Dr(e,n){return gk(e).put(XS,n)}Cr(e,n){if(n){const r=JX(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ve.min())))return r}return zt.newInvalidDocument(e)}}function Fq(t){return new fZ(t)}class dZ extends Uq{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new ua((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new xt(((o,s)=>We(o.canonicalString(),s.canonicalString())));return this.changes.forEach(((o,s)=>{const l=this.Br.get(o);if(n.push(this.Nr.removeEntry(e,o,l.readTime)),s.isValidDocument()){const c=ZD(this.Nr.serializer,s);i=i.add(o.path.popLast());const f=r_(c);r+=f-l.size,n.push(this.Nr.addEntry(e,o,c))}else if(r-=l.size,this.trackRemovals){const c=ZD(this.Nr.serializer,s.convertToNoDocument(Ve.min()));n.push(this.Nr.addEntry(e,o,c))}})),i.forEach((o=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),n.push(this.Nr.updateMetadata(e,r)),Q.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((o,s)=>{this.Br.set(o,{size:s,readTime:r.get(o).readTime})})),r)))}}function gk(t){return $n(t,sm)}function gu(t){return $n(t,Yv)}function lp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yk(t,e){const n=e.documentKey.path.toArray();return[t,t_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vk(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=We(n[o],r[o]),i)return i;return i=We(n.length,r.length),i||(i=We(n[n.length-2],r[r.length-2]),i||We(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&zp(r.mutation,i,ei.empty(),wt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Xe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Xe()){const i=Xo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let s=Ap();return o.forEach(((l,c)=>{s=s.insert(l,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=Xo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Xe())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,l)=>{n.set(s,l)}))}))}computeViews(e,n,r,i){let o=ti();const s=$p(),l=(function(){return $p()})();return n.forEach(((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof ca)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),zp(h.mutation,f,h.mutation.getFieldMask(),wt.now())):s.set(f.key,ei.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((f,h)=>s.set(f,h))),n.forEach(((f,h)=>l.set(f,new hZ(h,s.get(f)??null)))),l)))}recalculateAndSaveOverlays(e,n){const r=$p();let i=new Bt(((s,l)=>s-l)),o=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const l of s)l.keys().forEach((c=>{const f=n.get(c);if(f===null)return;let h=r.get(c)||ei.empty();h=l.applyToLocalView(f,h),r.set(c,h);const g=(i.get(l.batchId)||Xe()).add(c);i=i.insert(l.batchId,g)}))})).next((()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,h=c.value,g=nq();h.forEach((v=>{if(!o.has(v)){const E=uq(n.get(v),r.get(v));E!==null&&g.set(v,E),o=o.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,g))}return Q.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Q.resolve(Xo());let l=jf,c=o;return s.next((f=>Q.forEach(f,((h,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),o.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next((v=>{c=c.insert(h,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,c,f,Xe()))).next((h=>({batchId:l,changes:tq(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((r=>{let i=Ap();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Ap();return this.indexManager.getCollectionParents(e,o).next((l=>Q.forEach(l,(c=>{const f=(function(g,v){return new la(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((h=>{h.forEach(((g,v)=>{s=s.insert(g,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((s=>{o.forEach(((c,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,zt.newInvalidDocument(h)))}));let l=Ap();return s.forEach(((c,f)=>{const h=o.get(c);h!==void 0&&zp(h.mutation,f,ei.empty(),wt.now()),jm(n,f)&&(l=l.insert(c,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pZ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:bn(i.createTime)}})(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:Dx(i.bundledQuery),readTime:bn(i.readTime)}})(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(){this.overlays=new Bt(Te.comparator),this.qr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xo();return Q.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.St(e,n,o)})),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=Xo(),o=n.length+1,s=new Te(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Bt(((f,h)=>f-h));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=Xo(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const l=Xo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,h)=>l.set(f,h))),!(l.size()>=i)););return Q.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Px(n,r));let o=this.qr.get(n);o===void 0&&(o=Xe(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.Qr=new xt(Jn.$r),this.Ur=new xt(Jn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Jn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Jn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Te(new st([])),r=new Jn(n,e),i=new Jn(n,e+1),o=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new st([])),r=new Jn(n,e),i=new Jn(n,e+1);let o=Xe();return this.Ur.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const n=new Jn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||We(e.Yr,n.Yr)}static Kr(e,n){return We(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xt(Jn.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ix(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new Jn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Q.resolve(s)}lookupMutationBatch(e,n){return Q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?al:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jn(n,0),i=new Jn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(s=>{const l=this.Xr(s.Yr);o.push(l)})),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(We);return n.forEach((i=>{const o=new Jn(i,0),s=new Jn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(l=>{r=r.add(l.Yr)}))})),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Te.isDocumentKey(o)||(o=o.child(""));const s=new Jn(new Te(o),0);let l=new xt(We);return this.Zr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(c.Yr)),!0)}),s),Q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(n.mutations,(i=>{const o=new Jn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Jn(n,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{constructor(e){this.ri=e,this.docs=(function(){return new Bt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():zt.newInvalidDocument(n))}getEntries(e,n){let r=ti();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():zt.newInvalidDocument(i))})),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ti();const s=n.path,l=new Te(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||mx(vB(h),r)<=0||(i.has(h.key)||jm(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ce(9500)}ii(e,n){return Q.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new _Z(this)}getSize(e){return Q.resolve(this.size)}}class _Z extends Uq{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(e){this.persistence=e,this.si=new ua((n=>Ku(n)),Hm),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Lx,this.targetCount=0,this.ai=Xu.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Xu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Pr(n),Q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach(((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),Q.waitFor(o).next((()=>i))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this.ui={},this.overlays={},this.ci=new Zr(0),this.li=!1,this.li=!0,this.hi=new gZ,this.referenceDelegate=e(this),this.Pi=new TZ(this),this.indexManager=new iZ,this.remoteDocumentCache=(function(i){return new vZ(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Iq(n),this.Ii=new pZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new yZ(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){pe("MemoryPersistence","Starting transaction:",e);const i=new EZ(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,n){return Q.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class EZ extends TB{constructor(e){super(),this.currentSequenceNumber=e}}class I0{constructor(e){this.persistence=e,this.Ri=new Lx,this.Vi=null}static mi(e){return new I0(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,(r=>{const i=Te.fromPath(r);return this.gi(e,i).next((o=>{o||n.removeEntry(i,Ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class i_{constructor(e,n){this.persistence=e,this.pi=new ua((r=>Pr(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Vq(this,n)}static mi(e,n){return new i_(e,n)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Q.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?Q.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((l=>{l||(r++,o.removeEntry(s,Ve.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cv(e.data.value)),n}br(e,n,r){return Q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wZ{constructor(e){this.serializer=e}k(e,n,r,i){const o=new y0("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(zm)})(e),(function(c){c.createObjectStore(om,{keyPath:UQ}),c.createObjectStore(lo,{keyPath:RD,autoIncrement:!0}).createIndex(Pu,PD,{unique:!0}),c.createObjectStore(Kf)})(e),_k(e),(function(c){c.createObjectStore(Tu)})(e));let s=Q.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Yf),c.deleteObjectStore(Wf),c.deleteObjectStore(Uu)})(e),_k(e)),s=s.next((()=>(function(c){const f=c.store(Uu),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ve.min().toTimestamp(),targetCount:0};return f.put(Jv,h)})(o)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,f){return f.store(lo).J().next((g=>{c.deleteObjectStore(lo),c.createObjectStore(lo,{keyPath:RD,autoIncrement:!0}).createIndex(Pu,PD,{unique:!0});const v=f.store(lo),E=g.map((b=>v.put(b)));return Q.waitFor(E)}))})(e,o)))),s=s.next((()=>{(function(c){c.createObjectStore(Jf,{keyPath:KQ})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(o)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(sm)})(e),this.wi(o))))),r<7&&i>=7&&(s=s.next((()=>this.Si(o)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,o)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(o)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(v0,{keyPath:WQ})})(e),(function(c){c.createObjectStore(_0,{keyPath:YQ})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const f=c.createObjectStore(T0,{keyPath:nX});f.createIndex(eA,rX,{unique:!1}),f.createIndex(IB,iX,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const f=c.createObjectStore(Yv,{keyPath:BQ});f.createIndex(Sv,qQ),f.createIndex(SB,$Q)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(Tu)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,o)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(vx,{keyPath:JQ,autoIncrement:!0}).createIndex(ZS,QQ,{unique:!1}),c.createObjectStore(Fp,{keyPath:XQ}).createIndex(CB,ZQ,{unique:!1}),c.createObjectStore(Bp,{keyPath:eX}).createIndex(xB,tX,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(Fp).clear()})).next((()=>{n.objectStore(Bp).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(_x,{keyPath:oX})})(e)}))),r<18&&i>=18&&z4()&&(s=s.next((()=>{n.objectStore(Fp).clear()})).next((()=>{n.objectStore(Bp).clear()}))),s}wi(e){let n=0;return e.store(Tu).ee(((r,i)=>{n+=r_(i)})).next((()=>{const r={byteSize:n};return e.store(sm).put(XS,r)}))}yi(e){const n=e.store(om),r=e.store(lo);return n.J().next((i=>Q.forEach(i,(o=>{const s=IDBKeyRange.bound([o.userId,al],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Pu,s).next((l=>Q.forEach(l,(c=>{Oe(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const f=Au(this.serializer,c);return Dq(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const n=e.store(Yf),r=e.store(Tu);return e.store(Uu).get(Jv).next((i=>{const o=[];return r.ee(((s,l)=>{const c=new st(s),f=(function(g){return[0,Pr(g)]})(c);o.push(n.get(f).next((h=>h?Q.resolve():(g=>n.put({targetId:0,path:Pr(g),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>Q.waitFor(o)))}))}bi(e,n){e.createObjectStore(am,{keyPath:jQ});const r=n.store(am),i=new Ox,o=s=>{if(i.add(s)){const l=s.lastSegment(),c=s.popLast();return r.put({collectionId:l,parent:Pr(c)})}};return n.store(Tu).ee({X:!0},((s,l)=>{const c=new st(s);return o(c.popLast())})).next((()=>n.store(Kf).ee({X:!0},(([s,l,c],f)=>{const h=Qo(l);return o(h.popLast())}))))}Di(e){const n=e.store(Wf);return n.ee(((r,i)=>{const o=xp(i),s=Rq(this.serializer,o);return n.put(s)}))}Ci(e,n){const r=n.store(Tu),i=[];return r.ee(((o,s)=>{const l=n.store(Yv),c=(function(g){return g.document?new Te(st.fromString(g.document.name).popFirst(5)):g.noDocument?Te.fromSegments(g.noDocument.path):g.unknownDocument?Te.fromSegments(g.unknownDocument.path):Ce(36783)})(s).path.toArray(),f={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(l.put(f))})).next((()=>Q.waitFor(i)))}Fi(e,n){const r=n.store(lo),i=Fq(this.serializer),o=new Vx(I0.mi,this.serializer.yt);return r.J().next((s=>{const l=new Map;return s.forEach((c=>{let f=l.get(c.userId)??Xe();Au(this.serializer,c).keys().forEach((h=>f=f.add(h))),l.set(c.userId,f)})),Q.forEach(l,((c,f)=>{const h=new Xn(f),g=C0.wt(this.serializer,h),v=o.getIndexManager(h),E=x0.wt(h,this.serializer,v,o.referenceDelegate);return new Bq(i,E,g,v).recalculateAndSaveOverlaysForDocumentKeys(new tA(n,Zr.ce),c).next()}))}))}}function _k(t){t.createObjectStore(Yf,{keyPath:HQ}).createIndex(yx,GQ,{unique:!0}),t.createObjectStore(Wf,{keyPath:"targetId"}).createIndex(AB,zQ,{unique:!0}),t.createObjectStore(Uu)}const Ja="IndexedDbPersistence",Gw=18e5,jw=5e3,Kw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qq="main";class Ux{constructor(e,n,r,i,o,s,l,c,f,h,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=o,this.window=s,this.document=l,this.xi=f,this.Oi=h,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!Ux.v())throw new de(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cZ(this,i),this.$i=n+qq,this.serializer=new Iq(c),this.Ui=new es(this.$i,this.Ni,new wZ(this.serializer)),this.hi=new XX,this.Pi=new sZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Fq(this.serializer),this.Ii=new QX,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&wn(Ja,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(ie.FAILED_PRECONDITION,Kw);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Zr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>jy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Il(e))return pe(Ja,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pe(Ja,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return up(e).get(ff).next((n=>Q.resolve(this.es(n))))}ts(e){return jy(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Gw)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=$n(n,Jf);return r.J().next((i=>{const o=this.ss(i,Gw),s=i.filter((l=>o.indexOf(l)===-1));return Q.forEach(s,(l=>r.delete(l.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Q.resolve(!0):up(e).get(ff).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,jw)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new de(ie.FAILED_PRECONDITION,Kw);return!1}}return!(!this.networkEnabled||!this.inForeground)||jy(e).J().next((r=>this.ss(r,jw).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(o||s&&l)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&pe(Ja,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[zm,Jf],(e=>{const n=new tA(e,Zr.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>jy(e).J().next((n=>this.ss(n,Gw).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return x0.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oZ(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return C0.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){pe(Ja,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",o=(function(c){return c===18?lX:c===17?NB:c===16?aX:c===15?Tx:c===14?MB:c===13?PB:c===12?sX:c===11?RB:void Ce(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,o,(l=>(s=new tA(l,this.ci?this.ci.next():Zr.ce),n==="readwrite-primary"?this.Hi(s).next((c=>!!c||this.Yi(s))).next((c=>{if(!c)throw wn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new de(ie.FAILED_PRECONDITION,_B);return r(s)})).next((c=>this.Xi(s).next((()=>c)))):this.Is(s).next((()=>r(s)))))).then((l=>(s.raiseOnCommittedEvent(),l)))}Is(e){return up(e).get(ff).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,jw)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new de(ie.FAILED_PRECONDITION,Kw)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return up(e).put(ff,n)}static v(){return es.v()}Zi(e){const n=up(e);return n.get(ff).next((r=>this.es(r)?(pe(Ja,"Releasing primary lease."),n.delete(ff)):Q.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(wn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;$4()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return pe(Ja,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wn(Ja,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){wn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function up(t){return $n(t,zm)}function jy(t){return $n(t,Jf)}function Fx(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Xe(),i=Xe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Bx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $q{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $4()?8:EB(on())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,n,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new bZ;return this.Ss(e,n,s).next((l=>{if(o.result=l,this.Vs)return this.bs(e,n,s,l.size)}))})).next((()=>o.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(_f()<=ot.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",Tf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(_f()<=ot.DEBUG&&pe("QueryEngine","Query:",Tf(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(_f()<=ot.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",Tf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):Q.resolve())}ys(e,n){if(zD(n))return Q.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=e_(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=Xe(...o);return this.ps.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,r).next((c=>{const f=this.Ds(n,l);return this.Cs(n,f,s,c.readTime)?this.ys(e,e_(n,null,"F")):this.vs(e,f,n,c)}))))})))))}ws(e,n,r,i){return zD(n)||i.isEqual(Ve.min())?Q.resolve(null):this.ps.getDocuments(e,r).next((o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?Q.resolve(null):(_f()<=ot.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tf(n)),this.vs(e,s,n,yB(i,jf)).next((l=>l)))}))}Ds(e,n){let r=new xt(ZB(e));return n.forEach(((i,o)=>{jm(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return _f()<=ot.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",Tf(n)),this.ps.getDocumentsMatchingQuery(e,n,Ai.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="LocalStore",SZ=3e8;class AZ{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Bt(We),this.xs=new ua((o=>Ku(o)),Hm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bq(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function zq(t,e,n,r){return new AZ(t,e,n,r)}async function Hq(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],l=[];let c=Xe();for(const f of i){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of o){l.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((f=>({Ls:f,removedBatchIds:s,addedBatchIds:l})))}))}))}function CZ(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,f,h){const g=f.batch,v=g.keys();let E=Q.resolve();return v.forEach((b=>{E=E.next((()=>h.getEntry(c,b))).next((S=>{const A=f.docVersions.get(b);Oe(A!==null,48541),S.version.compareTo(A)<0&&(g.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),h.addEntry(S)))}))})),E.next((()=>l.mutationQueue.removeMutationBatch(c,g)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=Xe();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function Gq(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function xZ(t,e){const n=we(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach(((h,g)=>{const v=i.get(g);if(!v)return;l.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(o,h.addedDocuments,g))));let E=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(hn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),(function(S,A,I){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=SZ?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(v,E,h)&&l.push(n.Pi.updateTargetData(o,E))}));let c=ti(),f=Xe();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))})),l.push(jq(o,s,e.documentUpdates).next((h=>{c=h.ks,f=h.qs}))),!r.isEqual(Ve.min())){const h=n.Pi.getLastRemoteSnapshotVersion(o).next((g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));l.push(h)}return Q.waitFor(l).next((()=>s.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,c,f))).next((()=>c))})).then((o=>(n.Ms=i,o)))}function jq(t,e,n){let r=Xe(),i=Xe();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let s=ti();return n.forEach(((l,c)=>{const f=o.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ve.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):pe(qx,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function IZ(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=al),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function rd(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((o=>o?(i=o,Q.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new Bs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function id(t,e,n){const r=we(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Il(s))throw s;pe(qx,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function o_(t,e,n){const r=we(t);let i=Ve.min(),o=Xe();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,h){const g=we(c),v=g.xs.get(h);return v!==void 0?Q.resolve(g.Ms.get(v)):g.Pi.getTargetData(f,h)})(r,s,zr(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,l.targetId).next((c=>{o=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Ve.min(),n?o:Xe()))).next((l=>(Yq(r,XB(e),l),{documents:l,Qs:o})))))}function Kq(t,e){const n=we(t),r=we(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(o=>r.At(o,e).next((s=>s?s.target:null))))}function Wq(t,e){const n=we(t),r=n.Os.get(e)||Ve.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,yB(r,jf),Number.MAX_SAFE_INTEGER))).then((i=>(Yq(n,e,i),i)))}function Yq(t,e,n){let r=t.Os.get(e)||Ve.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}async function RZ(t,e,n,r){const i=we(t);let o=Xe(),s=ti();for(const f of n){const h=e.$s(f.metadata.name);f.document&&(o=o.add(h));const g=e.Us(f);g.setReadTime(e.Ks(f.metadata.readTime)),s=s.insert(h,g)}const l=i.Ns.newChangeBuffer({trackRemovals:!0}),c=await rd(i,(function(h){return zr(Rd(st.fromString(`__bundle__/docs/${h}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(f=>jq(f,l,s).next((h=>(l.apply(f),h))).next((h=>i.Pi.removeMatchingKeysForTargetId(f,c.targetId).next((()=>i.Pi.addMatchingKeys(f,o,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(f,h.ks,h.qs))).next((()=>h.ks))))))}async function PZ(t,e,n=Xe()){const r=await rd(t,zr(Dx(e.bundledQuery))),i=we(t);return i.persistence.runTransaction("Save named query","readwrite",(o=>{const s=bn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ii.saveNamedQuery(o,e);const l=r.withResumeToken(hn.EMPTY_BYTE_STRING,s);return i.Ms=i.Ms.insert(l.targetId,l),i.Pi.updateTargetData(o,l).next((()=>i.Pi.removeMatchingKeysForTargetId(o,r.targetId))).next((()=>i.Pi.addMatchingKeys(o,n,r.targetId))).next((()=>i.Ii.saveNamedQuery(o,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq="firestore_clients";function Tk(t,e){return`${Jq}_${t}_${e}`}const Qq="firestore_mutations";function Ek(t,e,n){let r=`${Qq}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Xq="firestore_targets";function Ww(t,e){return`${Xq}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="SharedClientState";class s_{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new de(i.error.code,i.error.message))),s?new s_(e,n,i.state,o):(wn(zo,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new de(r.error.code,r.error.message))),o?new Hp(e,r.state,i):(wn(zo,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class a_{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Ax();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=wB(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new a_(e,o):(wn(zo,`Failed to parse client data for instance '${e}': ${n}`),null)}}class $x{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new $x(n.clientId,n.onlineState):(wn(zo,`Failed to parse online state: ${e}`),null)}}class mA{constructor(){this.activeTargetIds=Ax()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yw{constructor(e,n,r,i,o){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Bt(We),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=Tk(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new mA),this.ro=new RegExp(`^${Jq}_${s}_([^_]*)$`),this.io=new RegExp(`^${Qq}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Xq}_${s}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(Tk(this.persistenceKey,r));if(i){const o=a_.Ws(r,i);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Ww(this.persistenceKey,e));if(i){const o=Hp.Ws(e,i);o&&(r=o.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ww(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return pe(zo,"READ",e,n),n}setItem(e,n){pe(zo,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){pe(zo,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(pe(zo,"EVENT",n.key,n.newValue),n.key===this.eo)return void wn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(o){let s=Zr.ce;if(o!=null)try{const l=JSON.parse(o);Oe(typeof l=="number",30636,{So:o}),s=l}catch(l){wn(zo,"Failed to read sequence number from WebStorage",l)}return s})(n.newValue);r!==Zr.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new s_(this.currentUser,e,n,r),o=Ek(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Gs())}Po(e){const n=Ek(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Ww(this.persistenceKey,e),o=new Hp(e,n,r);this.setItem(i,o.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return a_.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return s_.Ws(new Xn(o),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Hp.Ws(i,n)}uo(e){return $x.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);pe(zo,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),o=this.lo(r),s=[],l=[];return o.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{o.has(c)||l.push(c)})),this.syncEngine.Fo(s,l).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=Ax();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class Zq{constructor(){this.Mo=new mA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new mA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MZ{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="ConnectivityMonitor";class bk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){pe(wk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){pe(wk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ky=null;function gA(){return Ky===null?Ky=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ky++,"0x"+Ky.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="RestConnection",NZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class DZ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Qv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=gA(),l=this.zo(e,n.toUriEncodedString());pe(Jw,`Sending RPC '${e}' ${s}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:f}=new URL(l),h=Sl(f);return this.Jo(e,l,c,r,h).then((g=>(pe(Jw,`Received RPC '${e}' ${s}: `,g),g)),(g=>{throw ss(Jw,`RPC '${e}' ${s} failed with error: `,g,"url: ",l,"request:",r),g}))}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Id})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,n){const r=NZ[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kZ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="WebChannelConnection";class OZ extends DZ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=gA();return new Promise(((l,c)=>{const f=new sB;f.setWithCredentials(!0),f.listenOnce(aB.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ev.NO_ERROR:const g=f.getResponseJson();pe(br,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),l(g);break;case Ev.TIMEOUT:pe(br,`RPC '${e}' ${s} timed out`),c(new de(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Ev.HTTP_ERROR:const v=f.getStatus();if(pe(br,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E==null?void 0:E.error;if(b&&b.status&&b.message){const S=(function(I){const N=I.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(N)>=0?N:ie.UNKNOWN})(b.status);c(new de(S,b.message))}else c(new de(ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new de(ie.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{pe(br,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(i);pe(br,`RPC '${e}' ${s} sending request:`,i),f.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=gA(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cB(),l=uB(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");pe(br,`Creating RPC '${e}' stream ${i}: ${h}`,c);const g=s.createWebChannel(h,c);this.I_(g);let v=!1,E=!1;const b=new kZ({Yo:A=>{E?pe(br,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(v||(pe(br,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),pe(br,`RPC '${e}' stream ${i} sending:`,A),g.send(A))},Zo:()=>g.close()}),S=(A,I,N)=>{A.listen(I,(D=>{try{N(D)}catch(V){setTimeout((()=>{throw V}),0)}}))};return S(g,Sp.EventType.OPEN,(()=>{E||(pe(br,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),S(g,Sp.EventType.CLOSE,(()=>{E||(E=!0,pe(br,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(g))})),S(g,Sp.EventType.ERROR,(A=>{E||(E=!0,ss(br,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),b.a_(new de(ie.UNAVAILABLE,"The operation could not be completed")))})),S(g,Sp.EventType.MESSAGE,(A=>{var I;if(!E){const N=A.data[0];Oe(!!N,16349);const D=N,V=(D==null?void 0:D.error)||((I=D[0])==null?void 0:I.error);if(V){pe(br,`RPC '${e}' stream ${i} received error:`,V);const q=V.status;let z=(function(k){const $=Pn[k];if($!==void 0)return dq($)})(q),O=V.message;z===void 0&&(z=ie.INTERNAL,O="Unknown error status: "+q+" with message "+V.message),E=!0,b.a_(new de(z,O)),g.close()}else pe(br,`RPC '${e}' stream ${i} received:`,N),b.u_(N)}})),S(l,lB.STAT_EVENT,(A=>{A.stat===YS.PROXY?pe(br,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===YS.NOPROXY&&pe(br,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(){return typeof window<"u"?window:null}function Mv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t){return new BX(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="PersistentStream";class t6{constructor(e,n,r,i,o,s,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(wn(n.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new de(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(Sk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(pe(Sk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class LZ extends t6{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=zX(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ve.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ve.min():s.readTime?bn(s.readTime):Ve.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=cA(this.serializer),n.addTarget=(function(o,s){let l;const c=s.target;if(l=Xv(c)?{documents:wq(o,c)}:{query:bq(o,c).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=gq(o,s.resumeToken);const f=lA(o,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(Ve.min())>0){l.readTime=nd(o,s.snapshotVersion.toTimestamp());const f=lA(o,s.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);const r=GX(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=cA(this.serializer),n.removeTarget=e,this.q_(n)}}class VZ extends t6{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=HX(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=cA(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>hm(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{}class FZ extends UZ{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new de(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,uA(n,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(ie.UNKNOWN,o.toString())}))}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Ho(e,uA(n,r),i,s,l,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(ie.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class BZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wn(n),this.aa=!1):pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu="RemoteStore";class qZ{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Pl(this)&&(pe(Zu,"Restarting streams for network reachability change."),await(async function(c){const f=we(c);f.Ea.add(4),await Nd(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Qm(f)})(this))}))})),this.Ra=new BZ(r,i)}}async function Qm(t){if(Pl(t))for(const e of t.da)await e(!0)}async function Nd(t){for(const e of t.da)await e(!1)}function R0(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),jx(n)?Gx(n):kd(n).O_()&&Hx(n,e))}function od(t,e){const n=we(t),r=kd(n);n.Ia.delete(e),r.O_()&&n6(n,e),n.Ia.size===0&&(r.O_()?r.L_():Pl(n)&&n.Ra.set("Unknown"))}function Hx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}kd(t).Y_(e)}function n6(t,e){t.Va.Ue(e),kd(t).Z_(e)}function Gx(t){t.Va=new LX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),kd(t).start(),t.Ra.ua()}function jx(t){return Pl(t)&&!kd(t).x_()&&t.Ia.size>0}function Pl(t){return we(t).Ea.size===0}function r6(t){t.Va=void 0}async function $Z(t){t.Ra.set("Online")}async function zZ(t){t.Ia.forEach(((e,n)=>{Hx(t,e)}))}async function HZ(t,e){r6(t),jx(t)?(t.Ra.ha(e),Gx(t)):t.Ra.set("Unknown")}async function GZ(t,e,n){if(t.Ra.set("Online"),e instanceof mq&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const l of o.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ia.delete(l),i.Va.removeTarget(l))})(t,e)}catch(r){pe(Zu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await l_(t,r)}else if(e instanceof Rv?t.Va.Ze(e):e instanceof pq?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ve.min()))try{const r=await Gq(t.localStore);n.compareTo(r)>=0&&await(function(o,s){const l=o.Va.Tt(s);return l.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ia.get(f);h&&o.Ia.set(f,h.withResumeToken(c.resumeToken,s))}})),l.targetMismatches.forEach(((c,f)=>{const h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(hn.EMPTY_BYTE_STRING,h.snapshotVersion)),n6(o,c);const g=new Bs(h.target,c,f,h.sequenceNumber);Hx(o,g)})),o.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){pe(Zu,"Failed to raise snapshot:",r),await l_(t,r)}}async function l_(t,e,n){if(!Il(e))throw e;t.Ea.add(1),await Nd(t),t.Ra.set("Offline"),n||(n=()=>Gq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{pe(Zu,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Qm(t)}))}function i6(t,e){return e().catch((n=>l_(t,n,e)))}async function Dd(t){const e=we(t),n=_l(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:al;for(;jZ(e);)try{const i=await IZ(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,KZ(e,i)}catch(i){await l_(e,i)}o6(e)&&s6(e)}function jZ(t){return Pl(t)&&t.Ta.length<10}function KZ(t,e){t.Ta.push(e);const n=_l(t);n.O_()&&n.X_&&n.ea(e.mutations)}function o6(t){return Pl(t)&&!_l(t).x_()&&t.Ta.length>0}function s6(t){_l(t).start()}async function WZ(t){_l(t).ra()}async function YZ(t){const e=_l(t);for(const n of t.Ta)e.ea(n.mutations)}async function JZ(t,e,n){const r=t.Ta.shift(),i=Rx.from(r,e,n);await i6(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Dd(t)}async function QZ(t,e){e&&_l(t).X_&&await(async function(r,i){if((function(s){return fq(s)&&s!==ie.ABORTED})(i.code)){const o=r.Ta.shift();_l(r).B_(),await i6(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Dd(r)}})(t,e),o6(t)&&s6(t)}async function Ak(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),pe(Zu,"RemoteStore received new credentials");const r=Pl(n);n.Ea.add(3),await Nd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qm(n)}async function yA(t,e){const n=we(t);e?(n.Ea.delete(2),await Qm(n)):e||(n.Ea.add(2),await Nd(n),n.Ra.set("Unknown"))}function kd(t){return t.ma||(t.ma=(function(n,r,i){const o=we(n);return o.sa(),new LZ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:$Z.bind(null,t),t_:zZ.bind(null,t),r_:HZ.bind(null,t),H_:GZ.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),jx(t)?Gx(t):t.Ra.set("Unknown")):(await t.ma.stop(),r6(t))}))),t.ma}function _l(t){return t.fa||(t.fa=(function(n,r,i){const o=we(n);return o.sa(),new VZ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:WZ.bind(null,t),r_:QZ.bind(null,t),ta:YZ.bind(null,t),na:JZ.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Dd(t)):(await t.fa.stop(),t.Ta.length>0&&(pe(Zu,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new Kx(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Od(t,e){if(wn("AsyncQueue",`${e}: ${t}`),Il(t))return new de(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{static emptySet(e){return new Df(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Te.comparator(n.key,r.key):(n,r)=>Te.comparator(n.key,r.key),this.keyedMap=Ap(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Df)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Df;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.ga=new Bt(Te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class sd{constructor(e,n,r,i,o,s,l,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach((l=>{s.push({type:0,doc:l})})),new sd(e,n,Df.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XZ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ZZ{constructor(){this.queries=xk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=we(n),o=i.queries;i.queries=xk(),o.forEach(((s,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new de(ie.ABORTED,"Firestore shutting down"))}}function xk(){return new ua((t=>QB(t)),Gm)}async function Wx(t,e){const n=we(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new XZ,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=Od(s,`Initialization of query '${Tf(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Jx(n)}async function Yx(t,e){const n=we(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function eee(t,e){const n=we(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.Sa)l.Fa(i)&&(r=!0);s.wa=i}}r&&Jx(n)}function tee(t,e,n){const r=we(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function Jx(t){t.Ca.forEach((e=>{e.next()}))}var vA,Ik;(Ik=vA||(vA={})).Ma="default",Ik.Cache="cache";class Qx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new sd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vA.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nee{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.serializer=e}$s(e){return ts(this.serializer,e)}Us(e){return e.metadata.exists?Eq(this.serializer,e.document,!1):zt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return bn(e)}}class ree{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=a6(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=st.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new Rk(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.$s(i.metadata.name);for(const s of i.metadata.queries){const l=(n.get(s)||Xe()).add(o);n.set(s,l)}}return n}async ja(e){const n=await RZ(e,new Rk(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await PZ(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function a6(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e){this.key=e}}class u6{constructor(e){this.key=e}}class c6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Xe(),this.mutatedKeys=Xe(),this.eu=ZB(e),this.tu=new Df(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ck,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,g)=>{const v=i.get(h),E=jm(this.query,g)?g:null,b=!!v&&this.mutatedKeys.has(v.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;v&&E?v.data.isEqual(E.data)?b!==S&&(r.track({type:3,doc:E}),A=!0):this.su(v,E)||(r.track({type:2,doc:E}),A=!0,(c&&this.eu(E,c)>0||f&&this.eu(E,f)<0)&&(l=!0)):!v&&E?(r.track({type:0,doc:E}),A=!0):v&&!E&&(r.track({type:1,doc:v}),A=!0,(c||f)&&(l=!0)),A&&(E?(s=s.add(E),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:l,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((h,g)=>(function(E,b){const S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:A})}};return S(E)-S(b)})(h.type,g.type)||this.eu(h.doc,g.doc))),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,s.length!==0||f?{snapshot:new sd(this.query,e.tu,o,s,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ck,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Xe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new u6(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new l6(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ml="SyncEngine";class iee{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class oee{constructor(e){this.key=e,this.hu=!1}}class see{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ua((l=>QB(l)),Gm),this.Iu=new Map,this.Eu=new Set,this.du=new Bt(Te.comparator),this.Au=new Map,this.Ru=new Lx,this.Vu={},this.mu=new Map,this.fu=Xu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aee(t,e,n=!0){const r=P0(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await f6(r,e,n,!0),i}async function lee(t,e){const n=P0(t);await f6(n,e,!0,!1)}async function f6(t,e,n,r){const i=await rd(t.localStore,zr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await Xx(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&R0(t.remoteStore,i),l}async function Xx(t,e,n,r,i){t.pu=(g,v,E)=>(async function(S,A,I,N){let D=A.view.ru(I);D.Cs&&(D=await o_(S.localStore,A.query,!1).then((({documents:O})=>A.view.ru(O,D))));const V=N&&N.targetChanges.get(A.targetId),q=N&&N.targetMismatches.get(A.targetId)!=null,z=A.view.applyChanges(D,S.isPrimaryClient,V,q);return _A(S,A.targetId,z.au),z.snapshot})(t,g,v,E);const o=await o_(t.localStore,e,!0),s=new c6(e,o.Qs),l=s.ru(o.documents),c=Ym.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=s.applyChanges(l,t.isPrimaryClient,c);_A(t,n,f.au);const h=new iee(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function uee(t,e,n){const r=we(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!Gm(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await id(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&od(r.remoteStore,i.targetId),ad(r,i.targetId)})).catch(xl)):(ad(r,i.targetId),await id(r.localStore,i.targetId,!0))}async function cee(t,e){const n=we(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),od(n.remoteStore,r.targetId))}async function fee(t,e,n){const r=nI(t);try{const i=await(function(s,l){const c=we(s),f=wt.now(),h=l.reduce(((E,b)=>E.add(b.key)),Xe());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let b=ti(),S=Xe();return c.Ns.getEntries(E,h).next((A=>{b=A,b.forEach(((I,N)=>{N.isValidDocument()||(S=S.add(I))}))})).next((()=>c.localDocuments.getOverlayedDocuments(E,b))).next((A=>{g=A;const I=[];for(const N of l){const D=DX(N,g.get(N.key).overlayedDocument);D!=null&&I.push(new ca(N.key,D,$B(D.value.mapValue),Zt.exists(!0)))}return c.mutationQueue.addMutationBatch(E,f,I,l)})).next((A=>{v=A;const I=A.applyToLocalDocumentSet(g,S);return c.documentOverlayCache.saveOverlays(E,A.batchId,I)}))})).then((()=>({batchId:v.batchId,changes:tq(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,l,c){let f=s.Vu[s.currentUser.toKey()];f||(f=new Bt(We)),f=f.insert(l,c),s.Vu[s.currentUser.toKey()]=f})(r,i.batchId,n),await fa(r,i.changes),await Dd(r.remoteStore)}catch(i){const o=Od(i,"Failed to persist write");n.reject(o)}}async function d6(t,e){const n=we(t);try{const r=await xZ(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=n.Au.get(o);s&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Oe(s.hu,14607):i.removedDocuments.size>0&&(Oe(s.hu,42227),s.hu=!1))})),await fa(n,r,e)}catch(r){await xl(r)}}function Pk(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(s,l){const c=we(s);c.onlineState=l;let f=!1;c.queries.forEach(((h,g)=>{for(const v of g.Sa)v.va(l)&&(f=!0)})),f&&Jx(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dee(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new Bt(Te.comparator);s=s.insert(o,zt.newNoDocument(o,Ve.min()));const l=Xe().add(o),c=new Wm(Ve.min(),new Map,new Bt(We),s,l);await d6(r,c),r.du=r.du.remove(o),r.Au.delete(e),tI(r)}else await id(r.localStore,e,!1).then((()=>ad(r,e,n))).catch(xl)}async function hee(t,e){const n=we(t),r=e.batch.batchId;try{const i=await CZ(n.localStore,e);eI(n,r,null),Zx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fa(n,i)}catch(i){await xl(i)}}async function pee(t,e,n){const r=we(t);try{const i=await(function(s,l){const c=we(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let h;return c.mutationQueue.lookupMutationBatch(f,l).next((g=>(Oe(g!==null,37113),h=g.keys(),c.mutationQueue.removeMutationBatch(f,g)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h))).next((()=>c.localDocuments.getDocuments(f,h)))}))})(r.localStore,e);eI(r,e,n),Zx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fa(r,i)}catch(i){await xl(i)}}async function mee(t,e){const n=we(t);Pl(n.remoteStore)||pe(Ml,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(s){const l=we(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>l.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===al)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=Od(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Zx(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function eI(t,e,n){const r=we(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ad(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||h6(t,r)}))}function h6(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(od(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tI(t))}function _A(t,e,n){for(const r of n)r instanceof l6?(t.Ru.addReference(r.key,e),gee(t,r)):r instanceof u6?(pe(Ml,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||h6(t,r.key)):Ce(19791,{wu:r})}function gee(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(pe(Ml,"New document in limbo: "+n),t.Eu.add(r),tI(t))}function tI(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Te(st.fromString(e)),r=t.fu.next();t.Au.set(r,new oee(n)),t.du=t.du.insert(n,r),R0(t.remoteStore,new Bs(zr(Rd(n.path)),r,"TargetPurposeLimboResolution",Zr.ce))}}async function fa(t,e,n){const r=we(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{s.push(r.pu(c,e,n).then((f=>{var h;if((f||n)&&r.isPrimaryClient){const g=f?!f.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){i.push(f);const g=Bx.As(c.targetId,f);o.push(g)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,f){const h=we(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>Q.forEach(f,(v=>Q.forEach(v.Es,(E=>h.persistence.referenceDelegate.addReference(g,v.targetId,E))).next((()=>Q.forEach(v.ds,(E=>h.persistence.referenceDelegate.removeReference(g,v.targetId,E)))))))))}catch(g){if(!Il(g))throw g;pe(qx,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const E=h.Ms.get(v),b=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(v,S)}}})(r.localStore,o))}async function yee(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){pe(Ml,"User change. New user:",e.toKey());const r=await Hq(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach((l=>{l.forEach((c=>{c.reject(new de(ie.CANCELLED,s))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fa(n,r.Ls)}}function vee(t,e){const n=we(t),r=n.Au.get(e);if(r&&r.hu)return Xe().add(r.key);{let i=Xe();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const l=n.Tu.get(s);i=i.unionWith(l.view.nu)}return i}}async function _ee(t,e){const n=we(t),r=await o_(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&_A(n,e.targetId,i.au),i}async function Tee(t,e){const n=we(t);return Wq(n.localStore,e).then((r=>fa(n,r)))}async function Eee(t,e,n,r){const i=we(t),o=await(function(l,c){const f=we(l),h=we(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(g=>h.er(g,c).next((v=>v?f.localDocuments.getDocuments(g,v):Q.resolve(null)))))})(i.localStore,e);o!==null?(n==="pending"?await Dd(i.remoteStore):n==="acknowledged"||n==="rejected"?(eI(i,e,r||null),Zx(i,e),(function(l,c){we(we(l).mutationQueue).ir(c)})(i.localStore,e)):Ce(6720,"Unknown batchState",{Su:n}),await fa(i,o)):pe(Ml,"Cannot apply mutation batch with id: "+e)}async function wee(t,e){const n=we(t);if(P0(n),nI(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Mk(n,r.toArray());n.gu=!0,await yA(n.remoteStore,!0);for(const o of i)R0(n.remoteStore,o)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(ad(n,s),id(n.localStore,s,!0)))),od(n.remoteStore,s)})),await i,await Mk(n,r),(function(s){const l=we(s);l.Au.forEach(((c,f)=>{od(l.remoteStore,f)})),l.Ru.Jr(),l.Au=new Map,l.du=new Bt(Te.comparator)})(n),n.gu=!1,await yA(n.remoteStore,!1)}}async function Mk(t,e,n){const r=we(t),i=[],o=[];for(const s of e){let l;const c=r.Iu.get(s);if(c&&c.length!==0){l=await rd(r.localStore,zr(c[0]));for(const f of c){const h=r.Tu.get(f),g=await _ee(r,h);g.snapshot&&o.push(g.snapshot)}}else{const f=await Kq(r.localStore,s);l=await rd(r.localStore,f),await Xx(r,p6(f),s,!1,l.resumeToken)}i.push(l)}return r.Pu.H_(o),i}function p6(t){return JB(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function bee(t){return(function(n){return we(we(n).persistence).Ts()})(we(t).localStore)}async function See(t,e,n,r){const i=we(t);if(i.gu)return void pe(Ml,"Ignoring unexpected query state notification.");const o=i.Iu.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=await Wq(i.localStore,XB(o[0])),l=Wm.createSynthesizedRemoteEventForCurrentChange(e,n==="current",hn.EMPTY_BYTE_STRING);await fa(i,s,l);break}case"rejected":await id(i.localStore,e,!0),ad(i,e,r);break;default:Ce(64155,n)}}async function Aee(t,e,n){const r=P0(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){pe(Ml,"Adding an already active target "+i);continue}const o=await Kq(r.localStore,i),s=await rd(r.localStore,o);await Xx(r,p6(o),s.targetId,!1,s.resumeToken),R0(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await id(r.localStore,i,!1).then((()=>{od(r.remoteStore,i),ad(r,i)})).catch(xl)}}function P0(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=d6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dee.bind(null,e),e.Pu.H_=eee.bind(null,e.eventManager),e.Pu.yu=tee.bind(null,e.eventManager),e}function nI(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pee.bind(null,e),e}function Cee(t,e,n){const r=we(t);(async function(o,s,l){try{const c=await s.getMetadata();if(await(function(E,b){const S=we(E),A=bn(b.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",(I=>S.Ii.getBundleMetadata(I,b.id))).then((I=>!!I&&I.createTime.compareTo(A)>=0))})(o.localStore,c))return await s.close(),l._completeWith((function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}})(c)),Promise.resolve(new Set);l._updateProgress(a6(c));const f=new ree(c,s.serializer);let h=await s.bu();for(;h;){const v=await f.Ga(h);v&&l._updateProgress(v),h=await s.bu()}const g=await f.ja(o.localStore);return await fa(o,g.Ha,void 0),await(function(E,b){const S=we(E);return S.persistence.runTransaction("Save bundle","readwrite",(A=>S.Ii.saveBundleMetadata(A,b)))})(o.localStore,c),l._completeWith(g.progress),Promise.resolve(g.Ja)}catch(c){return ss(Ml,`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class pm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return zq(this.persistence,new $q,e.initialUser,this.serializer)}Cu(e){return new Vx(I0.mi,this.serializer)}Du(e){return new Zq}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pm.provider={build:()=>new pm};class xee extends pm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Oe(this.persistence.referenceDelegate instanceof i_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Lq(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new Vx((r=>i_.mi(r,n)),this.serializer)}}class m6 extends pm{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await nI(this.xu.syncEngine),await Dd(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return zq(this.persistence,new $q,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Lq(r,e.asyncQueue,n)}Mu(e,n){const r=new LQ(n,this.persistence);return new OQ(e.asyncQueue,r)}Cu(e){const n=Fx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new Ux(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,e6(),Mv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Zq}}class Iee extends m6{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Yw&&(this.sharedClientState.syncEngine={Co:Eee.bind(null,n),vo:See.bind(null,n),Fo:Aee.bind(null,n),Ts:bee.bind(null,n),Do:Tee.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await wee(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=e6();if(!Yw.v(n))throw new de(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Fx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yee.bind(null,this.syncEngine),await yA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZZ})()}createDatastore(e){const n=Jm(e.databaseInfo.databaseId),r=(function(o){return new OZ(o)})(e.databaseInfo);return(function(o,s,l,c){return new FZ(o,s,l,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,s,l){return new qZ(r,i,o,s,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>Pk(this.syncEngine,n,0)),(function(){return bk.v()?new bk:new MZ})())}createSyncEngine(e,n){return(function(i,o,s,l,c,f,h){const g=new see(i,o,s,l,c,f);return h&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const o=we(i);pe(Zu,"RemoteStore shutting down."),o.Ea.add(5),await Nd(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}mm.provider={build:()=>new mm};function Nk(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ree{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new vr,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new nee(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,o){const s=we(i),l={documents:o.map((g=>dm(s.serializer,g)))},c=await s.Ho("BatchGetDocuments",s.serializer.databaseId,st.emptyPath(),l,o.length),f=new Map;c.forEach((g=>{const v=$X(s.serializer,g);f.set(v.key.toString(),v)}));const h=[];return o.forEach((g=>{const v=f.get(g.toString());Oe(!!v,55234,{key:g}),h.push(v)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Md(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=Te.fromPath(r);this.mutations.push(new xx(i,this.precondition(i)))})),await(async function(r,i){const o=we(r),s={writes:i.map((l=>hm(o.serializer,l)))};await o.Go("Commit",o.serializer.databaseId,st.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Gu:e.constructor.name});n=Ve.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new de(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ve.min())?Zt.exists(!1):Zt.updateTime(n):Zt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ve.min()))throw new de(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zt.updateTime(n)}return Zt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mee{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new zx(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Pee(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!$m(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!fq(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl="FirestoreClient";class Nee{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xn.UNAUTHENTICATED,this.clientId=hx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{pe(Tl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(pe(Tl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Od(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Qw(t,e){t.asyncQueue.verifyOperationInProgress(),pe(Tl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Hq(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Dk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await rI(t);pe(Tl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Ak(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>Ak(e.remoteStore,i))),t._onlineComponents=e}async function rI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe(Tl,"Using user provided OfflineComponentProvider");try{await Qw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;ss("Error using user provided cache. Falling back to memory cache: "+n),await Qw(t,new pm)}}else pe(Tl,"Using default OfflineComponentProvider"),await Qw(t,new xee(void 0));return t._offlineComponents}async function N0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe(Tl,"Using user provided OnlineComponentProvider"),await Dk(t,t._uninitializedComponentsProvider._online)):(pe(Tl,"Using default OnlineComponentProvider"),await Dk(t,new mm))),t._onlineComponents}function g6(t){return rI(t).then((e=>e.persistence))}function iI(t){return rI(t).then((e=>e.localStore))}function y6(t){return N0(t).then((e=>e.remoteStore))}function oI(t){return N0(t).then((e=>e.syncEngine))}function Dee(t){return N0(t).then((e=>e.datastore))}async function ld(t){const e=await N0(t),n=e.eventManager;return n.onListen=aee.bind(null,e.syncEngine),n.onUnlisten=uee.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lee.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cee.bind(null,e.syncEngine),n}function kee(t){return t.asyncQueue.enqueue((async()=>{const e=await g6(t),n=await y6(t);return e.setNetworkEnabled(!0),(function(i){const o=we(i);return o.Ea.delete(0),Qm(o)})(n)}))}function Oee(t){return t.asyncQueue.enqueue((async()=>{const e=await g6(t),n=await y6(t);return e.setNetworkEnabled(!1),(async function(i){const o=we(i);o.Ea.add(0),await Nd(o),o.Ra.set("Offline")})(n)}))}function Lee(t,e){const n=new vr;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const l=await(function(f,h){const g=we(f);return g.persistence.runTransaction("read document","readonly",(v=>g.localDocuments.getDocument(v,h)))})(i,o);l.isFoundDocument()?s.resolve(l):l.isNoDocument()?s.resolve(null):s.reject(new de(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Od(l,`Failed to get document '${o} from cache`);s.reject(c)}})(await iI(t),e,n))),n.promise}function v6(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,l,c,f){const h=new M0({next:v=>{h.Nu(),s.enqueueAndForget((()=>Yx(o,g)));const E=v.docs.has(l);!E&&v.fromCache?f.reject(new de(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&c&&c.source==="server"?f.reject(new de(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new Qx(Rd(l.path),h,{includeMetadataChanges:!0,qa:!0});return Wx(o,g)})(await ld(t),t.asyncQueue,e,n,r))),r.promise}function Vee(t,e){const n=new vr;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const l=await o_(i,o,!0),c=new c6(o,l.Qs),f=c.ru(l.documents),h=c.applyChanges(f,!1);s.resolve(h.snapshot)}catch(l){const c=Od(l,`Failed to execute query '${o} against cache`);s.reject(c)}})(await iI(t),e,n))),n.promise}function _6(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,l,c,f){const h=new M0({next:v=>{h.Nu(),s.enqueueAndForget((()=>Yx(o,g))),v.fromCache&&c.source==="server"?f.reject(new de(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new Qx(l,h,{includeMetadataChanges:!0,qa:!0});return Wx(o,g)})(await ld(t),t.asyncQueue,e,n,r))),r.promise}function Uee(t,e){const n=new M0(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,o){we(i).Ca.add(o),o.next()})(await ld(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(i,o){we(i).Ca.delete(o)})(await ld(t),n)))}}function Fee(t,e,n,r){const i=(function(s,l){let c;return c=typeof s=="string"?hq().encode(s):s,(function(h,g){return new Ree(h,g)})((function(h,g){if(h instanceof Uint8Array)return Nk(h,g);if(h instanceof ArrayBuffer)return Nk(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),l)})(n,Jm(e));t.asyncQueue.enqueueAndForget((async()=>{Cee(await oI(t),i,r)}))}function Bee(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){const o=we(r);return o.persistence.runTransaction("Get named query","readonly",(s=>o.Ii.getNamedQuery(s,i)))})(await iI(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="firestore.googleapis.com",Ok=!0;class Lk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E6,this.ssl=Ok}else this.host=e.host,this.ssl=e.ssl??Ok;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Nq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aZ)throw new de(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=T6(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xm{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new bQ;switch(r.type){case"firstParty":return new xQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=kk.get(n);r&&(pe("ComponentProvider","Removing Datastore"),kk.delete(n),r.terminate())})(this),Promise.resolve()}}function w6(t,e,n,r={}){var f;t=pt(t,Xm);const i=Sl(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(FC(`https://${l}`),BC("Firestore",!0)),o.host!==E6&&o.host!==l&&ss("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:l,ssl:i,emulatorOptions:r};if(!Ys(c,s)&&(t._setSettings(c),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=Xn.MOCK_USER;else{h=U4(r.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new de(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Xn(v)}t._authCredentials=new SQ(new dB(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gr=class b6{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new b6(this.firestore,e,this._query)}},Ft=class Ip{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ip(this.firestore,e,this._key)}toJSON(){return{type:Ip._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(qm(n,Ip._jsonSchema))return new Ip(e,r||null,new Te(st.fromString(n.referencePath)))}};Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Nn("string",Ft._jsonSchemaVersion),referencePath:Nn("string")};let ll=class S6 extends Gr{constructor(e,n,r){super(e,n,Rd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Te(e))}withConverter(e){return new S6(this.firestore,e,this._path)}};function Wo(t,e,...n){if(t=Ne(t),px("collection","path",e),t instanceof Xm){const r=st.fromString(e,...n);return SD(r),new ll(t,null,r)}{if(!(t instanceof Ft||t instanceof ll))throw new de(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return SD(r),new ll(t.firestore,null,r)}}function qee(t,e){if(t=pt(t,Xm),px("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new de(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gr(t,null,(function(r){return new la(st.emptyPath(),r)})(e))}function po(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=hx.newId()),px("doc","path",e),t instanceof Xm){const r=st.fromString(e,...n);return bD(r),new Ft(t,null,new Te(r))}{if(!(t instanceof Ft||t instanceof ll))throw new de(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return bD(r),new Ft(t.firestore,t instanceof ll?t.converter:null,new Te(r))}}function A6(t,e){return t=Ne(t),e=Ne(e),(t instanceof Ft||t instanceof ll)&&(e instanceof Ft||e instanceof ll)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function C6(t,e){return t=Ne(t),e=Ne(e),t instanceof Gr&&e instanceof Gr&&t.firestore===e.firestore&&Gm(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="AsyncQueue";class Uk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zx(this,"async_queue_retry"),this._c=()=>{const r=Mv();r&&pe(Vk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Mv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new vr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Il(e))throw e;pe(Vk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,wn("INTERNAL UNHANDLED ERROR: ",Fk(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Kx.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ce(47125,{Pc:Fk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Fk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class $ee{constructor(){this._progressObserver={},this._taskCompletionResolver=new vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zee=-1;let pn=class extends Xm{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Uk,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uk(e),this._firestoreClient=void 0,await e}}};function Hee(t,e){const n=typeof t=="object"?t:r0(),r=typeof t=="string"?t:Qv,i=Sd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=L4("firestore");o&&w6(i,...o)}return i}function _r(t){if(t._terminated)throw new de(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||x6(t),t._firestoreClient}function x6(t){var r,i,o;const e=t._freezeSettings(),n=(function(l,c,f,h){return new fX(l,c,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,T6(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Nee(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}})(t._componentsProvider))}function Gee(t,e){ss("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return I6(t,mm.provider,{build:r=>new m6(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function jee(t){ss("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();I6(t,mm.provider,{build:n=>new Iee(n,e.cacheSizeBytes)})}function I6(t,e,n){if((t=pt(t,pn))._firestoreClient||t._terminated)throw new de(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new de(ie.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},x6(t)}function Kee(t){if(t._initialized&&!t._terminated)throw new de(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vr;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!es.v())return Promise.resolve();const i=r+qq;await es.delete(i)})(Fx(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function Wee(t){return(function(n){const r=new vr;return n.asyncQueue.enqueueAndForget((async()=>mee(await oI(n),r))),r.promise})(_r(t=pt(t,pn)))}function Yee(t){return kee(_r(t=pt(t,pn)))}function Jee(t){return Oee(_r(t=pt(t,pn)))}function Qee(t,e){const n=_r(t=pt(t,pn)),r=new $ee;return Fee(n,t._databaseId,e,r),r}function Xee(t,e){return Bee(_r(t=pt(t,pn)),e).then((n=>n?new Gr(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cr(hn.fromBase64String(e))}catch(n){throw new de(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Cr(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qm(e,Cr._jsonSchema))return Cr.fromBase64String(e.bytes)}}Cr._jsonSchemaVersion="firestore/bytes/1.0",Cr._jsonSchema={type:Nn("string",Cr._jsonSchemaVersion),bytes:Nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mo._jsonSchemaVersion}}static fromJSON(e){if(qm(e,mo._jsonSchema))return new mo(e.latitude,e.longitude)}}mo._jsonSchemaVersion="firestore/geoPoint/1.0",mo._jsonSchema={type:Nn("string",mo._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qm(e,ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ns(e.vectorValues);throw new de(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ns._jsonSchemaVersion="firestore/vectorValue/1.0",ns._jsonSchema={type:Nn("string",ns._jsonSchemaVersion),vectorValues:Nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zee=/^__.*__$/;class ete{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ca(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pd(e,this.data,n,this.fieldTransforms)}}class R6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ca(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function P6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:t})}}class D0{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new D0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return u_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(P6(this.Ac)&&Zee.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tte{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Jm(e)}Cc(e,n,r,i=!1){return new D0({Ac:e,methodName:n,Dc:r,path:Xt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cc(t){const e=t._freezeSettings(),n=Jm(t._databaseId);return new tte(t._databaseId,!!e.ignoreUndefinedProperties,n)}function k0(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);dI("Data must be an object, but it was:",s,r);const l=D6(r,s);let c,f;if(o.merge)c=new ei(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const g of o.mergeFields){const v=EA(e,g,n);if(!s.contains(v))throw new de(ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);O6(h,v)||h.push(v)}c=new ei(h),f=s.fieldTransforms.filter((g=>c.covers(g.field)))}else c=null,f=s.fieldTransforms;return new ete(new gr(l),c,f)}class Zm extends uc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zm}}function M6(t,e,n){return new D0({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class sI extends uc{_toFieldTransform(e){return new Km(e.path,new ed)}isEqual(e){return e instanceof sI}}class aI extends uc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=M6(this,e,!0),r=this.vc.map((o=>fc(o,n))),i=new Wu(r);return new Km(e.path,i)}isEqual(e){return e instanceof aI&&Ys(this.vc,e.vc)}}class lI extends uc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=M6(this,e,!0),r=this.vc.map((o=>fc(o,n))),i=new Yu(r);return new Km(e.path,i)}isEqual(e){return e instanceof lI&&Ys(this.vc,e.vc)}}class uI extends uc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new td(e.serializer,iq(e.serializer,this.Fc));return new Km(e.path,n)}isEqual(e){return e instanceof uI&&this.Fc===e.Fc}}function cI(t,e,n,r){const i=t.Cc(1,e,n);dI("Data must be an object, but it was:",i,r);const o=[],s=gr.empty();Rl(r,((c,f)=>{const h=hI(e,c,n);f=Ne(f);const g=i.yc(h);if(f instanceof Zm)o.push(h);else{const v=fc(f,g);v!=null&&(o.push(h),s.set(h,v))}}));const l=new ei(o);return new R6(s,l,i.fieldTransforms)}function fI(t,e,n,r,i,o){const s=t.Cc(1,e,n),l=[EA(e,r,n)],c=[i];if(o.length%2!=0)throw new de(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)l.push(EA(e,o[v])),c.push(o[v+1]);const f=[],h=gr.empty();for(let v=l.length-1;v>=0;--v)if(!O6(f,l[v])){const E=l[v];let b=c[v];b=Ne(b);const S=s.yc(E);if(b instanceof Zm)f.push(E);else{const A=fc(b,S);A!=null&&(f.push(E),h.set(E,A))}}const g=new ei(f);return new R6(h,g,s.fieldTransforms)}function N6(t,e,n,r=!1){return fc(n,t.Cc(r?4:3,e))}function fc(t,e){if(k6(t=Ne(t)))return dI("Unsupported field value:",e,t),D6(t,e);if(t instanceof uc)return(function(r,i){if(!P6(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const l of r){let c=fc(l,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=wt.fromDate(r);return{timestampValue:nd(i.serializer,o)}}if(r instanceof wt){const o=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nd(i.serializer,o)}}if(r instanceof mo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cr)return{bytesValue:gq(i.serializer,r._byteString)};if(r instanceof Ft){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Nx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ns)return(function(s,l){return{mapValue:{fields:{[Ex]:{stringValue:wx},[Qf]:{arrayValue:{values:s.toArray().map((f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return Cx(l.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${g0(r)}`)})(t,e)}function D6(t,e){const n={};return DB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rl(t,((r,i)=>{const o=fc(i,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function k6(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof mo||t instanceof Cr||t instanceof Ft||t instanceof uc||t instanceof ns)}function dI(t,e,n){if(!k6(n)||!mB(n)){const r=g0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function EA(t,e,n){if((e=Ne(e))instanceof El)return e._internalPath;if(typeof e=="string")return hI(t,e);throw u_("Field path arguments must be of type string or ",t,!1,void 0,n)}const nte=new RegExp("[~\\*/\\[\\]]");function hI(t,e,n){if(e.search(nte)>=0)throw u_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new El(...e.split("."))._internalPath}catch{throw u_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function u_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new de(ie.INVALID_ARGUMENT,l+t+c)}function O6(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(O0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rte extends gm{data(){return super.data()}}function O0(t,e){return typeof e=="string"?hI(t,e):e instanceof El?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pI{}class eg extends pI{}function Hi(t,e,...n){let r=[];e instanceof pI&&r.push(e),r=r.concat(n),(function(o){const s=o.filter((c=>c instanceof mI)).length,l=o.filter((c=>c instanceof L0)).length;if(s>1||s>0&&l>0)throw new de(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class L0 extends eg{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new L0(e,n,r)}_apply(e){const n=this._parse(e);return U6(e._query,n),new Gr(e.firestore,e.converter,aA(e._query,n))}_parse(e){const n=cc(e.firestore);return(function(o,s,l,c,f,h,g){let v;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new de(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){qk(g,h);const b=[];for(const S of g)b.push(Bk(c,o,S));v={arrayValue:{values:b}}}else v=Bk(c,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||qk(g,h),v=N6(l,s,g,h==="in"||h==="not-in");return at.create(f,h,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ite(t,e,n){const r=e,i=O0("where",t);return L0._create(i,r,n)}class mI extends pI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mI(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ct.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i;const l=o.getFlattenedFilters();for(const c of l)U6(s,c),s=aA(s,c)})(e._query,n),new Gr(e.firestore,e.converter,aA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gI extends eg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gI(e,n)}_apply(e){const n=(function(i,o,s){if(i.startAt!==null)throw new de(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fm(o,s)})(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new la(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function c_(t,e="asc"){const n=e,r=O0("orderBy",t);return gI._create(r,n)}class V0 extends eg{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new V0(e,n,r)}_apply(e){return new Gr(e.firestore,e.converter,e_(e._query,this._limit,this._limitType))}}function ote(t){return gB("limit",t),V0._create("limit",t,"F")}function ste(t){return gB("limitToLast",t),V0._create("limitToLast",t,"L")}class U0 extends eg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new U0(e,n,r)}_apply(e){const n=V6(e,this.type,this._docOrFields,this._inclusive);return new Gr(e.firestore,e.converter,(function(i,o){return new la(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,n))}}function ate(...t){return U0._create("startAt",t,!0)}function lte(...t){return U0._create("startAfter",t,!1)}class F0 extends eg{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new F0(e,n,r)}_apply(e){const n=V6(e,this.type,this._docOrFields,this._inclusive);return new Gr(e.firestore,e.converter,(function(i,o){return new la(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,n))}}function ute(...t){return F0._create("endBefore",t,!1)}function cte(...t){return F0._create("endAt",t,!0)}function V6(t,e,n,r){if(n[0]=Ne(n[0]),n[0]instanceof gm)return(function(o,s,l,c,f){if(!c)throw new de(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const g of Nf(o))if(g.field.isKeyField())h.push(ju(s,c.key));else{const v=c.data.field(g.field);if(E0(v))throw new de(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const E=g.field.canonicalString();throw new de(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(v)}return new vl(h,f)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=cc(t.firestore);return(function(s,l,c,f,h,g){const v=s.explicitOrderBy;if(h.length>v.length)throw new de(ie.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let b=0;b<h.length;b++){const S=h[b];if(v[b].field.isKeyField()){if(typeof S!="string")throw new de(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof S}`);if(!Sx(s)&&S.indexOf("/")!==-1)throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${S}' contains a slash.`);const A=s.path.child(st.fromString(S));if(!Te.isDocumentKey(A))throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const I=new Te(A);E.push(ju(l,I))}else{const A=N6(c,f,S);E.push(A)}}return new vl(E,g)})(t._query,t.firestore._databaseId,i,e,n,r)}}function Bk(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new de(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sx(e)&&n.indexOf("/")!==-1)throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(st.fromString(n));if(!Te.isDocumentKey(r))throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ju(t,new Te(r))}if(n instanceof Ft)return ju(t,n._key);throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${g0(n)}.`)}function qk(t,e){if(!Array.isArray(t)||t.length===0)throw new de(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U6(t,e){const n=(function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class yI{convertValue(e,n="none"){switch(gl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rl(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[Qf].arrayValue)==null?void 0:i.values)==null?void 0:o.map((s=>Qt(s.doubleValue)));return new ns(n)}convertGeoPoint(e){return new mo(Qt(e.latitude),Qt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=w0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lm(e));default:return null}}convertTimestamp(e){const n=Zs(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=st.fromString(e);Oe(xq(r),9688,{name:e});const i=new ml(r.get(1),r.get(3)),o=new Te(r.popFirst(5));return i.isEqual(n)||wn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class fte extends yI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}class Mu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Wi=class F6 extends gm{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(O0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=F6._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wi._jsonSchema={type:Nn("string",Wi._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};let Gp=class extends Wi{data(e={}){return super.data(e)}},go=class B6{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Mu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Gp(this._firestore,this._userDataWriter,r.key,r,new Mu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((l=>{const c=new Gp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Mu(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>o||l.type!==3)).map((l=>{const c=new Gp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Mu(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),h=s.indexOf(l.doc.key)),{type:dte(l.type),doc:c,oldIndex:f,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=B6._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function dte(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:t})}}function q6(t,e){return t instanceof Wi&&e instanceof Wi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof go&&e instanceof go&&t._firestore===e._firestore&&C6(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t){t=pt(t,Ft);const e=pt(t.firestore,pn);return v6(_r(e),t._key).then((n=>TI(e,t,n)))}go._jsonSchemaVersion="firestore/querySnapshot/1.0",go._jsonSchema={type:Nn("string",go._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class dc extends yI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function hte(t){t=pt(t,Ft);const e=pt(t.firestore,pn),n=_r(e),r=new dc(e);return Lee(n,t._key).then((i=>new Wi(e,r,t._key,i,new Mu(i!==null&&i.hasLocalMutations,!0),t.converter)))}function pte(t){t=pt(t,Ft);const e=pt(t.firestore,pn);return v6(_r(e),t._key,{source:"server"}).then((n=>TI(e,t,n)))}function _I(t){t=pt(t,Gr);const e=pt(t.firestore,pn),n=_r(e),r=new dc(e);return L6(t._query),_6(n,t._query).then((i=>new go(e,r,t,i)))}function mte(t){t=pt(t,Gr);const e=pt(t.firestore,pn),n=_r(e),r=new dc(e);return Vee(n,t._query).then((i=>new go(e,r,t,i)))}function gte(t){t=pt(t,Gr);const e=pt(t.firestore,pn),n=_r(e),r=new dc(e);return _6(n,t._query,{source:"server"}).then((i=>new go(e,r,t,i)))}function $k(t,e,n){t=pt(t,Ft);const r=pt(t.firestore,pn),i=B0(t.converter,e,n);return Ld(r,[k0(cc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zt.none())])}function ym(t,e,n,...r){t=pt(t,Ft);const i=pt(t.firestore,pn),o=cc(i);let s;return s=typeof(e=Ne(e))=="string"||e instanceof El?fI(o,"updateDoc",t._key,e,n,r):cI(o,"updateDoc",t._key,e),Ld(i,[s.toMutation(t._key,Zt.exists(!0))])}function wA(t){return Ld(pt(t.firestore,pn),[new Md(t._key,Zt.none())])}function vm(t,e){const n=pt(t.firestore,pn),r=po(t),i=B0(t.converter,e);return Ld(n,[k0(cc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Zt.exists(!1))]).then((()=>r))}function _m(t,...e){var c,f,h;t=Ne(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||TA(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(TA(e[r])){const g=e[r];e[r]=(c=g.next)==null?void 0:c.bind(g),e[r+1]=(f=g.error)==null?void 0:f.bind(g),e[r+2]=(h=g.complete)==null?void 0:h.bind(g)}let o,s,l;if(t instanceof Ft)s=pt(t.firestore,pn),l=Rd(t._key.path),o={next:g=>{e[r]&&e[r](TI(s,t,g))},error:e[r+1],complete:e[r+2]};else{const g=pt(t,Gr);s=pt(g.firestore,pn),l=g._query;const v=new dc(s);o={next:E=>{e[r]&&e[r](new go(s,v,g,E))},error:e[r+1],complete:e[r+2]},L6(t._query)}return(function(v,E,b,S){const A=new M0(S),I=new Qx(E,A,b);return v.asyncQueue.enqueueAndForget((async()=>Wx(await ld(v),I))),()=>{A.Nu(),v.asyncQueue.enqueueAndForget((async()=>Yx(await ld(v),I)))}})(_r(s),l,i,o)}function yte(t,e){return Uee(_r(t=pt(t,pn)),TA(e)?e:{next:e})}function Ld(t,e){return(function(r,i){const o=new vr;return r.asyncQueue.enqueueAndForget((async()=>fee(await oI(r),i,o))),o.promise})(_r(t),e)}function TI(t,e,n){const r=n.docs.get(e._key),i=new dc(t);return new Wi(t,i,e._key,r,new Mu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vte={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $6=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=cc(e)}set(e,n,r){this._verifyNotCommitted();const i=rl(e,this._firestore),o=B0(i.converter,n,r),s=k0(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Zt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=rl(e,this._firestore);let s;return s=typeof(n=Ne(n))=="string"||n instanceof El?fI(this._dataReader,"WriteBatch.update",o._key,n,r,i):cI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Zt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=rl(e,this._firestore);return this._mutations=this._mutations.concat(new Md(n._key,Zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new de(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function rl(t,e){if((t=Ne(t)).firestore!==e)throw new de(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _te{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=cc(e)}get(e){const n=rl(e,this._firestore),r=new fte(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Ce(24041);const o=i[0];if(o.isFoundDocument())return new gm(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new gm(this._firestore,r,n._key,null,n.converter);throw Ce(18433,{doc:o})}))}set(e,n,r){const i=rl(e,this._firestore),o=B0(i.converter,n,r),s=k0(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){const o=rl(e,this._firestore);let s;return s=typeof(n=Ne(n))=="string"||n instanceof El?fI(this._dataReader,"Transaction.update",o._key,n,r,i):cI(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){const n=rl(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tte=class extends _te{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=rl(e,this._firestore),r=new dc(this._firestore);return super.get(e).then((i=>new Wi(this._firestore,r,n._key,i._document,new Mu(!1,!1),n.converter)))}};function Ete(t,e,n){t=pt(t,pn);const r={...vte,...n};return(function(o){if(o.maxAttempts<1)throw new de(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,l){const c=new vr;return o.asyncQueue.enqueueAndForget((async()=>{const f=await Dee(o);new Mee(o.asyncQueue,f,l,s,c).ju()})),c.promise})(_r(t),(i=>e(new Tte(t,i))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wte(){return new Zm("deleteField")}function ul(){return new sI("serverTimestamp")}function bte(...t){return new aI("arrayUnion",t)}function Ste(...t){return new lI("arrayRemove",t)}function z6(t){return new uI("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ate(t){return _r(t=pt(t,pn)),new $6(t,(e=>Ld(t,e)))}(function(e,n=!0){(function(i){Id=i})(oa),Qs(new Qi("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new pn(new AQ(r.getProvider("auth-internal")),new IQ(s,r.getProvider("app-check-internal")),(function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new de(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(f.options.projectId,h)})(s,i),s);return o={useFetchStreams:n,...o},l._setSettings(o),l}),"PUBLIC").setMultipleInstances(!0)),bi(_D,TD,e),bi(_D,TD,"esm2020")})();const Cte="@firebase/firestore-compat",xte="0.4.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new de("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(){if(typeof Uint8Array>"u")throw new de("unimplemented","Uint8Arrays are not available in this environment.")}function Hk(){if(!uX())throw new de("unimplemented","Blobs are unavailable in Firestore in this environment.")}let H6=class bA{constructor(e){this._delegate=e}static fromBase64String(e){return Hk(),new bA(Cr.fromBase64String(e))}static fromUint8Array(e){return zk(),new bA(Cr.fromUint8Array(e))}toBase64(){return Hk(),this._delegate.toBase64()}toUint8Array(){return zk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t){return Ite(t,["next","error","complete"])}function Ite(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rte{enableIndexedDbPersistence(e,n){return Gee(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return jee(e._delegate)}clearIndexedDbPersistence(e){return Kee(e._delegate)}}class G6{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ml||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ss("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){w6(this._delegate,e,n,r)}enableNetwork(){return Yee(this._delegate)}disableNetwork(){return Jee(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,pB("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Wee(this._delegate)}onSnapshotsInSync(e){return yte(this._delegate,e)}get app(){if(!this._appCompat)throw new de("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ud(this,Wo(this._delegate,e))}catch(n){throw Ur(n,"collection()","Firestore.collection()")}}doc(e){try{return new ji(this,po(this._delegate,e))}catch(n){throw Ur(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Lr(this,qee(this._delegate,e))}catch(n){throw Ur(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Ete(this._delegate,n=>e(new j6(this,n)))}batch(){return _r(this._delegate),new K6(new $6(this._delegate,e=>Ld(this._delegate,e)))}loadBundle(e){return Qee(this._delegate,e)}namedQuery(e){return Xee(this._delegate,e).then(n=>n?new Lr(this,n):null)}}class q0 extends yI{constructor(e){super(),this.firestore=e}convertBytes(e){return new H6(new Cr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return ji.forKey(n,this.firestore,null)}}function Pte(t){EQ(t)}class j6{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new q0(e)}get(e){const n=Nu(e);return this._delegate.get(n).then(r=>new Tm(this._firestore,new Wi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Nu(e);return r?(EI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Nu(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Nu(e);return this._delegate.delete(n),this}}class K6{constructor(e){this._delegate=e}set(e,n,r){const i=Nu(e);return r?(EI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Nu(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Nu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ec{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Gp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Em(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ec.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new ec(e,new q0(e),n),i.set(n,o)),o}}ec.INSTANCES=new WeakMap;class ji{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new q0(e)}static forPath(e,n,r){if(e.length%2!==0)throw new de("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ji(n,new Ft(n._delegate,r,new Te(e)))}static forKey(e,n,r){return new ji(n,new Ft(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ud(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ud(this.firestore,Wo(this._delegate,e))}catch(n){throw Ur(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ne(e),e instanceof Ft?A6(this._delegate,e):!1}set(e,n){n=EI("DocumentReference.set",n);try{return n?$k(this._delegate,e,n):$k(this._delegate,e)}catch(r){throw Ur(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?ym(this._delegate,e):ym(this._delegate,e,n,...r)}catch(i){throw Ur(i,"updateDoc()","DocumentReference.update()")}}delete(){return wA(this._delegate)}onSnapshot(...e){const n=W6(e),r=Y6(e,i=>new Tm(this.firestore,new Wi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return _m(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=hte(this._delegate):(e==null?void 0:e.source)==="server"?n=pte(this._delegate):n=vI(this._delegate),n.then(r=>new Tm(this.firestore,new Wi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ji(this.firestore,e?this._delegate.withConverter(ec.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ur(t,e,n){return t.message=t.message.replace(e,n),t}function W6(t){for(const e of t)if(typeof e=="object"&&!SA(e))return e;return{}}function Y6(t,e){var r,i;let n;return SA(t[0])?n=t[0]:SA(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:o=>{n.next&&n.next(e(o))},error:(r=n.error)==null?void 0:r.bind(n),complete:(i=n.complete)==null?void 0:i.bind(n)}}class Tm{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new ji(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return q6(this._delegate,e._delegate)}}class Em extends Tm{data(e){const n=this._delegate.data(e);return this._delegate._converter||wQ(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class Lr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new q0(e)}where(e,n,r){try{return new Lr(this.firestore,Hi(this._delegate,ite(e,n,r)))}catch(i){throw Ur(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Lr(this.firestore,Hi(this._delegate,c_(e,n)))}catch(r){throw Ur(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Lr(this.firestore,Hi(this._delegate,ote(e)))}catch(n){throw Ur(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Lr(this.firestore,Hi(this._delegate,ste(e)))}catch(n){throw Ur(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Lr(this.firestore,Hi(this._delegate,ate(...e)))}catch(n){throw Ur(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Lr(this.firestore,Hi(this._delegate,lte(...e)))}catch(n){throw Ur(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Lr(this.firestore,Hi(this._delegate,ute(...e)))}catch(n){throw Ur(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Lr(this.firestore,Hi(this._delegate,cte(...e)))}catch(n){throw Ur(n,"endAt()","Query.endAt()")}}isEqual(e){return C6(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=mte(this._delegate):(e==null?void 0:e.source)==="server"?n=gte(this._delegate):n=_I(this._delegate),n.then(r=>new AA(this.firestore,new go(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=W6(e),r=Y6(e,i=>new AA(this.firestore,new go(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return _m(this._delegate,n,r)}withConverter(e){return new Lr(this.firestore,e?this._delegate.withConverter(ec.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Mte{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Em(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Lr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Em(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Mte(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Em(this._firestore,r))})}isEqual(e){return q6(this._delegate,e._delegate)}}class ud extends Lr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ji(this.firestore,e):null}doc(e){try{return e===void 0?new ji(this.firestore,po(this._delegate)):new ji(this.firestore,po(this._delegate,e))}catch(n){throw Ur(n,"doc()","CollectionReference.doc()")}}add(e){return vm(this._delegate,e).then(n=>new ji(this.firestore,n))}isEqual(e){return A6(this._delegate,e._delegate)}withConverter(e){return new ud(this.firestore,e?this._delegate.withConverter(ec.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Nu(t){return pt(t,Ft)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(...e){this._delegate=new El(...e)}static documentId(){return new wI(Xt.keyField().canonicalString())}isEqual(e){return e=Ne(e),e instanceof El?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{static serverTimestamp(){const e=ul();return e._methodName="FieldValue.serverTimestamp",new Iu(e)}static delete(){const e=wte();return e._methodName="FieldValue.delete",new Iu(e)}static arrayUnion(...e){const n=bte(...e);return n._methodName="FieldValue.arrayUnion",new Iu(n)}static arrayRemove(...e){const n=Ste(...e);return n._methodName="FieldValue.arrayRemove",new Iu(n)}static increment(e){const n=z6(e);return n._methodName="FieldValue.increment",new Iu(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nte={Firestore:G6,GeoPoint:mo,Timestamp:wt,Blob:H6,Transaction:j6,WriteBatch:K6,DocumentReference:ji,DocumentSnapshot:Tm,Query:Lr,QueryDocumentSnapshot:Em,QuerySnapshot:AA,CollectionReference:ud,FieldPath:wI,FieldValue:Iu,setLogLevel:Pte,CACHE_SIZE_UNLIMITED:zee};function Dte(t,e){t.INTERNAL.registerComponent(new Qi("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...Nte}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kte(t){Dte(t,(e,n)=>new G6(e,n,new Rte)),t.registerVersion(Cte,xte)}kte(Al);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6="firebasestorage.googleapis.com",Q6="storageBucket",Ote=120*1e3,Lte=600*1e3,Vte=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends Rr{constructor(e,n,r=0){super(Xw(e),`Firebase Storage: ${n} (${Xw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,an.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var jt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(jt||(jt={}));function Xw(t){return"storage/"+t}function bI(){const t="An unknown error occurred, please check the error payload for server response.";return new an(jt.UNKNOWN,t)}function Ute(t){return new an(jt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Fte(t){return new an(jt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Bte(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new an(jt.UNAUTHENTICATED,t)}function qte(){return new an(jt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $te(t){return new an(jt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function X6(){return new an(jt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Z6(){return new an(jt.CANCELED,"User canceled the upload/download.")}function zte(t){return new an(jt.INVALID_URL,"Invalid URL '"+t+"'.")}function Hte(t){return new an(jt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Gte(){return new an(jt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Q6+"' property when initializing the app?")}function e3(){return new an(jt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jte(){return new an(jt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Kte(){return new an(jt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Wte(t){return new an(jt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kf(t){return new an(jt.INVALID_ARGUMENT,t)}function t3(){return new an(jt.APP_DELETED,"The Firebase app was deleted.")}function n3(t){return new an(jt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jp(t,e){return new an(jt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function cp(t){throw new an(jt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=xr.makeFromUrl(e,n)}catch{return new xr(e,"")}if(r.path==="")return r;throw Hte(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function f(V){V.path_=decodeURIComponent(V.path)}const h="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",E=new RegExp(`^https?://${g}/${h}/b/${i}/o${v}`,"i"),b={bucket:1,path:3},S=n===J6?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",I=new RegExp(`^https?://${S}/${i}/${A}`,"i"),D=[{regex:l,indices:c,postModify:o},{regex:E,indices:b,postModify:f},{regex:I,indices:{bucket:1,path:2},postModify:f}];for(let V=0;V<D.length;V++){const q=D[V],z=q.regex.exec(e);if(z){const O=z[q.indices.bucket];let L=z[q.indices.path];L||(L=""),r=new xr(O,L),q.postModify(r);break}}if(r==null)throw zte(e);return r}}class Yte{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jte(t,e,n){let r=1,i=null,o=null,s=!1,l=0;function c(){return l===2}let f=!1;function h(...A){f||(f=!0,e.apply(null,A))}function g(A){i=setTimeout(()=>{i=null,t(E,c())},A)}function v(){o&&clearTimeout(o)}function E(A,...I){if(f){v();return}if(A){v(),h.call(null,A,...I);return}if(c()||s){v(),h.call(null,A,...I);return}r<64&&(r*=2);let D;l===1?(l=2,D=0):D=(r+Math.random())*1e3,g(D)}let b=!1;function S(A){b||(b=!0,v(),!f&&(i!==null?(A||(l=2),clearTimeout(i),g(0)):A||(l=1)))}return g(0),o=setTimeout(()=>{s=!0,S(!0)},n),S}function Qte(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xte(t){return t!==void 0}function Zte(t){return typeof t=="function"}function ene(t){return typeof t=="object"&&!Array.isArray(t)}function $0(t){return typeof t=="string"||t instanceof String}function Gk(t){return SI()&&t instanceof Blob}function SI(){return typeof Blob<"u"}function CA(t,e,n,r){if(r<e)throw kf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw kf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function r3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Fu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fu||(Fu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tne{constructor(e,n,r,i,o,s,l,c,f,h,g,v=!0,E=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=g,this.retry=v,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,S)=>{this.resolve_=b,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Wy(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=l=>{const c=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const l=o.getErrorCode()===Fu.NO_ERROR,c=o.getStatus();if(!l||i3(c,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===Fu.ABORT;r(!1,new Wy(!1,null,h));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Wy(f,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Xte(c)?o(c):o()}catch(c){s(c)}else if(l!==null){const c=bI();c.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,c)):s(c)}else if(i.canceled){const c=this.appDelete_?t3():Z6();s(c)}else{const c=X6();s(c)}};this.canceled_?n(!1,new Wy(!1,null,!0)):this.backoffId_=Jte(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Qte(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wy{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function nne(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function rne(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ine(t,e){e&&(t["X-Firebase-GMPID"]=e)}function one(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function sne(t,e,n,r,i,o,s=!0,l=!1){const c=r3(t.urlParams),f=t.url+c,h=Object.assign({},t.headers);return ine(h,e),nne(h,n),rne(h,o),one(h,r),new tne(f,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ane(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lne(...t){const e=ane();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(SI())return new Blob(t);throw new an(jt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function une(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cne(t){if(typeof atob>"u")throw Wte("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zw{constructor(e,n){this.data=e,this.contentType=n||null}}function AI(t,e){switch(t){case Ti.RAW:return new Zw(o3(e));case Ti.BASE64:case Ti.BASE64URL:return new Zw(s3(t,e));case Ti.DATA_URL:return new Zw(dne(e),hne(e))}throw bI()}function o3(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function fne(t){let e;try{e=decodeURIComponent(t)}catch{throw jp(Ti.DATA_URL,"Malformed data URL.")}return o3(e)}function s3(t,e){switch(t){case Ti.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw jp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ti.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw jp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cne(e)}catch(i){throw i.message.includes("polyfill")?i:jp(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class a3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw jp(Ti.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=pne(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function dne(t){const e=new a3(t);return e.base64?s3(Ti.BASE64,e.rest):fne(e.rest)}function hne(t){return new a3(t).contentType}function pne(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){let r=0,i="";Gk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Gk(this.data_)){const r=this.data_,i=une(r,e,n);return i===null?null:new Yo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Yo(r,!0)}}static getBlob(...e){if(SI()){const n=e.map(r=>r instanceof Yo?r.data_:r);return new Yo(lne.apply(null,n))}else{const n=e.map(s=>$0(s)?AI(Ti.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let l=0;l<s.length;l++)i[o++]=s[l]}),new Yo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){let e;try{e=JSON.parse(t)}catch{return null}return ene(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mne(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function gne(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function l3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yne(t,e){return e}class Or{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||yne}}let Yy=null;function vne(t){return!$0(t)||t.length<2?t:l3(t)}function tg(){if(Yy)return Yy;const t=[];t.push(new Or("bucket")),t.push(new Or("generation")),t.push(new Or("metageneration")),t.push(new Or("name","fullPath",!0));function e(o,s){return vne(s)}const n=new Or("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Or("size");return i.xform=r,t.push(i),t.push(new Or("timeCreated")),t.push(new Or("updated")),t.push(new Or("md5Hash",null,!0)),t.push(new Or("cacheControl",null,!0)),t.push(new Or("contentDisposition",null,!0)),t.push(new Or("contentEncoding",null,!0)),t.push(new Or("contentLanguage",null,!0)),t.push(new Or("contentType",null,!0)),t.push(new Or("metadata","customMetadata",!0)),Yy=t,Yy}function _ne(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new xr(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function Tne(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return _ne(r,t),r}function u3(t,e,n){const r=CI(e);return r===null?null:Tne(t,r,n)}function Ene(t,e,n,r){const i=CI(e);if(i===null||!$0(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(f=>{const h=t.bucket,g=t.fullPath,v="/b/"+s(h)+"/o/"+s(g),E=Nl(v,n,r),b=r3({alt:"media",token:f});return E+b})[0]}function xI(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="prefixes",Kk="items";function wne(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[jk])for(const i of n[jk]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new xr(e,o));r.prefixes.push(s)}if(n[Kk])for(const i of n[Kk]){const o=t._makeStorageReference(new xr(e,i.name));r.items.push(o)}return r}function bne(t,e,n){const r=CI(n);return r===null?null:wne(t,e,r)}class da{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){if(!t)throw bI()}function z0(t,e){function n(r,i){const o=u3(t,i,e);return rs(o!==null),o}return n}function Sne(t,e){function n(r,i){const o=bne(t,e,i);return rs(o!==null),o}return n}function Ane(t,e){function n(r,i){const o=u3(t,i,e);return rs(o!==null),Ene(o,i,t.host,t._protocol)}return n}function Vd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=qte():i=Bte():n.getStatus()===402?i=Fte(t.bucket):n.getStatus()===403?i=$te(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function H0(t){const e=Vd(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=Ute(t.path)),o.serverResponse=i.serverResponse,o}return n}function c3(t,e,n){const r=e.fullServerUrl(),i=Nl(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,l=new da(i,o,z0(t,n),s);return l.errorHandler=H0(e),l}function Cne(t,e,n,r,i){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=e.bucketOnlyServerUrl(),l=Nl(s,t.host,t._protocol),c="GET",f=t.maxOperationRetryTime,h=new da(l,c,Sne(t,e.bucket),f);return h.urlParams=o,h.errorHandler=Vd(e),h}function xne(t,e,n){const r=e.fullServerUrl(),i=Nl(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,l=new da(i,o,Ane(t,n),s);return l.errorHandler=H0(e),l}function Ine(t,e,n,r){const i=e.fullServerUrl(),o=Nl(i,t.host,t._protocol),s="PATCH",l=xI(n,r),c={"Content-Type":"application/json; charset=utf-8"},f=t.maxOperationRetryTime,h=new da(o,s,z0(t,r),f);return h.headers=c,h.body=l,h.errorHandler=H0(e),h}function Rne(t,e){const n=e.fullServerUrl(),r=Nl(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,f){}const l=new da(r,i,s,o);return l.successCodes=[200,204],l.errorHandler=H0(e),l}function Pne(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function f3(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Pne(null,e)),r}function d3(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let D="";for(let V=0;V<2;V++)D=D+Math.random().toString().slice(2);return D}const c=l();s["Content-Type"]="multipart/related; boundary="+c;const f=f3(e,r,i),h=xI(f,n),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+c+"--",E=Yo.getBlob(g,r,v);if(E===null)throw e3();const b={name:f.fullPath},S=Nl(o,t.host,t._protocol),A="POST",I=t.maxUploadRetryTime,N=new da(S,A,z0(t,n),I);return N.urlParams=b,N.headers=s,N.body=E.uploadData(),N.errorHandler=Vd(e),N}class f_{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function II(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{rs(!1)}return rs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Mne(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=f3(e,r,i),l={name:s.fullPath},c=Nl(o,t.host,t._protocol),f="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},g=xI(s,n),v=t.maxUploadRetryTime;function E(S){II(S);let A;try{A=S.getResponseHeader("X-Goog-Upload-URL")}catch{rs(!1)}return rs($0(A)),A}const b=new da(c,f,E,v);return b.urlParams=l,b.headers=h,b.body=g,b.errorHandler=Vd(e),b}function Nne(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function o(f){const h=II(f,["active","final"]);let g=null;try{g=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{rs(!1)}g||rs(!1);const v=Number(g);return rs(!isNaN(v)),new f_(v,r.size(),h==="final")}const s="POST",l=t.maxUploadRetryTime,c=new da(n,s,o,l);return c.headers=i,c.errorHandler=Vd(e),c}const Wk=256*1024;function Dne(t,e,n,r,i,o,s,l){const c=new f_(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw jte();const f=c.total-c.current;let h=f;i>0&&(h=Math.min(h,i));const g=c.current,v=g+h;let E="";h===0?E="finalize":f===h?E="upload, finalize":E="upload";const b={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${c.current}`},S=r.slice(g,v);if(S===null)throw e3();function A(V,q){const z=II(V,["active","final"]),O=c.current+h,L=r.size();let k;return z==="final"?k=z0(e,o)(V,q):k=null,new f_(O,L,z==="final",k)}const I="POST",N=e.maxUploadRetryTime,D=new da(n,I,A,N);return D.headers=b,D.body=S.uploadData(),D.progressCallback=l||null,D.errorHandler=Vd(t),D}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kne={STATE_CHANGED:"state_changed"},Fr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function eb(t){switch(t){case"running":case"pausing":case"canceling":return Fr.RUNNING;case"paused":return Fr.PAUSED;case"success":return Fr.SUCCESS;case"canceled":return Fr.CANCELED;case"error":return Fr.ERROR;default:return Fr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class One{constructor(e,n,r){if(Zte(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Lne{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw cp("cannot .send() more than once");if(Sl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw cp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Vne extends Lne{initXhr(){this.xhr_.responseType="text"}}function uo(){return new Vne}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=tg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(jt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(i3(i.status,[]))if(o)i=X6();else{this.sleepTime=Math.max(this.sleepTime*2,Vte),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(jt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Mne(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,uo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Nne(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,uo,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Wk*this._chunkMultiplier,n=new f_(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=Dne(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(s,uo,i,o,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Wk*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=c3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,uo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=d3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,uo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Z6(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=eb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new One(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(eb(this._state)){case Fr.SUCCESS:yf(this._resolve.bind(null,this.snapshot))();break;case Fr.CANCELED:case Fr.ERROR:const n=this._reject;yf(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(eb(this._state)){case Fr.RUNNING:case Fr.PAUSED:e.next&&yf(e.next.bind(e,this.snapshot))();break;case Fr.SUCCESS:e.complete&&yf(e.complete.bind(e))();break;case Fr.CANCELED:case Fr.ERROR:e.error&&yf(e.error.bind(e,this._error))();break;default:e.error&&yf(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n){this._service=e,n instanceof xr?this._location=n:this._location=xr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new tc(e,n)}get root(){const e=new xr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return l3(this._location.path)}get storage(){return this._service}get parent(){const e=mne(this._location.path);if(e===null)return null;const n=new xr(this._location.bucket,e);return new tc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw n3(e)}}function Une(t,e,n){t._throwIfRoot("uploadBytes");const r=d3(t.storage,t._location,tg(),new Yo(e,!0),n);return t.storage.makeRequestWithTokens(r,uo).then(i=>({metadata:i,ref:t}))}function Fne(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new h3(t,new Yo(e),n)}function Bne(t,e,n=Ti.RAW,r){t._throwIfRoot("uploadString");const i=AI(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),Une(t,i.data,o)}function qne(t){const e={prefixes:[],items:[]};return p3(t,e).then(()=>e)}async function p3(t,e,n){const i=await m3(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await p3(t,e,i.nextPageToken)}function m3(t,e){e!=null&&typeof e.maxResults=="number"&&CA("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=Cne(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,uo)}function $ne(t){t._throwIfRoot("getMetadata");const e=c3(t.storage,t._location,tg());return t.storage.makeRequestWithTokens(e,uo)}function zne(t,e){t._throwIfRoot("updateMetadata");const n=Ine(t.storage,t._location,e,tg());return t.storage.makeRequestWithTokens(n,uo)}function Hne(t){t._throwIfRoot("getDownloadURL");const e=xne(t.storage,t._location,tg());return t.storage.makeRequestWithTokens(e,uo).then(n=>{if(n===null)throw Kte();return n})}function Gne(t){t._throwIfRoot("deleteObject");const e=Rne(t.storage,t._location);return t.storage.makeRequestWithTokens(e,uo)}function g3(t,e){const n=gne(t._location.path,e),r=new xr(t._location.bucket,n);return new tc(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jne(t){return/^[A-Za-z]+:\/\//.test(t)}function Kne(t,e){return new tc(t,e)}function y3(t,e){if(t instanceof RI){const n=t;if(n._bucket==null)throw Gte();const r=new tc(n,n._bucket);return e!=null?y3(r,e):r}else return e!==void 0?g3(t,e):t}function Wne(t,e){if(e&&jne(e)){if(t instanceof RI)return Kne(t,e);throw kf("To use ref(service, url), the first argument must be a Storage instance.")}else return y3(t,e)}function Yk(t,e){const n=e==null?void 0:e[Q6];return n==null?null:xr.makeFromBucketSpec(n,t)}function Yne(t,e,n,r={}){t.host=`${e}:${n}`;const i=Sl(e);i&&(FC(`https://${t.host}/b`),BC("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:U4(o,t.app.options.projectId))}class RI{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=J6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ote,this._maxUploadRetryTime=Lte,this._requests=new Set,i!=null?this._bucket=xr.makeFromBucketSpec(i,this._host):this._bucket=Yk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xr.makeFromBucketSpec(this._url,e):this._bucket=Yk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ht(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tc(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new Yte(t3());{const s=sne(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Jk="@firebase/storage",Qk="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="storage";function Jne(t,e,n,r){return t=Ne(t),Bne(t,e,n,r)}function Qne(t,e,n){return t=Ne(t),Fne(t,e,n)}function Xne(t){return t=Ne(t),$ne(t)}function Zne(t,e){return t=Ne(t),zne(t,e)}function ere(t,e){return t=Ne(t),m3(t,e)}function tre(t){return t=Ne(t),qne(t)}function _3(t){return t=Ne(t),Hne(t)}function nre(t){return t=Ne(t),Gne(t)}function xA(t,e){return t=Ne(t),Wne(t,e)}function rre(t,e){return g3(t,e)}function ire(t=r0(),e){t=Ne(t);const r=Sd(t,v3).getImmediate({identifier:e}),i=L4("storage");return i&&T3(r,...i),r}function T3(t,e,n,r={}){Yne(t,e,n,r)}function ore(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new RI(n,r,i,e,oa)}function sre(){Qs(new Qi(v3,ore,"PUBLIC").setMultipleInstances(!0)),bi(Jk,Qk,""),bi(Jk,Qk,"esm2020")}sre();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Jy(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Jy(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new Jy(s,this,this._ref)):o={next:n.next?s=>n.next(new Jy(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class Zk{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Gs(e,this._service))}get items(){return this._delegate.items.map(e=>new Gs(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=rre(this._delegate,e);return new Gs(n,this.storage)}get root(){return new Gs(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Gs(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Xk(Qne(this._delegate,e,n),this)}putString(e,n=Ti.RAW,r){this._throwIfRoot("putString");const i=AI(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new Xk(new h3(this._delegate,new Yo(i.data,!0),o),this)}listAll(){return tre(this._delegate).then(e=>new Zk(e,this.storage))}list(e){return ere(this._delegate,e||void 0).then(n=>new Zk(n,this.storage))}getMetadata(){return Xne(this._delegate)}updateMetadata(e){return Zne(this._delegate,e)}getDownloadURL(){return _3(this._delegate)}delete(){return this._throwIfRoot("delete"),nre(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw n3(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(eO(e))throw kf("ref() expected a child path but got a URL, use refFromURL instead.");return new Gs(xA(this._delegate,e),this)}refFromURL(e){if(!eO(e))throw kf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xr.makeFromUrl(e,this._delegate.host)}catch{throw kf("refFromUrl() expected a valid full URL but got an invalid one.")}return new Gs(xA(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){T3(this._delegate,e,n,r)}}function eO(t){return/^[A-Za-z]+:\/\//.test(t)}const are="@firebase/storage-compat",lre="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ure="storage-compat";function cre(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new E3(n,r)}function fre(t){const e={TaskState:Fr,TaskEvent:kne,StringFormat:Ti,Storage:E3,Reference:Gs};t.INTERNAL.registerComponent(new Qi(ure,cre,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(are,lre)}fre(Al);const dre={apiKey:"AIzaSyCZh_PwX7LZfXujZiHGH9T-8uA17hNQGBY",authDomain:"bkomhate-site.firebaseapp.com",projectId:"bkomhate-site",storageBucket:"bkomhate-site.firebasestorage.app",messagingSenderId:"37549082348",appId:"1:37549082348:web:cf0c6c4f504b40192887c9"},PI=Al.initializeApp(dre),Kp=MJ(PI),Vr=Hee(PI),hre=ire(PI),w3=R.createContext({currentUser:null,loading:!0}),pre=()=>R.useContext(w3),mre=({children:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState(!0);R.useEffect(()=>tY(Kp,l=>{n(l),i(!1)}),[]);const o={currentUser:e,loading:r};return P.jsx(w3.Provider,{value:o,children:t})};function b3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=b3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Gt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=b3(t))&&(r&&(r+=" "),r+=e);return r}var tb={},nb={},tO;function gre(){return tO||(tO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(nb)),nb}var rb={},nO;function S3(){return nO||(nO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(rb)),rb}var ib={},rO;function A3(){return rO||(rO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(ib)),ib}var ob={},iO;function MI(){return iO||(iO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],i=n.length;if(i===0)return r;let o=0,s="",l="",c=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const f=n[o];l?f==="\\"&&o+1<i?(o++,s+=n[o]):f===l?l="":s+=f:c?f==='"'||f==="'"?l=f:f==="]"?(c=!1,r.push(s),s=""):s+=f:f==="["?(c=!0,s&&(r.push(s),s="")):f==="."?s&&(r.push(s),s=""):s+=f,o++}return s&&r.push(s),r}t.toPath=e})(ob)),ob}var oO;function NI(){return oO||(oO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gre(),n=S3(),r=A3(),i=MI();function o(l,c,f){if(l==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const h=l[c];return h===void 0?n.isDeepKey(c)?o(l,i.toPath(c),f):f:h}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const h=l[c];return h===void 0?f:h}default:{if(Array.isArray(c))return s(l,c,f);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const h=l[c];return h===void 0?f:h}}}function s(l,c,f){if(c.length===0)return f;let h=l;for(let g=0;g<c.length;g++){if(h==null||e.isUnsafeProperty(c[g]))return f;h=h[c[g]]}return h===void 0?f:h}t.get=o})(tb)),tb}var sb,sO;function yre(){return sO||(sO=1,sb=NI().get),sb}var vre=yre();const cd=cs(vre);var ab={exports:{}},kt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aO;function _re(){if(aO)return kt;aO=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),E=Symbol.for("react.client.reference");function b(S){if(typeof S=="object"&&S!==null){var A=S.$$typeof;switch(A){case t:switch(S=S.type,S){case n:case i:case r:case c:case f:case v:return S;default:switch(S=S&&S.$$typeof,S){case s:case l:case g:case h:return S;case o:return S;default:return A}}case e:return A}}}return kt.ContextConsumer=o,kt.ContextProvider=s,kt.Element=t,kt.ForwardRef=l,kt.Fragment=n,kt.Lazy=g,kt.Memo=h,kt.Portal=e,kt.Profiler=i,kt.StrictMode=r,kt.Suspense=c,kt.SuspenseList=f,kt.isContextConsumer=function(S){return b(S)===o},kt.isContextProvider=function(S){return b(S)===s},kt.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},kt.isForwardRef=function(S){return b(S)===l},kt.isFragment=function(S){return b(S)===n},kt.isLazy=function(S){return b(S)===g},kt.isMemo=function(S){return b(S)===h},kt.isPortal=function(S){return b(S)===e},kt.isProfiler=function(S){return b(S)===i},kt.isStrictMode=function(S){return b(S)===r},kt.isSuspense=function(S){return b(S)===c},kt.isSuspenseList=function(S){return b(S)===f},kt.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===i||S===r||S===c||S===f||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===h||S.$$typeof===s||S.$$typeof===o||S.$$typeof===l||S.$$typeof===E||S.getModuleId!==void 0)},kt.typeOf=b,kt}var lO;function Tre(){return lO||(lO=1,ab.exports=_re()),ab.exports}var Ere=Tre(),Ei=t=>t===0?0:t>0?1:-1,Zi=t=>typeof t=="number"&&t!=+t,Du=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Qe=t=>(typeof t=="number"||t instanceof Number)&&!Zi(t),ls=t=>Qe(t)||typeof t=="string",wre=0,wm=t=>{var e=++wre;return"".concat(t||"").concat(e)},vo=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Qe(e)&&typeof e!="string")return r;var o;if(Du(e)){if(n==null)return r;var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return Zi(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},C3=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function Br(t,e,n){return Qe(t)&&Qe(e)?t+n*(e-t):e}function bre(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):cd(r,e))===n)}var nr=t=>t===null||typeof t>"u",ng=t=>nr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),Sre=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function DI(t){if(typeof t!="string")return!1;var e=Sre;return e.includes(t)}var Are=["viewBox","children"],uO=["points","pathLength"],lb={svg:Are,polygon:uO,polyline:uO},Cre=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(R.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{DI(i)&&(r[i]=(o=>n[i](n,o)))}),r},xre=(t,e,n)=>r=>(t(e,n,r),null),kI=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var o=t[i];DI(i)&&typeof o=="function"&&(r||(r={}),r[i]=xre(o,e,n))}),r},Ire=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function x3(t){if(typeof t!="string")return!1;var e=Ire;return e.includes(t)}function G0(t){var e=Object.entries(t).filter(n=>{var[r]=n;return x3(r)});return Object.fromEntries(e)}var cO=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",fO=null,ub=null,I3=t=>{if(t===fO&&Array.isArray(ub))return ub;var e=[];return R.Children.forEach(t,n=>{nr(n)||(Ere.isFragment(n)?e=e.concat(I3(n.props.children)):e.push(n))}),ub=e,fO=t,e};function Rre(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>cO(i)):r=[cO(e)],I3(t).forEach(i=>{var o=cd(i,"type.displayName")||cd(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var Pre=(t,e,n,r)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var o=(i=r&&(lb==null?void 0:lb[r]))!==null&&i!==void 0?i:[],s=e.startsWith("data-"),l=typeof t!="function"&&(!!r&&o.includes(e)||x3(e)),c=!!n&&DI(e);return s||l||c},Zn=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(R.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var s;Pre((s=r)===null||s===void 0?void 0:s[o],o,e,n)&&(i[o]=r[o])}),i},Mre=["children","width","height","viewBox","className","style","title","desc"];function IA(){return IA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IA.apply(null,arguments)}function Nre(t,e){if(t==null)return{};var n,r,i=Dre(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var R3=R.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:o,className:s,style:l,title:c,desc:f}=t,h=Nre(t,Mre),g=o||{width:r,height:i,x:0,y:0},v=Gt("recharts-surface",s);return R.createElement("svg",IA({},Zn(h,!0,"svg"),{className:v,width:r,height:i,style:l,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),R.createElement("title",null,c),R.createElement("desc",null,f),n)}),kre=["children","className"];function RA(){return RA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RA.apply(null,arguments)}function Ore(t,e){if(t==null)return{};var n,r,i=Lre(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Lre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wl=R.forwardRef((t,e)=>{var{children:n,className:r}=t,i=Ore(t,kre),o=Gt("recharts-layer",r);return R.createElement("g",RA({className:o},Zn(i,!0),{ref:e}),n)}),Vre=R.createContext(null);function Ut(t){return function(){return t}}const P3=Math.cos,d_=Math.sin,Eo=Math.sqrt,h_=Math.PI,j0=2*h_,PA=Math.PI,MA=2*PA,Eu=1e-6,Ure=MA-Eu;function M3(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Fre(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return M3;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Bre{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?M3:Fre(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,c=r-e,f=i-n,h=s-e,g=l-n,v=h*h+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(v>Eu)if(!(Math.abs(g*c-f*h)>Eu)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let E=r-s,b=i-l,S=c*c+f*f,A=E*E+b*b,I=Math.sqrt(S),N=Math.sqrt(v),D=o*Math.tan((PA-Math.acos((S+v-A)/(2*I*N)))/2),V=D/N,q=D/I;Math.abs(V-1)>Eu&&this._append`L${e+V*h},${n+V*g}`,this._append`A${o},${o},0,0,${+(g*E>h*b)},${this._x1=e+q*c},${this._y1=n+q*f}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),f=e+l,h=n+c,g=1^s,v=s?i-o:o-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>Eu||Math.abs(this._y1-h)>Eu)&&this._append`L${f},${h}`,r&&(v<0&&(v=v%MA+MA),v>Ure?this._append`A${r},${r},0,1,${g},${e-l},${n-c}A${r},${r},0,1,${g},${this._x1=f},${this._y1=h}`:v>Eu&&this._append`A${r},${r},0,${+(v>=PA)},${g},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function OI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Bre(e)}function LI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function N3(t){this._context=t}N3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function K0(t){return new N3(t)}function D3(t){return t[0]}function k3(t){return t[1]}function O3(t,e){var n=Ut(!0),r=null,i=K0,o=null,s=OI(l);t=typeof t=="function"?t:t===void 0?D3:Ut(t),e=typeof e=="function"?e:e===void 0?k3:Ut(e);function l(c){var f,h=(c=LI(c)).length,g,v=!1,E;for(r==null&&(o=i(E=s())),f=0;f<=h;++f)!(f<h&&n(g=c[f],f,c))===v&&((v=!v)?o.lineStart():o.lineEnd()),v&&o.point(+t(g,f,c),+e(g,f,c));if(E)return o=null,E+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ut(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ut(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ut(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),l):r},l}function Qy(t,e,n){var r=null,i=Ut(!0),o=null,s=K0,l=null,c=OI(f);t=typeof t=="function"?t:t===void 0?D3:Ut(+t),e=typeof e=="function"?e:Ut(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?k3:Ut(+n);function f(g){var v,E,b,S=(g=LI(g)).length,A,I=!1,N,D=new Array(S),V=new Array(S);for(o==null&&(l=s(N=c())),v=0;v<=S;++v){if(!(v<S&&i(A=g[v],v,g))===I)if(I=!I)E=v,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=v-1;b>=E;--b)l.point(D[b],V[b]);l.lineEnd(),l.areaEnd()}I&&(D[v]=+t(A,v,g),V[v]=+e(A,v,g),l.point(r?+r(A,v,g):D[v],n?+n(A,v,g):V[v]))}if(N)return l=null,N+""||null}function h(){return O3().defined(i).curve(s).context(o)}return f.x=function(g){return arguments.length?(t=typeof g=="function"?g:Ut(+g),r=null,f):t},f.x0=function(g){return arguments.length?(t=typeof g=="function"?g:Ut(+g),f):t},f.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Ut(+g),f):r},f.y=function(g){return arguments.length?(e=typeof g=="function"?g:Ut(+g),n=null,f):e},f.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Ut(+g),f):e},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Ut(+g),f):n},f.lineX0=f.lineY0=function(){return h().x(t).y(e)},f.lineY1=function(){return h().x(t).y(n)},f.lineX1=function(){return h().x(r).y(e)},f.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Ut(!!g),f):i},f.curve=function(g){return arguments.length?(s=g,o!=null&&(l=s(o)),f):s},f.context=function(g){return arguments.length?(g==null?o=l=null:l=s(o=g),f):o},f}class L3{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function qre(t){return new L3(t,!0)}function $re(t){return new L3(t,!1)}const VI={draw(t,e){const n=Eo(e/h_);t.moveTo(n,0),t.arc(0,0,n,0,j0)}},zre={draw(t,e){const n=Eo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},V3=Eo(1/3),Hre=V3*2,Gre={draw(t,e){const n=Eo(e/Hre),r=n*V3;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},jre={draw(t,e){const n=Eo(e),r=-n/2;t.rect(r,r,n,n)}},Kre=.8908130915292852,U3=d_(h_/10)/d_(7*h_/10),Wre=d_(j0/10)*U3,Yre=-P3(j0/10)*U3,Jre={draw(t,e){const n=Eo(e*Kre),r=Wre*n,i=Yre*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=j0*o/5,l=P3(s),c=d_(s);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},cb=Eo(3),Qre={draw(t,e){const n=-Eo(e/(cb*3));t.moveTo(0,n*2),t.lineTo(-cb*n,-n),t.lineTo(cb*n,-n),t.closePath()}},qi=-.5,$i=Eo(3)/2,NA=1/Eo(12),Xre=(NA/2+1)*3,Zre={draw(t,e){const n=Eo(e/Xre),r=n/2,i=n*NA,o=r,s=n*NA+n,l=-o,c=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(l,c),t.lineTo(qi*r-$i*i,$i*r+qi*i),t.lineTo(qi*o-$i*s,$i*o+qi*s),t.lineTo(qi*l-$i*c,$i*l+qi*c),t.lineTo(qi*r+$i*i,qi*i-$i*r),t.lineTo(qi*o+$i*s,qi*s-$i*o),t.lineTo(qi*l+$i*c,qi*c-$i*l),t.closePath()}};function eie(t,e){let n=null,r=OI(i);t=typeof t=="function"?t:Ut(t||VI),e=typeof e=="function"?e:Ut(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Ut(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Ut(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function p_(){}function m_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function F3(t){this._context=t}F3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:m_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:m_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tie(t){return new F3(t)}function B3(t){this._context=t}B3.prototype={areaStart:p_,areaEnd:p_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:m_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function nie(t){return new B3(t)}function q3(t){this._context=t}q3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:m_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function rie(t){return new q3(t)}function $3(t){this._context=t}$3.prototype={areaStart:p_,areaEnd:p_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function iie(t){return new $3(t)}function dO(t){return t<0?-1:1}function hO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),l=(o*i+s*r)/(r+i);return(dO(o)+dO(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(l))||0}function pO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function fb(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,l=(o-r)/3;t._context.bezierCurveTo(r+l,i+l*e,o-l,s-l*n,o,s)}function g_(t){this._context=t}g_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fb(this,this._t0,pO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,fb(this,pO(this,n=hO(this,t,e)),n);break;default:fb(this,this._t0,n=hO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function z3(t){this._context=new H3(t)}(z3.prototype=Object.create(g_.prototype)).point=function(t,e){g_.prototype.point.call(this,e,t)};function H3(t){this._context=t}H3.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function oie(t){return new g_(t)}function sie(t){return new z3(t)}function G3(t){this._context=t}G3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=mO(t),i=mO(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function mO(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function aie(t){return new G3(t)}function W0(t,e){this._context=t,this._t=e}W0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function lie(t){return new W0(t,.5)}function uie(t){return new W0(t,0)}function cie(t){return new W0(t,1)}function fd(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,l=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<l;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function DA(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function fie(t,e){return t[e]}function die(t){const e=[];return e.key=t,e}function hie(){var t=Ut([]),e=DA,n=fd,r=fie;function i(o){var s=Array.from(t.apply(this,arguments),die),l,c=s.length,f=-1,h;for(const g of o)for(l=0,++f;l<c;++l)(s[l][f]=[0,+r(g,s[l].key,f,o)]).data=g;for(l=0,h=LI(e(s));l<c;++l)s[h[l]].index=l;return n(s,h),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Ut(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Ut(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?DA:typeof o=="function"?o:Ut(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??fd,i):n},i}function pie(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}fd(t,e)}}function mie(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,l=0;s<i;++s)l+=t[s][n][1]||0;r[n][1]+=r[n][0]=-l/2}fd(t,e)}}function gie(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var l=0,c=0,f=0;l<s;++l){for(var h=t[e[l]],g=h[r][1]||0,v=h[r-1][1]||0,E=(g-v)/2,b=0;b<l;++b){var S=t[e[b]],A=S[r][1]||0,I=S[r-1][1]||0;E+=A-I}c+=g,f+=E*g}i[r-1][1]+=i[r-1][0]=n,c&&(n-=f/c)}i[r-1][1]+=i[r-1][0]=n,fd(t,e)}}var yie=["type","size","sizeType"];function kA(){return kA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kA.apply(null,arguments)}function gO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gO(Object(n),!0).forEach(function(r){vie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vie(t,e,n){return(e=_ie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ie(t){var e=Tie(t,"string");return typeof e=="symbol"?e:e+""}function Tie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eie(t,e){if(t==null)return{};var n,r,i=wie(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var j3={symbolCircle:VI,symbolCross:zre,symbolDiamond:Gre,symbolSquare:jre,symbolStar:Jre,symbolTriangle:Qre,symbolWye:Zre},bie=Math.PI/180,Sie=t=>{var e="symbol".concat(ng(t));return j3[e]||VI},Aie=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*bie;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Cie=(t,e)=>{j3["symbol".concat(ng(t))]=e},K3=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Eie(t,yie),o=yO(yO({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var l=()=>{var v=Sie(s),E=eie().type(v).size(Aie(n,r,s));return E()},{className:c,cx:f,cy:h}=o,g=Zn(o,!0);return f===+f&&h===+h&&n===+n?R.createElement("path",kA({},g,{className:Gt("recharts-symbols",c),transform:"translate(".concat(f,", ").concat(h,")"),d:l()})):null};K3.registerSymbol=Cie;var db={},hb={},vO;function xie(){return vO||(vO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let o=0;o<n.length;o++){const s=n[o],l=r(s);i.has(l)||i.set(l,s)}return Array.from(i.values())}t.uniqBy=e})(hb)),hb}var pb={},_O;function W3(){return _O||(_O=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(pb)),pb}var mb={},gb={},yb={},TO;function Iie(){return TO||(TO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(yb)),yb}var EO;function UI(){return EO||(EO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Iie();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(gb)),gb}var vb={},wO;function Rie(){return wO||(wO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(vb)),vb}var bO;function Pie(){return bO||(bO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UI(),n=Rie();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(mb)),mb}var _b={},Tb={},SO;function Mie(){return SO||(SO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NI();function n(r){return function(i){return e.get(i,r)}}t.property=n})(Tb)),Tb}var Eb={},wb={},bb={},Sb={},AO;function Y3(){return AO||(AO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Sb)),Sb}var Ab={},CO;function J3(){return CO||(CO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Ab)),Ab}var Cb={},xO;function Q3(){return xO||(xO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(Cb)),Cb}var IO;function Nie(){return IO||(IO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FI(),n=Y3(),r=J3(),i=Q3();function o(g,v,E){return typeof E!="function"?e.isMatch(g,v):s(g,v,function b(S,A,I,N,D,V){const q=E(S,A,I,N,D,V);return q!==void 0?!!q:s(S,A,b,V)},new Map)}function s(g,v,E,b){if(v===g)return!0;switch(typeof v){case"object":return l(g,v,E,b);case"function":return Object.keys(v).length>0?s(g,{...v},E,b):i.eq(g,v);default:return n.isObject(g)?typeof v=="string"?v==="":!0:i.eq(g,v)}}function l(g,v,E,b){if(v==null)return!0;if(Array.isArray(v))return f(g,v,E,b);if(v instanceof Map)return c(g,v,E,b);if(v instanceof Set)return h(g,v,E,b);const S=Object.keys(v);if(g==null)return S.length===0;if(S.length===0)return!0;if(b&&b.has(v))return b.get(v)===g;b&&b.set(v,g);try{for(let A=0;A<S.length;A++){const I=S[A];if(!r.isPrimitive(g)&&!(I in g)||v[I]===void 0&&g[I]!==void 0||v[I]===null&&g[I]!==null||!E(g[I],v[I],I,g,v,b))return!1}return!0}finally{b&&b.delete(v)}}function c(g,v,E,b){if(v.size===0)return!0;if(!(g instanceof Map))return!1;for(const[S,A]of v.entries()){const I=g.get(S);if(E(I,A,S,g,v,b)===!1)return!1}return!0}function f(g,v,E,b){if(v.length===0)return!0;if(!Array.isArray(g))return!1;const S=new Set;for(let A=0;A<v.length;A++){const I=v[A];let N=!1;for(let D=0;D<g.length;D++){if(S.has(D))continue;const V=g[D];let q=!1;if(E(V,I,A,g,v,b)&&(q=!0),q){S.add(D),N=!0;break}}if(!N)return!1}return!0}function h(g,v,E,b){return v.size===0?!0:g instanceof Set?f([...g],[...v],E,b):!1}t.isMatchWith=o,t.isSetMatch=h})(bb)),bb}var RO;function FI(){return RO||(RO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nie();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(wb)),wb}var xb={},Ib={},Rb={},PO;function Die(){return PO||(PO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Rb)),Rb}var Pb={},MO;function X3(){return MO||(MO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Pb)),Pb}var Mb={},NO;function Z3(){return NO||(NO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",s="[object Symbol]",l="[object Date]",c="[object Map]",f="[object Set]",h="[object Array]",g="[object Function]",v="[object ArrayBuffer]",E="[object Object]",b="[object Error]",S="[object DataView]",A="[object Uint8Array]",I="[object Uint8ClampedArray]",N="[object Uint16Array]",D="[object Uint32Array]",V="[object BigUint64Array]",q="[object Int8Array]",z="[object Int16Array]",O="[object Int32Array]",L="[object BigInt64Array]",k="[object Float32Array]",$="[object Float64Array]";t.argumentsTag=o,t.arrayBufferTag=v,t.arrayTag=h,t.bigInt64ArrayTag=L,t.bigUint64ArrayTag=V,t.booleanTag=i,t.dataViewTag=S,t.dateTag=l,t.errorTag=b,t.float32ArrayTag=k,t.float64ArrayTag=$,t.functionTag=g,t.int16ArrayTag=z,t.int32ArrayTag=O,t.int8ArrayTag=q,t.mapTag=c,t.numberTag=r,t.objectTag=E,t.regexpTag=e,t.setTag=f,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=N,t.uint32ArrayTag=D,t.uint8ArrayTag=A,t.uint8ClampedArrayTag=I})(Mb)),Mb}var Nb={},DO;function kie(){return DO||(DO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Nb)),Nb}var kO;function e5(){return kO||(kO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Die(),n=X3(),r=Z3(),i=J3(),o=kie();function s(h,g){return l(h,void 0,h,new Map,g)}function l(h,g,v,E=new Map,b=void 0){const S=b==null?void 0:b(h,g,v,E);if(S!==void 0)return S;if(i.isPrimitive(h))return h;if(E.has(h))return E.get(h);if(Array.isArray(h)){const A=new Array(h.length);E.set(h,A);for(let I=0;I<h.length;I++)A[I]=l(h[I],I,v,E,b);return Object.hasOwn(h,"index")&&(A.index=h.index),Object.hasOwn(h,"input")&&(A.input=h.input),A}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const A=new RegExp(h.source,h.flags);return A.lastIndex=h.lastIndex,A}if(h instanceof Map){const A=new Map;E.set(h,A);for(const[I,N]of h)A.set(I,l(N,I,v,E,b));return A}if(h instanceof Set){const A=new Set;E.set(h,A);for(const I of h)A.add(l(I,void 0,v,E,b));return A}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const A=new(Object.getPrototypeOf(h)).constructor(h.length);E.set(h,A);for(let I=0;I<h.length;I++)A[I]=l(h[I],I,v,E,b);return A}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const A=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return E.set(h,A),c(A,h,v,E,b),A}if(typeof File<"u"&&h instanceof File){const A=new File([h],h.name,{type:h.type});return E.set(h,A),c(A,h,v,E,b),A}if(h instanceof Blob){const A=new Blob([h],{type:h.type});return E.set(h,A),c(A,h,v,E,b),A}if(h instanceof Error){const A=new h.constructor;return E.set(h,A),A.message=h.message,A.name=h.name,A.stack=h.stack,A.cause=h.cause,c(A,h,v,E,b),A}if(typeof h=="object"&&f(h)){const A=Object.create(Object.getPrototypeOf(h));return E.set(h,A),c(A,h,v,E,b),A}return h}function c(h,g,v=h,E,b){const S=[...Object.keys(g),...e.getSymbols(g)];for(let A=0;A<S.length;A++){const I=S[A],N=Object.getOwnPropertyDescriptor(h,I);(N==null||N.writable)&&(h[I]=l(g[I],I,v,E,b))}}function f(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=l,t.copyProperties=c})(Ib)),Ib}var OO;function Oie(){return OO||(OO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=e5();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(xb)),xb}var LO;function Lie(){return LO||(LO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FI(),n=Oie();function r(i){return i=n.cloneDeep(i),o=>e.isMatch(o,i)}t.matches=r})(Eb)),Eb}var Db={},kb={},Ob={},VO;function Vie(){return VO||(VO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=e5(),n=Z3();function r(i,o){return e.cloneDeepWith(i,(s,l,c,f)=>{const h=o==null?void 0:o(s,l,c,f);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(g,i),g}case n.argumentsTag:{const g={};return e.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}t.cloneDeepWith=r})(Ob)),Ob}var UO;function Uie(){return UO||(UO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vie();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(kb)),kb}var Lb={},Vb={},FO;function t5(){return FO||(FO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(Vb)),Vb}var Ub={},BO;function Fie(){return BO||(BO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X3();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(Ub)),Ub}var qO;function Bie(){return qO||(qO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S3(),n=t5(),r=Fie(),i=MI();function o(s,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(s==null?void 0:s[l])==null?c=i.toPath(l):c=[l],c.length===0)return!1;let f=s;for(let h=0;h<c.length;h++){const g=c[h];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}t.has=o})(Lb)),Lb}var $O;function qie(){return $O||($O=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FI(),n=A3(),r=Uie(),i=NI(),o=Bie();function s(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=r.cloneDeep(c),function(f){const h=i.get(f,l);return h===void 0?o.has(f,l):c===void 0?h===void 0:e.isMatch(h,c)}}t.matchesProperty=s})(Db)),Db}var zO;function $ie(){return zO||(zO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=W3(),n=Mie(),r=Lie(),i=qie();function o(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=o})(_b)),_b}var HO;function zie(){return HO||(HO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xie(),n=W3(),r=Pie(),i=$ie();function o(s,l=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(l)):[]}t.uniqBy=o})(db)),db}var Fb,GO;function Hie(){return GO||(GO=1,Fb=zie().uniqBy),Fb}var Gie=Hie();const jO=cs(Gie);function jie(t,e,n){return e===!0?jO(t,n):typeof e=="function"?jO(t,e):t}var Bb={exports:{}},qb={},$b={exports:{}},zb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KO;function Kie(){if(KO)return zb;KO=1;var t=Td();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(g,v){var E=v(),b=r({inst:{value:E,getSnapshot:v}}),S=b[0].inst,A=b[1];return o(function(){S.value=E,S.getSnapshot=v,c(S)&&A({inst:S})},[g,E,v]),i(function(){return c(S)&&A({inst:S}),g(function(){c(S)&&A({inst:S})})},[g]),s(E),E}function c(g){var v=g.getSnapshot;g=g.value;try{var E=v();return!n(g,E)}catch{return!0}}function f(g,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return zb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,zb}var WO;function Wie(){return WO||(WO=1,$b.exports=Kie()),$b.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YO;function Yie(){if(YO)return qb;YO=1;var t=Td(),e=Wie();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,l=t.useMemo,c=t.useDebugValue;return qb.useSyncExternalStoreWithSelector=function(f,h,g,v,E){var b=o(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function I(z){if(!N){if(N=!0,D=z,z=v(z),E!==void 0&&S.hasValue){var O=S.value;if(E(O,z))return V=O}return V=z}if(O=V,r(D,z))return O;var L=v(z);return E!==void 0&&E(O,L)?(D=z,O):(D=z,V=L)}var N=!1,D,V,q=g===void 0?null:g;return[function(){return I(h())},q===null?void 0:function(){return I(q())}]},[h,g,v,E]);var A=i(f,b[0],b[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),c(A),A},qb}var JO;function Jie(){return JO||(JO=1,Bb.exports=Yie()),Bb.exports}var Qie=Jie(),BI=R.createContext(null),Xie=t=>t,rr=()=>{var t=R.useContext(BI);return t?t.store.dispatch:Xie},Nv=()=>{},Zie=()=>Nv,eoe=(t,e)=>t===e;function $e(t){var e=R.useContext(BI);return Qie.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Zie,e?e.store.getState:Nv,e?e.store.getState:Nv,e?t:Nv,eoe)}function toe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function noe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function roe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var QO=t=>Array.isArray(t)?t:[t];function ioe(t){const e=Array.isArray(t[0])?t[0]:t;return roe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function ooe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var soe=class{constructor(t){this.value=t}deref(){return this.value}},aoe=typeof WeakRef<"u"?WeakRef:soe,loe=0,XO=1;function Xy(){return{s:loe,v:void 0,o:null,p:null}}function n5(t,e={}){let n=Xy();const{resultEqualityCheck:r}=e;let i,o=0;function s(){var g;let l=n;const{length:c}=arguments;for(let v=0,E=c;v<E;v++){const b=arguments[v];if(typeof b=="function"||typeof b=="object"&&b!==null){let S=l.o;S===null&&(l.o=S=new WeakMap);const A=S.get(b);A===void 0?(l=Xy(),S.set(b,l)):l=A}else{let S=l.p;S===null&&(l.p=S=new Map);const A=S.get(b);A===void 0?(l=Xy(),S.set(b,l)):l=A}}const f=l;let h;if(l.s===XO)h=l.v;else if(h=t.apply(null,arguments),o++,r){const v=((g=i==null?void 0:i.deref)==null?void 0:g.call(i))??i;v!=null&&r(v,h)&&(h=v,o!==0&&o--),i=typeof h=="object"&&h!==null||typeof h=="function"?new aoe(h):h}return f.s=XO,f.v=h,h}return s.clearCache=()=>{n=Xy(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function uoe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,s=0,l,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),toe(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...n,...c},{memoize:g,memoizeOptions:v=[],argsMemoize:E=n5,argsMemoizeOptions:b=[]}=h,S=QO(v),A=QO(b),I=ioe(i),N=g(function(){return o++,f.apply(null,arguments)},...S),D=E(function(){s++;const q=ooe(I,arguments);return l=N.apply(null,q),l},...A);return Object.assign(D,{resultFunc:f,memoizedResultFunc:N,dependencies:I,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:g,argsMemoize:E})};return Object.assign(r,{withTypes:()=>r}),r}var se=uoe(n5),coe=Object.assign((t,e=se)=>{noe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((s,l,c)=>(s[n[c]]=l,s),{}))},{withTypes:()=>coe}),Hb={},Gb={},jb={},ZO;function foe(){return ZO||(ZO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const s=e(r),l=e(i);if(s===l&&s===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?l-s:s-l}return 0};t.compareValues=n})(jb)),jb}var Kb={},Wb={},e2;function r5(){return e2||(e2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Wb)),Wb}var t2;function doe(){return t2||(t2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r5(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||e.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||s!=null&&Object.hasOwn(s,o)}t.isKey=i})(Kb)),Kb}var n2;function hoe(){return n2||(n2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=foe(),n=doe(),r=MI();function i(o,s,l,c){if(o==null)return[];l=c?void 0:l,Array.isArray(o)||(o=Object.values(o)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(E=>String(E));const f=(E,b)=>{let S=E;for(let A=0;A<b.length&&S!=null;++A)S=S[b[A]];return S},h=(E,b)=>b==null||E==null?b:typeof E=="object"&&"key"in E?Object.hasOwn(b,E.key)?b[E.key]:f(b,E.path):typeof E=="function"?E(b):Array.isArray(E)?f(b,E):typeof b=="object"?b[E]:b,g=s.map(E=>(Array.isArray(E)&&E.length===1&&(E=E[0]),E==null||typeof E=="function"||Array.isArray(E)||n.isKey(E)?E:{key:E,path:r.toPath(E)}));return o.map(E=>({original:E,criteria:g.map(b=>h(b,E))})).slice().sort((E,b)=>{for(let S=0;S<g.length;S++){const A=e.compareValues(E.criteria[S],b.criteria[S],l[S]);if(A!==0)return A}return 0}).map(E=>E.original)}t.orderBy=i})(Gb)),Gb}var Yb={},r2;function poe(){return r2||(r2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],o=Math.floor(r),s=(l,c)=>{for(let f=0;f<l.length;f++){const h=l[f];Array.isArray(h)&&c<o?s(h,c+1):i.push(h)}};return s(n,0),i}t.flatten=e})(Yb)),Yb}var Jb={},i2;function i5(){return i2||(i2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=t5(),n=UI(),r=Y3(),i=Q3();function o(s,l,c){return r.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?i.eq(c[l],s):!1}t.isIterateeCall=o})(Jb)),Jb}var o2;function moe(){return o2||(o2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hoe(),n=poe(),r=i5();function i(o,...s){const l=s.length;return l>1&&r.isIterateeCall(o,s[0],s[1])?s=[]:l>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(o,n.flatten(s),["asc"])}t.sortBy=i})(Hb)),Hb}var Qb,s2;function goe(){return s2||(s2=1,Qb=moe().sortBy),Qb}var yoe=goe();const Y0=cs(yoe);var o5=t=>t.legend.settings,voe=t=>t.legend.size,_oe=t=>t.legend.payload;se([_oe,o5],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Y0(r,n):r});var Zy=1;function Toe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=R.useState({height:0,left:0,top:0,width:0}),r=R.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),s={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(s.height-e.height)>Zy||Math.abs(s.left-e.left)>Zy||Math.abs(s.top-e.top)>Zy||Math.abs(s.width-e.width)>Zy)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function hr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Eoe=typeof Symbol=="function"&&Symbol.observable||"@@observable",a2=Eoe,Xb=()=>Math.random().toString(36).substring(7).split("").join("."),woe={INIT:`@@redux/INIT${Xb()}`,REPLACE:`@@redux/REPLACE${Xb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Xb()}`},y_=woe;function qI(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function s5(t,e,n){if(typeof t!="function")throw new Error(hr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(hr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(hr(1));return n(s5)(t,e)}let r=t,i=e,o=new Map,s=o,l=0,c=!1;function f(){s===o&&(s=new Map,o.forEach((A,I)=>{s.set(I,A)}))}function h(){if(c)throw new Error(hr(3));return i}function g(A){if(typeof A!="function")throw new Error(hr(4));if(c)throw new Error(hr(5));let I=!0;f();const N=l++;return s.set(N,A),function(){if(I){if(c)throw new Error(hr(6));I=!1,f(),s.delete(N),o=null}}}function v(A){if(!qI(A))throw new Error(hr(7));if(typeof A.type>"u")throw new Error(hr(8));if(typeof A.type!="string")throw new Error(hr(17));if(c)throw new Error(hr(9));try{c=!0,i=r(i,A)}finally{c=!1}return(o=s).forEach(N=>{N()}),A}function E(A){if(typeof A!="function")throw new Error(hr(10));r=A,v({type:y_.REPLACE})}function b(){const A=g;return{subscribe(I){if(typeof I!="object"||I===null)throw new Error(hr(11));function N(){const V=I;V.next&&V.next(h())}return N(),{unsubscribe:A(N)}},[a2](){return this}}}return v({type:y_.INIT}),{dispatch:v,subscribe:g,getState:h,replaceReducer:E,[a2]:b}}function boe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:y_.INIT})>"u")throw new Error(hr(12));if(typeof n(void 0,{type:y_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(hr(13))})}function a5(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{boe(n)}catch(o){i=o}return function(s={},l){if(i)throw i;let c=!1;const f={};for(let h=0;h<r.length;h++){const g=r[h],v=n[g],E=s[g],b=v(E,l);if(typeof b>"u")throw l&&l.type,new Error(hr(14));f[g]=b,c=c||b!==E}return c=c||r.length!==Object.keys(s).length,c?f:s}}function v_(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Soe(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(hr(15))};const s={getState:i.getState,dispatch:(c,...f)=>o(c,...f)},l=t.map(c=>c(s));return o=v_(...l)(i.dispatch),{...i,dispatch:o}}}function l5(t){return qI(t)&&"type"in t&&typeof t.type=="string"}var u5=Symbol.for("immer-nothing"),l2=Symbol.for("immer-draftable"),Ci=Symbol.for("immer-state");function co(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var dd=Object.getPrototypeOf;function nc(t){return!!t&&!!t[Ci]}function ta(t){var e;return t?c5(t)||Array.isArray(t)||!!t[l2]||!!((e=t.constructor)!=null&&e[l2])||rg(t)||Q0(t):!1}var Aoe=Object.prototype.constructor.toString();function c5(t){if(!t||typeof t!="object")return!1;const e=dd(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Aoe}function __(t,e){J0(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function J0(t){const e=t[Ci];return e?e.type_:Array.isArray(t)?1:rg(t)?2:Q0(t)?3:0}function OA(t,e){return J0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function f5(t,e,n){const r=J0(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Coe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function rg(t){return t instanceof Map}function Q0(t){return t instanceof Set}function wu(t){return t.copy_||t.base_}function LA(t,e){if(rg(t))return new Map(t);if(Q0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=c5(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ci];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],l=r[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(dd(t),r)}else{const r=dd(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function $I(t,e=!1){return X0(t)||nc(t)||!ta(t)||(J0(t)>1&&Object.defineProperties(t,{set:{value:ev},add:{value:ev},clear:{value:ev},delete:{value:ev}}),Object.freeze(t),e&&Object.values(t).forEach(n=>$I(n,!0))),t}function ev(){co(2)}function X0(t){return Object.isFrozen(t)}var xoe={};function rc(t){const e=xoe[t];return e||co(0,t),e}var bm;function d5(){return bm}function Ioe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function u2(t,e){e&&(rc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function VA(t){UA(t),t.drafts_.forEach(Roe),t.drafts_=null}function UA(t){t===bm&&(bm=t.parent_)}function c2(t){return bm=Ioe(bm,t)}function Roe(t){const e=t[Ci];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function f2(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ci].modified_&&(VA(e),co(4)),ta(t)&&(t=T_(e,t),e.parent_||E_(e,t)),e.patches_&&rc("Patches").generateReplacementPatches_(n[Ci].base_,t,e.patches_,e.inversePatches_)):t=T_(e,n,[]),VA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==u5?t:void 0}function T_(t,e,n){if(X0(e))return e;const r=e[Ci];if(!r)return __(e,(i,o)=>d2(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return E_(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),__(o,(l,c)=>d2(t,r,i,l,c,n,s)),E_(t,i,!1),n&&t.patches_&&rc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function d2(t,e,n,r,i,o,s){if(nc(i)){const l=o&&e&&e.type_!==3&&!OA(e.assigned_,r)?o.concat(r):void 0,c=T_(t,i,l);if(f5(n,r,c),nc(c))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(ta(i)&&!X0(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;T_(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(rg(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&E_(t,i)}}function E_(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&$I(e,n)}function Poe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:d5(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=zI;n&&(i=[r],o=Sm);const{revoke:s,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=s,l}var zI={get(t,e){if(e===Ci)return t;const n=wu(t);if(!OA(n,e))return Moe(t,n,e);const r=n[e];return t.finalized_||!ta(r)?r:r===Zb(t.base_,e)?(eS(t),t.copy_[e]=BA(r,t)):r},has(t,e){return e in wu(t)},ownKeys(t){return Reflect.ownKeys(wu(t))},set(t,e,n){const r=h5(wu(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Zb(wu(t),e),o=i==null?void 0:i[Ci];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Coe(n,i)&&(n!==void 0||OA(t.base_,e)))return!0;eS(t),FA(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Zb(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,eS(t),FA(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=wu(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){co(11)},getPrototypeOf(t){return dd(t.base_)},setPrototypeOf(){co(12)}},Sm={};__(zI,(t,e)=>{Sm[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Sm.deleteProperty=function(t,e){return Sm.set.call(this,t,e,void 0)};Sm.set=function(t,e,n){return zI.set.call(this,t[0],e,n,t[0])};function Zb(t,e){const n=t[Ci];return(n?wu(n):t)[e]}function Moe(t,e,n){var i;const r=h5(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function h5(t,e){if(!(e in t))return;let n=dd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=dd(n)}}function FA(t){t.modified_||(t.modified_=!0,t.parent_&&FA(t.parent_))}function eS(t){t.copy_||(t.copy_=LA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Noe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(c=o,...f){return s.produce(c,h=>n.call(this,h,...f))}}typeof n!="function"&&co(6),r!==void 0&&typeof r!="function"&&co(7);let i;if(ta(e)){const o=c2(this),s=BA(e,void 0);let l=!0;try{i=n(s),l=!1}finally{l?VA(o):UA(o)}return u2(o,r),f2(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===u5&&(i=void 0),this.autoFreeze_&&$I(i,!0),r){const o=[],s=[];rc("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else co(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let r,i;return[this.produce(e,n,(s,l)=>{r=s,i=l}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ta(t)||co(8),nc(t)&&(t=js(t));const e=c2(this),n=BA(t,void 0);return n[Ci].isManual_=!0,UA(e),n}finishDraft(t,e){const n=t&&t[Ci];(!n||!n.isManual_)&&co(9);const{scope_:r}=n;return u2(r,e),f2(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=rc("Patches").applyPatches_;return nc(t)?r(t,e):this.produce(t,i=>r(i,e))}};function BA(t,e){const n=rg(t)?rc("MapSet").proxyMap_(t,e):Q0(t)?rc("MapSet").proxySet_(t,e):Poe(t,e);return(e?e.scope_:d5()).drafts_.push(n),n}function js(t){return nc(t)||co(10,t),p5(t)}function p5(t){if(!ta(t)||X0(t))return t;const e=t[Ci];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=LA(t,e.scope_.immer_.useStrictShallowCopy_)}else n=LA(t,!0);return __(n,(r,i)=>{f5(n,r,p5(i))}),e&&(e.finalized_=!1),n}var Doe=new Noe,m5=Doe.produce;function g5(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var koe=g5(),Ooe=g5,Loe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?v_:v_.apply(null,arguments)};function eo(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Si(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>l5(r)&&r.type===t,n}var y5=class Rp extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Rp.prototype)}static get[Symbol.species](){return Rp}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Rp(...e[0].concat(this)):new Rp(...e.concat(this))}};function h2(t){return ta(t)?m5(t,()=>{}):t}function tv(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Voe(t){return typeof t=="boolean"}var Uoe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new y5;return n&&(Voe(n)?s.push(koe):s.push(Ooe(n.extraArgument))),s},Foe="RTK_autoBatch",p2=t=>e=>{setTimeout(e,t)},Boe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:p2(10):t.type==="callback"?t.queueNotification:p2(t.timeout),f=()=>{s=!1,o&&(o=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const g=()=>i&&h(),v=r.subscribe(g);return l.add(h),()=>{v(),l.delete(h)}},dispatch(h){var g;try{return i=!((g=h==null?void 0:h.meta)!=null&&g[Foe]),o=!i,o&&(s||(s=!0,c(f))),r.dispatch(h)}finally{i=!0}}})},qoe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new y5(t);return r&&i.push(Boe(typeof r=="object"?r:void 0)),i};function $oe(t){const e=Uoe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(qI(n))l=a5(n);else throw new Error(Si(1));let c;typeof r=="function"?c=r(e):c=e();let f=v_;i&&(f=Loe({trace:!1,...typeof i=="object"&&i}));const h=Soe(...c),g=qoe(h);let v=typeof s=="function"?s(g):g();const E=f(...v);return s5(l,o,E)}function v5(t){const e={},n=[];let r;const i={addCase(o,s){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(Si(28));if(l in e)throw new Error(Si(29));return e[l]=s,i},addAsyncThunk(o,s){return s.pending&&(e[o.pending.type]=s.pending),s.rejected&&(e[o.rejected.type]=s.rejected),s.fulfilled&&(e[o.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:o.settled,reducer:s.settled}),i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function zoe(t){return typeof t=="function"}function Hoe(t,e){let[n,r,i]=v5(e),o;if(zoe(t))o=()=>h2(t());else{const l=h2(t);o=()=>l}function s(l=o(),c){let f=[n[c.type],...r.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,g)=>{if(g)if(nc(h)){const E=g(h,c);return E===void 0?h:E}else{if(ta(h))return m5(h,v=>g(v,c));{const v=g(h,c);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},l)}return s.getInitialState=o,s}var Goe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",joe=(t=21)=>{let e="",n=t;for(;n--;)e+=Goe[Math.random()*64|0];return e},Koe=Symbol.for("rtk-slice-createasyncthunk");function Woe(t,e){return`${t}/${e}`}function Yoe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Koe];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(Si(11));const l=(typeof i.reducers=="function"?i.reducers(Qoe()):i.reducers)||{},c=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(V,q){const z=typeof V=="string"?V:V.type;if(!z)throw new Error(Si(12));if(z in f.sliceCaseReducersByType)throw new Error(Si(13));return f.sliceCaseReducersByType[z]=q,h},addMatcher(V,q){return f.sliceMatchers.push({matcher:V,reducer:q}),h},exposeAction(V,q){return f.actionCreators[V]=q,h},exposeCaseReducer(V,q){return f.sliceCaseReducersByName[V]=q,h}};c.forEach(V=>{const q=l[V],z={reducerName:V,type:Woe(o,V),createNotation:typeof i.reducers=="function"};Zoe(q)?tse(z,q,h,e):Xoe(z,q,h)});function g(){const[V={},q=[],z=void 0]=typeof i.extraReducers=="function"?v5(i.extraReducers):[i.extraReducers],O={...V,...f.sliceCaseReducersByType};return Hoe(i.initialState,L=>{for(let k in O)L.addCase(k,O[k]);for(let k of f.sliceMatchers)L.addMatcher(k.matcher,k.reducer);for(let k of q)L.addMatcher(k.matcher,k.reducer);z&&L.addDefaultCase(z)})}const v=V=>V,E=new Map,b=new WeakMap;let S;function A(V,q){return S||(S=g()),S(V,q)}function I(){return S||(S=g()),S.getInitialState()}function N(V,q=!1){function z(L){let k=L[V];return typeof k>"u"&&q&&(k=tv(b,z,I)),k}function O(L=v){const k=tv(E,q,()=>new WeakMap);return tv(k,L,()=>{const $={};for(const[F,G]of Object.entries(i.selectors??{}))$[F]=Joe(G,L,()=>tv(b,L,I),q);return $})}return{reducerPath:V,getSelectors:O,get selectors(){return O(z)},selectSlice:z}}const D={name:o,reducer:A,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:I,...N(s),injectInto(V,{reducerPath:q,...z}={}){const O=q??s;return V.inject({reducerPath:O,reducer:A},z),{...D,...N(O,!0)}}};return D}}function Joe(t,e,n,r){function i(o,...s){let l=e(o);return typeof l>"u"&&r&&(l=n()),t(l,...s)}return i.unwrapped=t,i}var Ii=Yoe();function Qoe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Xoe({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!ese(r))throw new Error(Si(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?eo(t,s):eo(t))}function Zoe(t){return t._reducerDefinitionType==="asyncThunk"}function ese(t){return t._reducerDefinitionType==="reducerWithPrepare"}function tse({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Si(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:c,settled:f,options:h}=n,g=i(t,o,h);r.exposeAction(e,g),s&&r.addCase(g.fulfilled,s),l&&r.addCase(g.pending,l),c&&r.addCase(g.rejected,c),f&&r.addMatcher(g.settled,f),r.exposeCaseReducer(e,{fulfilled:s||nv,pending:l||nv,rejected:c||nv,settled:f||nv})}function nv(){}var nse="task",_5="listener",T5="completed",HI="cancelled",rse=`task-${HI}`,ise=`task-${T5}`,qA=`${_5}-${HI}`,ose=`${_5}-${T5}`,Z0=class{constructor(t){bw(this,"name","TaskAbortError");bw(this,"message");this.code=t,this.message=`${nse} ${HI} (reason: ${t})`}},GI=(t,e)=>{if(typeof t!="function")throw new TypeError(Si(32))},w_=()=>{},E5=(t,e=w_)=>(t.catch(e),t),w5=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Bu=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},qu=t=>{if(t.aborted){const{reason:e}=t;throw new Z0(e)}};function b5(t,e){let n=w_;return new Promise((r,i)=>{const o=()=>i(new Z0(t.reason));if(t.aborted){o();return}n=w5(t,o),e.finally(()=>n()).then(r,i)}).finally(()=>{n=w_})}var sse=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof Z0?"cancelled":"rejected",error:n}}finally{e==null||e()}},b_=t=>e=>E5(b5(t,e).then(n=>(qu(t),n))),S5=t=>{const e=b_(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Of}=Object,m2={},eT="listenerMiddleware",ase=(t,e)=>{const n=r=>w5(t,()=>Bu(r,t.reason));return(r,i)=>{GI(r);const o=new AbortController;n(o);const s=sse(async()=>{qu(t),qu(o.signal);const l=await r({pause:b_(o.signal),delay:S5(o.signal),signal:o.signal});return qu(o.signal),l},()=>Bu(o,ise));return i!=null&&i.autoJoin&&e.push(s.catch(w_)),{result:b_(t)(s),cancel(){Bu(o,rse)}}}},lse=(t,e)=>{const n=async(r,i)=>{qu(e);let o=()=>{};const l=[new Promise((c,f)=>{let h=t({predicate:r,effect:(g,v)=>{v.unsubscribe(),c([g,v.getState(),v.getOriginalState()])}});o=()=>{h(),f()}})];i!=null&&l.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await b5(e,Promise.race(l));return qu(e),c}finally{o()}};return(r,i)=>E5(n(r,i))},A5=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=eo(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Si(21));return GI(o),{predicate:i,type:e,effect:o}},C5=Of(t=>{const{type:e,predicate:n,effect:r}=A5(t);return{id:joe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Si(22))}}},{withTypes:()=>C5}),g2=(t,e)=>{const{type:n,effect:r,predicate:i}=A5(e);return Array.from(t.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},$A=t=>{t.pending.forEach(e=>{Bu(e,qA)})},use=t=>()=>{t.forEach($A),t.clear()},y2=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},x5=Of(eo(`${eT}/add`),{withTypes:()=>x5}),cse=eo(`${eT}/removeAll`),I5=Of(eo(`${eT}/remove`),{withTypes:()=>I5}),fse=(...t)=>{console.error(`${eT}/error`,...t)},ig=(t={})=>{const e=new Map,{extra:n,onError:r=fse}=t;GI(r);const i=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),g=>{h.unsubscribe(),g!=null&&g.cancelActive&&$A(h)}),o=h=>{const g=g2(e,h)??C5(h);return i(g)};Of(o,{withTypes:()=>o});const s=h=>{const g=g2(e,h);return g&&(g.unsubscribe(),h.cancelActive&&$A(g)),!!g};Of(s,{withTypes:()=>s});const l=async(h,g,v,E)=>{const b=new AbortController,S=lse(o,b.signal),A=[];try{h.pending.add(b),await Promise.resolve(h.effect(g,Of({},v,{getOriginalState:E,condition:(I,N)=>S(I,N).then(Boolean),take:S,delay:S5(b.signal),pause:b_(b.signal),extra:n,signal:b.signal,fork:ase(b.signal,A),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((I,N,D)=>{I!==b&&(Bu(I,qA),D.delete(I))})},cancel:()=>{Bu(b,qA),h.pending.delete(b)},throwIfCancelled:()=>{qu(b.signal)}})))}catch(I){I instanceof Z0||y2(r,I,{raisedBy:"effect"})}finally{await Promise.all(A),Bu(b,ose),h.pending.delete(b)}},c=use(e);return{middleware:h=>g=>v=>{if(!l5(v))return g(v);if(x5.match(v))return o(v.payload);if(cse.match(v)){c();return}if(I5.match(v))return s(v.payload);let E=h.getState();const b=()=>{if(E===m2)throw new Error(Si(23));return E};let S;try{if(S=g(v),e.size>0){const A=h.getState(),I=Array.from(e.values());for(const N of I){let D=!1;try{D=N.predicate(v,A,E)}catch(V){D=!1,y2(r,V,{raisedBy:"predicate"})}D&&l(N,v,h,b)}}}finally{E=m2}return S},startListening:o,stopListening:s,clearListeners:c}};function Si(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var dse={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},R5=Ii({name:"chartLayout",initialState:dse,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,o;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(o=e.payload.left)!==null&&o!==void 0?o:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:hse,setLayout:pse,setChartSize:mse,setScale:gse}=R5.actions,yse=R5.reducer;function v2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v2(Object(n),!0).forEach(function(r){vse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vse(t,e,n){return(e=_se(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _se(t){var e=Tse(t,"string");return typeof e=="symbol"?e:e+""}function Tse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var S_=Math.PI/180,Ese=t=>t*180/Math.PI,yr=(t,e,n,r)=>({x:t+Math.cos(-S_*r)*n,y:e+Math.sin(-S_*r)*n}),wse=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},bse=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return Math.sqrt((n-i)**2+(r-o)**2)},Sse=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:o}=e,s=bse({x:n,y:r},{x:i,y:o});if(s<=0)return{radius:s,angle:0};var l=(n-i)/s,c=Math.acos(l);return r>o&&(c=2*Math.PI-c),{radius:s,angle:Ese(c),angleInRadian:c}},Ase=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-o*360,endAngle:n-o*360}},Cse=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return t+s*360},xse=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:o}=Sse({x:n,y:r},e),{innerRadius:s,outerRadius:l}=e;if(i<s||i>l||i===0)return null;var{startAngle:c,endAngle:f}=Ase(e),h=o,g;if(c<=f){for(;h>f;)h-=360;for(;h<c;)h+=360;g=h>=c&&h<=f}else{for(;h>c;)h-=360;for(;h<f;)h+=360;g=h>=f&&h<=c}return g?_2(_2({},e),{},{radius:i,angle:Cse(h,e)}):null};function P5(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function T2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T2(Object(n),!0).forEach(function(r){Ise(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ise(t,e,n){return(e=Rse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rse(t){var e=Pse(t,"string");return typeof e=="symbol"?e:e+""}function Pse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hr(t,e,n){return nr(t)||nr(e)?n:ls(e)?cd(t,e,n):typeof e=="function"?e(t):n}var Mse=(t,e,n,r,i)=>{var o,s=-1,l=(o=e==null?void 0:e.length)!==null&&o!==void 0?o:0;if(l<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<l;c++){var f=c>0?n[c-1].coordinate:n[l-1].coordinate,h=n[c].coordinate,g=c>=l-1?n[0].coordinate:n[c+1].coordinate,v=void 0;if(Ei(h-f)!==Ei(g-h)){var E=[];if(Ei(g-h)===Ei(i[1]-i[0])){v=g;var b=h+i[1]-i[0];E[0]=Math.min(b,(b+f)/2),E[1]=Math.max(b,(b+f)/2)}else{v=f;var S=g+i[1]-i[0];E[0]=Math.min(h,(S+h)/2),E[1]=Math.max(h,(S+h)/2)}var A=[Math.min(h,(v+h)/2),Math.max(h,(v+h)/2)];if(t>A[0]&&t<=A[1]||t>=E[0]&&t<=E[1]){({index:s}=n[c]);break}}else{var I=Math.min(f,g),N=Math.max(f,g);if(t>(I+h)/2&&t<=(N+h)/2){({index:s}=n[c]);break}}}else if(e){for(var D=0;D<l;D++)if(D===0&&t<=(e[D].coordinate+e[D+1].coordinate)/2||D>0&&D<l-1&&t>(e[D].coordinate+e[D-1].coordinate)/2&&t<=(e[D].coordinate+e[D+1].coordinate)/2||D===l-1&&t>(e[D].coordinate+e[D-1].coordinate)/2){({index:s}=e[D]);break}}return s},Nse=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:o,verticalAlign:s,layout:l}=e;if((l==="vertical"||l==="horizontal"&&s==="middle")&&o!=="center"&&Qe(t[o]))return Gi(Gi({},t),{},{[o]:t[o]+(r||0)});if((l==="horizontal"||l==="vertical"&&o==="center")&&s!=="middle"&&Qe(t[s]))return Gi(Gi({},t),{},{[s]:t[s]+(i||0)})}return t},hc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",E2=1e-4,Dse=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-E2,o=Math.max(r[0],r[1])+E2,s=t(e[0]),l=t(e[n-1]);(s<i||s>o||l<i||l>o)&&t.domain([e[0],e[n-1]])}},kse=(t,e)=>{if(!e||e.length!==2||!Qe(e[0])||!Qe(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Qe(t[0])||t[0]<n)&&(i[0]=n),(!Qe(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},Ose=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0,s=0;s<e;++s){var l=Zi(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1])}},Lse=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0;o<e;++o){var s=Zi(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},Vse={sign:Ose,expand:pie,none:fd,silhouette:mie,wiggle:gie,positive:Lse},Use=(t,e,n)=>{var r=Vse[n],i=hie().keys(e).value((o,s)=>+Hr(o,s,0)).order(DA).offset(r);return i(t)};function Fse(t){return t==null?void 0:String(t)}var w2=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:o,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var l=Hr(o,e.dataKey,e.scale.domain()[s]);return nr(l)?null:e.scale(l)-i/2+r},Bse=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},qse=t=>{var e=t.flat(2).filter(Qe);return[Math.min(...e),Math.max(...e)]},$se=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],zse=(t,e,n)=>{if(t!=null)return $se(Object.keys(t).reduce((r,i)=>{var o=t[i],{stackedData:s}=o,l=s.reduce((c,f)=>{var h=P5(f,e,n),g=qse(h);return[Math.min(c[0],g[0]),Math.max(c[1],g[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},b2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,S2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jI=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Y0(e,h=>h.coordinate),o=1/0,s=1,l=i.length;s<l;s++){var c=i[s],f=i[s-1];o=Math.min((c.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function A2(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:o}=t;return Gi(Gi({},e),{},{dataKey:n,payload:r,value:i,name:o})}function M5(t,e){if(t)return String(t);if(typeof e=="string")return e}function Hse(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var o=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return o?{x:t,y:e}:null}return r?xse({x:t,y:e},r):null}var Gse=(t,e,n,r)=>{var i=e.find(f=>f&&f.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,{radius:s}=r;return Gi(Gi(Gi({},r),yr(r.cx,r.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,{angle:c}=r;return Gi(Gi(Gi({},r),yr(r.cx,r.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},jse=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,ha=t=>t.layout.width,pa=t=>t.layout.height,Kse=t=>t.layout.scale,N5=t=>t.layout.margin,tT=se(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),nT=se(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Wse="data-recharts-item-index",Yse="data-recharts-item-data-key",og=60;function C2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C2(Object(n),!0).forEach(function(r){Jse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jse(t,e,n){return(e=Qse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qse(t){var e=Xse(t,"string");return typeof e=="symbol"?e:e+""}function Xse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zse=t=>t.brush.height;function eae(t){var e=nT(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:og;return n+i}return n},0)}function tae(t){var e=nT(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:og;return n+i}return n},0)}function nae(t){var e=tT(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function rae(t){var e=tT(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var ir=se([ha,pa,N5,Zse,eae,tae,nae,rae,o5,voe],(t,e,n,r,i,o,s,l,c,f)=>{var h={left:(n.left||0)+i,right:(n.right||0)+o},g={top:(n.top||0)+s,bottom:(n.bottom||0)+l},v=rv(rv({},g),h),E=v.bottom;v.bottom+=r,v=Nse(v,c,f);var b=t-v.left-v.right,S=e-v.top-v.bottom;return rv(rv({brushBottom:E},v),{},{width:Math.max(b,0),height:Math.max(S,0)})}),iae=se(ir,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),KI=se(ha,pa,(t,e)=>({x:0,y:0,width:t,height:e})),oae=R.createContext(null),wo=()=>R.useContext(oae)!=null,rT=t=>t.brush,iT=se([rT,ir,N5],(t,e,n)=>({height:t.height,x:Qe(t.x)?t.x:e.left,y:Qe(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:Qe(t.width)?t.width:e.width})),WI=()=>{var t,e=wo(),n=$e(iae),r=$e(iT),i=(t=$e(rT))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},sae={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},aae=()=>{var t;return(t=$e(ir))!==null&&t!==void 0?t:sae},lae=()=>$e(ha),uae=()=>$e(pa),It=t=>t.layout.layoutType,YI=()=>$e(It),cae={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},D5=Ii({name:"legend",initialState:cae,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=js(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:yIe,setLegendSettings:vIe,addLegendPayload:fae,removeLegendPayload:dae}=D5.actions,hae=D5.reducer;function zA(){return zA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zA.apply(null,arguments)}function x2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x2(Object(n),!0).forEach(function(r){pae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pae(t,e,n){return(e=mae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mae(t){var e=gae(t,"string");return typeof e=="symbol"?e:e+""}function gae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yae(t){return Array.isArray(t)&&ls(t[0])&&ls(t[1])?t.join(" ~ "):t}var vae=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:f,label:h,labelFormatter:g,accessibilityLayer:v=!1}=t,E=()=>{if(o&&o.length){var q={padding:0,margin:0},z=(l?Y0(o,l):o).map((O,L)=>{if(O.type==="none")return null;var k=O.formatter||s||yae,{value:$,name:F}=O,G=$,H=F;if(k){var Ae=k($,F,O,L,o);if(Array.isArray(Ae))[G,H]=Ae;else if(Ae!=null)G=Ae;else return null}var Re=tS({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},r);return R.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:Re},ls(H)?R.createElement("span",{className:"recharts-tooltip-item-name"},H):null,ls(H)?R.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,R.createElement("span",{className:"recharts-tooltip-item-value"},G),R.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return R.createElement("ul",{className:"recharts-tooltip-item-list",style:q},z)}return null},b=tS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),S=tS({margin:0},i),A=!nr(h),I=A?h:"",N=Gt("recharts-default-tooltip",c),D=Gt("recharts-tooltip-label",f);A&&g&&o!==void 0&&o!==null&&(I=g(h,o));var V=v?{role:"status","aria-live":"assertive"}:{};return R.createElement("div",zA({className:N,style:b},V),R.createElement("p",{className:D,style:S},R.isValidElement(I)?I:"".concat(I)),E())},fp="recharts-tooltip-wrapper",_ae={visibility:"hidden"};function Tae(t){var{coordinate:e,translateX:n,translateY:r}=t;return Gt(fp,{["".concat(fp,"-right")]:Qe(n)&&e&&Qe(e.x)&&n>=e.x,["".concat(fp,"-left")]:Qe(n)&&e&&Qe(e.x)&&n<e.x,["".concat(fp,"-bottom")]:Qe(r)&&e&&Qe(e.y)&&r>=e.y,["".concat(fp,"-top")]:Qe(r)&&e&&Qe(e.y)&&r<e.y})}function I2(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:l,viewBox:c,viewBoxDimension:f}=t;if(o&&Qe(o[r]))return o[r];var h=n[r]-l-(i>0?i:0),g=n[r]+i;if(e[r])return s[r]?h:g;var v=c[r];if(v==null)return 0;if(s[r]){var E=h,b=v;return E<b?Math.max(g,v):Math.max(h,v)}if(f==null)return 0;var S=g+l,A=v+f;return S>A?Math.max(h,v):Math.max(g,v)}function Eae(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function wae(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:s,useTranslate3d:l,viewBox:c}=t,f,h,g;return s.height>0&&s.width>0&&n?(h=I2({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),g=I2({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),f=Eae({translateX:h,translateY:g,useTranslate3d:l})):f=_ae,{cssProperties:f,cssClasses:Tae({translateX:h,translateY:g,coordinate:n})}}function R2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R2(Object(n),!0).forEach(function(r){HA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HA(t,e,n){return(e=bae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bae(t){var e=Sae(t,"string");return typeof e=="symbol"?e:e+""}function Sae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Aae extends R.PureComponent{constructor(){super(...arguments),HA(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),HA(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:s,hasPayload:l,isAnimationActive:c,offset:f,position:h,reverseDirection:g,useTranslate3d:v,viewBox:E,wrapperStyle:b,lastBoundingBox:S,innerRef:A,hasPortalFromProps:I}=this.props,{cssClasses:N,cssProperties:D}=wae({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:f,position:h,reverseDirection:g,tooltipBox:{height:S.height,width:S.width},useTranslate3d:v,viewBox:E}),V=I?{}:iv(iv({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},D),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),q=iv(iv({},V),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},b);return R.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:q,ref:A},o)}}var Cae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),sg={isSsr:Cae()},k5=()=>$e(t=>t.rootProps.accessibilityLayer);function xi(t){return Number.isFinite(t)}function A_(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function GA(){return GA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GA.apply(null,arguments)}function P2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P2(Object(n),!0).forEach(function(r){xae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xae(t,e,n){return(e=Iae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iae(t){var e=Rae(t,"string");return typeof e=="symbol"?e:e+""}function Rae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var N2={curveBasisClosed:nie,curveBasisOpen:rie,curveBasis:tie,curveBumpX:qre,curveBumpY:$re,curveLinearClosed:iie,curveLinear:K0,curveMonotoneX:oie,curveMonotoneY:sie,curveNatural:aie,curveStep:lie,curveStepAfter:cie,curveStepBefore:uie},ov=t=>xi(t.x)&&xi(t.y),dp=t=>t.x,hp=t=>t.y,Pae=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(ng(t));return(n==="curveMonotone"||n==="curveBump")&&e?N2["".concat(n).concat(e==="vertical"?"Y":"X")]:N2[n]||K0},Mae=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=t,s=Pae(e,i),l=o?n.filter(ov):n,c;if(Array.isArray(r)){var f=o?r.filter(g=>ov(g)):r,h=l.map((g,v)=>M2(M2({},g),{},{base:f[v]}));return i==="vertical"?c=Qy().y(hp).x1(dp).x0(g=>g.base.x):c=Qy().x(dp).y1(hp).y0(g=>g.base.y),c.defined(ov).curve(s),c(h)}return i==="vertical"&&Qe(r)?c=Qy().y(hp).x1(dp).x0(r):Qe(r)?c=Qy().x(dp).y1(hp).y0(r):c=O3().x(dp).y(hp),c.defined(ov).curve(s),c(l)},Nae=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var o=n&&n.length?Mae(t):r;return R.createElement("path",GA({},G0(t),Cre(t),{className:Gt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},Dae=["x","y","top","left","width","height","className"];function jA(){return jA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jA.apply(null,arguments)}function D2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D2(Object(n),!0).forEach(function(r){Oae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oae(t,e,n){return(e=Lae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lae(t){var e=Vae(t,"string");return typeof e=="symbol"?e:e+""}function Vae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uae(t,e){if(t==null)return{};var n,r,i=Fae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Fae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Bae=(t,e,n,r,i,o)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n),qae=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:o=0,height:s=0,className:l}=t,c=Uae(t,Dae),f=kae({x:e,y:n,top:r,left:i,width:o,height:s},c);return!Qe(e)||!Qe(n)||!Qe(o)||!Qe(s)||!Qe(r)||!Qe(i)?null:R.createElement("path",jA({},Zn(f,!0),{className:Gt("recharts-cross",l),d:Bae(e,n,o,s,r,i)}))};function $ae(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function k2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k2(Object(n),!0).forEach(function(r){Hae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hae(t,e,n){return(e=Gae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gae(t){var e=jae(t,"string");return typeof e=="symbol"?e:e+""}function jae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dl(t,e){var n=zae({},t),r=e,i=Object.keys(e),o=i.reduce((s,l)=>(s[l]===void 0&&r[l]!==void 0&&(s[l]=r[l]),s),n);return o}function Kae(){}function O2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O2(Object(n),!0).forEach(function(r){Wae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wae(t,e,n){return(e=Yae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yae(t){var e=Jae(t,"string");return typeof e=="symbol"?e:e+""}function Jae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qae=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),O5=(t,e,n)=>t.map(r=>"".concat(Qae(r)," ").concat(e,"ms ").concat(n)).join(","),Xae=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Am=(t,e)=>Object.keys(e).reduce((n,r)=>L2(L2({},n),{},{[r]:t(r,e[r])}),{});function V2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V2(Object(n),!0).forEach(function(r){Zae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zae(t,e,n){return(e=ele(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ele(t){var e=tle(t,"string");return typeof e=="symbol"?e:e+""}function tle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C_=(t,e,n)=>t+(e-t)*n,KA=t=>{var{from:e,to:n}=t;return e!==n},L5=(t,e,n)=>{var r=Am((i,o)=>{if(KA(o)){var[s,l]=t(o.from,o.to,o.velocity);return mr(mr({},o),{},{from:s,velocity:l})}return o},e);return n<1?Am((i,o)=>KA(o)?mr(mr({},o),{},{velocity:C_(o.velocity,r[i].velocity,n),from:C_(o.from,r[i].from,n)}):o,e):L5(t,r,n-1)};function nle(t,e,n,r,i,o){var s,l=r.reduce((v,E)=>mr(mr({},v),{},{[E]:{from:t[E],velocity:0,to:e[E]}}),{}),c=()=>Am((v,E)=>E.from,l),f=()=>!Object.values(l).filter(KA).length,h=null,g=v=>{s||(s=v);var E=v-s,b=E/n.dt;l=L5(n,l,b),i(mr(mr(mr({},t),e),c())),s=v,f()||(h=o.setTimeout(g))};return()=>(h=o.setTimeout(g),()=>{h()})}function rle(t,e,n,r,i,o,s){var l=null,c=i.reduce((g,v)=>mr(mr({},g),{},{[v]:[t[v],e[v]]}),{}),f,h=g=>{f||(f=g);var v=(g-f)/r,E=Am((S,A)=>C_(...A,n(v)),c);if(o(mr(mr(mr({},t),e),E)),v<1)l=s.setTimeout(h);else{var b=Am((S,A)=>C_(...A,n(1)),c);o(mr(mr(mr({},t),e),b))}};return()=>(l=s.setTimeout(h),()=>{l()})}const ile=(t,e,n,r,i,o)=>{var s=Xae(t,e);return n.isStepper===!0?nle(t,e,n,s,i,o):rle(t,e,n,r,s,i,o)};var x_=1e-4,V5=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],U5=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),U2=(t,e)=>n=>{var r=V5(t,e);return U5(r,n)},ole=(t,e)=>n=>{var r=V5(t,e),i=[...r.map((o,s)=>o*s).slice(1),0];return U5(i,n)},F2=function(){for(var e,n,r,i,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];if(s.length===1)switch(s[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var c=s[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([e,r,n,i]=c[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else s.length===4&&([e,r,n,i]=s);var f=U2(e,n),h=U2(r,i),g=ole(e,n),v=b=>b>1?1:b<0?0:b,E=b=>{for(var S=b>1?1:b,A=S,I=0;I<8;++I){var N=f(A)-S,D=g(A);if(Math.abs(N-S)<x_||D<x_)return h(A);A=v(A-N/D)}return h(A)};return E.isStepper=!1,E},sle=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,o=(s,l,c)=>{var f=-(s-l)*n,h=c*r,g=c+(f-h)*i/1e3,v=c*i/1e3+s;return Math.abs(v-l)<x_&&Math.abs(g)<x_?[l,0]:[v,g]};return o.isStepper=!0,o.dt=i,o},ale=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return F2(t);case"spring":return sle();default:if(t.split("(")[0]==="cubic-bezier")return F2(t)}return typeof t=="function"?t:null};function lle(t){var e,n=()=>null,r=!1,i=null,o=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var l=s,[c,...f]=l;if(typeof c=="number"){i=t.setTimeout(o.bind(null,f),c);return}o(c),i=t.setTimeout(o.bind(null,f));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),o(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class ule{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}function cle(){return lle(new ule)}var fle=R.createContext(cle);function dle(t,e){var n=R.useContext(fle);return R.useMemo(()=>e??n(t),[t,e,n])}var hle={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},B2={t:0},nS={t:1};function JI(t){var e=Dl(t,hle),{isActive:n,canBegin:r,duration:i,easing:o,begin:s,onAnimationEnd:l,onAnimationStart:c,children:f}=e,h=dle(e.animationId,e.animationManager),[g,v]=R.useState(n?B2:nS),E=R.useRef(null);return R.useEffect(()=>{n||v(nS)},[n]),R.useEffect(()=>{if(!n||!r)return Kae;var b=ile(B2,nS,ale(o),i,v,h.getTimeoutController()),S=()=>{E.current=b()};return h.start([c,s,S,i,l]),()=>{h.stop(),E.current&&E.current(),l()}},[n,r,i,o,s,c,l,h]),f(g.t)}function QI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=R.useRef(wm(e)),r=R.useRef(t);return r.current!==t&&(n.current=wm(e),r.current=t),n.current}function q2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q2(Object(n),!0).forEach(function(r){ple(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ple(t,e,n){return(e=mle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mle(t){var e=gle(t,"string");return typeof e=="symbol"?e:e+""}function gle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I_(){return I_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},I_.apply(null,arguments)}var z2=(t,e,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],g=0,v=4;g<v;g++)h[g]=i[g]>o?o:i[g];f="M".concat(t,",").concat(e+s*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(c,",").concat(t+l*h[0],",").concat(e)),f+="L ".concat(t+n-l*h[1],",").concat(e),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(e+s*h[1])),f+="L ".concat(t+n,",").concat(e+r-s*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(c,`,
        `).concat(t+n-l*h[2],",").concat(e+r)),f+="L ".concat(t+l*h[3],",").concat(e+r),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+r-s*h[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var E=Math.min(o,i);f="M ".concat(t,",").concat(e+s*E,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+l*E,",").concat(e,`
            L `).concat(t+n-l*E,",").concat(e,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+n,",").concat(e+s*E,`
            L `).concat(t+n,",").concat(e+r-s*E,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+n-l*E,",").concat(e+r,`
            L `).concat(t+l*E,",").concat(e+r,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t,",").concat(e+r-s*E," Z")}else f="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},yle={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},F5=t=>{var e=Dl(t,yle),n=R.useRef(null),[r,i]=R.useState(-1);R.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Ae=n.current.getTotalLength();Ae&&i(Ae)}catch{}},[]);var{x:o,y:s,width:l,height:c,radius:f,className:h}=e,{animationEasing:g,animationDuration:v,animationBegin:E,isAnimationActive:b,isUpdateAnimationActive:S}=e,A=R.useRef(l),I=R.useRef(c),N=R.useRef(o),D=R.useRef(s),V=R.useMemo(()=>({x:o,y:s,width:l,height:c,radius:f}),[o,s,l,c,f]),q=QI(V,"rectangle-");if(o!==+o||s!==+s||l!==+l||c!==+c||l===0||c===0)return null;var z=Gt("recharts-rectangle",h);if(!S)return R.createElement("path",I_({},Zn(e,!0),{className:z,d:z2(o,s,l,c,f)}));var O=A.current,L=I.current,k=N.current,$=D.current,F="0px ".concat(r===-1?1:r,"px"),G="".concat(r,"px 0px"),H=O5(["strokeDasharray"],v,typeof g=="string"?g:void 0);return R.createElement(JI,{animationId:q,key:q,canBegin:r>0,duration:v,easing:g,isActive:S,begin:E},Ae=>{var Re=Br(O,l,Ae),ee=Br(L,c,Ae),he=Br(k,o,Ae),Ee=Br($,s,Ae);n.current&&(A.current=Re,I.current=ee,N.current=he,D.current=Ee);var Le;return b?Ae>0?Le={transition:H,strokeDasharray:G}:Le={strokeDasharray:F}:Le={strokeDasharray:G},R.createElement("path",I_({},Zn(e,!0),{className:z,d:z2(he,Ee,Re,ee,f),ref:n,style:$2($2({},Le),e.style)}))})};function B5(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:o}=t,s=yr(e,n,r,i),l=yr(e,n,r,o);return{points:[s,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function WA(){return WA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WA.apply(null,arguments)}var vle=(t,e)=>{var n=Ei(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},sv=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:o,isExternal:s,cornerRadius:l,cornerIsExternal:c}=t,f=l*(s?1:-1)+r,h=Math.asin(l/f)/S_,g=c?i:i+o*h,v=yr(e,n,f,g),E=yr(e,n,r,g),b=c?i-o*h:i,S=yr(e,n,f*Math.cos(h*S_),b);return{center:v,circleTangency:E,lineTangency:S,theta:h}},q5=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:s}=t,l=vle(o,s),c=o+l,f=yr(e,n,i,o),h=yr(e,n,i,c),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var v=yr(e,n,r,o),E=yr(e,n,r,c);g+="L ".concat(E.x,",").concat(E.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(e,",").concat(n," Z");return g},_le=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:f}=t,h=Ei(f-c),{circleTangency:g,lineTangency:v,theta:E}=sv({cx:e,cy:n,radius:i,angle:c,sign:h,cornerRadius:o,cornerIsExternal:l}),{circleTangency:b,lineTangency:S,theta:A}=sv({cx:e,cy:n,radius:i,angle:f,sign:-h,cornerRadius:o,cornerIsExternal:l}),I=l?Math.abs(c-f):Math.abs(c-f)-E-A;if(I<0)return s?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):q5({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:f});var N="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(I>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
  `);if(r>0){var{circleTangency:D,lineTangency:V,theta:q}=sv({cx:e,cy:n,radius:r,angle:c,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),{circleTangency:z,lineTangency:O,theta:L}=sv({cx:e,cy:n,radius:r,angle:f,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),k=l?Math.abs(c-f):Math.abs(c-f)-q-L;if(k<0&&o===0)return"".concat(N,"L").concat(e,",").concat(n,"Z");N+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(z.x,",").concat(z.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(k>180),",").concat(+(h>0),",").concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(V.x,",").concat(V.y,"Z")}else N+="L".concat(e,",").concat(n,"Z");return N},Tle={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$5=t=>{var e=Dl(t,Tle),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:h,className:g}=e;if(o<i||f===h)return null;var v=Gt("recharts-sector",g),E=o-i,b=vo(s,E,0,!0),S;return b>0&&Math.abs(f-h)<360?S=_le({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(b,E/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:h}):S=q5({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:f,endAngle:h}),R.createElement("path",WA({},Zn(e,!0),{className:v,d:S}))};function Ele(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:l,cy:c,innerRadius:f,outerRadius:h,angle:g}=e,v=yr(l,c,f,g),E=yr(l,c,h,g);r=v.x,i=v.y,o=E.x,s=E.y}else return B5(e);return[{x:r,y:i},{x:o,y:s}]}var rS={},iS={},oS={},H2;function wle(){return H2||(H2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r5();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(oS)),oS}var G2;function ble(){return G2||(G2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wle();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(iS)),iS}var j2;function Sle(){return j2||(j2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=i5(),n=ble();function r(i,o,s){s&&typeof s!="number"&&e.isIterateeCall(i,o,s)&&(o=s=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),s=s===void 0?i<o?1:-1:n.toFinite(s);const l=Math.max(Math.ceil((o-i)/(s||1)),0),c=new Array(l);for(let f=0;f<l;f++)c[f]=i,i+=s;return c}t.range=r})(rS)),rS}var sS,K2;function Ale(){return K2||(K2=1,sS=Sle().range),sS}var Cle=Ale();const z5=cs(Cle);function cl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xle(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XI(t){let e,n,r;t.length!==2?(e=cl,n=(l,c)=>cl(t(l),c),r=(l,c)=>t(l)-c):(e=t===cl||t===xle?t:Ile,n=t,r=t);function i(l,c,f=0,h=l.length){if(f<h){if(e(c,c)!==0)return h;do{const g=f+h>>>1;n(l[g],c)<0?f=g+1:h=g}while(f<h)}return f}function o(l,c,f=0,h=l.length){if(f<h){if(e(c,c)!==0)return h;do{const g=f+h>>>1;n(l[g],c)<=0?f=g+1:h=g}while(f<h)}return f}function s(l,c,f=0,h=l.length){const g=i(l,c,f,h-1);return g>f&&r(l[g-1],c)>-r(l[g],c)?g-1:g}return{left:i,center:s,right:o}}function Ile(){return 0}function H5(t){return t===null?NaN:+t}function*Rle(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Ple=XI(cl),ag=Ple.right;XI(H5).center;class W2 extends Map{constructor(e,n=Dle){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Y2(this,e))}has(e){return super.has(Y2(this,e))}set(e,n){return super.set(Mle(this,e),n)}delete(e){return super.delete(Nle(this,e))}}function Y2({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Mle({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Nle({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Dle(t){return t!==null&&typeof t=="object"?t.valueOf():t}function kle(t=cl){if(t===cl)return G5;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function G5(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Ole=Math.sqrt(50),Lle=Math.sqrt(10),Vle=Math.sqrt(2);function R_(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Ole?10:o>=Lle?5:o>=Vle?2:1;let l,c,f;return i<0?(f=Math.pow(10,-i)/s,l=Math.round(t*f),c=Math.round(e*f),l/f<t&&++l,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*s,l=Math.round(t/f),c=Math.round(e/f),l*f<t&&++l,c*f>e&&--c),c<l&&.5<=n&&n<2?R_(t,e,n*2):[l,c,f]}function YA(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?R_(e,t,n):R_(t,e,n);if(!(o>=i))return[];const l=o-i+1,c=new Array(l);if(r)if(s<0)for(let f=0;f<l;++f)c[f]=(o-f)/-s;else for(let f=0;f<l;++f)c[f]=(o-f)*s;else if(s<0)for(let f=0;f<l;++f)c[f]=(i+f)/-s;else for(let f=0;f<l;++f)c[f]=(i+f)*s;return c}function JA(t,e,n){return e=+e,t=+t,n=+n,R_(t,e,n)[2]}function QA(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?JA(e,t,n):JA(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function J2(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Q2(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function j5(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?G5:kle(i);r>n;){if(r-n>600){const c=r-n+1,f=e-n+1,h=Math.log(c),g=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*g*(c-g)/c)*(f-c/2<0?-1:1),E=Math.max(n,Math.floor(e-f*g/c+v)),b=Math.min(r,Math.floor(e+(c-f)*g/c+v));j5(t,e,E,b,i)}const o=t[e];let s=n,l=r;for(pp(t,n,e),i(t[r],o)>0&&pp(t,n,r);s<l;){for(pp(t,s,l),++s,--l;i(t[s],o)<0;)++s;for(;i(t[l],o)>0;)--l}i(t[n],o)===0?pp(t,n,l):(++l,pp(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function pp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Ule(t,e,n){if(t=Float64Array.from(Rle(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Q2(t);if(e>=1)return J2(t);var r,i=(r-1)*e,o=Math.floor(i),s=J2(j5(t,o).subarray(0,o+1)),l=Q2(t.subarray(o+1));return s+(l-s)*(i-o)}}function Fle(t,e,n=H5){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return s+(l-s)*(i-o)}}function Ble(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function no(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ma(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const XA=Symbol("implicit");function ZI(){var t=new W2,e=[],n=[],r=XA;function i(o){let s=t.get(o);if(s===void 0){if(r!==XA)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new W2;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return ZI(e,n).unknown(r)},no.apply(i,arguments),i}function eR(){var t=ZI().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,l=!1,c=0,f=0,h=.5;delete t.unknown;function g(){var v=e().length,E=i<r,b=E?i:r,S=E?r:i;o=(S-b)/Math.max(1,v-c+f*2),l&&(o=Math.floor(o)),b+=(S-b-o*(v-c))*h,s=o*(1-c),l&&(b=Math.round(b),s=Math.round(s));var A=Ble(v).map(function(I){return b+o*I});return n(E?A.reverse():A)}return t.domain=function(v){return arguments.length?(e(v),g()):e()},t.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,g()):[r,i]},t.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,l=!0,g()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(v){return arguments.length?(l=!!v,g()):l},t.padding=function(v){return arguments.length?(c=Math.min(1,f=+v),g()):c},t.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),g()):c},t.paddingOuter=function(v){return arguments.length?(f=+v,g()):f},t.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),g()):h},t.copy=function(){return eR(e(),[r,i]).round(l).paddingInner(c).paddingOuter(f).align(h)},no.apply(g(),arguments)}function K5(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return K5(e())},t}function qle(){return K5(eR.apply(null,arguments).paddingInner(1))}function tR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function W5(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function lg(){}var Cm=.7,P_=1/Cm,Lf="\\s*([+-]?\\d+)\\s*",xm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$le=/^#([0-9a-f]{3,8})$/,zle=new RegExp(`^rgb\\(${Lf},${Lf},${Lf}\\)$`),Hle=new RegExp(`^rgb\\(${is},${is},${is}\\)$`),Gle=new RegExp(`^rgba\\(${Lf},${Lf},${Lf},${xm}\\)$`),jle=new RegExp(`^rgba\\(${is},${is},${is},${xm}\\)$`),Kle=new RegExp(`^hsl\\(${xm},${is},${is}\\)$`),Wle=new RegExp(`^hsla\\(${xm},${is},${is},${xm}\\)$`),X2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tR(lg,Im,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Z2,formatHex:Z2,formatHex8:Yle,formatHsl:Jle,formatRgb:eL,toString:eL});function Z2(){return this.rgb().formatHex()}function Yle(){return this.rgb().formatHex8()}function Jle(){return Y5(this).formatHsl()}function eL(){return this.rgb().formatRgb()}function Im(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$le.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?tL(e):n===3?new ni(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?av(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?av(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=zle.exec(t))?new ni(e[1],e[2],e[3],1):(e=Hle.exec(t))?new ni(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Gle.exec(t))?av(e[1],e[2],e[3],e[4]):(e=jle.exec(t))?av(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Kle.exec(t))?iL(e[1],e[2]/100,e[3]/100,1):(e=Wle.exec(t))?iL(e[1],e[2]/100,e[3]/100,e[4]):X2.hasOwnProperty(t)?tL(X2[t]):t==="transparent"?new ni(NaN,NaN,NaN,0):null}function tL(t){return new ni(t>>16&255,t>>8&255,t&255,1)}function av(t,e,n,r){return r<=0&&(t=e=n=NaN),new ni(t,e,n,r)}function Qle(t){return t instanceof lg||(t=Im(t)),t?(t=t.rgb(),new ni(t.r,t.g,t.b,t.opacity)):new ni}function ZA(t,e,n,r){return arguments.length===1?Qle(t):new ni(t,e,n,r??1)}function ni(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}tR(ni,ZA,W5(lg,{brighter(t){return t=t==null?P_:Math.pow(P_,t),new ni(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Cm:Math.pow(Cm,t),new ni(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ni($u(this.r),$u(this.g),$u(this.b),M_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nL,formatHex:nL,formatHex8:Xle,formatRgb:rL,toString:rL}));function nL(){return`#${ku(this.r)}${ku(this.g)}${ku(this.b)}`}function Xle(){return`#${ku(this.r)}${ku(this.g)}${ku(this.b)}${ku((isNaN(this.opacity)?1:this.opacity)*255)}`}function rL(){const t=M_(this.opacity);return`${t===1?"rgb(":"rgba("}${$u(this.r)}, ${$u(this.g)}, ${$u(this.b)}${t===1?")":`, ${t})`}`}function M_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $u(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ku(t){return t=$u(t),(t<16?"0":"")+t.toString(16)}function iL(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fo(t,e,n,r)}function Y5(t){if(t instanceof fo)return new fo(t.h,t.s,t.l,t.opacity);if(t instanceof lg||(t=Im(t)),!t)return new fo;if(t instanceof fo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,l=o-i,c=(o+i)/2;return l?(e===o?s=(n-r)/l+(n<r)*6:n===o?s=(r-e)/l+2:s=(e-n)/l+4,l/=c<.5?o+i:2-o-i,s*=60):l=c>0&&c<1?0:s,new fo(s,l,c,t.opacity)}function Zle(t,e,n,r){return arguments.length===1?Y5(t):new fo(t,e,n,r??1)}function fo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}tR(fo,Zle,W5(lg,{brighter(t){return t=t==null?P_:Math.pow(P_,t),new fo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Cm:Math.pow(Cm,t),new fo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ni(aS(t>=240?t-240:t+120,i,r),aS(t,i,r),aS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new fo(oL(this.h),lv(this.s),lv(this.l),M_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=M_(this.opacity);return`${t===1?"hsl(":"hsla("}${oL(this.h)}, ${lv(this.s)*100}%, ${lv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function oL(t){return t=(t||0)%360,t<0?t+360:t}function lv(t){return Math.max(0,Math.min(1,t||0))}function aS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const nR=t=>()=>t;function eue(t,e){return function(n){return t+n*e}}function tue(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function nue(t){return(t=+t)==1?J5:function(e,n){return n-e?tue(e,n,t):nR(isNaN(e)?n:e)}}function J5(t,e){var n=e-t;return n?eue(t,n):nR(isNaN(t)?e:t)}const sL=(function t(e){var n=nue(e);function r(i,o){var s=n((i=ZA(i)).r,(o=ZA(o)).r),l=n(i.g,o.g),c=n(i.b,o.b),f=J5(i.opacity,o.opacity);return function(h){return i.r=s(h),i.g=l(h),i.b=c(h),i.opacity=f(h),i+""}}return r.gamma=t,r})(1);function rue(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function iue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function oue(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Ud(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(l){for(s=0;s<r;++s)o[s]=i[s](l);return o}}function sue(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function N_(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function aue(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ud(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var eC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lS=new RegExp(eC.source,"g");function lue(t){return function(){return t}}function uue(t){return function(e){return t(e)+""}}function cue(t,e){var n=eC.lastIndex=lS.lastIndex=0,r,i,o,s=-1,l=[],c=[];for(t=t+"",e=e+"";(r=eC.exec(t))&&(i=lS.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:N_(r,i)})),n=lS.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?c[0]?uue(c[0].x):lue(e):(e=c.length,function(f){for(var h=0,g;h<e;++h)l[(g=c[h]).i]=g.x(f);return l.join("")})}function Ud(t,e){var n=typeof e,r;return e==null||n==="boolean"?nR(e):(n==="number"?N_:n==="string"?(r=Im(e))?(e=r,sL):cue:e instanceof Im?sL:e instanceof Date?sue:iue(e)?rue:Array.isArray(e)?oue:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?aue:N_)(t,e)}function rR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function fue(t,e){e===void 0&&(e=t,t=Ud);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var l=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[l](s-l)}}function due(t){return function(){return t}}function D_(t){return+t}var aL=[0,1];function $r(t){return t}function tC(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:due(isNaN(e)?NaN:.5)}function hue(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function pue(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=tC(i,r),o=n(s,o)):(r=tC(r,i),o=n(o,s)),function(l){return o(r(l))}}function mue(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=tC(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(l){var c=ag(t,l,1,r)-1;return o[c](i[c](l))}}function ug(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function oT(){var t=aL,e=aL,n=Ud,r,i,o,s=$r,l,c,f;function h(){var v=Math.min(t.length,e.length);return s!==$r&&(s=hue(t[0],t[v-1])),l=v>2?mue:pue,c=f=null,g}function g(v){return v==null||isNaN(v=+v)?o:(c||(c=l(t.map(r),e,n)))(r(s(v)))}return g.invert=function(v){return s(i((f||(f=l(e,t.map(r),N_)))(v)))},g.domain=function(v){return arguments.length?(t=Array.from(v,D_),h()):t.slice()},g.range=function(v){return arguments.length?(e=Array.from(v),h()):e.slice()},g.rangeRound=function(v){return e=Array.from(v),n=rR,h()},g.clamp=function(v){return arguments.length?(s=v?!0:$r,h()):s!==$r},g.interpolate=function(v){return arguments.length?(n=v,h()):n},g.unknown=function(v){return arguments.length?(o=v,g):o},function(v,E){return r=v,i=E,h()}}function iR(){return oT()($r,$r)}function gue(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function k_(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function hd(t){return t=k_(Math.abs(t)),t?t[1]:NaN}function yue(t,e){return function(n,r){for(var i=n.length,o=[],s=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),o.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[s=(s+1)%t.length];return o.reverse().join(e)}}function vue(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var _ue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rm(t){if(!(e=_ue.exec(t)))throw new Error("invalid format: "+t);var e;return new oR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Rm.prototype=oR.prototype;function oR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}oR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Tue(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Q5;function Eue(t,e){var n=k_(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Q5=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+k_(t,Math.max(0,e+o-1))[0]}function lL(t,e){var n=k_(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const uL={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:gue,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>lL(t*100,e),r:lL,s:Eue,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function cL(t){return t}var fL=Array.prototype.map,dL=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function wue(t){var e=t.grouping===void 0||t.thousands===void 0?cL:yue(fL.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?cL:vue(fL.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(g){g=Rm(g);var v=g.fill,E=g.align,b=g.sign,S=g.symbol,A=g.zero,I=g.width,N=g.comma,D=g.precision,V=g.trim,q=g.type;q==="n"?(N=!0,q="g"):uL[q]||(D===void 0&&(D=12),V=!0,q="g"),(A||v==="0"&&E==="=")&&(A=!0,v="0",E="=");var z=S==="$"?n:S==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",O=S==="$"?r:/[%p]/.test(q)?s:"",L=uL[q],k=/[defgprs%]/.test(q);D=D===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function $(F){var G=z,H=O,Ae,Re,ee;if(q==="c")H=L(F)+H,F="";else{F=+F;var he=F<0||1/F<0;if(F=isNaN(F)?c:L(Math.abs(F),D),V&&(F=Tue(F)),he&&+F==0&&b!=="+"&&(he=!1),G=(he?b==="("?b:l:b==="-"||b==="("?"":b)+G,H=(q==="s"?dL[8+Q5/3]:"")+H+(he&&b==="("?")":""),k){for(Ae=-1,Re=F.length;++Ae<Re;)if(ee=F.charCodeAt(Ae),48>ee||ee>57){H=(ee===46?i+F.slice(Ae+1):F.slice(Ae))+H,F=F.slice(0,Ae);break}}}N&&!A&&(F=e(F,1/0));var Ee=G.length+F.length+H.length,Le=Ee<I?new Array(I-Ee+1).join(v):"";switch(N&&A&&(F=e(Le+F,Le.length?I-H.length:1/0),Le=""),E){case"<":F=G+F+H+Le;break;case"=":F=G+Le+F+H;break;case"^":F=Le.slice(0,Ee=Le.length>>1)+G+F+H+Le.slice(Ee);break;default:F=Le+G+F+H;break}return o(F)}return $.toString=function(){return g+""},$}function h(g,v){var E=f((g=Rm(g),g.type="f",g)),b=Math.max(-8,Math.min(8,Math.floor(hd(v)/3)))*3,S=Math.pow(10,-b),A=dL[8+b/3];return function(I){return E(S*I)+A}}return{format:f,formatPrefix:h}}var uv,sR,X5;bue({thousands:",",grouping:[3],currency:["$",""]});function bue(t){return uv=wue(t),sR=uv.format,X5=uv.formatPrefix,uv}function Sue(t){return Math.max(0,-hd(Math.abs(t)))}function Aue(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hd(e)/3)))*3-hd(Math.abs(t)))}function Cue(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hd(e)-hd(t))+1}function Z5(t,e,n,r){var i=QA(t,e,n),o;switch(r=Rm(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Aue(i,s))&&(r.precision=o),X5(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Cue(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Sue(i))&&(r.precision=o-(r.type==="%")*2);break}}return sR(r)}function kl(t){var e=t.domain;return t.ticks=function(n){var r=e();return YA(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Z5(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],l=r[o],c,f,h=10;for(l<s&&(f=s,s=l,l=f,f=i,i=o,o=f);h-- >0;){if(f=JA(s,l,n),f===c)return r[i]=s,r[o]=l,e(r);if(f>0)s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f;else if(f<0)s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f;else break;c=f}return t},t}function e$(){var t=iR();return t.copy=function(){return ug(t,e$())},no.apply(t,arguments),kl(t)}function t$(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,D_),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return t$(t).unknown(e)},t=arguments.length?Array.from(t,D_):[0,1],kl(n)}function n$(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function hL(t){return Math.log(t)}function pL(t){return Math.exp(t)}function xue(t){return-Math.log(-t)}function Iue(t){return-Math.exp(-t)}function Rue(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Pue(t){return t===10?Rue:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Mue(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function mL(t){return(e,n)=>-t(-e,n)}function aR(t){const e=t(hL,pL),n=e.domain;let r=10,i,o;function s(){return i=Mue(r),o=Pue(r),n()[0]<0?(i=mL(i),o=mL(o),t(xue,Iue)):t(hL,pL),e}return e.base=function(l){return arguments.length?(r=+l,s()):r},e.domain=function(l){return arguments.length?(n(l),s()):n()},e.ticks=l=>{const c=n();let f=c[0],h=c[c.length-1];const g=h<f;g&&([f,h]=[h,f]);let v=i(f),E=i(h),b,S;const A=l==null?10:+l;let I=[];if(!(r%1)&&E-v<A){if(v=Math.floor(v),E=Math.ceil(E),f>0){for(;v<=E;++v)for(b=1;b<r;++b)if(S=v<0?b/o(-v):b*o(v),!(S<f)){if(S>h)break;I.push(S)}}else for(;v<=E;++v)for(b=r-1;b>=1;--b)if(S=v>0?b/o(-v):b*o(v),!(S<f)){if(S>h)break;I.push(S)}I.length*2<A&&(I=YA(f,h,A))}else I=YA(v,E,Math.min(E-v,A)).map(o);return g?I.reverse():I},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Rm(c)).precision==null&&(c.trim=!0),c=sR(c)),l===1/0)return c;const f=Math.max(1,r*l/e.ticks().length);return h=>{let g=h/o(Math.round(i(h)));return g*r<r-.5&&(g*=r),g<=f?c(h):""}},e.nice=()=>n(n$(n(),{floor:l=>o(Math.floor(i(l))),ceil:l=>o(Math.ceil(i(l)))})),e}function r$(){const t=aR(oT()).domain([1,10]);return t.copy=()=>ug(t,r$()).base(t.base()),no.apply(t,arguments),t}function gL(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function yL(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function lR(t){var e=1,n=t(gL(e),yL(e));return n.constant=function(r){return arguments.length?t(gL(e=+r),yL(e)):e},kl(n)}function i$(){var t=lR(oT());return t.copy=function(){return ug(t,i$()).constant(t.constant())},no.apply(t,arguments)}function vL(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Nue(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Due(t){return t<0?-t*t:t*t}function uR(t){var e=t($r,$r),n=1;function r(){return n===1?t($r,$r):n===.5?t(Nue,Due):t(vL(n),vL(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},kl(e)}function cR(){var t=uR(oT());return t.copy=function(){return ug(t,cR()).exponent(t.exponent())},no.apply(t,arguments),t}function kue(){return cR.apply(null,arguments).exponent(.5)}function _L(t){return Math.sign(t)*t*t}function Oue(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function o$(){var t=iR(),e=[0,1],n=!1,r;function i(o){var s=Oue(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(_L(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,D_)).map(_L)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return o$(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},no.apply(i,arguments),kl(i)}function s$(){var t=[],e=[],n=[],r;function i(){var s=0,l=Math.max(1,e.length);for(n=new Array(l-1);++s<l;)n[s-1]=Fle(t,s/l);return o}function o(s){return s==null||isNaN(s=+s)?r:e[ag(n,s)]}return o.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let l of s)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(cl),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return s$().domain(t).range(e).unknown(r)},no.apply(o,arguments)}function a$(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(c){return c!=null&&c<=c?i[ag(r,c,0,n)]:o}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},s.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[t,r[0]]:f>=n?[r[n-1],e]:[r[f-1],r[f]]},s.unknown=function(c){return arguments.length&&(o=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return a$().domain([t,e]).range(i).unknown(o)},no.apply(kl(s),arguments)}function l$(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[ag(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return l$().domain(t).range(e).unknown(n)},no.apply(i,arguments)}const uS=new Date,cS=new Date;function zn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),l=i.ceil(o);return o-s<l-o?s:l},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,l)=>{const c=[];if(o=i.ceil(o),l=l==null?1:Math.floor(l),!(o<s)||!(l>0))return c;let f;do c.push(f=new Date(+o)),e(o,l),t(o);while(f<o&&o<s);return c},i.filter=o=>zn(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!o(s););else for(;--l>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(uS.setTime(+o),cS.setTime(+s),t(uS),t(cS),Math.floor(n(uS,cS))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const O_=zn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);O_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?zn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):O_);O_.range;const qs=1e3,Ki=qs*60,$s=Ki*60,na=$s*24,fR=na*7,TL=na*30,fS=na*365,Ou=zn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*qs)},(t,e)=>(e-t)/qs,t=>t.getUTCSeconds());Ou.range;const dR=zn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qs)},(t,e)=>{t.setTime(+t+e*Ki)},(t,e)=>(e-t)/Ki,t=>t.getMinutes());dR.range;const hR=zn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ki)},(t,e)=>(e-t)/Ki,t=>t.getUTCMinutes());hR.range;const pR=zn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*qs-t.getMinutes()*Ki)},(t,e)=>{t.setTime(+t+e*$s)},(t,e)=>(e-t)/$s,t=>t.getHours());pR.range;const mR=zn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*$s)},(t,e)=>(e-t)/$s,t=>t.getUTCHours());mR.range;const cg=zn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ki)/na,t=>t.getDate()-1);cg.range;const sT=zn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/na,t=>t.getUTCDate()-1);sT.range;const u$=zn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/na,t=>Math.floor(t/na));u$.range;function pc(t){return zn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ki)/fR)}const aT=pc(0),L_=pc(1),Lue=pc(2),Vue=pc(3),pd=pc(4),Uue=pc(5),Fue=pc(6);aT.range;L_.range;Lue.range;Vue.range;pd.range;Uue.range;Fue.range;function mc(t){return zn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/fR)}const lT=mc(0),V_=mc(1),Bue=mc(2),que=mc(3),md=mc(4),$ue=mc(5),zue=mc(6);lT.range;V_.range;Bue.range;que.range;md.range;$ue.range;zue.range;const gR=zn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());gR.range;const yR=zn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());yR.range;const ra=zn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ra.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ra.range;const ia=zn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ia.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ia.range;function c$(t,e,n,r,i,o){const s=[[Ou,1,qs],[Ou,5,5*qs],[Ou,15,15*qs],[Ou,30,30*qs],[o,1,Ki],[o,5,5*Ki],[o,15,15*Ki],[o,30,30*Ki],[i,1,$s],[i,3,3*$s],[i,6,6*$s],[i,12,12*$s],[r,1,na],[r,2,2*na],[n,1,fR],[e,1,TL],[e,3,3*TL],[t,1,fS]];function l(f,h,g){const v=h<f;v&&([f,h]=[h,f]);const E=g&&typeof g.range=="function"?g:c(f,h,g),b=E?E.range(f,+h+1):[];return v?b.reverse():b}function c(f,h,g){const v=Math.abs(h-f)/g,E=XI(([,,A])=>A).right(s,v);if(E===s.length)return t.every(QA(f/fS,h/fS,g));if(E===0)return O_.every(Math.max(QA(f,h,g),1));const[b,S]=s[v/s[E-1][2]<s[E][2]/v?E-1:E];return b.every(S)}return[l,c]}const[Hue,Gue]=c$(ia,yR,lT,u$,mR,hR),[jue,Kue]=c$(ra,gR,aT,cg,pR,dR);function dS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function hS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function mp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Wue(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,l=t.months,c=t.shortMonths,f=gp(i),h=yp(i),g=gp(o),v=yp(o),E=gp(s),b=yp(s),S=gp(l),A=yp(l),I=gp(c),N=yp(c),D={a:he,A:Ee,b:Le,B:K,c:null,d:CL,e:CL,f:yce,g:xce,G:Rce,H:pce,I:mce,j:gce,L:f$,m:vce,M:_ce,p:ae,q:ue,Q:RL,s:PL,S:Tce,u:Ece,U:wce,V:bce,w:Sce,W:Ace,x:null,X:null,y:Cce,Y:Ice,Z:Pce,"%":IL},V={a:ve,A:Pe,b:Be,B:ze,c:null,d:xL,e:xL,f:kce,g:Hce,G:jce,H:Mce,I:Nce,j:Dce,L:h$,m:Oce,M:Lce,p:ln,q:_t,Q:RL,s:PL,S:Vce,u:Uce,U:Fce,V:Bce,w:qce,W:$ce,x:null,X:null,y:zce,Y:Gce,Z:Kce,"%":IL},q={a:$,A:F,b:G,B:H,c:Ae,d:SL,e:SL,f:cce,g:bL,G:wL,H:AL,I:AL,j:sce,L:uce,m:oce,M:ace,p:k,q:ice,Q:dce,s:hce,S:lce,u:Zue,U:ece,V:tce,w:Xue,W:nce,x:Re,X:ee,y:bL,Y:wL,Z:rce,"%":fce};D.x=z(n,D),D.X=z(r,D),D.c=z(e,D),V.x=z(n,V),V.X=z(r,V),V.c=z(e,V);function z(Se,je){return function(Ye){var me=[],Kt=-1,et=0,nn=Se.length,Sn,Wt,va;for(Ye instanceof Date||(Ye=new Date(+Ye));++Kt<nn;)Se.charCodeAt(Kt)===37&&(me.push(Se.slice(et,Kt)),(Wt=EL[Sn=Se.charAt(++Kt)])!=null?Sn=Se.charAt(++Kt):Wt=Sn==="e"?" ":"0",(va=je[Sn])&&(Sn=va(Ye,Wt)),me.push(Sn),et=Kt+1);return me.push(Se.slice(et,Kt)),me.join("")}}function O(Se,je){return function(Ye){var me=mp(1900,void 0,1),Kt=L(me,Se,Ye+="",0),et,nn;if(Kt!=Ye.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(je&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(et=hS(mp(me.y,0,1)),nn=et.getUTCDay(),et=nn>4||nn===0?V_.ceil(et):V_(et),et=sT.offset(et,(me.V-1)*7),me.y=et.getUTCFullYear(),me.m=et.getUTCMonth(),me.d=et.getUTCDate()+(me.w+6)%7):(et=dS(mp(me.y,0,1)),nn=et.getDay(),et=nn>4||nn===0?L_.ceil(et):L_(et),et=cg.offset(et,(me.V-1)*7),me.y=et.getFullYear(),me.m=et.getMonth(),me.d=et.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),nn="Z"in me?hS(mp(me.y,0,1)).getUTCDay():dS(mp(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(nn+5)%7:me.w+me.U*7-(nn+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,hS(me)):dS(me)}}function L(Se,je,Ye,me){for(var Kt=0,et=je.length,nn=Ye.length,Sn,Wt;Kt<et;){if(me>=nn)return-1;if(Sn=je.charCodeAt(Kt++),Sn===37){if(Sn=je.charAt(Kt++),Wt=q[Sn in EL?je.charAt(Kt++):Sn],!Wt||(me=Wt(Se,Ye,me))<0)return-1}else if(Sn!=Ye.charCodeAt(me++))return-1}return me}function k(Se,je,Ye){var me=f.exec(je.slice(Ye));return me?(Se.p=h.get(me[0].toLowerCase()),Ye+me[0].length):-1}function $(Se,je,Ye){var me=E.exec(je.slice(Ye));return me?(Se.w=b.get(me[0].toLowerCase()),Ye+me[0].length):-1}function F(Se,je,Ye){var me=g.exec(je.slice(Ye));return me?(Se.w=v.get(me[0].toLowerCase()),Ye+me[0].length):-1}function G(Se,je,Ye){var me=I.exec(je.slice(Ye));return me?(Se.m=N.get(me[0].toLowerCase()),Ye+me[0].length):-1}function H(Se,je,Ye){var me=S.exec(je.slice(Ye));return me?(Se.m=A.get(me[0].toLowerCase()),Ye+me[0].length):-1}function Ae(Se,je,Ye){return L(Se,e,je,Ye)}function Re(Se,je,Ye){return L(Se,n,je,Ye)}function ee(Se,je,Ye){return L(Se,r,je,Ye)}function he(Se){return s[Se.getDay()]}function Ee(Se){return o[Se.getDay()]}function Le(Se){return c[Se.getMonth()]}function K(Se){return l[Se.getMonth()]}function ae(Se){return i[+(Se.getHours()>=12)]}function ue(Se){return 1+~~(Se.getMonth()/3)}function ve(Se){return s[Se.getUTCDay()]}function Pe(Se){return o[Se.getUTCDay()]}function Be(Se){return c[Se.getUTCMonth()]}function ze(Se){return l[Se.getUTCMonth()]}function ln(Se){return i[+(Se.getUTCHours()>=12)]}function _t(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var je=z(Se+="",D);return je.toString=function(){return Se},je},parse:function(Se){var je=O(Se+="",!1);return je.toString=function(){return Se},je},utcFormat:function(Se){var je=z(Se+="",V);return je.toString=function(){return Se},je},utcParse:function(Se){var je=O(Se+="",!0);return je.toString=function(){return Se},je}}}var EL={"-":"",_:" ",0:"0"},or=/^\s*\d+/,Yue=/^%/,Jue=/[\\^$*+?|[\]().{}]/g;function gt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Que(t){return t.replace(Jue,"\\$&")}function gp(t){return new RegExp("^(?:"+t.map(Que).join("|")+")","i")}function yp(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Xue(t,e,n){var r=or.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Zue(t,e,n){var r=or.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ece(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function tce(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function nce(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function wL(t,e,n){var r=or.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function bL(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function rce(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ice(t,e,n){var r=or.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function oce(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function SL(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function sce(t,e,n){var r=or.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function AL(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ace(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function lce(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function uce(t,e,n){var r=or.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function cce(t,e,n){var r=or.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function fce(t,e,n){var r=Yue.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function dce(t,e,n){var r=or.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function hce(t,e,n){var r=or.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function CL(t,e){return gt(t.getDate(),e,2)}function pce(t,e){return gt(t.getHours(),e,2)}function mce(t,e){return gt(t.getHours()%12||12,e,2)}function gce(t,e){return gt(1+cg.count(ra(t),t),e,3)}function f$(t,e){return gt(t.getMilliseconds(),e,3)}function yce(t,e){return f$(t,e)+"000"}function vce(t,e){return gt(t.getMonth()+1,e,2)}function _ce(t,e){return gt(t.getMinutes(),e,2)}function Tce(t,e){return gt(t.getSeconds(),e,2)}function Ece(t){var e=t.getDay();return e===0?7:e}function wce(t,e){return gt(aT.count(ra(t)-1,t),e,2)}function d$(t){var e=t.getDay();return e>=4||e===0?pd(t):pd.ceil(t)}function bce(t,e){return t=d$(t),gt(pd.count(ra(t),t)+(ra(t).getDay()===4),e,2)}function Sce(t){return t.getDay()}function Ace(t,e){return gt(L_.count(ra(t)-1,t),e,2)}function Cce(t,e){return gt(t.getFullYear()%100,e,2)}function xce(t,e){return t=d$(t),gt(t.getFullYear()%100,e,2)}function Ice(t,e){return gt(t.getFullYear()%1e4,e,4)}function Rce(t,e){var n=t.getDay();return t=n>=4||n===0?pd(t):pd.ceil(t),gt(t.getFullYear()%1e4,e,4)}function Pce(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+gt(e/60|0,"0",2)+gt(e%60,"0",2)}function xL(t,e){return gt(t.getUTCDate(),e,2)}function Mce(t,e){return gt(t.getUTCHours(),e,2)}function Nce(t,e){return gt(t.getUTCHours()%12||12,e,2)}function Dce(t,e){return gt(1+sT.count(ia(t),t),e,3)}function h$(t,e){return gt(t.getUTCMilliseconds(),e,3)}function kce(t,e){return h$(t,e)+"000"}function Oce(t,e){return gt(t.getUTCMonth()+1,e,2)}function Lce(t,e){return gt(t.getUTCMinutes(),e,2)}function Vce(t,e){return gt(t.getUTCSeconds(),e,2)}function Uce(t){var e=t.getUTCDay();return e===0?7:e}function Fce(t,e){return gt(lT.count(ia(t)-1,t),e,2)}function p$(t){var e=t.getUTCDay();return e>=4||e===0?md(t):md.ceil(t)}function Bce(t,e){return t=p$(t),gt(md.count(ia(t),t)+(ia(t).getUTCDay()===4),e,2)}function qce(t){return t.getUTCDay()}function $ce(t,e){return gt(V_.count(ia(t)-1,t),e,2)}function zce(t,e){return gt(t.getUTCFullYear()%100,e,2)}function Hce(t,e){return t=p$(t),gt(t.getUTCFullYear()%100,e,2)}function Gce(t,e){return gt(t.getUTCFullYear()%1e4,e,4)}function jce(t,e){var n=t.getUTCDay();return t=n>=4||n===0?md(t):md.ceil(t),gt(t.getUTCFullYear()%1e4,e,4)}function Kce(){return"+0000"}function IL(){return"%"}function RL(t){return+t}function PL(t){return Math.floor(+t/1e3)}var vf,m$,g$;Wce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Wce(t){return vf=Wue(t),m$=vf.format,vf.parse,g$=vf.utcFormat,vf.utcParse,vf}function Yce(t){return new Date(t)}function Jce(t){return t instanceof Date?+t:+new Date(+t)}function vR(t,e,n,r,i,o,s,l,c,f){var h=iR(),g=h.invert,v=h.domain,E=f(".%L"),b=f(":%S"),S=f("%I:%M"),A=f("%I %p"),I=f("%a %d"),N=f("%b %d"),D=f("%B"),V=f("%Y");function q(z){return(c(z)<z?E:l(z)<z?b:s(z)<z?S:o(z)<z?A:r(z)<z?i(z)<z?I:N:n(z)<z?D:V)(z)}return h.invert=function(z){return new Date(g(z))},h.domain=function(z){return arguments.length?v(Array.from(z,Jce)):v().map(Yce)},h.ticks=function(z){var O=v();return t(O[0],O[O.length-1],z??10)},h.tickFormat=function(z,O){return O==null?q:f(O)},h.nice=function(z){var O=v();return(!z||typeof z.range!="function")&&(z=e(O[0],O[O.length-1],z??10)),z?v(n$(O,z)):h},h.copy=function(){return ug(h,vR(t,e,n,r,i,o,s,l,c,f))},h}function Qce(){return no.apply(vR(jue,Kue,ra,gR,aT,cg,pR,dR,Ou,m$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Xce(){return no.apply(vR(Hue,Gue,ia,yR,lT,sT,mR,hR,Ou,g$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uT(){var t=0,e=1,n,r,i,o,s=$r,l=!1,c;function f(g){return g==null||isNaN(g=+g)?c:s(i===0?.5:(g=(o(g)-n)*i,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([t,e]=g,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),f):[t,e]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(s=g,f):s};function h(g){return function(v){var E,b;return arguments.length?([E,b]=v,s=g(E,b),f):[s(0),s(1)]}}return f.range=h(Ud),f.rangeRound=h(rR),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return o=g,n=g(t),r=g(e),i=n===r?0:1/(r-n),f}}function Ol(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function y$(){var t=kl(uT()($r));return t.copy=function(){return Ol(t,y$())},ma.apply(t,arguments)}function v$(){var t=aR(uT()).domain([1,10]);return t.copy=function(){return Ol(t,v$()).base(t.base())},ma.apply(t,arguments)}function _$(){var t=lR(uT());return t.copy=function(){return Ol(t,_$()).constant(t.constant())},ma.apply(t,arguments)}function _R(){var t=uR(uT());return t.copy=function(){return Ol(t,_R()).exponent(t.exponent())},ma.apply(t,arguments)}function Zce(){return _R.apply(null,arguments).exponent(.5)}function T$(){var t=[],e=$r;function n(r){if(r!=null&&!isNaN(r=+r))return e((ag(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(cl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>Ule(t,o/r))},n.copy=function(){return T$(e).domain(t)},ma.apply(n,arguments)}function cT(){var t=0,e=.5,n=1,r=1,i,o,s,l,c,f=$r,h,g=!1,v;function E(S){return isNaN(S=+S)?v:(S=.5+((S=+h(S))-o)*(r*S<r*o?l:c),f(g?Math.max(0,Math.min(1,S)):S))}E.domain=function(S){return arguments.length?([t,e,n]=S,i=h(t=+t),o=h(e=+e),s=h(n=+n),l=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,E):[t,e,n]},E.clamp=function(S){return arguments.length?(g=!!S,E):g},E.interpolator=function(S){return arguments.length?(f=S,E):f};function b(S){return function(A){var I,N,D;return arguments.length?([I,N,D]=A,f=fue(S,[I,N,D]),E):[f(0),f(.5),f(1)]}}return E.range=b(Ud),E.rangeRound=b(rR),E.unknown=function(S){return arguments.length?(v=S,E):v},function(S){return h=S,i=S(t),o=S(e),s=S(n),l=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,E}}function E$(){var t=kl(cT()($r));return t.copy=function(){return Ol(t,E$())},ma.apply(t,arguments)}function w$(){var t=aR(cT()).domain([.1,1,10]);return t.copy=function(){return Ol(t,w$()).base(t.base())},ma.apply(t,arguments)}function b$(){var t=lR(cT());return t.copy=function(){return Ol(t,b$()).constant(t.constant())},ma.apply(t,arguments)}function TR(){var t=uR(cT());return t.copy=function(){return Ol(t,TR()).exponent(t.exponent())},ma.apply(t,arguments)}function efe(){return TR.apply(null,arguments).exponent(.5)}const Pp=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:eR,scaleDiverging:E$,scaleDivergingLog:w$,scaleDivergingPow:TR,scaleDivergingSqrt:efe,scaleDivergingSymlog:b$,scaleIdentity:t$,scaleImplicit:XA,scaleLinear:e$,scaleLog:r$,scaleOrdinal:ZI,scalePoint:qle,scalePow:cR,scaleQuantile:s$,scaleQuantize:a$,scaleRadial:o$,scaleSequential:y$,scaleSequentialLog:v$,scaleSequentialPow:_R,scaleSequentialQuantile:T$,scaleSequentialSqrt:Zce,scaleSequentialSymlog:_$,scaleSqrt:kue,scaleSymlog:i$,scaleThreshold:l$,scaleTime:Qce,scaleUtc:Xce,tickFormat:Z5},Symbol.toStringTag,{value:"Module"}));var Ll=t=>t.chartData,tfe=se([Ll],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),ER=(t,e,n,r)=>r?tfe(t):Ll(t);function gd(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(xi(e)&&xi(n))return!0}return!1}function ML(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function nfe(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,o;if(xi(n))i=n;else if(typeof n=="function")return;if(xi(r))o=r;else if(typeof r=="function")return;var s=[i,o];if(gd(s))return s}}function rfe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(gd(r))return ML(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,o]=t,s,l;if(i==="auto")e!=null&&(s=Math.min(...e));else if(Qe(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&b2.test(i)){var c=b2.exec(i);if(c==null||e==null)s=void 0;else{var f=+c[1];s=e[0]-f}}else s=e==null?void 0:e[0];if(o==="auto")e!=null&&(l=Math.max(...e));else if(Qe(o))l=o;else if(typeof o=="function")try{e!=null&&(l=o(e==null?void 0:e[1]))}catch{}else if(typeof o=="string"&&S2.test(o)){var h=S2.exec(o);if(h==null||e==null)l=void 0;else{var g=+h[1];l=e[1]+g}}else l=e==null?void 0:e[1];var v=[s,l];if(gd(v))return e==null?v:ML(v,e,n)}}}var Fd=1e9,ife={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},bR,en=!0,to="[DecimalError] ",zu=to+"Invalid argument: ",wR=to+"Exponent out of range: ",Bd=Math.floor,bu=Math.pow,ofe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vi,Qn=1e7,$t=7,S$=9007199254740991,U_=Bd(S$/$t),Me={};Me.absoluteValue=Me.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Me.comparedTo=Me.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Me.decimalPlaces=Me.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*$t;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Me.dividedBy=Me.div=function(t){return Ks(this,new this.constructor(t))};Me.dividedToIntegerBy=Me.idiv=function(t){var e=this,n=e.constructor;return Lt(Ks(e,new n(t),0,1),n.precision)};Me.equals=Me.eq=function(t){return!this.cmp(t)};Me.exponent=function(){return Dn(this)};Me.greaterThan=Me.gt=function(t){return this.cmp(t)>0};Me.greaterThanOrEqualTo=Me.gte=function(t){return this.cmp(t)>=0};Me.isInteger=Me.isint=function(){return this.e>this.d.length-2};Me.isNegative=Me.isneg=function(){return this.s<0};Me.isPositive=Me.ispos=function(){return this.s>0};Me.isZero=function(){return this.s===0};Me.lessThan=Me.lt=function(t){return this.cmp(t)<0};Me.lessThanOrEqualTo=Me.lte=function(t){return this.cmp(t)<1};Me.logarithm=Me.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(vi))throw Error(to+"NaN");if(n.s<1)throw Error(to+(n.s?"NaN":"-Infinity"));return n.eq(vi)?new r(0):(en=!1,e=Ks(Pm(n,o),Pm(t,o),o),en=!0,Lt(e,i))};Me.minus=Me.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?x$(e,t):A$(e,(t.s=-t.s,t))};Me.modulo=Me.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(to+"NaN");return n.s?(en=!1,e=Ks(n,t,0,1).times(t),en=!0,n.minus(e)):Lt(new r(n),i)};Me.naturalExponential=Me.exp=function(){return C$(this)};Me.naturalLogarithm=Me.ln=function(){return Pm(this)};Me.negated=Me.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Me.plus=Me.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?A$(e,t):x$(e,(t.s=-t.s,t))};Me.precision=Me.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(zu+t);if(e=Dn(i)+1,r=i.d.length-1,n=r*$t+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Me.squareRoot=Me.sqrt=function(){var t,e,n,r,i,o,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(to+"NaN")}for(t=Dn(l),en=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Zo(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Bd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(o=r,r=o.plus(Ks(l,o,s+2)).times(.5),Zo(o.d).slice(0,s)===(e=Zo(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Lt(o,n+1,0),o.times(o).eq(l)){r=o;break}}else if(e!="9999")break;s+=4}return en=!0,Lt(r,n)};Me.times=Me.mul=function(t){var e,n,r,i,o,s,l,c,f,h=this,g=h.constructor,v=h.d,E=(t=new g(t)).d;if(!h.s||!t.s)return new g(0);for(t.s*=h.s,n=h.e+t.e,c=v.length,f=E.length,c<f&&(o=v,v=E,E=o,s=c,c=f,f=s),o=[],s=c+f,r=s;r--;)o.push(0);for(r=f;--r>=0;){for(e=0,i=c+r;i>r;)l=o[i]+E[r]*v[i-r-1]+e,o[i--]=l%Qn|0,e=l/Qn|0;o[i]=(o[i]+e)%Qn|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,en?Lt(t,g.precision):t};Me.toDecimalPlaces=Me.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(us(t,0,Fd),e===void 0?e=r.rounding:us(e,0,8),Lt(n,t+Dn(n)+1,e))};Me.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=ic(r,!0):(us(t,0,Fd),e===void 0?e=i.rounding:us(e,0,8),r=Lt(new i(r),t+1,e),n=ic(r,!0,t+1)),n};Me.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?ic(i):(us(t,0,Fd),e===void 0?e=o.rounding:us(e,0,8),r=Lt(new o(i),t+Dn(i)+1,e),n=ic(r.abs(),!1,t+Dn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Me.toInteger=Me.toint=function(){var t=this,e=t.constructor;return Lt(new e(t),Dn(t)+1,e.rounding)};Me.toNumber=function(){return+this};Me.toPower=Me.pow=function(t){var e,n,r,i,o,s,l=this,c=l.constructor,f=12,h=+(t=new c(t));if(!t.s)return new c(vi);if(l=new c(l),!l.s){if(t.s<1)throw Error(to+"Infinity");return l}if(l.eq(vi))return l;if(r=c.precision,t.eq(vi))return Lt(l,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=l.s,s){if((n=h<0?-h:h)<=S$){for(i=new c(vi),e=Math.ceil(r/$t+4),en=!1;n%2&&(i=i.times(l),DL(i.d,e)),n=Bd(n/2),n!==0;)l=l.times(l),DL(l.d,e);return en=!0,t.s<0?new c(vi).div(i):Lt(i,r)}}else if(o<0)throw Error(to+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,en=!1,i=t.times(Pm(l,r+f)),en=!0,i=C$(i),i.s=o,i};Me.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Dn(i),r=ic(i,n<=o.toExpNeg||n>=o.toExpPos)):(us(t,1,Fd),e===void 0?e=o.rounding:us(e,0,8),i=Lt(new o(i),t,e),n=Dn(i),r=ic(i,t<=n||n<=o.toExpNeg,t)),r};Me.toSignificantDigits=Me.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(us(t,1,Fd),e===void 0?e=r.rounding:us(e,0,8)),Lt(new r(n),t,e)};Me.toString=Me.valueOf=Me.val=Me.toJSON=Me[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Dn(t),n=t.constructor;return ic(t,e<=n.toExpNeg||e>=n.toExpPos)};function A$(t,e){var n,r,i,o,s,l,c,f,h=t.constructor,g=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),en?Lt(e,g):e;if(c=t.d,f=e.d,s=t.e,i=e.e,c=c.slice(),o=s-i,o){for(o<0?(r=c,o=-o,l=f.length):(r=f,i=s,l=c.length),s=Math.ceil(g/$t),l=s>l?s+1:l+1,o>l&&(o=l,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(l=c.length,o=f.length,l-o<0&&(o=l,r=f,f=c,c=r),n=0;o;)n=(c[--o]=c[o]+f[o]+n)/Qn|0,c[o]%=Qn;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,en?Lt(e,g):e}function us(t,e,n){if(t!==~~t||t<e||t>n)throw Error(zu+t)}function Zo(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=$t-r.length,n&&(o+=Qa(n)),o+=r;s=t[e],r=s+"",n=$t-r.length,n&&(o+=Qa(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Ks=(function(){function t(r,i){var o,s=0,l=r.length;for(r=r.slice();l--;)o=r[l]*i+s,r[l]=o%Qn|0,s=o/Qn|0;return s&&r.unshift(s),r}function e(r,i,o,s){var l,c;if(o!=s)c=o>s?1:-1;else for(l=c=0;l<o;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*Qn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var l,c,f,h,g,v,E,b,S,A,I,N,D,V,q,z,O,L,k=r.constructor,$=r.s==i.s?1:-1,F=r.d,G=i.d;if(!r.s)return new k(r);if(!i.s)throw Error(to+"Division by zero");for(c=r.e-i.e,O=G.length,q=F.length,E=new k($),b=E.d=[],f=0;G[f]==(F[f]||0);)++f;if(G[f]>(F[f]||0)&&--c,o==null?N=o=k.precision:s?N=o+(Dn(r)-Dn(i))+1:N=o,N<0)return new k(0);if(N=N/$t+2|0,f=0,O==1)for(h=0,G=G[0],N++;(f<q||h)&&N--;f++)D=h*Qn+(F[f]||0),b[f]=D/G|0,h=D%G|0;else{for(h=Qn/(G[0]+1)|0,h>1&&(G=t(G,h),F=t(F,h),O=G.length,q=F.length),V=O,S=F.slice(0,O),A=S.length;A<O;)S[A++]=0;L=G.slice(),L.unshift(0),z=G[0],G[1]>=Qn/2&&++z;do h=0,l=e(G,S,O,A),l<0?(I=S[0],O!=A&&(I=I*Qn+(S[1]||0)),h=I/z|0,h>1?(h>=Qn&&(h=Qn-1),g=t(G,h),v=g.length,A=S.length,l=e(g,S,v,A),l==1&&(h--,n(g,O<v?L:G,v))):(h==0&&(l=h=1),g=G.slice()),v=g.length,v<A&&g.unshift(0),n(S,g,A),l==-1&&(A=S.length,l=e(G,S,O,A),l<1&&(h++,n(S,O<A?L:G,A))),A=S.length):l===0&&(h++,S=[0]),b[f++]=h,l&&S[0]?S[A++]=F[V]||0:(S=[F[V]],A=1);while((V++<q||S[0]!==void 0)&&N--)}return b[0]||b.shift(),E.e=c,Lt(E,s?o+Dn(E)+1:o)}})();function C$(t,e){var n,r,i,o,s,l,c=0,f=0,h=t.constructor,g=h.precision;if(Dn(t)>16)throw Error(wR+Dn(t));if(!t.s)return new h(vi);for(en=!1,l=g,s=new h(.03125);t.abs().gte(.1);)t=t.times(s),f+=5;for(r=Math.log(bu(2,f))/Math.LN10*2+5|0,l+=r,n=i=o=new h(vi),h.precision=l;;){if(i=Lt(i.times(t),l),n=n.times(++c),s=o.plus(Ks(i,n,l)),Zo(s.d).slice(0,l)===Zo(o.d).slice(0,l)){for(;f--;)o=Lt(o.times(o),l);return h.precision=g,e==null?(en=!0,Lt(o,g)):o}o=s}}function Dn(t){for(var e=t.e*$t,n=t.d[0];n>=10;n/=10)e++;return e}function pS(t,e,n){if(e>t.LN10.sd())throw en=!0,n&&(t.precision=n),Error(to+"LN10 precision limit exceeded");return Lt(new t(t.LN10),e)}function Qa(t){for(var e="";t--;)e+="0";return e}function Pm(t,e){var n,r,i,o,s,l,c,f,h,g=1,v=10,E=t,b=E.d,S=E.constructor,A=S.precision;if(E.s<1)throw Error(to+(E.s?"NaN":"-Infinity"));if(E.eq(vi))return new S(0);if(e==null?(en=!1,f=A):f=e,E.eq(10))return e==null&&(en=!0),pS(S,f);if(f+=v,S.precision=f,n=Zo(b),r=n.charAt(0),o=Dn(E),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)E=E.times(t),n=Zo(E.d),r=n.charAt(0),g++;o=Dn(E),r>1?(E=new S("0."+n),o++):E=new S(r+"."+n.slice(1))}else return c=pS(S,f+2,A).times(o+""),E=Pm(new S(r+"."+n.slice(1)),f-v).plus(c),S.precision=A,e==null?(en=!0,Lt(E,A)):E;for(l=s=E=Ks(E.minus(vi),E.plus(vi),f),h=Lt(E.times(E),f),i=3;;){if(s=Lt(s.times(h),f),c=l.plus(Ks(s,new S(i),f)),Zo(c.d).slice(0,f)===Zo(l.d).slice(0,f))return l=l.times(2),o!==0&&(l=l.plus(pS(S,f+2,A).times(o+""))),l=Ks(l,new S(g),f),S.precision=A,e==null?(en=!0,Lt(l,A)):l;l=c,i+=2}}function NL(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Bd(n/$t),t.d=[],r=(n+1)%$t,n<0&&(r+=$t),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=$t;r<i;)t.d.push(+e.slice(r,r+=$t));e=e.slice(r),r=$t-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),en&&(t.e>U_||t.e<-U_))throw Error(wR+n)}else t.s=0,t.e=0,t.d=[0];return t}function Lt(t,e,n){var r,i,o,s,l,c,f,h,g=t.d;for(s=1,o=g[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=$t,i=e,f=g[h=0];else{if(h=Math.ceil((r+1)/$t),o=g.length,h>=o)return t;for(f=o=g[h],s=1;o>=10;o/=10)s++;r%=$t,i=r-$t+s}if(n!==void 0&&(o=bu(10,s-i-1),l=f/o%10|0,c=e<0||g[h+1]!==void 0||f%o,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?f/bu(10,s-i):0:g[h-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return c?(o=Dn(t),g.length=1,e=e-o-1,g[0]=bu(10,($t-e%$t)%$t),t.e=Bd(-e/$t)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(r==0?(g.length=h,o=1,h--):(g.length=h+1,o=bu(10,$t-r),g[h]=i>0?(f/bu(10,s-i)%bu(10,i)|0)*o:0),c)for(;;)if(h==0){(g[0]+=o)==Qn&&(g[0]=1,++t.e);break}else{if(g[h]+=o,g[h]!=Qn)break;g[h--]=0,o=1}for(r=g.length;g[--r]===0;)g.pop();if(en&&(t.e>U_||t.e<-U_))throw Error(wR+Dn(t));return t}function x$(t,e){var n,r,i,o,s,l,c,f,h,g,v=t.constructor,E=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),en?Lt(e,E):e;if(c=t.d,g=e.d,r=e.e,f=t.e,c=c.slice(),s=f-r,s){for(h=s<0,h?(n=c,s=-s,l=g.length):(n=g,r=f,l=c.length),i=Math.max(Math.ceil(E/$t),l)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=g.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(c[i]!=g[i]){h=c[i]<g[i];break}s=0}for(h&&(n=c,c=g,g=n,e.s=-e.s),l=c.length,i=g.length-l;i>0;--i)c[l++]=0;for(i=g.length;i>s;){if(c[--i]<g[i]){for(o=i;o&&c[--o]===0;)c[o]=Qn-1;--c[o],c[i]+=Qn}c[i]-=g[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,en?Lt(e,E):e):new v(0)}function ic(t,e,n){var r,i=Dn(t),o=Zo(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+Qa(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Qa(-i-1)+o,n&&(r=n-s)>0&&(o+=Qa(r))):i>=s?(o+=Qa(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+Qa(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=Qa(r))),t.s<0?"-"+o:o}function DL(t,e){if(t.length>e)return t.length=e,!0}function I$(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(zu+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return NL(s,o.toString())}else if(typeof o!="string")throw Error(zu+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,ofe.test(o))NL(s,o);else throw Error(zu+o)}if(i.prototype=Me,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=I$,i.config=i.set=sfe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function sfe(t){if(!t||typeof t!="object")throw Error(to+"Object expected");var e,n,r,i=["precision",1,Fd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Bd(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(zu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(zu+n+": "+r);return this}var bR=I$(ife);vi=new bR(1);const At=bR;var afe=t=>t,R$={},P$=t=>t===R$,kL=t=>function e(){return arguments.length===0||arguments.length===1&&P$(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},M$=(t,e)=>t===1?e:kL(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(s=>s!==R$).length;return o>=t?e(...r):M$(t-o,kL(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var f=r.map(h=>P$(h)?l.shift():h);return e(...f,...l)}))}),fT=t=>M$(t.length,t),nC=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},lfe=fT((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),ufe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return afe;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce((l,c)=>c(l),o(...arguments))}},rC=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),N$=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.every((s,l)=>{var c;return s===((c=e)===null||c===void 0?void 0:c[l])})||(e=i,n=t(...i)),n}};function D$(t){var e;return t===0?e=1:e=Math.floor(new At(t).abs().log(10).toNumber())+1,e}function k$(t,e,n){for(var r=new At(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}fT((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});fT((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});fT((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var O$=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},L$=(t,e,n)=>{if(t.lte(0))return new At(0);var r=D$(t.toNumber()),i=new At(10).pow(r),o=t.div(i),s=r!==1?.05:.1,l=new At(Math.ceil(o.div(s).toNumber())).add(n).mul(s),c=l.mul(i);return e?new At(c.toNumber()):new At(Math.ceil(c.toNumber()))},cfe=(t,e,n)=>{var r=new At(1),i=new At(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new At(10).pow(D$(t)-1),i=new At(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new At(Math.floor(t)))}else t===0?i=new At(Math.floor((e-1)/2)):n||(i=new At(Math.floor(t)));var s=Math.floor((e-1)/2),l=ufe(lfe(c=>i.add(new At(c-s).mul(r)).toNumber()),nC);return l(0,e)},V$=function(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new At(0),tickMin:new At(0),tickMax:new At(0)};var s=L$(new At(n).sub(e).div(r-1),i,o),l;e<=0&&n>=0?l=new At(0):(l=new At(e).add(n).div(2),l=l.sub(new At(l).mod(s)));var c=Math.ceil(l.sub(e).div(s).toNumber()),f=Math.ceil(new At(n).sub(l).div(s).toNumber()),h=c+f+1;return h>r?V$(e,n,r,i,o+1):(h<r&&(f=n>0?f+(r-h):f,c=n>0?c:c+(r-h)),{step:s,tickMin:l.sub(new At(c).mul(s)),tickMax:l.add(new At(f).mul(s))})};function ffe(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[s,l]=O$([e,n]);if(s===-1/0||l===1/0){var c=l===1/0?[s,...nC(0,r-1).map(()=>1/0)]:[...nC(0,r-1).map(()=>-1/0),l];return e>n?rC(c):c}if(s===l)return cfe(s,r,i);var{step:f,tickMin:h,tickMax:g}=V$(s,l,o,i,0),v=k$(h,g.add(new At(.1).mul(f)),f);return e>n?rC(v):v}function dfe(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,s]=O$([n,r]);if(o===-1/0||s===1/0)return[n,r];if(o===s)return[o];var l=Math.max(e,2),c=L$(new At(s).sub(o).div(l-1),i,0),f=[...k$(new At(o),new At(s),c),s];return i===!1&&(f=f.map(h=>Math.round(h))),n>r?rC(f):f}var hfe=N$(ffe),pfe=N$(dfe),U$=t=>t.rootProps.maxBarSize,mfe=t=>t.rootProps.barGap,F$=t=>t.rootProps.barCategoryGap,gfe=t=>t.rootProps.barSize,dT=t=>t.rootProps.stackOffset,SR=t=>t.options.chartName,AR=t=>t.rootProps.syncId,B$=t=>t.rootProps.syncMethod,CR=t=>t.options.eventEmitter,Vs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},gi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},hT=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},yfe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Vs.angleAxisId,includeHidden:!1,name:void 0,reversed:Vs.reversed,scale:Vs.scale,tick:Vs.tick,tickCount:void 0,ticks:void 0,type:Vs.type,unit:void 0},vfe={allowDataOverflow:gi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:gi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:gi.scale,tick:gi.tick,tickCount:gi.tickCount,ticks:void 0,type:gi.type,unit:void 0},_fe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Vs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Vs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Vs.scale,tick:Vs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Tfe={allowDataOverflow:gi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:gi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:gi.scale,tick:gi.tick,tickCount:gi.tickCount,ticks:void 0,type:"category",unit:void 0},xR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?_fe:yfe,IR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Tfe:vfe,pT=t=>t.polarOptions,RR=se([ha,pa,ir],wse),q$=se([pT,RR],(t,e)=>{if(t!=null)return vo(t.innerRadius,e,0)}),$$=se([pT,RR],(t,e)=>{if(t!=null)return vo(t.outerRadius,e,e*.8)}),Efe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},z$=se([pT],Efe);se([xR,z$],hT);var H$=se([RR,q$,$$],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});se([IR,H$],hT);var G$=se([It,pT,q$,$$,ha,pa],(t,e,n,r,i,o)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:l,startAngle:c,endAngle:f}=e;return{cx:vo(s,i,i/2),cy:vo(l,o,o/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:f,clockWise:!1}}}),kn=(t,e)=>e,mT=(t,e,n)=>n;function PR(t){return t==null?void 0:t.id}var Hn=t=>{var e=It(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},qd=t=>t.tooltip.settings.axisId,sr=t=>{var e=Hn(t),n=qd(t);return fg(t,e,n)},j$=se([sr],t=>t==null?void 0:t.dataKey);function K$(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:o}=n,s=new Map;return t.forEach(l=>{var c,f=(c=l.data)!==null&&c!==void 0?c:r;if(!(f==null||f.length===0)){var h=PR(l);f.forEach((g,v)=>{var E=o==null||i?v:String(Hr(g,o,null)),b=Hr(g,l.dataKey,0),S;s.has(E)?S=s.get(E):S={},Object.assign(S,{[h]:b}),s.set(E,S)})}}),Array.from(s.values())}function gT(t){return t.stackId!=null&&t.dataKey!=null}function OL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OL(Object(n),!0).forEach(function(r){wfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wfe(t,e,n){return(e=bfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bfe(t){var e=Sfe(t,"string");return typeof e=="symbol"?e:e+""}function Sfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iC=[0,"auto"],hi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},W$=(t,e)=>t.cartesianAxis.xAxis[e],Vl=(t,e)=>{var n=W$(t,e);return n??hi},pi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:iC,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:og},Y$=(t,e)=>t.cartesianAxis.yAxis[e],Ul=(t,e)=>{var n=Y$(t,e);return n??pi},Afe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},MR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Afe},ri=(t,e,n)=>{switch(e){case"xAxis":return Vl(t,n);case"yAxis":return Ul(t,n);case"zAxis":return MR(t,n);case"angleAxis":return xR(t,n);case"radiusAxis":return IR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Cfe=(t,e,n)=>{switch(e){case"xAxis":return Vl(t,n);case"yAxis":return Ul(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},fg=(t,e,n)=>{switch(e){case"xAxis":return Vl(t,n);case"yAxis":return Ul(t,n);case"angleAxis":return xR(t,n);case"radiusAxis":return IR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},J$=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function Q$(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var NR=t=>t.graphicalItems.cartesianItems,xfe=se([kn,mT],Q$),X$=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),dg=se([NR,ri,xfe],X$),Z$=se([dg],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(gT)),ez=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),tz=se([dg],ez),nz=t=>t.map(e=>e.data).filter(Boolean).flat(1),Ife=se([dg],nz),rz=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},DR=se([Ife,ER],rz),iz=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Hr(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Hr(i,r)}))):t.map(r=>({value:r})),yT=se([DR,ri,dg],iz);function oz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function gc(t){return t.filter(e=>ls(e)||e instanceof Date).map(Number).filter(e=>Zi(e)===!1)}function Rfe(t,e,n){return!n||typeof e!="number"||Zi(e)?[]:n.length?gc(n.flatMap(r=>{var i=Hr(t,r.dataKey),o,s;if(Array.isArray(i)?[o,s]=i:o=s=i,!(!xi(o)||!xi(s)))return[e-o,e+s]})):[]}var Pfe=se([Z$,ER,sr],K$),sz=(t,e,n)=>{var r={},i=e.reduce((o,s)=>(s.stackId==null||(o[s.stackId]==null&&(o[s.stackId]=[]),o[s.stackId].push(s)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[s,l]=o,c=l.map(PR);return[s,{stackedData:Use(t,c,n),graphicalItems:l}]}))},oC=se([Pfe,Z$,dT],sz),az=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(n!=="zAxis"){var o=zse(t,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Mfe=se([oC,Ll,kn],az),lz=(t,e,n,r,i)=>n.length>0?t.flatMap(o=>n.flatMap(s=>{var l,c,f=(l=r[s.id])===null||l===void 0?void 0:l.filter(g=>oz(i,g)),h=Hr(o,(c=e.dataKey)!==null&&c!==void 0?c:s.dataKey);return{value:h,errorDomain:Rfe(o,h,f)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(o=>({value:Hr(o,e.dataKey),errorDomain:[]})):t.map(o=>({value:o,errorDomain:[]})),vT=t=>t.errorBars,uz=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>oz(n,r));se([tz,vT,kn],uz);var Nfe=se([DR,ri,tz,vT,kn],lz);function Dfe(t){var{value:e}=t;if(ls(e)||e instanceof Date)return e}var LL=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=gc(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},kfe=(t,e,n)=>{var r=t.map(Dfe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&C3(r))?z5(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},kR=t=>{var e;if(t==null||!("domain"in t))return iC;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=gc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:iC},B_=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),s=Math.min(...o),l=Math.max(...o);return[s,l]}},cz=t=>t.referenceElements.dots,$d=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Ofe=se([cz,kn,mT],$d),fz=t=>t.referenceElements.areas,Lfe=se([fz,kn,mT],$d),dz=t=>t.referenceElements.lines,Vfe=se([dz,kn,mT],$d),hz=(t,e)=>{var n=gc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Ufe=se(Ofe,kn,hz),pz=(t,e)=>{var n=gc(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Ffe=se([Lfe,kn],pz),mz=(t,e)=>{var n=gc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Bfe=se(Vfe,kn,mz),qfe=se(Ufe,Bfe,Ffe,(t,e,n)=>B_(t,n,e)),$fe=se([ri],kR),gz=(t,e,n,r,i,o,s)=>{var l=nfe(e,t.allowDataOverflow);if(l!=null)return l;var c=o==="vertical"&&s==="xAxis"||o==="horizontal"&&s==="yAxis",f=c?B_(n,i,LL(r)):B_(i,LL(r));return rfe(e,f,t.allowDataOverflow)},zfe=se([ri,$fe,Mfe,Nfe,qfe,It,kn],gz),Hfe=[0,1],yz=(t,e,n,r,i,o,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:l,type:c}=t,f=hc(e,o);return f&&l==null?z5(0,n.length):c==="category"?kfe(r,t,f):i==="expand"?Hfe:s}},OR=se([ri,It,DR,yT,dT,kn,zfe],yz),vz=(t,e,n,r,i)=>{if(t!=null){var{scale:o,type:s}=t;if(o==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof o=="string"){var l="scale".concat(ng(o));return l in Pp?l:"point"}}},hg=se([ri,It,J$,SR,kn],vz);function Gfe(t){if(t!=null){if(t in Pp)return Pp[t]();var e="scale".concat(ng(t));if(e in Pp)return Pp[e]()}}function LR(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=Gfe(e);if(i!=null){var o=i.domain(n).range(r);return Dse(o),o}}}var _z=(t,e,n)=>{var r=kR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&gd(t))return hfe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&gd(t))return pfe(t,e.tickCount,e.allowDecimals)}},VR=se([OR,fg,hg],_z),Tz=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&gd(e)&&Array.isArray(n)&&n.length>0){var i=e[0],o=n[0],s=e[1],l=n[n.length-1];return[Math.min(i,o),Math.max(s,l)]}return e},jfe=se([ri,OR,VR,kn],Tz),Kfe=se(yT,ri,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(gc(t.map(l=>l.value))).sort((l,c)=>l-c);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var s=r[o+1]-r[o];n=Math.min(n,s)}return n/i}}),Ez=se(Kfe,It,F$,ir,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!xi(t))return 0;var o=e==="vertical"?r.height:r.width;if(i==="gap")return t*o/2;if(i==="no-gap"){var s=vo(n,t*o),l=t*o/2;return l-s-(l-s)/o*s}return 0}),Wfe=(t,e)=>{var n=Vl(t,e);return n==null||typeof n.padding!="string"?0:Ez(t,"xAxis",e,n.padding)},Yfe=(t,e)=>{var n=Ul(t,e);return n==null||typeof n.padding!="string"?0:Ez(t,"yAxis",e,n.padding)},Jfe=se(Vl,Wfe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),Qfe=se(Ul,Yfe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),Xfe=se([ir,Jfe,iT,rT,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[t.left+e.left,t.left+t.width-e.right]}),Zfe=se([ir,It,Qfe,iT,rT,(t,e,n)=>n],(t,e,n,r,i,o)=>{var{padding:s}=i;return o?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),pg=(t,e,n,r)=>{var i;switch(e){case"xAxis":return Xfe(t,n,r);case"yAxis":return Zfe(t,n,r);case"zAxis":return(i=MR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return z$(t);case"radiusAxis":return H$(t,n);default:return}},wz=se([ri,pg],hT),zd=se([ri,hg,jfe,wz],LR);se([dg,vT,kn],uz);function bz(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var _T=(t,e)=>e,TT=(t,e,n)=>n,ede=se(tT,_T,TT,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(bz)),tde=se(nT,_T,TT,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(bz)),Sz=(t,e)=>({width:t.width,height:e.height}),nde=(t,e)=>{var n=typeof e.width=="number"?e.width:og;return{width:n,height:t.height}},Az=se(ir,Vl,Sz),rde=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},ide=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},ode=se(pa,ir,ede,_T,TT,(t,e,n,r,i)=>{var o={},s;return n.forEach(l=>{var c=Sz(e,l);s==null&&(s=rde(e,r,t));var f=r==="top"&&!i||r==="bottom"&&i;o[l.id]=s-Number(f)*c.height,s+=(f?-1:1)*c.height}),o}),sde=se(ha,ir,tde,_T,TT,(t,e,n,r,i)=>{var o={},s;return n.forEach(l=>{var c=nde(e,l);s==null&&(s=ide(e,r,t));var f=r==="left"&&!i||r==="right"&&i;o[l.id]=s-Number(f)*c.width,s+=(f?-1:1)*c.width}),o}),ade=(t,e)=>{var n=ir(t),r=Vl(t,e);if(r!=null){var i=ode(t,r.orientation,r.mirror),o=i[e];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},lde=(t,e)=>{var n=ir(t),r=Ul(t,e);if(r!=null){var i=sde(t,r.orientation,r.mirror),o=i[e];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},Cz=se(ir,Ul,(t,e)=>{var n=typeof e.width=="number"?e.width:og;return{width:n,height:t.height}}),VL=(t,e,n)=>{switch(e){case"xAxis":return Az(t,n).width;case"yAxis":return Cz(t,n).height;default:return}},xz=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:s}=n,l=hc(t,r),c=e.map(f=>f.value);if(s&&l&&o==="category"&&i&&C3(c))return c}},UR=se([It,yT,ri,kn],xz),Iz=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,s=hc(t,r);if(s&&(i==="number"||o!=="auto"))return e.map(l=>l.value)}},FR=se([It,yT,fg,kn],Iz);se([It,Cfe,hg,zd,UR,FR,pg,VR,kn],(t,e,n,r,i,o,s,l,c)=>{if(e==null)return null;var f=hc(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:o,duplicateDomain:i,isCategorical:f,niceTicks:l,range:s,realScaleType:n,scale:r}});var ude=(t,e,n,r,i,o,s,l,c)=>{if(!(e==null||r==null)){var f=hc(t,c),{type:h,ticks:g,tickCount:v}=e,E=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=h==="category"&&r.bandwidth?r.bandwidth()/E:0;b=c==="angleAxis"&&o!=null&&o.length>=2?Ei(o[0]-o[1])*2*b:b;var S=g||i;if(S){var A=S.map((I,N)=>{var D=s?s.indexOf(I):I;return{index:N,coordinate:r(D)+b,value:I,offset:b}});return A.filter(I=>!Zi(I.coordinate))}return f&&l?l.map((I,N)=>({coordinate:r(I)+b,value:I,index:N,offset:b})):r.ticks?r.ticks(v).map(I=>({coordinate:r(I)+b,value:I,offset:b})):r.domain().map((I,N)=>({coordinate:r(I)+b,value:s?s[I]:I,index:N,offset:b}))}},Rz=se([It,fg,hg,zd,VR,pg,UR,FR,kn],ude),cde=(t,e,n,r,i,o,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var l=hc(t,s),{tickCount:c}=e,f=0;return f=s==="angleAxis"&&(r==null?void 0:r.length)>=2?Ei(r[0]-r[1])*2*f:f,l&&o?o.map((h,g)=>({coordinate:n(h)+f,value:h,index:g,offset:f})):n.ticks?n.ticks(c).map(h=>({coordinate:n(h)+f,value:h,offset:f})):n.domain().map((h,g)=>({coordinate:n(h)+f,value:i?i[h]:h,index:g,offset:f}))}},yd=se([It,fg,zd,pg,UR,FR,kn],cde),vd=se(ri,zd,(t,e)=>{if(!(t==null||e==null))return F_(F_({},t),{},{scale:e})}),fde=se([ri,hg,OR,wz],LR);se((t,e,n)=>MR(t,n),fde,(t,e)=>{if(!(t==null||e==null))return F_(F_({},t),{},{scale:e})});var dde=se([It,tT,nT],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Pz=t=>t.options.defaultTooltipEventType,Mz=t=>t.options.validateTooltipEventTypes;function Nz(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function BR(t,e){var n=Pz(t),r=Mz(t);return Nz(e,n,r)}function hde(t){return $e(e=>BR(e,t))}var Dz=(t,e)=>{var n,r=Number(e);if(!(Zi(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},pde=t=>t.tooltip.settings,el={active:!1,index:null,dataKey:void 0,coordinate:void 0},mde={itemInteraction:{click:el,hover:el},axisInteraction:{click:el,hover:el},keyboardInteraction:el,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},kz=Ii({name:"tooltip",initialState:mde,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=js(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:gde,removeTooltipEntrySettings:yde,setTooltipSettingsState:vde,setActiveMouseOverItemIndex:Oz,mouseLeaveItem:_de,mouseLeaveChart:Lz,setActiveClickItemIndex:Tde,setMouseOverAxisIndex:Vz,setMouseClickAxisIndex:Ede,setSyncInteraction:sC,setKeyboardInteraction:aC}=kz.actions,wde=kz.reducer;function UL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UL(Object(n),!0).forEach(function(r){bde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bde(t,e,n){return(e=Sde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sde(t){var e=Ade(t,"string");return typeof e=="symbol"?e:e+""}function Ade(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cde(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function xde(t){return t.index!=null}var Uz=(t,e,n,r)=>{if(e==null)return el;var i=Cde(t,e,n);if(i==null)return el;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var o=t.settings.active===!0;if(xde(i)){if(o)return cv(cv({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return cv(cv({},el),{},{coordinate:i.coordinate})},qR=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!xi(r))return n;var i=0,o=1/0;return e.length>0&&(o=e.length-1),String(Math.max(i,Math.min(r,o)))},Fz=(t,e,n,r,i,o,s,l)=>{if(!(o==null||l==null)){var c=s[0],f=c==null?void 0:l(c.positions,o);if(f!=null)return f;var h=i==null?void 0:i[Number(o)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:h.coordinate}}}},Bz=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.dataKey)===i})},mg=t=>t.options.tooltipPayloadSearcher,Hd=t=>t.tooltip;function FL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FL(Object(n),!0).forEach(function(r){Ide(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ide(t,e,n){return(e=Rde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rde(t){var e=Pde(t,"string");return typeof e=="symbol"?e:e+""}function Pde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mde(t,e){return t??e}var qz=(t,e,n,r,i,o,s)=>{if(!(e==null||o==null)){var{chartData:l,computedData:c,dataStartIndex:f,dataEndIndex:h}=n,g=[];return t.reduce((v,E)=>{var b,{dataDefinedOnItem:S,settings:A}=E,I=Mde(S,l),N=Array.isArray(I)?P5(I,f,h):I,D=(b=A==null?void 0:A.dataKey)!==null&&b!==void 0?b:r,V=A==null?void 0:A.nameKey,q;if(r&&Array.isArray(N)&&!Array.isArray(N[0])&&s==="axis"?q=bre(N,r,i):q=o(N,e,c,V),Array.isArray(q))q.forEach(O=>{var L=BL(BL({},A),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});v.push(A2({tooltipEntrySettings:L,dataKey:O.dataKey,payload:O.payload,value:Hr(O.payload,O.dataKey),name:O.name}))});else{var z;v.push(A2({tooltipEntrySettings:A,dataKey:D,payload:q,value:Hr(q,D),name:(z=Hr(q,V))!==null&&z!==void 0?z:A==null?void 0:A.name}))}return v},g)}},$R=se([sr,It,J$,SR,Hn],vz),Nde=se([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Dde=se([Hn,qd],Q$),gg=se([Nde,sr,Dde],X$),kde=se([gg],t=>t.filter(gT)),Ode=se([gg],nz),Gd=se([Ode,Ll],rz),Lde=se([kde,Ll,sr],K$),zR=se([Gd,sr,gg],iz),Vde=se([sr],kR),Ude=se([gg],t=>t.filter(gT)),Fde=se([Lde,Ude,dT],sz),Bde=se([Fde,Ll,Hn],az),qde=se([gg],ez),$de=se([Gd,sr,qde,vT,Hn],lz),zde=se([cz,Hn,qd],$d),Hde=se([zde,Hn],hz),Gde=se([fz,Hn,qd],$d),jde=se([Gde,Hn],pz),Kde=se([dz,Hn,qd],$d),Wde=se([Kde,Hn],mz),Yde=se([Hde,Wde,jde],B_),Jde=se([sr,Vde,Bde,$de,Yde,It,Hn],gz),$z=se([sr,It,Gd,zR,dT,Hn,Jde],yz),Qde=se([$z,sr,$R],_z),Xde=se([sr,$z,Qde,Hn],Tz),zz=t=>{var e=Hn(t),n=qd(t),r=!1;return pg(t,e,n,r)},Hz=se([sr,zz],hT),Gz=se([sr,$R,Xde,Hz],LR),Zde=se([It,zR,sr,Hn],xz),ehe=se([It,zR,sr,Hn],Iz),the=(t,e,n,r,i,o,s,l)=>{if(e){var{type:c}=e,f=hc(t,l);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=c==="category"&&r.bandwidth?r.bandwidth()/h:0;return g=l==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Ei(i[0]-i[1])*2*g:g,f&&s?s.map((v,E)=>({coordinate:r(v)+g,value:v,index:E,offset:g})):r.domain().map((v,E)=>({coordinate:r(v)+g,value:o?o[v]:v,index:E,offset:g}))}}},ga=se([It,sr,$R,Gz,zz,Zde,ehe,Hn],the),HR=se([Pz,Mz,pde],(t,e,n)=>Nz(n.shared,t,e)),jz=t=>t.tooltip.settings.trigger,GR=t=>t.tooltip.settings.defaultIndex,ET=se([Hd,HR,jz,GR],Uz),_d=se([ET,Gd],qR),Kz=se([ga,_d],Dz),Wz=se([ET],t=>{if(t)return t.dataKey}),Yz=se([Hd,HR,jz,GR],Bz),nhe=se([ha,pa,It,ir,ga,GR,Yz,mg],Fz),rhe=se([ET,nhe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),ihe=se([ET],t=>t.active),ohe=se([Yz,_d,Ll,j$,Kz,mg,HR],qz);se([ohe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function qL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $L(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qL(Object(n),!0).forEach(function(r){she(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function she(t,e,n){return(e=ahe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ahe(t){var e=lhe(t,"string");return typeof e=="symbol"?e:e+""}function lhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uhe=()=>$e(sr),che=()=>{var t=uhe(),e=$e(ga),n=$e(Gz);return jI($L($L({},t),{},{scale:n}),e)},fhe=()=>$e(SR),jR=(t,e)=>e,Jz=(t,e,n)=>n,KR=(t,e,n,r)=>r,dhe=se(ga,t=>Y0(t,e=>e.coordinate)),WR=se([Hd,jR,Jz,KR],Uz),Qz=se([WR,Gd],qR),hhe=(t,e,n)=>{if(e!=null){var r=Hd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},Xz=se([Hd,jR,Jz,KR],Bz),q_=se([ha,pa,It,ir,ga,KR,Xz,mg],Fz),phe=se([WR,q_],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),Zz=se(ga,Qz,Dz),mhe=se([Xz,Qz,Ll,j$,Zz,mg,jR],qz),ghe=se([WR],t=>({isActive:t.active,activeIndex:t.index})),yhe=(t,e,n,r,i,o,s,l)=>{if(!(!t||!e||!r||!i||!o)){var c=Hse(t.chartX,t.chartY,e,n,l);if(c){var f=jse(c,e),h=Mse(f,s,o,r,i),g=Gse(e,o,h,c);return{activeIndex:String(h),activeCoordinate:g}}}};function lC(){return lC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lC.apply(null,arguments)}function zL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zL(Object(n),!0).forEach(function(r){vhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vhe(t,e,n){return(e=_he(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _he(t){var e=The(t,"string");return typeof e=="symbol"?e:e+""}function The(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ehe(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:s,cursor:l,tooltipEventType:c,chartName:f}=t,h=e,g=n,v=r;if(!l||!h||f!=="ScatterChart"&&c!=="axis")return null;var E,b;if(f==="ScatterChart")E=h,b=qae;else if(f==="BarChart")E=$ae(s,h,i,o),b=F5;else if(s==="radial"){var{cx:S,cy:A,radius:I,startAngle:N,endAngle:D}=B5(h);E={cx:S,cy:A,startAngle:N,endAngle:D,innerRadius:I,outerRadius:I},b=$5}else E={points:Ele(s,h,i)},b=Nae;var V=typeof l=="object"&&"className"in l?l.className:void 0,q=fv(fv(fv(fv({stroke:"#ccc",pointerEvents:"none"},i),E),Zn(l,!1)),{},{payload:g,payloadIndex:v,className:Gt("recharts-tooltip-cursor",V)});return R.isValidElement(l)?R.cloneElement(l,q):R.createElement(b,q)}function whe(t){var e=che(),n=aae(),r=YI(),i=fhe();return R.createElement(Ehe,lC({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var eH=R.createContext(null),bhe=()=>R.useContext(eH),mS={exports:{}},HL;function She(){return HL||(HL=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function o(c,f,h,g,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var E=new i(h,g||c,v),b=n?n+f:f;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],E]:c._events[b].push(E):(c._events[b]=E,c._eventsCount++),c}function s(c,f){--c._eventsCount===0?c._events=new r:delete c._events[f]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],h,g;if(this._eventsCount===0)return f;for(g in h=this._events)e.call(h,g)&&f.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},l.prototype.listeners=function(f){var h=n?n+f:f,g=this._events[h];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,E=g.length,b=new Array(E);v<E;v++)b[v]=g[v].fn;return b},l.prototype.listenerCount=function(f){var h=n?n+f:f,g=this._events[h];return g?g.fn?1:g.length:0},l.prototype.emit=function(f,h,g,v,E,b){var S=n?n+f:f;if(!this._events[S])return!1;var A=this._events[S],I=arguments.length,N,D;if(A.fn){switch(A.once&&this.removeListener(f,A.fn,void 0,!0),I){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,g),!0;case 4:return A.fn.call(A.context,h,g,v),!0;case 5:return A.fn.call(A.context,h,g,v,E),!0;case 6:return A.fn.call(A.context,h,g,v,E,b),!0}for(D=1,N=new Array(I-1);D<I;D++)N[D-1]=arguments[D];A.fn.apply(A.context,N)}else{var V=A.length,q;for(D=0;D<V;D++)switch(A[D].once&&this.removeListener(f,A[D].fn,void 0,!0),I){case 1:A[D].fn.call(A[D].context);break;case 2:A[D].fn.call(A[D].context,h);break;case 3:A[D].fn.call(A[D].context,h,g);break;case 4:A[D].fn.call(A[D].context,h,g,v);break;default:if(!N)for(q=1,N=new Array(I-1);q<I;q++)N[q-1]=arguments[q];A[D].fn.apply(A[D].context,N)}}return!0},l.prototype.on=function(f,h,g){return o(this,f,h,g,!1)},l.prototype.once=function(f,h,g){return o(this,f,h,g,!0)},l.prototype.removeListener=function(f,h,g,v){var E=n?n+f:f;if(!this._events[E])return this;if(!h)return s(this,E),this;var b=this._events[E];if(b.fn)b.fn===h&&(!v||b.once)&&(!g||b.context===g)&&s(this,E);else{for(var S=0,A=[],I=b.length;S<I;S++)(b[S].fn!==h||v&&!b[S].once||g&&b[S].context!==g)&&A.push(b[S]);A.length?this._events[E]=A.length===1?A[0]:A:s(this,E)}return this},l.prototype.removeAllListeners=function(f){var h;return f?(h=n?n+f:f,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(mS)),mS.exports}var Ahe=She();const Che=cs(Ahe);var Mm=new Che,uC="recharts.syncEvent.tooltip",GL="recharts.syncEvent.brush";function xhe(t,e){if(e){var n=Number.parseInt(e,10);if(!Zi(n))return t==null?void 0:t[n]}}var Ihe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},tH=Ii({name:"options",initialState:Ihe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Rhe=tH.reducer,{createEventEmitter:Phe}=tH.actions;function Mhe(t){return t.tooltip.syncInteraction}var Nhe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},nH=Ii({name:"chartData",initialState:Nhe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:jL,setDataStartEndIndexes:Dhe,setComputedData:_Ie}=nH.actions,khe=nH.reducer,Ohe=["x","y"];function KL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KL(Object(n),!0).forEach(function(r){Lhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lhe(t,e,n){return(e=Vhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vhe(t){var e=Uhe(t,"string");return typeof e=="symbol"?e:e+""}function Uhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fhe(t,e){if(t==null)return{};var n,r,i=Bhe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rH=()=>{};function qhe(){var t=$e(AR),e=$e(CR),n=rr(),r=$e(B$),i=$e(ga),o=YI(),s=WI(),l=$e(c=>c.rootProps.className);R.useEffect(()=>{if(t==null)return rH;var c=(f,h,g)=>{if(e!==g&&t===f){if(r==="index"){var v;if(s&&h!==null&&h!==void 0&&(v=h.payload)!==null&&v!==void 0&&v.coordinate){var E=h.payload.coordinate,{x:b,y:S}=E,A=Fhe(E,Ohe),I=yu(yu(yu({},A),typeof b=="number"&&{x:Math.max(s.x,Math.min(b,s.x+s.width))}),typeof S=="number"&&{y:Math.max(s.y,Math.min(S,s.y+s.height))}),N=yu(yu({},h),{},{payload:yu(yu({},h.payload),{},{coordinate:I})});n(N)}else n(h);return}if(i!=null){var D;if(typeof r=="function"){var V={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},q=r(i,V);D=i[q]}else r==="value"&&(D=i.find(H=>String(H.value)===h.payload.label));var{coordinate:z}=h.payload;if(D==null||h.payload.active===!1||z==null||s==null){n(sC({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:O,y:L}=z,k=Math.min(O,s.x+s.width),$=Math.min(L,s.y+s.height),F={x:o==="horizontal"?D.coordinate:k,y:o==="horizontal"?$:D.coordinate},G=sC({active:h.payload.active,coordinate:F,dataKey:h.payload.dataKey,index:String(D.index),label:h.payload.label});n(G)}}};return Mm.on(uC,c),()=>{Mm.off(uC,c)}},[l,n,e,t,r,i,o,s])}function $he(){var t=$e(AR),e=$e(CR),n=rr();R.useEffect(()=>{if(t==null)return rH;var r=(i,o,s)=>{e!==s&&t===i&&n(Dhe(o))};return Mm.on(GL,r),()=>{Mm.off(GL,r)}},[n,e,t])}function zhe(){var t=rr();R.useEffect(()=>{t(Phe())},[t]),qhe(),$he()}function Hhe(t,e,n,r,i,o){var s=$e(v=>hhe(v,t,e)),l=$e(CR),c=$e(AR),f=$e(B$),h=$e(Mhe),g=h==null?void 0:h.active;R.useEffect(()=>{if(!g&&c!=null&&l!=null){var v=sC({active:o,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r});Mm.emit(uC,c,v,l)}},[g,n,s,i,r,l,c,f,o])}function WL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WL(Object(n),!0).forEach(function(r){Ghe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ghe(t,e,n){return(e=jhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jhe(t){var e=Khe(t,"string");return typeof e=="symbol"?e:e+""}function Khe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Whe(t){return t.dataKey}function Yhe(t,e){return R.isValidElement(t)?R.cloneElement(t,e):typeof t=="function"?R.createElement(t,e):R.createElement(vae,e)}var JL=[],Jhe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!sg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Qhe(t){var e=Dl(t,Jhe),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:s,filterNull:l,isAnimationActive:c,offset:f,payloadUniqBy:h,position:g,reverseDirection:v,useTranslate3d:E,wrapperStyle:b,cursor:S,shared:A,trigger:I,defaultIndex:N,portal:D,axisId:V}=e,q=rr(),z=typeof N=="number"?String(N):N;R.useEffect(()=>{q(vde({shared:A,trigger:I,axisId:V,active:n,defaultIndex:z}))},[q,A,I,V,n,z]);var O=WI(),L=k5(),k=hde(A),{activeIndex:$,isActive:F}=$e(Be=>ghe(Be,k,I,z)),G=$e(Be=>mhe(Be,k,I,z)),H=$e(Be=>Zz(Be,k,I,z)),Ae=$e(Be=>phe(Be,k,I,z)),Re=G,ee=bhe(),he=n??F,[Ee,Le]=Toe([Re,he]),K=k==="axis"?H:void 0;Hhe(k,I,Ae,K,$,he);var ae=D??ee;if(ae==null)return null;var ue=Re??JL;he||(ue=JL),l&&ue.length&&(ue=jie(Re.filter(Be=>Be.value!=null&&(Be.hide!==!0||e.includeHidden)),h,Whe));var ve=ue.length>0,Pe=R.createElement(Aae,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:c,active:he,coordinate:Ae,hasPayload:ve,offset:f,position:g,reverseDirection:v,useTranslate3d:E,viewBox:O,wrapperStyle:b,lastBoundingBox:Ee,innerRef:Le,hasPortalFromProps:!!D},Yhe(s,YL(YL({},e),{},{payload:ue,label:K,active:he,coordinate:Ae,accessibilityLayer:L})));return R.createElement(R.Fragment,null,I7.createPortal(Pe,ae),he&&R.createElement(whe,{cursor:S,tooltipEventType:k,coordinate:Ae,payload:Re,index:$}))}var gS={},yS={},vS={},QL;function Xhe(){return QL||(QL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:o}={}){let s,l=null;const c=o!=null&&o.includes("leading"),f=o==null||o.includes("trailing"),h=()=>{l!==null&&(n.apply(s,l),s=void 0,l=null)},g=()=>{f&&h(),S()};let v=null;const E=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},r)},b=()=>{v!==null&&(clearTimeout(v),v=null)},S=()=>{b(),s=void 0,l=null},A=()=>{h()},I=function(...N){if(i!=null&&i.aborted)return;s=this,l=N;const D=v==null;E(),c&&D&&h()};return I.schedule=E,I.cancel=S,I.flush=A,i==null||i.addEventListener("abort",S,{once:!0}),I}t.debounce=e})(vS)),vS}var XL;function Zhe(){return XL||(XL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xhe();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:s=!1,trailing:l=!0,maxWait:c}=o,f=Array(2);s&&(f[0]="leading"),l&&(f[1]="trailing");let h,g=null;const v=e.debounce(function(...S){h=r.apply(this,S),g=null},i,{edges:f}),E=function(...S){return c!=null&&(g===null&&(g=Date.now()),Date.now()-g>=c)?(h=r.apply(this,S),g=Date.now(),v.cancel(),v.schedule(),h):(v.apply(this,S),h)},b=()=>(v.flush(),h);return E.cancel=v.cancel,E.flush=b,E}t.debounce=n})(yS)),yS}var ZL;function epe(){return ZL||(ZL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zhe();function n(r,i=0,o={}){const{leading:s=!0,trailing:l=!0}=o;return e.debounce(r,i,{leading:s,maxWait:i,trailing:l})}t.throttle=n})(gS)),gS}var _S,eV;function tpe(){return eV||(eV=1,_S=epe().throttle),_S}var npe=tpe();const rpe=cs(npe);var TS=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function tV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ES(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tV(Object(n),!0).forEach(function(r){ipe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ipe(t,e,n){return(e=ope(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ope(t){var e=spe(t,"string");return typeof e=="symbol"?e:e+""}function spe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ape=R.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:s=0,minHeight:l,maxHeight:c,children:f,debounce:h=0,id:g,className:v,onResize:E,style:b={}}=t,S=R.useRef(null),A=R.useRef();A.current=E,R.useImperativeHandle(e,()=>S.current);var[I,N]=R.useState({containerWidth:r.width,containerHeight:r.height}),D=R.useCallback((q,z)=>{N(O=>{var L=Math.round(q),k=Math.round(z);return O.containerWidth===L&&O.containerHeight===k?O:{containerWidth:L,containerHeight:k}})},[]);R.useEffect(()=>{var q=k=>{var $,{width:F,height:G}=k[0].contentRect;D(F,G),($=A.current)===null||$===void 0||$.call(A,F,G)};h>0&&(q=rpe(q,h,{trailing:!0,leading:!1}));var z=new ResizeObserver(q),{width:O,height:L}=S.current.getBoundingClientRect();return D(O,L),z.observe(S.current),()=>{z.disconnect()}},[D,h]);var V=R.useMemo(()=>{var{containerWidth:q,containerHeight:z}=I;if(q<0||z<0)return null;TS(Du(i)||Du(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),TS(!n||n>0,"The aspect(%s) must be greater than zero.",n);var O=Du(i)?q:i,L=Du(o)?z:o;return n&&n>0&&(O?L=O/n:L&&(O=L*n),c&&L>c&&(L=c)),TS(O>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,L,i,o,s,l,n),R.Children.map(f,k=>R.cloneElement(k,{width:O,height:L,style:ES({width:O,height:L},k.props.style)}))},[n,f,o,c,l,s,I,i]);return R.createElement("div",{id:g?"".concat(g):void 0,className:Gt("recharts-responsive-container",v),style:ES(ES({},b),{},{width:i,height:o,minWidth:s,minHeight:l,maxHeight:c}),ref:S},R.createElement("div",{style:{width:0,height:0,overflow:"visible"}},V))}),iH=t=>null;iH.displayName="Cell";function lpe(t,e,n){return(e=upe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function upe(t){var e=cpe(t,"string");return typeof e=="symbol"?e:e+""}function cpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class fpe{constructor(e){lpe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function nV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nV(Object(n),!0).forEach(function(r){hpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hpe(t,e,n){return(e=ppe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ppe(t){var e=mpe(t,"string");return typeof e=="symbol"?e:e+""}function mpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gpe={cacheSize:2e3,enableCache:!0},oH=dpe({},gpe),rV=new fpe(oH.cacheSize),ype={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},iV="recharts_measurement_span";function vpe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",o=e.fontStyle||"",s=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(s,"|").concat(l)}var oV=(t,e)=>{try{var n=document.getElementById(iV);n||(n=document.createElement("span"),n.setAttribute("id",iV),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,ype,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Wp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||sg.isSsr)return{width:0,height:0};if(!oH.enableCache)return oV(e,n);var r=vpe(e,n),i=rV.get(r);if(i)return i;var o=oV(e,n);return rV.set(r,o),o},sV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_pe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Tpe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Epe=Object.keys(sH),Af="NaN";function wpe(t,e){return t*sH[e]}class Qr{static parse(e){var n,[,r,i]=(n=Tpe.exec(e))!==null&&n!==void 0?n:[];return new Qr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Zi(e)&&(this.unit=""),n!==""&&!_pe.test(n)&&(this.num=NaN,this.unit=""),Epe.includes(n)&&(this.num=wpe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Zi(this.num)}}function aH(t){if(t.includes(Af))return Af;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,o]=(n=sV.exec(e))!==null&&n!==void 0?n:[],s=Qr.parse(r??""),l=Qr.parse(o??""),c=i==="*"?s.multiply(l):s.divide(l);if(c.isNaN())return Af;e=e.replace(sV,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,h,g,v]=(f=aV.exec(e))!==null&&f!==void 0?f:[],E=Qr.parse(h??""),b=Qr.parse(v??""),S=g==="+"?E.add(b):E.subtract(b);if(S.isNaN())return Af;e=e.replace(aV,S.toString())}return e}var lV=/\(([^()]*)\)/;function bpe(t){for(var e=t,n;(n=lV.exec(e))!=null;){var[,r]=n;e=e.replace(lV,aH(r))}return e}function Spe(t){var e=t.replace(/\s+/g,"");return e=bpe(e),e=aH(e),e}function Ape(t){try{return Spe(t)}catch{return Af}}function wS(t){var e=Ape(t.slice(5,-1));return e===Af?"":e}var Cpe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],xpe=["dx","dy","angle","className","breakAll"];function cC(){return cC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cC.apply(null,arguments)}function uV(t,e){if(t==null)return{};var n,r,i=Ipe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ipe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lH=/[ \f\n\r\t\v\u2028\u2029]+/,uH=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];nr(e)||(n?i=e.toString().split(""):i=e.toString().split(lH));var o=i.map(l=>({word:l,width:Wp(l,r).width})),s=n?0:Wp(" ",r).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Rpe=(t,e,n,r,i)=>{var{maxLines:o,children:s,style:l,breakAll:c}=t,f=Qe(o),h=s,g=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce((G,H)=>{var{word:Ae,width:Re}=H,ee=G[G.length-1];if(ee&&(r==null||i||ee.width+Re+n<Number(r)))ee.words.push(Ae),ee.width+=Re+n;else{var he={words:[Ae],width:Re};G.push(he)}return G},[])},v=g(e),E=$=>$.reduce((F,G)=>F.width>G.width?F:G);if(!f||i)return v;var b=v.length>o||E(v).width>Number(r);if(!b)return v;for(var S="…",A=$=>{var F=h.slice(0,$),G=uH({breakAll:c,style:l,children:F+S}).wordsWithComputedWidth,H=g(G),Ae=H.length>o||E(H).width>Number(r);return[Ae,H]},I=0,N=h.length-1,D=0,V;I<=N&&D<=h.length-1;){var q=Math.floor((I+N)/2),z=q-1,[O,L]=A(z),[k]=A(q);if(!O&&!k&&(I=q+1),O&&k&&(N=q-1),!O&&k){V=L;break}D++}return V||v},cV=t=>{var e=nr(t)?[]:t.toString().split(lH);return[{words:e}]},Ppe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:s}=t;if((e||n)&&!sg.isSsr){var l,c,f=uH({breakAll:o,children:r,style:i});if(f){var{wordsWithComputedWidth:h,spaceWidth:g}=f;l=h,c=g}else return cV(r);return Rpe({breakAll:o,children:r,maxLines:s,style:i},l,c,e,n)}return cV(r)},fV="#808080",YR=R.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:s=!1,textAnchor:l="start",verticalAnchor:c="end",fill:f=fV}=t,h=uV(t,Cpe),g=R.useMemo(()=>Ppe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:s,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,s,h.style,h.width]),{dx:v,dy:E,angle:b,className:S,breakAll:A}=h,I=uV(h,xpe);if(!ls(n)||!ls(r)||g.length===0)return null;var N=n+(Qe(v)?v:0),D=r+(Qe(E)?E:0),V;switch(c){case"start":V=wS("calc(".concat(o,")"));break;case"middle":V=wS("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:V=wS("calc(".concat(g.length-1," * -").concat(i,")"));break}var q=[];if(s){var z=g[0].width,{width:O}=h;q.push("scale(".concat(Qe(O)?O/z:1,")"))}return b&&q.push("rotate(".concat(b,", ").concat(N,", ").concat(D,")")),q.length&&(I.transform=q.join(" ")),R.createElement("text",cC({},Zn(I,!0),{ref:e,x:N,y:D,className:Gt("recharts-text",S),textAnchor:l,fill:f.includes("url")?fV:f}),g.map((L,k)=>{var $=L.words.join(A?"":" ");return R.createElement("tspan",{x:N,dy:k===0?V:i,key:"".concat($,"-").concat(k)},$)}))});YR.displayName="Text";var Mpe=["labelRef"];function Npe(t,e){if(t==null)return{};var n,r,i=Dpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function dV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function En(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dV(Object(n),!0).forEach(function(r){kpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kpe(t,e,n){return(e=Ope(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ope(t){var e=Lpe(t,"string");return typeof e=="symbol"?e:e+""}function Lpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Us(){return Us=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Us.apply(null,arguments)}var cH=R.createContext(null),Vpe=t=>{var{x:e,y:n,width:r,height:i,children:o}=t,s=R.useMemo(()=>({x:e,y:n,width:r,height:i}),[e,n,r,i]);return R.createElement(cH.Provider,{value:s},o)},fH=()=>{var t=R.useContext(cH),e=WI();return t||e},Upe=R.createContext(null),Fpe=()=>{var t=R.useContext(Upe),e=$e(G$);return t||e},Bpe=t=>{var{value:e,formatter:n}=t,r=nr(t.children)?e:t.children;return typeof n=="function"?n(r):r},JR=t=>t!=null&&typeof t=="function",qpe=(t,e)=>{var n=Ei(e-t),r=Math.min(Math.abs(e-t),360);return n*r},$pe=(t,e,n,r,i)=>{var{offset:o,className:s}=t,{cx:l,cy:c,innerRadius:f,outerRadius:h,startAngle:g,endAngle:v,clockWise:E}=i,b=(f+h)/2,S=qpe(g,v),A=S>=0?1:-1,I,N;switch(e){case"insideStart":I=g+A*o,N=E;break;case"insideEnd":I=v-A*o,N=!E;break;case"end":I=v+A*o,N=E;break;default:throw new Error("Unsupported position ".concat(e))}N=S<=0?N:!N;var D=yr(l,c,b,I),V=yr(l,c,b,I+(N?1:-1)*359),q="M".concat(D.x,",").concat(D.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(N?0:1,`,
    `).concat(V.x,",").concat(V.y),z=nr(t.id)?wm("recharts-radial-line-"):t.id;return R.createElement("text",Us({},r,{dominantBaseline:"central",className:Gt("recharts-radial-bar-label",s)}),R.createElement("defs",null,R.createElement("path",{id:z,d:q})),R.createElement("textPath",{xlinkHref:"#".concat(z)},n))},zpe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:l,endAngle:c}=t,f=(l+c)/2;if(n==="outside"){var{x:h,y:g}=yr(r,i,s+e,f);return{x:h,y:g,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(o+s)/2,{x:E,y:b}=yr(r,i,v,f);return{x:E,y:b,textAnchor:"middle",verticalAnchor:"middle"}},dH=t=>"cx"in t&&Qe(t.cx),Hpe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,o;n!=null&&!dH(n)&&(o=n);var{x:s,y:l,width:c,height:f}=e,h=f>=0?1:-1,g=h*r,v=h>0?"end":"start",E=h>0?"start":"end",b=c>=0?1:-1,S=b*r,A=b>0?"end":"start",I=b>0?"start":"end";if(i==="top"){var N={x:s+c/2,y:l-h*r,textAnchor:"middle",verticalAnchor:v};return En(En({},N),o?{height:Math.max(l-o.y,0),width:c}:{})}if(i==="bottom"){var D={x:s+c/2,y:l+f+g,textAnchor:"middle",verticalAnchor:E};return En(En({},D),o?{height:Math.max(o.y+o.height-(l+f),0),width:c}:{})}if(i==="left"){var V={x:s-S,y:l+f/2,textAnchor:A,verticalAnchor:"middle"};return En(En({},V),o?{width:Math.max(V.x-o.x,0),height:f}:{})}if(i==="right"){var q={x:s+c+S,y:l+f/2,textAnchor:I,verticalAnchor:"middle"};return En(En({},q),o?{width:Math.max(o.x+o.width-q.x,0),height:f}:{})}var z=o?{width:c,height:f}:{};return i==="insideLeft"?En({x:s+S,y:l+f/2,textAnchor:I,verticalAnchor:"middle"},z):i==="insideRight"?En({x:s+c-S,y:l+f/2,textAnchor:A,verticalAnchor:"middle"},z):i==="insideTop"?En({x:s+c/2,y:l+g,textAnchor:"middle",verticalAnchor:E},z):i==="insideBottom"?En({x:s+c/2,y:l+f-g,textAnchor:"middle",verticalAnchor:v},z):i==="insideTopLeft"?En({x:s+S,y:l+g,textAnchor:I,verticalAnchor:E},z):i==="insideTopRight"?En({x:s+c-S,y:l+g,textAnchor:A,verticalAnchor:E},z):i==="insideBottomLeft"?En({x:s+S,y:l+f-g,textAnchor:I,verticalAnchor:v},z):i==="insideBottomRight"?En({x:s+c-S,y:l+f-g,textAnchor:A,verticalAnchor:v},z):i&&typeof i=="object"&&(Qe(i.x)||Du(i.x))&&(Qe(i.y)||Du(i.y))?En({x:s+vo(i.x,c),y:l+vo(i.y,f),textAnchor:"end",verticalAnchor:"end"},z):En({x:s+c/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},z)},Gpe={offset:5};function Xa(t){var e=Dl(t,Gpe),{viewBox:n,position:r,value:i,children:o,content:s,className:l="",textBreakAll:c,labelRef:f}=e,h=Fpe(),g=fH(),v=r==="center"?g:h??g,E=n||v;if(!E||nr(i)&&nr(o)&&!R.isValidElement(s)&&typeof s!="function")return null;var b=En(En({},e),{},{viewBox:E});if(R.isValidElement(s)){var{labelRef:S}=b,A=Npe(b,Mpe);return R.cloneElement(s,A)}var I;if(typeof s=="function"){if(I=R.createElement(s,b),R.isValidElement(I))return I}else I=Bpe(e);var N=dH(E),D=Zn(e,!0);if(N&&(r==="insideStart"||r==="insideEnd"||r==="end"))return $pe(e,r,I,D,E);var V=N?zpe(E,e.offset,e.position):Hpe(e,E);return R.createElement(YR,Us({ref:f,className:Gt("recharts-label",l)},D,V,{breakAll:c}),I)}Xa.displayName="Label";var jpe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?R.createElement(Xa,Us({key:"label-implicit"},r)):ls(t)?R.createElement(Xa,Us({key:"label-implicit",value:t},r)):R.isValidElement(t)?t.type===Xa?R.cloneElement(t,En({key:"label-implicit"},r)):R.createElement(Xa,Us({key:"label-implicit",content:t},r)):JR(t)?R.createElement(Xa,Us({key:"label-implicit",content:t},r)):t&&typeof t=="object"?R.createElement(Xa,Us({},t,{key:"label-implicit"},r)):null};function Kpe(t){var{label:e}=t,n=fH();return jpe(e,n)||null}var bS={},SS={},hV;function Wpe(){return hV||(hV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(SS)),SS}var AS={},pV;function Ype(){return pV||(pV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(AS)),AS}var mV;function Jpe(){return mV||(mV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wpe(),n=Ype(),r=UI();function i(o){if(r.isArrayLike(o))return e.last(n.toArray(o))}t.last=i})(bS)),bS}var CS,gV;function Qpe(){return gV||(gV=1,CS=Jpe().last),CS}var Xpe=Qpe();const Zpe=cs(Xpe);var eme=["valueAccessor"],tme=["dataKey","clockWise","id","textBreakAll"];function $_(){return $_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$_.apply(null,arguments)}function yV(t,e){if(t==null)return{};var n,r,i=nme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rme=t=>Array.isArray(t.value)?Zpe(t.value):t.value,hH=R.createContext(void 0),ime=hH.Provider,pH=R.createContext(void 0);pH.Provider;function ome(){return R.useContext(hH)}function sme(){return R.useContext(pH)}function Dv(t){var{valueAccessor:e=rme}=t,n=yV(t,eme),{dataKey:r,clockWise:i,id:o,textBreakAll:s}=n,l=yV(n,tme),c=ome(),f=sme(),h=c||f;return!h||!h.length?null:R.createElement(wl,{className:"recharts-label-list"},h.map((g,v)=>{var E,b=nr(r)?e(g,v):Hr(g&&g.payload,r),S=nr(o)?{}:{id:"".concat(o,"-").concat(v)};return R.createElement(Xa,$_({},Zn(g,!0),l,S,{fill:(E=n.fill)!==null&&E!==void 0?E:g.fill,parentViewBox:g.parentViewBox,value:b,textBreakAll:s,viewBox:g.viewBox,key:"label-".concat(v),index:v}))}))}Dv.displayName="LabelList";function ame(t){var{label:e}=t;return e?e===!0?R.createElement(Dv,{key:"labelList-implicit"}):R.isValidElement(e)||JR(e)?R.createElement(Dv,{key:"labelList-implicit",content:e}):typeof e=="object"?R.createElement(Dv,$_({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var lme={radiusAxis:{},angleAxis:{}},mH=Ii({name:"polarAxis",initialState:lme,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:TIe,removeRadiusAxis:EIe,addAngleAxis:wIe,removeAngleAxis:bIe}=mH.actions,ume=mH.reducer,xS={},vV;function cme(){return vV||(vV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${o}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(xS)),xS}var IS,_V;function fme(){return _V||(_V=1,IS=cme().isPlainObject),IS}var dme=fme();const hme=cs(dme);function TV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TV(Object(n),!0).forEach(function(r){pme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pme(t,e,n){return(e=mme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mme(t){var e=gme(t,"string");return typeof e=="symbol"?e:e+""}function gme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z_(){return z_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z_.apply(null,arguments)}var wV=(t,e,n,r,i)=>{var o=n-r,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+n,",").concat(e),s+="L ".concat(t+n-o/2,",").concat(e+i),s+="L ".concat(t+n-o/2-r,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},yme={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vme=t=>{var e=Dl(t,yme),{x:n,y:r,upperWidth:i,lowerWidth:o,height:s,className:l}=e,{animationEasing:c,animationDuration:f,animationBegin:h,isUpdateAnimationActive:g}=e,v=R.useRef(),[E,b]=R.useState(-1),S=R.useRef(i),A=R.useRef(o),I=R.useRef(s),N=R.useRef(n),D=R.useRef(r),V=QI(t,"trapezoid-");if(R.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var Ae=v.current.getTotalLength();Ae&&b(Ae)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||s!==+s||i===0&&o===0||s===0)return null;var q=Gt("recharts-trapezoid",l);if(!g)return R.createElement("g",null,R.createElement("path",z_({},Zn(e,!0),{className:q,d:wV(n,r,i,o,s)})));var z=S.current,O=A.current,L=I.current,k=N.current,$=D.current,F="0px ".concat(E===-1?1:E,"px"),G="".concat(E,"px 0px"),H=O5(["strokeDasharray"],f,c);return R.createElement(JI,{animationId:V,key:V,canBegin:E>0,duration:f,easing:c,isActive:g,begin:h},Ae=>{var Re=Br(z,i,Ae),ee=Br(O,o,Ae),he=Br(L,s,Ae),Ee=Br(k,n,Ae),Le=Br($,r,Ae);v.current&&(S.current=Re,A.current=ee,I.current=he,N.current=Ee,D.current=Le);var K=Ae>0?{transition:H,strokeDasharray:G}:{strokeDasharray:F};return R.createElement("path",z_({},Zn(e,!0),{className:q,d:wV(Ee,Le,Re,ee,he),ref:v,style:EV(EV({},K),e.style)}))})},_me=["option","shapeType","propTransformer","activeClassName","isActive"];function Tme(t,e){if(t==null)return{};var n,r,i=Eme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Eme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bV(Object(n),!0).forEach(function(r){wme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wme(t,e,n){return(e=bme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bme(t){var e=Sme(t,"string");return typeof e=="symbol"?e:e+""}function Sme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ame(t,e){return H_(H_({},e),t)}function Cme(t,e){return t==="symbols"}function SV(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return R.createElement(F5,n);case"trapezoid":return R.createElement(vme,n);case"sector":return R.createElement($5,n);case"symbols":if(Cme(e))return R.createElement(K3,n);break;default:return null}}function xme(t){return R.isValidElement(t)?t.props:t}function Ime(t){var{option:e,shapeType:n,propTransformer:r=Ame,activeClassName:i="recharts-active-shape",isActive:o}=t,s=Tme(t,_me),l;if(R.isValidElement(e))l=R.cloneElement(e,H_(H_({},s),xme(e)));else if(typeof e=="function")l=e(s);else if(hme(e)&&typeof e!="boolean"){var c=r(e,s);l=R.createElement(SV,{shapeType:n,elementProps:c})}else{var f=s;l=R.createElement(SV,{shapeType:n,elementProps:f})}return o?R.createElement(wl,{className:i},l):l}var gH=(t,e)=>{var n=rr();return(r,i)=>o=>{t==null||t(r,i,o),n(Oz({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},yH=t=>{var e=rr();return(n,r)=>i=>{t==null||t(n,r,i),e(_de())}},vH=(t,e)=>{var n=rr();return(r,i)=>o=>{t==null||t(r,i,o),n(Tde({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function Rme(t){var{fn:e,args:n}=t,r=rr(),i=wo();return R.useEffect(()=>{if(!i){var o=e(n);return r(gde(o)),()=>{r(yde(o))}}},[e,n,r,i]),null}var Pme=()=>{};function Mme(t){var{legendPayload:e}=t,n=rr(),r=wo();return R.useEffect(()=>r?Pme:(n(fae(e)),()=>{n(dae(e))}),[n,r,e]),null}var RS,Nme=()=>{var[t]=R.useState(()=>wm("uid-"));return t},Dme=(RS=Z9.useId)!==null&&RS!==void 0?RS:Nme;function kme(t,e){var n=Dme();return e||(t?"".concat(t,"-").concat(n):n)}var Ome=R.createContext(void 0),Lme=t=>{var{id:e,type:n,children:r}=t,i=kme("recharts-".concat(n),e);return R.createElement(Ome.Provider,{value:i},r(i))},Vme={cartesianItems:[],polarItems:[]},_H=Ii({name:"graphicalItems",initialState:Vme,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,i=js(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},removeCartesianGraphicalItem(t,e){var n=js(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=js(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:Ume,replaceCartesianGraphicalItem:Fme,removeCartesianGraphicalItem:Bme,addPolarGraphicalItem:SIe,removePolarGraphicalItem:AIe}=_H.actions,qme=_H.reducer;function $me(t){var e=rr(),n=R.useRef(null);return R.useEffect(()=>{n.current===null?e(Ume(t)):n.current!==t&&e(Fme({prev:n.current,next:t})),n.current=t},[e,t]),R.useEffect(()=>()=>{n.current&&(e(Bme(n.current)),n.current=null)},[e]),null}function AV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(n),!0).forEach(function(r){zme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zme(t,e,n){return(e=Hme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hme(t){var e=Gme(t,"string");return typeof e=="symbol"?e:e+""}function Gme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jme={xAxis:{},yAxis:{},zAxis:{}},TH=Ii({name:"cartesianAxis",initialState:jme,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=CV(CV({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:Kme,removeXAxis:Wme,addYAxis:Yme,removeYAxis:Jme,addZAxis:CIe,removeZAxis:xIe,updateYAxisWidth:Qme}=TH.actions,Xme=TH.reducer,Zme=se([ir],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),ege=se([Zme,ha,pa],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),EH=()=>$e(ege),tge="Invariant failed";function nge(t,e){throw new Error(tge)}var rge=["x","y"];function fC(){return fC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fC.apply(null,arguments)}function xV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(n),!0).forEach(function(r){ige(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ige(t,e,n){return(e=oge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oge(t){var e=sge(t,"string");return typeof e=="symbol"?e:e+""}function sge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function age(t,e){if(t==null)return{};var n,r,i=lge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uge(t,e){var{x:n,y:r}=t,i=age(t,rge),o="".concat(n),s=parseInt(o,10),l="".concat(r),c=parseInt(l,10),f="".concat(e.height||i.height),h=parseInt(f,10),g="".concat(e.width||i.width),v=parseInt(g,10);return vp(vp(vp(vp(vp({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:h,width:v,name:e.name,radius:e.radius})}function QR(t){return R.createElement(Ime,fC({shapeType:"rectangle",propTransformer:uge,activeClassName:"recharts-active-bar"},t))}var cge=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Qe(e))return e;var o=Qe(r)||nr(r);return o?e(r,i):(o||nge(),n)}},fge={},wH=Ii({name:"errorBars",initialState:fge,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:IIe,replaceErrorBar:RIe,removeErrorBar:PIe}=wH.actions,dge=wH.reducer,hge=["children"];function pge(t,e){if(t==null)return{};var n,r,i=mge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gge={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},yge=R.createContext(gge);function vge(t){var{children:e}=t,n=pge(t,hge);return R.createElement(yge.Provider,{value:n},e)}function bH(t,e){var n,r,i=$e(f=>Vl(f,t)),o=$e(f=>Ul(f,e)),s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:hi.allowDataOverflow,l=(r=o==null?void 0:o.allowDataOverflow)!==null&&r!==void 0?r:pi.allowDataOverflow,c=s||l;return{needClip:c,needClipX:s,needClipY:l}}function _ge(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=EH(),{needClipX:o,needClipY:s,needClip:l}=bH(e,n);if(!l)return null;var{x:c,y:f,width:h,height:g}=i;return R.createElement("clipPath",{id:"clipPath-".concat(r)},R.createElement("rect",{x:o?c:c-h/2,y:s?f:f-g/2,width:o?h:h*2,height:s?g:g*2}))}var Tge=["onMouseEnter","onMouseLeave","onClick"],Ege=["value","background","tooltipPosition"],wge=["id"],bge=["onMouseEnter","onClick","onMouseLeave"];function bl(){return bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bl.apply(null,arguments)}function IV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IV(Object(n),!0).forEach(function(r){Sge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sge(t,e,n){return(e=Age(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Age(t){var e=Cge(t,"string");return typeof e=="symbol"?e:e+""}function Cge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G_(t,e){if(t==null)return{};var n,r,i=xge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ige=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:M5(n,e),payload:t}]};function Rge(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:o,hide:s,unit:l}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:M5(o,e),hide:s,type:t.tooltipType,color:t.fill,unit:l}}}function Pge(t){var e=$e(_d),{data:n,dataKey:r,background:i,allOtherBarProps:o}=t,{onMouseEnter:s,onMouseLeave:l,onClick:c}=o,f=G_(o,Tge),h=gH(s,r),g=yH(l),v=vH(c,r);if(!i||n==null)return null;var E=Zn(i,!1);return R.createElement(R.Fragment,null,n.map((b,S)=>{var{value:A,background:I,tooltipPosition:N}=b,D=G_(b,Ege);if(!I)return null;var V=h(b,S),q=g(b,S),z=v(b,S),O=qr(qr(qr(qr(qr({option:i,isActive:String(S)===e},D),{},{fill:"#eee"},I),E),kI(f,b,S)),{},{onMouseEnter:V,onMouseLeave:q,onClick:z,dataKey:r,index:S,className:"recharts-bar-background-rectangle"});return R.createElement(QR,bl({key:"background-bar-".concat(S)},O))}))}function Mge(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(o=>{var s={x:o.x,y:o.y,width:o.width,height:o.height};return qr(qr({},s),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:s,fill:o.fill})});return R.createElement(ime,{value:e?i:void 0},n)}function Nge(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:o,dataKey:s}=t,l=$e(_d),c=$e(Wz),f=n&&String(o)===l&&(c==null||s===c),h=f?n:e;return R.createElement(QR,bl({},r,i,{isActive:f,option:h,index:o,dataKey:s}))}function Dge(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:o}=t;return R.createElement(QR,bl({},n,r,{isActive:!1,option:e,index:i,dataKey:o}))}function kge(t){var{data:e,props:n}=t,r=G0(n),{id:i}=r,o=G_(r,wge),{shape:s,dataKey:l,activeBar:c}=n,{onMouseEnter:f,onClick:h,onMouseLeave:g}=n,v=G_(n,bge),E=gH(f,l),b=yH(g),S=vH(h,l);return e?R.createElement(R.Fragment,null,e.map((A,I)=>R.createElement(wl,bl({className:"recharts-bar-rectangle"},kI(v,A,I),{onMouseEnter:E(A,I),onMouseLeave:b(A,I),onClick:S(A,I),key:"rectangle-".concat(A==null?void 0:A.x,"-").concat(A==null?void 0:A.y,"-").concat(A==null?void 0:A.value,"-").concat(I)}),c?R.createElement(Nge,{shape:s,activeBar:c,baseProps:o,entry:A,index:I,dataKey:l}):R.createElement(Dge,{shape:s,baseProps:o,entry:A,index:I,dataKey:l})))):null}function Oge(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:o,animationBegin:s,animationDuration:l,animationEasing:c,onAnimationEnd:f,onAnimationStart:h}=e,g=n.current,v=QI(e,"recharts-bar-"),[E,b]=R.useState(!1),S=!E,A=R.useCallback(()=>{typeof f=="function"&&f(),b(!1)},[f]),I=R.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return R.createElement(Mge,{showLabels:S,rects:r},R.createElement(JI,{animationId:v,begin:s,duration:l,isActive:o,easing:c,onAnimationEnd:A,onAnimationStart:I,key:v},N=>{var D=N===1?r:r==null?void 0:r.map((V,q)=>{var z=g&&g[q];if(z)return qr(qr({},V),{},{x:Br(z.x,V.x,N),y:Br(z.y,V.y,N),width:Br(z.width,V.width,N),height:Br(z.height,V.height,N)});if(i==="horizontal"){var O=Br(0,V.height,N);return qr(qr({},V),{},{y:V.y+V.height-O,height:O})}var L=Br(0,V.width,N);return qr(qr({},V),{},{width:L})});return N>0&&(n.current=D??null),D==null?null:R.createElement(wl,null,R.createElement(kge,{props:e,data:D}))}),R.createElement(ame,{label:e.label}),e.children)}function Lge(t){var e=R.useRef(null);return R.createElement(Oge,{previousRectanglesRef:e,props:t})}var SH=0,Vge=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Hr(t,e)}};class Uge extends R.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:s,needClip:l,background:c,id:f}=this.props;if(e||n==null)return null;var h=Gt("recharts-bar",i),g=f;return R.createElement(wl,{className:h,id:f},l&&R.createElement("defs",null,R.createElement(_ge,{clipPathId:g,xAxisId:o,yAxisId:s})),R.createElement(wl,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(g,")"):void 0},R.createElement(Pge,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),R.createElement(Lge,this.props)))}}var Fge={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!sg.isSsr,legendType:"rect",minPointSize:SH,xAxisId:0,yAxisId:0};function Bge(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:l,animationDuration:c,animationEasing:f,isAnimationActive:h}=t,{needClip:g}=bH(e,n),v=YI(),E=wo(),b=Rre(t.children,iH),S=$e(N=>hye(N,e,n,E,t.id,b));if(v!=="vertical"&&v!=="horizontal")return null;var A,I=S==null?void 0:S[0];return I==null||I.height==null||I.width==null?A=0:A=v==="vertical"?I.height/2:I.width/2,R.createElement(vge,{xAxisId:e,yAxisId:n,data:S,dataPointFormatter:Vge,errorBarOffset:A},R.createElement(Uge,bl({},t,{layout:v,needClip:g,data:S,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:l,animationDuration:c,animationEasing:f,isAnimationActive:h})))}function qge(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:s,yAxis:l,xAxisTicks:c,yAxisTicks:f,stackedData:h,displayedData:g,offset:v,cells:E,parentViewBox:b}=t,S=e==="horizontal"?l:s,A=h?S.scale.domain():null,I=Bse({numericAxis:S});return g.map((N,D)=>{var V,q,z,O,L,k;h?V=kse(h[D],A):(V=Hr(N,n),Array.isArray(V)||(V=[I,V]));var $=cge(r,SH)(V[1],D);if(e==="horizontal"){var F,[G,H]=[l.scale(V[0]),l.scale(V[1])];q=w2({axis:s,ticks:c,bandSize:o,offset:i.offset,entry:N,index:D}),z=(F=H??G)!==null&&F!==void 0?F:void 0,O=i.size;var Ae=G-H;if(L=Zi(Ae)?0:Ae,k={x:q,y:v.top,width:O,height:v.height},Math.abs($)>0&&Math.abs(L)<Math.abs($)){var Re=Ei(L||$)*(Math.abs($)-Math.abs(L));z-=Re,L+=Re}}else{var[ee,he]=[s.scale(V[0]),s.scale(V[1])];if(q=ee,z=w2({axis:l,ticks:f,bandSize:o,offset:i.offset,entry:N,index:D}),O=he-ee,L=i.size,k={x:v.left,y:z,width:v.width,height:L},Math.abs($)>0&&Math.abs(O)<Math.abs($)){var Ee=Ei(O||$)*(Math.abs($)-Math.abs(O));O+=Ee}}if(q==null||z==null||O==null||L==null)return null;var Le=qr(qr({},N),{},{x:q,y:z,width:O,height:L,value:h?V:V[1],payload:N,background:k,tooltipPosition:{x:q+O/2,y:z+L/2},parentViewBox:b},E&&E[D]&&E[D].props);return Le}).filter(Boolean)}function AH(t){var e=Dl(t,Fge),n=wo();return R.createElement(Lme,{id:e.id,type:"bar"},r=>R.createElement(R.Fragment,null,R.createElement(Mme,{legendPayload:Ige(e)}),R.createElement(Rme,{fn:Rge,args:e}),R.createElement($me,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Fse(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),R.createElement(Bge,bl({},e,{id:r}))))}AH.displayName="Bar";function RV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RV(Object(n),!0).forEach(function(r){$ge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ge(t,e,n){return(e=zge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zge(t){var e=Hge(t,"string");return typeof e=="symbol"?e:e+""}function Hge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Gge=(t,e)=>e,jge=(t,e,n)=>n,Kge=(t,e,n,r)=>r,Wge=(t,e,n,r,i)=>i,yg=se([NR,Wge],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Yge=se([yg],t=>t==null?void 0:t.maxBarSize),Jge=(t,e,n,r,i,o)=>o,PV=(t,e,n)=>{var r=n??t;if(!nr(r))return vo(r,e,0)},Qge=se([It,NR,Gge,jge,Kge],(t,e,n,r,i)=>e.filter(o=>t==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),Xge=(t,e,n,r)=>{var i=It(t);return i==="horizontal"?oC(t,"yAxis",n,r):oC(t,"xAxis",e,r)},Zge=(t,e,n)=>{var r=It(t);return r==="horizontal"?VL(t,"xAxis",e):VL(t,"yAxis",n)},eye=(t,e,n)=>{var r={},i=t.filter(gT),o=t.filter(f=>f.stackId==null),s=i.reduce((f,h)=>(f[h.stackId]||(f[h.stackId]=[]),f[h.stackId].push(h),f),r),l=Object.entries(s).map(f=>{var[h,g]=f,v=g.map(b=>b.dataKey),E=PV(e,n,g[0].barSize);return{stackId:h,dataKeys:v,barSize:E}}),c=o.map(f=>{var h=[f.dataKey].filter(v=>v!=null),g=PV(e,n,f.barSize);return{stackId:void 0,dataKeys:h,barSize:g}});return[...l,...c]},tye=se([Qge,gfe,Zge],eye),nye=(t,e,n,r,i)=>{var o,s,l=yg(t,e,n,r,i);if(l!=null){var c=It(t),f=U$(t),{maxBarSize:h}=l,g=nr(h)?f:h,v,E;return c==="horizontal"?(v=vd(t,"xAxis",e,r),E=yd(t,"xAxis",e,r)):(v=vd(t,"yAxis",n,r),E=yd(t,"yAxis",n,r)),(o=(s=jI(v,E,!0))!==null&&s!==void 0?s:g)!==null&&o!==void 0?o:0}},CH=(t,e,n,r)=>{var i=It(t),o,s;return i==="horizontal"?(o=vd(t,"xAxis",e,r),s=yd(t,"xAxis",e,r)):(o=vd(t,"yAxis",n,r),s=yd(t,"yAxis",n,r)),jI(o,s)};function rye(t,e,n,r,i){var o=r.length;if(!(o<1)){var s=vo(t,n,0,!0),l,c=[];if(xi(r[0].barSize)){var f=!1,h=n/o,g=r.reduce((I,N)=>I+(N.barSize||0),0);g+=(o-1)*s,g>=n&&(g-=(o-1)*s,s=0),g>=n&&h>0&&(f=!0,h*=.9,g=o*h);var v=(n-g)/2>>0,E={offset:v-s,size:0};l=r.reduce((I,N)=>{var D,V={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:E.offset+E.size+s,size:f?h:(D=N.barSize)!==null&&D!==void 0?D:0}},q=[...I,V];return E=q[q.length-1].position,q},c)}else{var b=vo(e,n,0,!0);n-2*b-(o-1)*s<=0&&(s=0);var S=(n-2*b-(o-1)*s)/o;S>1&&(S>>=0);var A=xi(i)?Math.min(S,i):S;l=r.reduce((I,N,D)=>[...I,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:b+(S+s)*D+(S-A)/2,size:A}}],c)}return l}}var iye=(t,e,n,r,i,o,s)=>{var l=nr(s)?e:s,c=rye(n,r,i!==o?i:o,t,l);return i!==o&&c!=null&&(c=c.map(f=>dv(dv({},f),{},{position:dv(dv({},f.position),{},{offset:f.position.offset-i/2})}))),c},oye=se([tye,U$,mfe,F$,nye,CH,Yge],iye),sye=(t,e,n,r)=>vd(t,"xAxis",e,r),aye=(t,e,n,r)=>vd(t,"yAxis",n,r),lye=(t,e,n,r)=>yd(t,"xAxis",e,r),uye=(t,e,n,r)=>yd(t,"yAxis",n,r),cye=se([oye,yg],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),fye=(t,e)=>{var n=PR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:o}=i;if(o)return o.find(s=>s.key===n)}}}},dye=se([Xge,yg],fye),hye=se([ir,KI,sye,aye,lye,uye,cye,It,ER,CH,dye,yg,Jge],(t,e,n,r,i,o,s,l,c,f,h,g,v)=>{var{chartData:E,dataStartIndex:b,dataEndIndex:S}=c;if(!(g==null||s==null||e==null||l!=="horizontal"&&l!=="vertical"||n==null||r==null||i==null||o==null||f==null)){var{data:A}=g,I;if(A!=null&&A.length>0?I=A:I=E==null?void 0:E.slice(b,S+1),I!=null)return qge({layout:l,barSettings:g,pos:s,parentViewBox:e,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:h,displayedData:I,offset:t,cells:v})}}),pye=t=>{var{chartData:e}=t,n=rr(),r=wo();return R.useEffect(()=>r?()=>{}:(n(jL(e)),()=>{n(jL(void 0))}),[e,n,r]),null},MV={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},xH=Ii({name:"brush",initialState:MV,reducers:{setBrushSettings(t,e){return e.payload==null?MV:e.payload}}}),{setBrushSettings:MIe}=xH.actions,mye=xH.reducer;function gye(t,e,n){return(e=yye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yye(t){var e=vye(t,"string");return typeof e=="symbol"?e:e+""}function vye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class XR{static create(e){return new XR(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}gye(XR,"EPS",1e-4);function _ye(t){return(t%180+180)%180}var Tye=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=_ye(i),s=o*Math.PI/180,l=Math.atan(r/n),c=s>l&&s<Math.PI-l?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},Eye={dots:[],areas:[],lines:[]},IH=Ii({name:"referenceElements",initialState:Eye,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=js(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=js(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=js(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:NIe,removeDot:DIe,addArea:kIe,removeArea:OIe,addLine:LIe,removeLine:VIe}=IH.actions,wye=IH.reducer,bye=R.createContext(void 0),Sye=t=>{var{children:e}=t,[n]=R.useState("".concat(wm("recharts"),"-clip")),r=EH();if(r==null)return null;var{x:i,y:o,width:s,height:l}=r;return R.createElement(bye.Provider,{value:n},R.createElement("defs",null,R.createElement("clipPath",{id:n},R.createElement("rect",{x:i,y:o,height:l,width:s}))),e)};function PS(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function RH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Aye(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Tye(r,n)}function Cye(t,e,n){var r=n==="width",{x:i,y:o,width:s,height:l}=t;return e===1?{start:r?i:o,end:r?i+s:o+l}:{start:r?i+s:o+l,end:r?i:o}}function j_(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function xye(t,e){return RH(t,e+1)}function Iye(t,e,n,r,i){for(var o=(r||[]).slice(),{start:s,end:l}=e,c=0,f=1,h=s,g=function(){var b=r==null?void 0:r[c];if(b===void 0)return{v:RH(r,f)};var S=c,A,I=()=>(A===void 0&&(A=n(b,S)),A),N=b.coordinate,D=c===0||j_(t,N,I,h,l);D||(c=0,h=s,f+=1),D&&(h=N+t*(I()/2+i),c+=f)},v;f<=o.length;)if(v=g(),v)return v.v;return[]}function NV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(n),!0).forEach(function(r){Rye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rye(t,e,n){return(e=Pye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pye(t){var e=Mye(t,"string");return typeof e=="symbol"?e:e+""}function Mye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nye(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,{start:l}=e,{end:c}=e,f=function(v){var E=o[v],b,S=()=>(b===void 0&&(b=n(E,v)),b);if(v===s-1){var A=t*(E.coordinate+t*S()/2-c);o[v]=E=Sr(Sr({},E),{},{tickCoord:A>0?E.coordinate-A*t:E.coordinate})}else o[v]=E=Sr(Sr({},E),{},{tickCoord:E.coordinate});var I=j_(t,E.tickCoord,S,l,c);I&&(c=E.tickCoord-t*(S()/2+i),o[v]=Sr(Sr({},E),{},{isShow:!0}))},h=s-1;h>=0;h--)f(h);return o}function Dye(t,e,n,r,i,o){var s=(r||[]).slice(),l=s.length,{start:c,end:f}=e;if(o){var h=r[l-1],g=n(h,l-1),v=t*(h.coordinate+t*g/2-f);s[l-1]=h=Sr(Sr({},h),{},{tickCoord:v>0?h.coordinate-v*t:h.coordinate});var E=j_(t,h.tickCoord,()=>g,c,f);E&&(f=h.tickCoord-t*(g/2+i),s[l-1]=Sr(Sr({},h),{},{isShow:!0}))}for(var b=o?l-1:l,S=function(N){var D=s[N],V,q=()=>(V===void 0&&(V=n(D,N)),V);if(N===0){var z=t*(D.coordinate-t*q()/2-c);s[N]=D=Sr(Sr({},D),{},{tickCoord:z<0?D.coordinate-z*t:D.coordinate})}else s[N]=D=Sr(Sr({},D),{},{tickCoord:D.coordinate});var O=j_(t,D.tickCoord,q,c,f);O&&(c=D.tickCoord+t*(q()/2+i),s[N]=Sr(Sr({},D),{},{isShow:!0}))},A=0;A<b;A++)S(A);return s}function kye(t,e,n){var{tick:r,ticks:i,viewBox:o,minTickGap:s,orientation:l,interval:c,tickFormatter:f,unit:h,angle:g}=t;if(!i||!i.length||!r)return[];if(Qe(c)||sg.isSsr){var v;return(v=xye(i,Qe(c)?c:0))!==null&&v!==void 0?v:[]}var E=[],b=l==="top"||l==="bottom"?"width":"height",S=h&&b==="width"?Wp(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},A=(D,V)=>{var q=typeof f=="function"?f(D.value,V):D.value;return b==="width"?Aye(Wp(q,{fontSize:e,letterSpacing:n}),S,g):Wp(q,{fontSize:e,letterSpacing:n})[b]},I=i.length>=2?Ei(i[1].coordinate-i[0].coordinate):1,N=Cye(o,I,b);return c==="equidistantPreserveStart"?Iye(I,N,A,i,s):(c==="preserveStart"||c==="preserveStartEnd"?E=Dye(I,N,A,i,s,c==="preserveStartEnd"):E=Nye(I,N,A,i,s),E.filter(D=>D.isShow))}var Oye=["viewBox"],Lye=["viewBox"];function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cf.apply(null,arguments)}function DV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(n),!0).forEach(function(r){ZR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kV(t,e){if(t==null)return{};var n,r,i=Vye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Vye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ZR(t,e,n){return(e=Uye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uye(t){var e=Fye(t,"string");return typeof e=="symbol"?e:e+""}function Fye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class jd extends R.Component{constructor(e){super(e),this.tickRefs=R.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,n){var{viewBox:r}=e,i=kV(e,Oye),o=this.props,{viewBox:s}=o,l=kV(o,Lye);return!PS(r,s)||!PS(i,l)||!PS(n,this.state)}getTickLineCoord(e){var{x:n,y:r,width:i,height:o,orientation:s,tickSize:l,mirror:c,tickMargin:f}=this.props,h,g,v,E,b,S,A=c?-1:1,I=e.tickSize||l,N=Qe(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=g=e.coordinate,E=r+ +!c*o,v=E-A*I,S=v-A*f,b=N;break;case"left":v=E=e.coordinate,g=n+ +!c*i,h=g-A*I,b=h-A*f,S=N;break;case"right":v=E=e.coordinate,g=n+ +c*i,h=g+A*I,b=h+A*f,S=N;break;default:h=g=e.coordinate,E=r+ +c*o,v=E+A*I,S=v+A*f,b=N;break}return{line:{x1:h,y1:v,x2:g,y2:E},tick:{x:b,y:S}}}getTickTextAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:e,y:n,width:r,height:i,orientation:o,mirror:s,axisLine:l}=this.props,c=Bn(Bn(Bn({},Zn(this.props,!1)),Zn(l,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var f=+(o==="top"&&!s||o==="bottom"&&s);c=Bn(Bn({},c),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(o==="left"&&!s||o==="right"&&s);c=Bn(Bn({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return R.createElement("line",Cf({},c,{className:Gt("recharts-cartesian-axis-line",cd(l,"className"))}))}static renderTickItem(e,n,r){var i,o=Gt(n.className,"recharts-cartesian-axis-tick-value");if(R.isValidElement(e))i=R.cloneElement(e,Bn(Bn({},n),{},{className:o}));else if(typeof e=="function")i=e(Bn(Bn({},n),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Gt(s,e.className)),i=R.createElement(YR,Cf({},n,{className:s}),r)}return i}renderTicks(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:s,tickFormatter:l,unit:c,padding:f,tickTextProps:h}=this.props,g=kye(Bn(Bn({},this.props),{},{ticks:r}),e,n),v=this.getTickTextAnchor(),E=this.getTickVerticalAnchor(),b=G0(this.props),S=Zn(s,!1),A=Bn(Bn({},b),{},{fill:"none"},Zn(i,!1)),I=g.map((N,D)=>{var{line:V,tick:q}=this.getTickLineCoord(N),z=Bn(Bn(Bn(Bn({textAnchor:v,verticalAnchor:E},b),{},{stroke:"none",fill:o},S),q),{},{index:D,payload:N,visibleTicksCount:g.length,tickFormatter:l,padding:f},h);return R.createElement(wl,Cf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},kI(this.props,N,D)),i&&R.createElement("line",Cf({},A,V,{className:Gt("recharts-cartesian-axis-tick-line",cd(i,"className"))})),s&&jd.renderTickItem(s,z,"".concat(typeof l=="function"?l(N.value,D):N.value).concat(c||"")))});return I.length>0?R.createElement("g",{className:"recharts-cartesian-axis-ticks"},I):null}render(){var{axisLine:e,width:n,height:r,className:i,hide:o}=this.props;if(o)return null;var{ticks:s}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:R.createElement(wl,{className:Gt("recharts-cartesian-axis",i),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var f=c[0];if(f){var h=window.getComputedStyle(f).fontSize,g=window.getComputedStyle(f).letterSpacing;(h!==this.state.fontSize||g!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),R.createElement(Vpe,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},R.createElement(Kpe,{label:this.props.label}),this.props.children))}}ZR(jd,"displayName","CartesianAxis");ZR(jd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Bye=["children"],qye=["dangerouslySetInnerHTML","ticks"],$ye=["id"];function PH(t,e,n){return(e=zye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zye(t){var e=Hye(t,"string");return typeof e=="symbol"?e:e+""}function Hye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dC(){return dC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dC.apply(null,arguments)}function hC(t,e){if(t==null)return{};var n,r,i=Gye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Gye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function jye(t){var e=rr(),n=R.useMemo(()=>{var{children:r}=t,i=hC(t,Bye);return i},[t]);return R.useEffect(()=>(e(Kme(n)),()=>{e(Wme(n))}),[n,e]),t.children}var Kye=t=>{var{xAxisId:e,className:n}=t,r=$e(KI),i=wo(),o="xAxis",s=$e(A=>zd(A,o,e,i)),l=$e(A=>Rz(A,o,e,i)),c=$e(A=>Az(A,e)),f=$e(A=>ade(A,e)),h=$e(A=>W$(A,e));if(c==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:g,ticks:v}=t,E=hC(t,qye),{id:b}=h,S=hC(h,$ye);return R.createElement(jd,dC({},E,S,{scale:s,x:f.x,y:f.y,width:c.width,height:c.height,className:Gt("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:l}))},Wye=t=>{var e,n,r,i,o;return R.createElement(jye,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter},R.createElement(Kye,t))};class e1 extends R.Component{render(){return R.createElement(Wye,this.props)}}PH(e1,"displayName","XAxis");PH(e1,"defaultProps",{allowDataOverflow:hi.allowDataOverflow,allowDecimals:hi.allowDecimals,allowDuplicatedCategory:hi.allowDuplicatedCategory,height:hi.height,hide:!1,mirror:hi.mirror,orientation:hi.orientation,padding:hi.padding,reversed:hi.reversed,scale:hi.scale,tickCount:hi.tickCount,type:hi.type,xAxisId:0});var Yye=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=t,s=0;if(e){e.forEach(h=>{if(h){var g=h.getBoundingClientRect();g.width>s&&(s=g.width)}});var l=n?n.getBoundingClientRect().width:0,c=i+o,f=s+c+l+(n?r:0);return Math.round(f)}return 0},Jye=["dangerouslySetInnerHTML","ticks"],Qye=["id"];function MH(t,e,n){return(e=Xye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xye(t){var e=Zye(t,"string");return typeof e=="symbol"?e:e+""}function Zye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pC(){return pC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pC.apply(null,arguments)}function OV(t,e){if(t==null)return{};var n,r,i=eve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function eve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function tve(t){var e=rr();return R.useEffect(()=>(e(Yme(t)),()=>{e(Jme(t))}),[t,e]),null}var nve=t=>{var e,{yAxisId:n,className:r,width:i,label:o}=t,s=R.useRef(null),l=R.useRef(null),c=$e(KI),f=wo(),h=rr(),g="yAxis",v=$e(z=>zd(z,g,n,f)),E=$e(z=>Cz(z,n)),b=$e(z=>lde(z,n)),S=$e(z=>Rz(z,g,n,f)),A=$e(z=>Y$(z,n));if(R.useLayoutEffect(()=>{var z;if(!(i!=="auto"||!E||JR(o)||R.isValidElement(o)||A==null)){var O=s.current,L=O==null||(z=O.tickRefs)===null||z===void 0?void 0:z.current,{tickSize:k,tickMargin:$}=O.props,F=Yye({ticks:L,label:l.current,labelGapWithTick:5,tickSize:k,tickMargin:$});Math.round(E.width)!==Math.round(F)&&h(Qme({id:n,width:F}))}},[s,s==null||(e=s.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,E==null?void 0:E.width,E,h,o,n,i]),E==null||b==null||A==null)return null;var{dangerouslySetInnerHTML:I,ticks:N}=t,D=OV(t,Jye),{id:V}=A,q=OV(A,Qye);return R.createElement(jd,pC({},D,q,{ref:s,labelRef:l,scale:v,x:b.x,y:b.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:E.width,height:E.height,className:Gt("recharts-".concat(g," ").concat(g),r),viewBox:c,ticks:S}))},rve=t=>{var e,n,r,i,o;return R.createElement(R.Fragment,null,R.createElement(tve,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter}),R.createElement(nve,t))},ive={allowDataOverflow:pi.allowDataOverflow,allowDecimals:pi.allowDecimals,allowDuplicatedCategory:pi.allowDuplicatedCategory,hide:!1,mirror:pi.mirror,orientation:pi.orientation,padding:pi.padding,reversed:pi.reversed,scale:pi.scale,tickCount:pi.tickCount,type:pi.type,width:pi.width,yAxisId:0};class t1 extends R.Component{render(){return R.createElement(rve,this.props)}}MH(t1,"displayName","YAxis");MH(t1,"defaultProps",ive);var MS={exports:{}},NS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LV;function ove(){if(LV)return NS;LV=1;var t=Td();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,s=t.useMemo,l=t.useDebugValue;return NS.useSyncExternalStoreWithSelector=function(c,f,h,g,v){var E=i(null);if(E.current===null){var b={hasValue:!1,value:null};E.current=b}else b=E.current;E=s(function(){function A(q){if(!I){if(I=!0,N=q,q=g(q),v!==void 0&&b.hasValue){var z=b.value;if(v(z,q))return D=z}return D=q}if(z=D,n(N,q))return z;var O=g(q);return v!==void 0&&v(z,O)?(N=q,z):(N=q,D=O)}var I=!1,N,D,V=h===void 0?null:h;return[function(){return A(f())},V===null?void 0:function(){return A(V())}]},[f,h,g,v]);var S=r(c,E[0],E[1]);return o(function(){b.hasValue=!0,b.value=S},[S]),l(S),S},NS}var VV;function sve(){return VV||(VV=1,MS.exports=ove()),MS.exports}sve();function ave(t){t()}function lve(){let t=null,e=null;return{clear(){t=null,e=null},notify(){ave(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var UV={notify(){},get:()=>[]};function uve(t,e){let n,r=UV,i=0,o=!1;function s(S){h();const A=r.subscribe(S);let I=!1;return()=>{I||(I=!0,A(),g())}}function l(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function f(){return o}function h(){i++,n||(n=t.subscribe(c),r=lve())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=UV)}function v(){o||(o=!0,h())}function E(){o&&(o=!1,g())}const b={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:f,trySubscribe:v,tryUnsubscribe:E,getListeners:()=>r};return b}var cve=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fve=cve(),dve=()=>typeof navigator<"u"&&navigator.product==="ReactNative",hve=dve(),pve=()=>fve||hve?R.useLayoutEffect:R.useEffect,mve=pve(),DS=Symbol.for("react-redux-context"),kS=typeof globalThis<"u"?globalThis:{};function gve(){if(!R.createContext)return{};const t=kS[DS]??(kS[DS]=new Map);let e=t.get(R.createContext);return e||(e=R.createContext(null),t.set(R.createContext,e)),e}var yve=gve();function vve(t){const{children:e,context:n,serverState:r,store:i}=t,o=R.useMemo(()=>{const c=uve(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=R.useMemo(()=>i.getState(),[i]);mve(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,s]);const l=n||yve;return R.createElement(l.Provider,{value:o},e)}var _ve=vve,Tve=(t,e)=>e,n1=se([Tve,It,G$,Hn,Hz,ga,dhe,ir],yhe),r1=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},NH=eo("mouseClick"),DH=ig();DH.startListening({actionCreator:NH,effect:(t,e)=>{var n=t.payload,r=n1(e.getState(),r1(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(Ede({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var mC=eo("mouseMove"),kH=ig();kH.startListening({actionCreator:mC,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=BR(r,r.tooltip.settings.shared),o=n1(r,r1(n));i==="axis"&&((o==null?void 0:o.activeIndex)!=null?e.dispatch(Vz({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(Lz()))}});function Eve(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var FV={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},OH=Ii({name:"rootProps",initialState:FV,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:FV.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),wve=OH.reducer,{updateOptions:bve}=OH.actions,LH=Ii({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:UIe}=LH.actions,Sve=LH.reducer,VH=eo("keyDown"),UH=eo("focus"),i1=ig();i1.startListening({actionCreator:VH,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=t.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var s=Number(qR(i,Gd(n))),l=ga(n);if(o==="Enter"){var c=q_(n,"axis","hover",String(i.index));e.dispatch(aC({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var f=dde(n),h=f==="left-to-right"?1:-1,g=o==="ArrowRight"?1:-1,v=s+g*h;if(!(l==null||v>=l.length||v<0)){var E=q_(n,"axis","hover",String(v));e.dispatch(aC({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:E}))}}}}});i1.startListening({actionCreator:UH,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",s=q_(n,"axis","hover",String(o));e.dispatch(aC({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:s}))}}}});var zi=eo("externalEvent"),FH=ig();FH.startListening({actionCreator:zi,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:rhe(n),activeDataKey:Wz(n),activeIndex:_d(n),activeLabel:Kz(n),activeTooltipIndex:_d(n),isTooltipActive:ihe(n)};t.payload.handler(r,t.payload.reactEvent)}}});var Ave=se([Hd],t=>t.tooltipItemPayloads),Cve=se([Ave,mg,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var s=e(o,n);return s}}}),BH=eo("touchMove"),qH=ig();qH.startListening({actionCreator:BH,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=BR(r,r.tooltip.settings.shared);if(i==="axis"){var o=n1(r,r1({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(Vz({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var s,l=n.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var f=c.getAttribute(Wse),h=(s=c.getAttribute(Yse))!==null&&s!==void 0?s:void 0,g=Cve(e.getState(),f,h);e.dispatch(Oz({activeDataKey:h,activeIndex:f,activeCoordinate:g}))}}});var xve=a5({brush:mye,cartesianAxis:Xme,chartData:khe,errorBars:dge,graphicalItems:qme,layout:yse,legend:hae,options:Rhe,polarAxis:ume,polarOptions:Sve,referenceElements:wye,rootProps:wve,tooltip:wde}),Ive=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return $oe({reducer:xve,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([DH.middleware,kH.middleware,i1.middleware,FH.middleware,qH.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Eve},name:"recharts-".concat(n)}})};function Rve(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=wo(),o=R.useRef(null);if(i)return n;o.current==null&&(o.current=Ive(e,r));var s=BI;return R.createElement(_ve,{context:s,store:o.current},n)}function Pve(t){var{layout:e,width:n,height:r,margin:i}=t,o=rr(),s=wo();return R.useEffect(()=>{s||(o(pse(e)),o(mse({width:n,height:r})),o(hse(i)))},[o,s,e,n,r,i]),null}function Mve(t){var e=rr();return R.useEffect(()=>{e(bve(t))},[e,t]),null}var Nve=["children"];function Dve(t,e){if(t==null)return{};var n,r,i=kve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function K_(){return K_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K_.apply(null,arguments)}var Ove={width:"100%",height:"100%"},Lve=R.forwardRef((t,e)=>{var n=lae(),r=uae(),i=k5();if(!A_(n)||!A_(r))return null;var{children:o,otherAttributes:s,title:l,desc:c}=t,f,h;return typeof s.tabIndex=="number"?f=s.tabIndex:f=i?0:void 0,typeof s.role=="string"?h=s.role:h=i?"application":void 0,R.createElement(R3,K_({},s,{title:l,desc:c,role:h,tabIndex:f,width:n,height:r,style:Ove,ref:e}),o)}),Vve=t=>{var{children:e}=t,n=$e(iT);if(!n)return null;var{width:r,height:i,y:o,x:s}=n;return R.createElement(R3,{width:r,height:i,x:s,y:o},e)},BV=R.forwardRef((t,e)=>{var{children:n}=t,r=Dve(t,Nve),i=wo();return i?R.createElement(Vve,null,n):R.createElement(Lve,K_({ref:e},r),n)});function Uve(){var t=rr(),[e,n]=R.useState(null),r=$e(Kse);return R.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),o=i.width/e.offsetWidth;xi(o)&&o!==r&&t(gse(o))}},[e,t,r]),n}function qV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qV(Object(n),!0).forEach(function(r){Bve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bve(t,e,n){return(e=qve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qve(t){var e=$ve(t,"string");return typeof e=="symbol"?e:e+""}function $ve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zve=R.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:f,onMouseLeave:h,onMouseMove:g,onMouseUp:v,onTouchEnd:E,onTouchMove:b,onTouchStart:S,style:A,width:I}=t,N=rr(),[D,V]=R.useState(null),[q,z]=R.useState(null);zhe();var O=Uve(),L=R.useCallback(ue=>{O(ue),typeof e=="function"&&e(ue),V(ue),z(ue)},[O,e,V,z]),k=R.useCallback(ue=>{N(NH(ue)),N(zi({handler:o,reactEvent:ue}))},[N,o]),$=R.useCallback(ue=>{N(mC(ue)),N(zi({handler:f,reactEvent:ue}))},[N,f]),F=R.useCallback(ue=>{N(Lz()),N(zi({handler:h,reactEvent:ue}))},[N,h]),G=R.useCallback(ue=>{N(mC(ue)),N(zi({handler:g,reactEvent:ue}))},[N,g]),H=R.useCallback(()=>{N(UH())},[N]),Ae=R.useCallback(ue=>{N(VH(ue.key))},[N]),Re=R.useCallback(ue=>{N(zi({handler:s,reactEvent:ue}))},[N,s]),ee=R.useCallback(ue=>{N(zi({handler:l,reactEvent:ue}))},[N,l]),he=R.useCallback(ue=>{N(zi({handler:c,reactEvent:ue}))},[N,c]),Ee=R.useCallback(ue=>{N(zi({handler:v,reactEvent:ue}))},[N,v]),Le=R.useCallback(ue=>{N(zi({handler:S,reactEvent:ue}))},[N,S]),K=R.useCallback(ue=>{N(BH(ue)),N(zi({handler:b,reactEvent:ue}))},[N,b]),ae=R.useCallback(ue=>{N(zi({handler:E,reactEvent:ue}))},[N,E]);return R.createElement(eH.Provider,{value:D},R.createElement(Vre.Provider,{value:q},R.createElement("div",{className:Gt("recharts-wrapper",r),style:Fve({position:"relative",cursor:"default",width:I,height:i},A),onClick:k,onContextMenu:Re,onDoubleClick:ee,onFocus:H,onKeyDown:Ae,onMouseDown:he,onMouseEnter:$,onMouseLeave:F,onMouseMove:G,onMouseUp:Ee,onTouchEnd:ae,onTouchMove:K,onTouchStart:Le,ref:L},n)))}),Hve=["children","className","width","height","style","compact","title","desc"];function Gve(t,e){if(t==null)return{};var n,r,i=jve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Kve=R.forwardRef((t,e)=>{var{children:n,className:r,width:i,height:o,style:s,compact:l,title:c,desc:f}=t,h=Gve(t,Hve),g=G0(h);return l?R.createElement(BV,{otherAttributes:g,title:c,desc:f},n):R.createElement(zve,{className:r,style:s,width:i,height:o,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},R.createElement(BV,{otherAttributes:g,title:c,desc:f,ref:e},R.createElement(Sye,null,n)))}),Wve=["width","height"];function gC(){return gC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gC.apply(null,arguments)}function Yve(t,e){if(t==null)return{};var n,r,i=Jve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Qve={top:5,right:5,bottom:5,left:5},Xve={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Qve,reverseStackOrder:!1,syncMethod:"index"},Zve=R.forwardRef(function(e,n){var r,i=Dl(e.categoricalChartProps,Xve),{width:o,height:s}=i,l=Yve(i,Wve);if(!A_(o)||!A_(s))return null;var{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,categoricalChartProps:v}=e,E={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,eventEmitter:void 0};return R.createElement(Rve,{preloadedState:{options:E},reduxStoreName:(r=v.id)!==null&&r!==void 0?r:c},R.createElement(pye,{chartData:v.data}),R.createElement(Pve,{width:o,height:s,layout:i.layout,margin:i.margin}),R.createElement(Mve,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),R.createElement(Kve,gC({},l,{width:o,height:s,ref:n})))}),e_e=["axis","item"],t_e=R.forwardRef((t,e)=>R.createElement(Zve,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:e_e,tooltipPayloadSearcher:xhe,categoricalChartProps:t,ref:e}));const n_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{d:"M2 11h3v7H2v-7zM6 3h3v15H6V3zm5 8h3v7h-3v-7zm4-4h3v11h-3V7z"})}),r_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),i_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),o_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),s_e=({data:t})=>!t||t.length===0?P.jsx("p",{className:"text-stone-400 text-center py-8",children:"Нет данных для отображения."}):P.jsx(ape,{width:"100%",height:300,children:P.jsxs(t_e,{data:t,margin:{top:5,right:20,left:-10,bottom:5},children:[P.jsx(e1,{dataKey:"label",stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1}),P.jsx(t1,{stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),P.jsx(Qhe,{contentStyle:{backgroundColor:"#292524",border:"1px solid #57534e",borderRadius:"0.375rem"},labelStyle:{color:"#f59e0b"},itemStyle:{color:"#d6d3d1"},formatter:e=>[e,"Просмотры"]}),P.jsx(AH,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})}),a_e=({codeword:t,onUpdate:e,onDelete:n})=>{const[r,i]=R.useState(t.usedMessage),[o,s]=R.useState(t.introText||"ВАШЕ КОДОВОЕ СЛОВО:"),[l,c]=R.useState(t.note||""),[f,h]=R.useState(!1),[g,v]=R.useState([]),[E,b]=R.useState(!1),[S,A]=R.useState(""),[I,N]=R.useState("day"),D=`${window.location.origin}${window.location.pathname}#/view?c=${t.id}`,V=`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${encodeURIComponent(D)}`,q=async()=>{b(!0),A(""),v([]);try{const O=Hi(Wo(Vr,"codewords",t.id,"viewEvents"),c_("viewedAt","asc")),k=(await _I(O)).docs.map(G=>G.data().viewedAt.toDate());if(k.length===0){b(!1);return}const $={};k.forEach(G=>{let H="";I==="day"?H=G.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"}):H=G.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"})+` ${G.getHours()}:00`,$[H]=($[H]||0)+1});const F=Object.keys($).map(G=>({label:G,value:$[G]}));v(F)}catch(O){console.error("Error fetching stats:",O),A("Не удалось загрузить статистику.")}finally{b(!1)}};R.useEffect(()=>{f&&q()},[f,I]);const z=async()=>{try{const O=await fetch(V);if(!O.ok)throw new Error("QR code fetch failed");const L=await O.blob(),k=window.URL.createObjectURL(L),$=document.createElement("a");$.href=k;const F=t.word.replace(/[^a-z0-9а-яё]/gi,"_").toLowerCase();$.setAttribute("download",`qr_${F}.png`),document.body.appendChild($),$.click(),$.parentNode&&$.parentNode.removeChild($),window.URL.revokeObjectURL(k)}catch(O){console.error("Failed to download QR code",O),alert("Не удалось скачать QR-код.")}};return P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[P.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[P.jsx("img",{src:V,alt:"QR Code",className:"w-36 h-36 border-2 border-stone-600 rounded-md"}),P.jsxs("button",{onClick:z,className:"flex items-center justify-center gap-2 w-full bg-stone-600 hover:bg-stone-500 text-stone-200 px-3 py-2 rounded-md text-sm transition-colors",children:[P.jsx(o_e,{}),"Скачать QR"]}),P.jsx("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-amber-400 hover:text-amber-300 break-all text-center pt-1",children:D})]}),P.jsxs("div",{className:"md:col-span-2 space-y-3",children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:`introText_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Вступительный текст:"}),P.jsx("input",{id:`introText_${t.id}`,type:"text",value:o,onChange:O=>s(O.target.value),onBlur:()=>e(t.id,{introText:o}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:"Кодовое слово:"}),P.jsx("p",{className:"text-lg bg-stone-900 p-2 rounded-md font-bold text-stone-100 break-words",children:t.word})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:`usedMsg_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Сообщение (если использовано):"}),P.jsx("input",{id:`usedMsg_${t.id}`,type:"text",value:r,onChange:O=>i(O.target.value),onBlur:()=>e(t.id,{usedMessage:r}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:`note_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Заметка (видна только вам):"}),P.jsx("textarea",{id:`note_${t.id}`,value:l,onChange:O=>c(O.target.value),onBlur:()=>e(t.id,{note:l}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-20 resize-y",placeholder:"Любые пометки по этому коду..."})]}),P.jsxs("div",{className:"flex items-center justify-between pt-2",children:[P.jsxs("label",{htmlFor:`toggle_${t.id}`,className:"flex items-center cursor-pointer",children:[P.jsxs("div",{className:"relative",children:[P.jsx("input",{type:"checkbox",id:`toggle_${t.id}`,className:"sr-only",checked:t.isUsed,onChange:()=>e(t.id,{isUsed:!t.isUsed})}),P.jsx("div",{className:`block ${t.isUsed?"bg-amber-500":"bg-stone-600"} w-14 h-8 rounded-full transition-colors`}),P.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform ${t.isUsed?"transform translate-x-6":""}`})]}),P.jsx("div",{className:"ml-3 text-stone-300 font-semibold",children:t.isUsed?"ИСПОЛЬЗОВАНО":"АКТИВНО"})]}),P.jsxs("div",{className:"flex items-center gap-2 text-stone-400",children:[P.jsxs("div",{className:"flex items-center gap-1",title:"Просмотры",children:[P.jsx(r_e,{}),P.jsx("span",{children:t.views||0})]}),P.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-1 bg-sky-800 hover:bg-sky-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[P.jsx(n_e,{}),"Статистика"]}),P.jsxs("button",{onClick:()=>n(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[P.jsx(i_e,{}),"Удалить"]})]})]})]})]}),f&&P.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>h(!1),role:"dialog","aria-modal":"true","aria-labelledby":"stats-modal-title",children:P.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[P.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[P.jsx("h3",{id:"stats-modal-title",className:"font-display text-2xl text-amber-400",children:"Статистика просмотров"}),P.jsx("button",{onClick:()=>h(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),P.jsxs("div",{className:"p-4 flex-grow overflow-y-auto",children:[P.jsxs("div",{className:"flex gap-2 mb-4",children:[P.jsx("button",{onClick:()=>N("day"),className:`px-4 py-2 rounded-md font-semibold ${I==="day"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По дням"}),P.jsx("button",{onClick:()=>N("hour"),className:`px-4 py-2 rounded-md font-semibold ${I==="hour"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По часам"})]}),E&&P.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:"ЗАГРУЗКА СТАТИСТИКИ..."}),S&&P.jsx("p",{className:"text-red-500 text-center py-8",children:S}),!E&&!S&&P.jsx(s_e,{data:g})]})]})})]})},l_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),u_e=()=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[P.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),P.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),c_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),f_e=({game:t,onDelete:e})=>{var o;const n=(o=t.createdAt)==null?void 0:o.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),r=()=>{window.location.hash=`#/admin/quest/${t.id}`},i=()=>{window.location.hash=`#/play/${t.id}`};return P.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md flex justify-between items-center",children:[P.jsxs("div",{children:[P.jsx("h4",{className:"text-xl font-bold text-stone-100",children:t.title}),P.jsxs("div",{className:"text-sm text-stone-400 mt-1",children:[P.jsx("span",{className:`inline-block px-2 py-0.5 rounded-md mr-2 text-xs font-semibold ${t.status==="published"?"bg-green-900/50 text-green-300":"bg-sky-900/50 text-sky-300"}`,children:t.status==="published"?"Опубликован":"Черновик"}),P.jsxs("span",{children:["Создан: ",n||"N/A"]})]})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsxs("button",{onClick:i,className:"flex items-center gap-1 bg-green-800 hover:bg-green-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[P.jsx(l_e,{})," Играть"]}),P.jsxs("button",{onClick:r,className:"flex items-center gap-1 bg-blue-800 hover:bg-blue-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[P.jsx(u_e,{})," Редактировать"]}),P.jsxs("button",{onClick:()=>e(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[P.jsx(c_e,{})," Удалить"]})]})]})},d_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H5v-2H3v-2H1v-4a6 6 0 017.743-5.743z"})}),h_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),p_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),m_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),g_e=()=>{const[t,e]=R.useState("quests"),[n,r]=R.useState([]),[i,o]=R.useState(""),[s,l]=R.useState("Этот код уже был использован."),[c,f]=R.useState("ВАШЕ КОДОВОЕ СЛОВО:"),[h,g]=R.useState([]),[v,E]=R.useState(""),[b,S]=R.useState(""),[A,I]=R.useState({type:"",text:""});R.useEffect(()=>{let k;if(t==="codewords"){const $=Hi(Wo(Vr,"codewords"),c_("createdAt","desc"));k=_m($,F=>{const G=F.docs.map(H=>({...H.data(),id:H.id}));r(G)},F=>{console.error("Error fetching codewords:",F),alert("Не удалось загрузить кодовые слова.")})}else if(t==="quests"){const $=Hi(Wo(Vr,"games"),c_("createdAt","desc"));k=_m($,F=>{const G=F.docs.map(H=>({...H.data(),id:H.id}));g(G)},F=>{console.error("Error fetching games:",F),alert("Не удалось загрузить квесты.")})}return()=>k&&k()},[t]);const N=async k=>{if(k.preventDefault(),i.trim()!=="")try{await vm(Wo(Vr,"codewords"),{word:i.trim(),isUsed:!1,usedMessage:s.trim()||"Этот код уже был использован.",introText:c.trim()||"ВАШЕ КОДОВОЕ СЛОВО:",note:"",createdAt:ul(),views:0}),o(""),f("ВАШЕ КОДОВОЕ СЛОВО:"),l("Этот код уже был использован.")}catch($){console.error("Error adding codeword: ",$),alert("Ошибка при добавлении кода.")}},D=async(k,$)=>{try{await ym(po(Vr,"codewords",k),$)}catch(F){console.error("Error updating codeword: ",F),alert("Ошибка при обновлении кода.")}},V=async k=>{if(window.confirm("Вы уверены, что хотите удалить этот код? Это действие необратимо."))try{const $=Hi(Wo(Vr,"codewords",k,"viewEvents")),F=await _I($),G=Ate(Vr);F.docs.forEach(H=>G.delete(H.ref)),await G.commit(),await wA(po(Vr,"codewords",k))}catch($){console.error("Error deleting codeword:",$),alert("Ошибка при удалении кода.")}},q=async k=>{if(k.preventDefault(),v.trim()!=="")try{const $=`quest_${Date.now()}`;await vm(Wo(Vr,"games"),{title:v.trim(),status:"draft",createdAt:ul(),updatedAt:ul(),dsl:{format:"bk-quest@1",meta:{id:$,title:v.trim(),version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:{start:{text:"This is the beginning."}}}}),E("")}catch($){console.error("Error adding quest: ",$),alert("Ошибка при создании квеста.")}},z=async k=>{if(window.confirm("Вы уверены, что хотите удалить этот квест? Все его данные будут стерты навсегда."))try{await wA(po(Vr,"games",k))}catch($){console.error("Error deleting quest:",$),alert("Ошибка при удалении квеста.")}},O=async k=>{if(k.preventDefault(),I({type:"",text:""}),window.confirm("Вы уверены, что хотите изменить пароль?"))try{if(!Kp.currentUser)throw new Error("Пользователь не авторизован.");if(!b||b.length<6)throw new Error("Пароль должен содержать не менее 6 символов.");await kF(Kp.currentUser,b),I({type:"success",text:"Пароль успешно изменен!"}),S("")}catch($){I({type:"error",text:`Ошибка: ${$.message}`})}},L=({tabName:k,label:$,children:F})=>P.jsxs("button",{onClick:()=>e(k),className:`flex items-center justify-center w-full px-4 py-3 font-display text-xl rounded-t-md transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500
            ${t===k?"bg-stone-800/50 text-amber-400 border-b-2 border-amber-400":"bg-stone-900/50 text-stone-400 hover:bg-stone-800/50"}`,children:[F,$]});return P.jsxs("div",{className:"container mx-auto py-8 px-4",children:[P.jsxs("div",{className:"flex justify-between items-center mb-6",children:[P.jsx("h2",{className:"font-display text-4xl text-stone-200",children:"Панель управления"}),P.jsx("button",{onClick:()=>nY(Kp),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors",children:"Выйти"})]}),P.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md mb-8",children:[P.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Изменить пароль"}),P.jsxs("form",{onSubmit:O,className:"space-y-4",children:[P.jsx("input",{type:"password",value:b,onChange:k=>S(k.target.value),placeholder:"Новый пароль (минимум 6 символов)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),P.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[P.jsx(p_e,{})," Сохранить пароль"]}),A.text&&P.jsx("p",{className:A.type==="success"?"text-green-400":"text-red-500",children:A.text})]})]}),P.jsxs("div",{className:"flex mb-[-1px]",children:[P.jsx(L,{tabName:"quests",label:"Квесты",children:P.jsx(h_e,{})}),P.jsx(L,{tabName:"codewords",label:"Кодовые слова",children:P.jsx(d_e,{})})]}),P.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-b-md rounded-tr-md",children:[t==="codewords"&&P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"mb-8",children:[P.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Добавить новый код"}),P.jsxs("form",{onSubmit:N,className:"space-y-4",children:[P.jsx("input",{type:"text",value:c,onChange:k=>f(k.target.value),placeholder:"Вступительный текст (обращение)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),P.jsx("input",{type:"text",value:i,onChange:k=>o(k.target.value),placeholder:"Новое кодовое слово",required:!0,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),P.jsx("input",{type:"text",value:s,onChange:k=>l(k.target.value),placeholder:"Сообщение если код использован",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),P.jsx("button",{type:"submit",className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Создать QR-код"})]})]}),P.jsx("div",{className:"space-y-4",children:n.map(k=>P.jsx(a_e,{codeword:k,onUpdate:D,onDelete:V},k.id))})]}),t==="quests"&&P.jsxs(P.Fragment,{children:[P.jsxs("div",{className:"mb-8",children:[P.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Создать новый квест"}),P.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[P.jsxs("form",{onSubmit:q,className:"flex-grow flex gap-4",children:[P.jsx("input",{type:"text",value:v,onChange:k=>E(k.target.value),placeholder:"Название квеста",required:!0,className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),P.jsx("button",{type:"submit",className:"font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors",children:"Создать"})]}),P.jsxs("a",{href:"/#/admin/architect",className:"w-full md:w-auto flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors",children:[P.jsx(m_e,{})," Создать с AI"]})]})]}),P.jsx("div",{className:"space-y-4",children:h.length>0?h.map(k=>P.jsx(f_e,{game:k,onDelete:z},k.id)):P.jsx("p",{className:"text-stone-400 text-center py-4",children:"Квесты еще не созданы."})})]})]})]})},y_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),v_e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),$V=({codeId:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState("loading"),[o,s]=R.useState(!1),l=fs();R.useEffect(()=>{const f=new URLSearchParams(l.search||l.hash.split("?")[1]),h=t||f.get("c");if(h){const g=po(Vr,"codewords",h);(async()=>{try{const E=await vI(g);if(E.exists()){const b={id:E.id,...E.data()};n(b),i("found");const S=`viewed-${h}`;sessionStorage.getItem(S)||(await ym(g,{views:z6(1)}),await vm(Wo(g,"viewEvents"),{viewedAt:ul()}),sessionStorage.setItem(S,"true"))}else i("not-found")}catch(E){console.error("Failed to fetch codeword from Firestore:",E),i("error")}})()}else i("not-found")},[l,t]);const c=()=>{e&&!e.isUsed&&(navigator.clipboard.writeText(e.word),s(!0),setTimeout(()=>s(!1),2e3))};return r==="loading"?P.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:P.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ПОИСК КОДА..."})}):r==="not-found"||r==="error"?P.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[P.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),P.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Код не найден."}),P.jsx("p",{className:"text-stone-500",children:"Возможно, ссылка неверна или код был удален."})]}):e!=null&&e.isUsed?P.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[P.jsx("h2",{className:"font-display text-5xl text-amber-500",children:"КОД ИСПОЛЬЗОВАН"}),P.jsx("p",{className:"text-stone-300 text-xl mt-4 max-w-lg",children:e.usedMessage})]}):P.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:P.jsxs("div",{className:"w-full max-w-2xl bg-stone-800/50 border-2 border-stone-700 p-8 rounded-lg shadow-2xl shadow-black/50",children:[P.jsx("p",{className:"text-stone-400 font-display text-2xl tracking-wide",children:(e==null?void 0:e.introText)||"ВАШЕ КОДОВОЕ СЛОВО:"}),P.jsx("p",{className:"text-amber-400 font-bold text-3xl md:text-5xl my-4 break-words select-all tracking-widest",children:e==null?void 0:e.word}),P.jsxs("button",{onClick:c,className:"w-full flex items-center justify-center gap-3 mt-6 bg-stone-700 hover:bg-amber-500 hover:text-stone-900 text-stone-200 font-display text-2xl py-3 rounded-md transition-all duration-300",children:[o?P.jsx(v_e,{}):P.jsx(y_e,{}),o?"СКОПИРОВАНО!":"СКОПИРОВАТЬ КОД"]})]})})},__e=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),zV=()=>{var D;const{questId:t}=S4(),[e,n]=R.useState(null),[r,i]=R.useState(null),[o,s]=R.useState("start"),[l,c]=R.useState(!0),[f,h]=R.useState(""),g=V=>V?typeof V=="string"?V:V[(e==null?void 0:e.dsl.meta.defaultLocale)||"ru"]||Object.values(V)[0]||"":"",v=R.useCallback((V,q)=>{if(V.all)return V.all.every(L=>v(L,q));if(V.any)return V.any.some(L=>v(L,q));if(V.not)return!v(V.not,q);const{vars:z,inventory:O}=q;return V.hp_eq!==void 0?z.hp===V.hp_eq:V.hp_gt!==void 0?z.hp>V.hp_gt:V.hp_gte!==void 0?z.hp>=V.hp_gte:V.hp_lt!==void 0?z.hp<V.hp_lt:V.hp_lte!==void 0?z.hp<=V.hp_lte:V.has_item?O.includes(V.has_item):V.missing_item?!O.includes(V.missing_item):V.var_eq?Object.entries(V.var_eq).every(([L,k])=>z[L]===k):V.var_neq?Object.entries(V.var_neq).every(([L,k])=>z[L]!==k):!0},[]),E=R.useCallback((V,q)=>{if(!V)return q;const z=JSON.parse(JSON.stringify(q));return V.forEach(O=>{O.add&&Object.entries(O.add).forEach(([L,k])=>{z.vars[L]=(z.vars[L]||0)+k}),O.set&&Object.entries(O.set).forEach(([L,k])=>{z.vars[L]=k}),O.inv_add&&!z.inventory.includes(O.inv_add)&&z.inventory.push(O.inv_add),O.inv_remove&&(z.inventory=z.inventory.filter(L=>L!==O.inv_remove))}),z},[]);R.useEffect(()=>{if(!t){h("Квест не найден."),c(!1);return}c(!0),h("");const V=po(Vr,"games",t);vI(V).then(q=>{if(q.exists()){const z={id:q.id,...q.data()};n(z);const O=localStorage.getItem(`quest-save-${t}`);if(O){const{playerState:L,currentNodeId:k}=JSON.parse(O);i(L),s(k)}else i(z.dsl.state),s("start")}else h("Квест не найден.");c(!1)}).catch(q=>{console.error("Error fetching quest:",q),h("Ошибка при загрузке квеста."),c(!1)})},[t]),R.useEffect(()=>{if(e&&r){const V={questId:t,playerState:r,currentNodeId:o};localStorage.setItem(`quest-save-${t}`,JSON.stringify(V))}},[r,o,t,e]);const b=e==null?void 0:e.dsl.nodes[o];R.useEffect(()=>{if(!b||!r)return;const V=E(b.effects,r);if(JSON.stringify(V)!==JSON.stringify(r)){i(V);return}if(b.branch){for(const q of b.branch)if(v(q.when,r)){s(q.to);return}}b.fallback&&s(b.fallback)},[o,e,r,E,v]);const S=V=>{if(!r)return;const q=E(V.effects,r);i(q),s(V.to)},A=R.useCallback(()=>{!t||!e||window.confirm("Вы уверены, что хотите начать квест заново? Весь прогресс будет потерян.")&&(localStorage.removeItem(`quest-save-${t}`),i(e.dsl.state),s("start"))},[t,e]);if(l)return P.jsx("div",{className:"text-center p-8 font-display text-4xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА КВЕСТА..."});if(f)return P.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:f});if(!e||!r||!b)return P.jsx("div",{className:"text-center p-8 text-2xl text-stone-400",children:"Инициализация..."});const I=b.bg&&e.dsl.assets.images[b.bg]?e.dsl.assets.images[b.bg]:void 0,N=((D=b.choices)==null?void 0:D.filter(V=>V.when?v(V.when,r):!0))||[];return P.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4 md:p-8",children:P.jsx("div",{className:"w-full max-w-4xl bg-cover bg-center rounded-lg shadow-2xl shadow-black/50 overflow-hidden border-2 border-stone-800",style:{backgroundImage:I?`url(${I})`:"none",backgroundColor:"#1c1917",minHeight:"70vh"},children:P.jsxs("div",{className:"bg-stone-900/80 backdrop-blur-sm p-6 md:p-8 flex flex-col h-full text-stone-200",children:[P.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6 border-b border-stone-700 pb-4 text-sm",children:[P.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[Object.keys(r.vars).length>0&&Object.keys(r.vars).map(V=>P.jsxs("span",{className:"font-bold text-amber-400",children:[V.toUpperCase(),": ",P.jsx("span",{className:"font-normal text-stone-200",children:r.vars[V]??0})]},V)),r.inventory.length>0&&P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("span",{className:"font-bold text-amber-400",children:"ИНВЕНТАРЬ:"}),P.jsx("span",{className:"text-stone-200",children:r.inventory.join(", ")})]})]}),P.jsxs("button",{onClick:A,className:"flex items-center justify-center font-display text-lg bg-stone-700 text-stone-200 py-2 px-4 rounded-md hover:bg-stone-600 transition-colors flex-shrink-0",children:[P.jsx(__e,{}),"ЗАНОВО"]})]}),P.jsxs("div",{className:"flex-grow",children:[P.jsx("h2",{className:"font-display text-3xl md:text-4xl text-amber-400 mb-4",children:g(b.title)}),P.jsx("p",{className:"text-stone-300 whitespace-pre-wrap leading-relaxed mb-6",children:g(b.text)}),b.end&&P.jsxs("div",{className:"text-center py-4 border-t border-stone-700 mt-6",children:[P.jsx("h3",{className:`font-display text-4xl ${b.end.type==="win"?"text-lime-400":"text-red-500"}`,children:b.end.type==="win"?"Победа!":"Конец игры"}),P.jsx("p",{className:"mt-4 text-stone-300",children:g(b.end.message)})]}),!b.end&&P.jsx("div",{className:"flex flex-col space-y-3",children:N.map((V,q)=>P.jsx("button",{onClick:()=>S(V),className:"text-left w-full p-4 bg-stone-800/70 border border-stone-600 rounded-md hover:bg-amber-500 hover:border-amber-400 hover:text-stone-900 transition-all text-stone-200 font-semibold",children:g(V.label)},q))})]})]})})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let T_e,E_e;function w_e(){return{geminiUrl:T_e,vertexUrl:E_e}}function b_e(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=w_e();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yc{}function ke(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function m(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let f=0;f<c.length;f++){const h=c[f];m(h,e.slice(o+1),n[f])}else for(const f of c)m(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];m(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function p(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>p(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yC(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var HV;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(HV||(HV={}));var GV;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(GV||(GV={}));var ht;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ht||(ht={}));var jV;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(jV||(jV={}));var KV;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(KV||(KV={}));var WV;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(WV||(WV={}));var YV;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(YV||(YV={}));var JV;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(JV||(JV={}));var QV;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(QV||(QV={}));var XV;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(XV||(XV={}));var ZV;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(ZV||(ZV={}));var eU;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(eU||(eU={}));var tU;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(tU||(tU={}));var nU;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(nU||(nU={}));var rU;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(rU||(rU={}));var W_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(W_||(W_={}));var iU;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(iU||(iU={}));var vC;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(vC||(vC={}));var oU;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(oU||(oU={}));var sU;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(sU||(sU={}));var aU;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(aU||(aU={}));var lU;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(lU||(lU={}));var uU;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(uU||(uU={}));var cU;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(cU||(cU={}));var fU;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(fU||(fU={}));var dU;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(dU||(dU={}));var hU;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(hU||(hU={}));var pU;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(pU||(pU={}));var mU;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(mU||(mU={}));var gU;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(gU||(gU={}));var yU;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(yU||(yU={}));var vU;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(vU||(vU={}));var _U;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(_U||(_U={}));var TU;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(TU||(TU={}));var EU;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(EU||(EU={}));var wU;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(wU||(wU={}));var bU;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(bU||(bU={}));var SU;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(SU||(SU={}));var AU;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(AU||(AU={}));var CU;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(CU||(CU={}));var xU;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(xU||(xU={}));var IU;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(IU||(IU={}));var RU;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(RU||(RU={}));var PU;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(PU||(PU={}));var MU;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(MU||(MU={}));var xf;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(xf||(xf={}));class _C{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class _p{get text(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const g=[];for(const v of(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[E,b]of Object.entries(v))E!=="text"&&E!=="thought"&&(b!==null||b!==void 0)&&g.push(E);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;h=!0,f+=v.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const g of(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[v,E]of Object.entries(g))v!=="inlineData"&&(E!==null||E!==void 0)&&h.push(v);g.inlineData&&typeof g.inlineData.data=="string"&&(f+=atob(g.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,i,o,s,l,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,l,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class NU{}class DU{}class S_e{}class A_e{}class C_e{}class x_e{}class kU{}class OU{}class LU{}class I_e{}class VU{}class Y_{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new Y_;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const o=new VU,s=i.videos;o.generatedVideos=s==null?void 0:s.map(l=>({video:{uri:l.gcsUri,videoBytes:l.bytesBase64Encoded?yC(l.bytesBase64Encoded):void 0,mimeType:l.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=e.response;if(i){const o=new VU,s=i.generateVideoResponse,l=s==null?void 0:s.generatedSamples;o.generatedVideos=l==null?void 0:l.map(c=>{const f=c.video;return{video:{uri:f==null?void 0:f.uri,videoBytes:f!=null&&f.encodedVideo?yC(f==null?void 0:f.encodedVideo):void 0,mimeType:c.encoding}}}),o.raiMediaFilteredCount=s==null?void 0:s.raiMediaFilteredCount,o.raiMediaFilteredReasons=s==null?void 0:s.raiMediaFilteredReasons,r.response=o}}return r}}class UU{}class FU{}class BU{}class R_e{}class P_e{}class M_e{}class qU{}class N_e{get text(){var e,n,r;let i="",o=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(l))c!=="text"&&c!=="thought"&&f!==null&&s.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(s))l!=="inlineData"&&c!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class D_e{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $H(t,e){const n=vt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function zH(t){return Array.isArray(t)?t.map(e=>J_(e)):[J_(t)]}function J_(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function HH(t){const e=J_(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function GH(t){const e=J_(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $U(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function jH(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>$U(e)):[$U(t)]}function TC(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function zU(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function HU(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ir(t){if(t==null)throw new Error("ContentUnion is required");return TC(t)?t:{role:"user",parts:jH(t)}}function KH(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ir(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ir(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ir(n)):[Ir(e)]}function Yi(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(zU(t)||HU(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ir(t)]}const e=[],n=[],r=TC(t[0]);for(const i of t){const o=TC(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(zU(i)||HU(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:jH(n)}),e}function k_e(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ht).includes(n[0].toUpperCase())?n[0].toUpperCase():ht.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ht).includes(r.toUpperCase())?r.toUpperCase():ht.TYPE_UNSPECIFIED})}}function Vf(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&k_e(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(ht).includes(l.toUpperCase())?l.toUpperCase():ht.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Vf(l);else if(r.includes(s)){const c=[];for(const f of l){if(f.type=="null"){e.nullable=!0;continue}c.push(Vf(f))}e[s]=c}else if(i.includes(s)){const c={};for(const[f,h]of Object.entries(l))c[f]=Vf(h);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=l}return e}function o1(t){return Vf(t)}function s1(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function a1(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Kd(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Vf(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Vf(e.response));return t}function Wd(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function O_e(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function ya(t,e){if(typeof e!="string")throw new Error("name must be a string");return O_e(t,e,"cachedContents")}function WH(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function vc(t){return yC(t)}function L_e(t){return t!=null&&typeof t=="object"&&"name"in t}function V_e(t){return t!=null&&typeof t=="object"&&"video"in t}function U_e(t){return t!=null&&typeof t=="object"&&"uri"in t}function YH(t){var e;let n;if(L_e(t)&&(n=t.name),!(U_e(t)&&(n=t.uri,n===void 0))&&!(V_e(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function JH(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function QH(t){for(const e of["models","tunedModels","publisherModels"])if(F_e(t,e))return t[e];return[]}function F_e(t,e){return t!==null&&typeof t=="object"&&e in t}function B_e(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function q_e(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=B_e(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function XH(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function $_e(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Yd(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function ZH(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z_e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function H_e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function G_e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function j_e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],z_e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],H_e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],G_e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function eG(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>j_e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function K_e(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const l=p(t,["format"]);l!=null&&m(e,["format"],l);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const g=p(t,["maxProperties"]);g!=null&&m(e,["maxProperties"],g);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const I=p(t,["nullable"]);I!=null&&m(e,["nullable"],I);const N=p(t,["pattern"]);N!=null&&m(e,["pattern"],N);const D=p(t,["properties"]);D!=null&&m(e,["properties"],D);const V=p(t,["propertyOrdering"]);V!=null&&m(e,["propertyOrdering"],V);const q=p(t,["required"]);q!=null&&m(e,["required"],q);const z=p(t,["title"]);z!=null&&m(e,["title"],z);const O=p(t,["type"]);return O!=null&&m(e,["type"],O),e}function W_e(t){const e={};if(p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["category"]);n!=null&&m(e,["category"],n);const r=p(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function Y_e(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function J_e(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function Q_e(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],J_e(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function X_e(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function Z_e(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],X_e(n)),e}function e0e(){return{}}function t0e(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function n0e(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Y_e(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],Q_e(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],Z_e(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],e0e());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],t0e(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function r0e(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function i0e(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function o0e(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],i0e(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function s0e(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],r0e(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],o0e(r)),e}function a0e(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function tG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],a0e(n)),e}function l0e(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],tG(r)),e}function u0e(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>l0e(i))),m(e,["speakerVoiceConfigs"],r)}return e}function c0e(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],tG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],u0e(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function f0e(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function d0e(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],eG(Ir(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const l=p(e,["topK"]);l!=null&&m(r,["topK"],l);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const g=p(e,["responseLogprobs"]);g!=null&&m(r,["responseLogprobs"],g);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const I=p(e,["responseSchema"]);I!=null&&m(r,["responseSchema"],K_e(o1(I)));const N=p(e,["responseJsonSchema"]);if(N!=null&&m(r,["responseJsonSchema"],N),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=p(e,["safetySettings"]);if(n!==void 0&&D!=null){let F=D;Array.isArray(F)&&(F=F.map(G=>W_e(G))),m(n,["safetySettings"],F)}const V=p(e,["tools"]);if(n!==void 0&&V!=null){let F=Wd(V);Array.isArray(F)&&(F=F.map(G=>n0e(Kd(G)))),m(n,["tools"],F)}const q=p(e,["toolConfig"]);if(n!==void 0&&q!=null&&m(n,["toolConfig"],s0e(q)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=p(e,["cachedContent"]);n!==void 0&&z!=null&&m(n,["cachedContent"],ya(t,z));const O=p(e,["responseModalities"]);O!=null&&m(r,["responseModalities"],O);const L=p(e,["mediaResolution"]);L!=null&&m(r,["mediaResolution"],L);const k=p(e,["speechConfig"]);if(k!=null&&m(r,["speechConfig"],c0e(s1(k))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=p(e,["thinkingConfig"]);return $!=null&&m(r,["thinkingConfig"],f0e($)),r}function h0e(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["request","model"],vt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Yi(i);Array.isArray(s)&&(s=s.map(l=>eG(l))),m(n,["request","contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["request","generationConfig"],d0e(t,o,n)),n}function p0e(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=p(e,["fileName"]);r!=null&&m(n,["fileName"],r);const i=p(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>h0e(t,s))),m(n,["requests","requests"],o)}return n}function m0e(t,e){const n={},r=p(t,["displayName"]);if(e!==void 0&&r!=null&&m(e,["batch","displayName"],r),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function GU(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["src"]);i!=null&&m(n,["batch","inputConfig"],p0e(t,XH(t,i)));const o=p(e,["config"]);return o!=null&&m(n,["config"],m0e(o,n)),n}function g0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Yd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function y0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Yd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function v0e(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);if(e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function _0e(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],v0e(n,e)),e}function T0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Yd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function E0e(t){const e={},n=p(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const r=p(t,["gcsUri"]);r!=null&&m(e,["gcsSource","uris"],r);const i=p(t,["bigqueryUri"]);if(i!=null&&m(e,["bigquerySource","inputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function w0e(t){const e={},n=p(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const r=p(t,["gcsUri"]);r!=null&&m(e,["gcsDestination","outputUriPrefix"],r);const i=p(t,["bigqueryUri"]);if(i!=null&&m(e,["bigqueryDestination","outputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function b0e(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["dest"]);return e!==void 0&&i!=null&&m(e,["outputConfig"],w0e($_e(i))),n}function S0e(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],vt(t,r));const i=p(e,["src"]);i!=null&&m(n,["inputConfig"],E0e(XH(t,i)));const o=p(e,["config"]);return o!=null&&m(n,["config"],b0e(o,n)),n}function A0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Yd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function C0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Yd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function x0e(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function I0e(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],x0e(n,e)),e}function R0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],Yd(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function P0e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function M0e(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function N0e(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function D0e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],P0e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],M0e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],N0e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function k0e(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>D0e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function O0e(t){const e={},n=p(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function L0e(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function V0e(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>L0e(i))),m(e,["urlMetadata"],r)}return e}function U0e(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],k0e(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],O0e(r));const i=p(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],V0e(s));const l=p(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);return g!=null&&m(e,["safetyRatings"],g),e}function F0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>U0e(f))),m(e,["candidates"],c)}const i=p(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const s=p(t,["responseId"]);s!=null&&m(e,["responseId"],s);const l=p(t,["usageMetadata"]);return l!=null&&m(e,["usageMetadata"],l),e}function nG(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["code"]);r!=null&&m(e,["code"],r);const i=p(t,["message"]);return i!=null&&m(e,["message"],i),e}function B0e(t){const e={},n=p(t,["response"]);n!=null&&m(e,["response"],F0e(n));const r=p(t,["error"]);return r!=null&&m(e,["error"],nG(r)),e}function q0e(t){const e={},n=p(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const r=p(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>B0e(o))),m(e,["inlinedResponses"],i)}return e}function kv(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata","displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["metadata","state"]);i!=null&&m(e,["state"],ZH(i));const o=p(t,["metadata","createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["metadata","endTime"]);s!=null&&m(e,["endTime"],s);const l=p(t,["metadata","updateTime"]);l!=null&&m(e,["updateTime"],l);const c=p(t,["metadata","model"]);c!=null&&m(e,["model"],c);const f=p(t,["metadata","output"]);return f!=null&&m(e,["dest"],q0e(f)),e}function $0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>kv(s))),m(e,["batchJobs"],o)}return e}function z0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);return o!=null&&m(e,["error"],nG(o)),e}function rG(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["code"]);r!=null&&m(e,["code"],r);const i=p(t,["message"]);return i!=null&&m(e,["message"],i),e}function H0e(t){const e={},n=p(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const r=p(t,["gcsSource","uris"]);r!=null&&m(e,["gcsUri"],r);const i=p(t,["bigquerySource","inputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function G0e(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const r=p(t,["gcsDestination","outputUriPrefix"]);r!=null&&m(e,["gcsUri"],r);const i=p(t,["bigqueryDestination","outputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function EC(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],ZH(i));const o=p(t,["error"]);o!=null&&m(e,["error"],rG(o));const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const l=p(t,["startTime"]);l!=null&&m(e,["startTime"],l);const c=p(t,["endTime"]);c!=null&&m(e,["endTime"],c);const f=p(t,["updateTime"]);f!=null&&m(e,["updateTime"],f);const h=p(t,["model"]);h!=null&&m(e,["model"],h);const g=p(t,["inputConfig"]);g!=null&&m(e,["src"],H0e(g));const v=p(t,["outputConfig"]);return v!=null&&m(e,["dest"],G0e(v)),e}function j0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>EC(s))),m(e,["batchJobs"],o)}return e}function K0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);return o!=null&&m(e,["error"],rG(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var oc;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(oc||(oc={}));class vg{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W0e extends yc{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let o="",s={};const l=GU(this.apiClient,n);o=ke("{model}:batchGenerateContent",l._url),s=l._query;const h=l.batch.inputConfig.requests,g=h.requests,v=[];for(const b of g){const S=b;if(S.systemInstruction){const A=S.systemInstruction;delete S.systemInstruction;const I=S.request;I.systemInstruction=A,S.request=I}v.push(S)}return h.requests=v,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(b=>b.json()).then(b=>kv(b))}return await this.createInternal(n)},this.list=async(n={})=>new vg(oc.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=S0e(this.apiClient,e);return l=ke("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>EC(h))}else{const f=GU(this.apiClient,e);return l=ke("{model}:batchGenerateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>kv(h))}}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=A0e(this.apiClient,e);return l=ke("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>EC(h))}else{const f=g0e(this.apiClient,e);return l=ke("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>kv(h))}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const c=C0e(this.apiClient,e);s=ke("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=y0e(this.apiClient,e);s=ke("batches/{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=I0e(e);return l=ke("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=j0e(h),v=new qU;return Object.assign(v,g),v})}else{const f=_0e(e);return l=ke("batches",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=$0e(h),v=new qU;return Object.assign(v,g),v})}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=R0e(this.apiClient,e);return l=ke("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>K0e(h))}else{const f=T0e(this.apiClient,e);return l=ke("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>z0e(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y0e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function J0e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Q0e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function X0e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Y0e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],J0e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Q0e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function jU(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>X0e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function Z0e(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function eTe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function tTe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],eTe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function nTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function rTe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],nTe(n)),e}function iTe(){return{}}function oTe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function sTe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Z0e(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],tTe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],rTe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],iTe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],oTe(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function aTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function lTe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function uTe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],lTe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function cTe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],aTe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],uTe(r)),e}function fTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const s=p(t,["contents"]);if(e!==void 0&&s!=null){let h=Yi(s);Array.isArray(h)&&(h=h.map(g=>jU(g))),m(e,["contents"],h)}const l=p(t,["systemInstruction"]);e!==void 0&&l!=null&&m(e,["systemInstruction"],jU(Ir(l)));const c=p(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>sTe(g))),m(e,["tools"],h)}const f=p(t,["toolConfig"]);if(e!==void 0&&f!=null&&m(e,["toolConfig"],cTe(f)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function dTe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],$H(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],fTe(i,n)),n}function hTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],ya(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function pTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],ya(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function mTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function gTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],ya(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],mTe(i,n)),n}function yTe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function vTe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],yTe(n,e)),e}function _Te(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function TTe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function ETe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function wTe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],_Te(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],TTe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],ETe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function KU(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>wTe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function bTe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const l=p(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function STe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function ATe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],STe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function CTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function xTe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],CTe(n)),e}function ITe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function RTe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function PTe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],RTe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const l=p(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function MTe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],PTe(n)),e}function NTe(){return{}}function DTe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function kTe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(v=>bTe(v))),m(e,["functionDeclarations"],g)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],ATe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],xTe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],ITe(s));const l=p(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],MTe(l)),p(t,["urlContext"])!=null&&m(e,["urlContext"],NTe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],DTe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function OTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function LTe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function VTe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],LTe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function UTe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],OTe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],VTe(r)),e}function FTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const s=p(t,["contents"]);if(e!==void 0&&s!=null){let g=Yi(s);Array.isArray(g)&&(g=g.map(v=>KU(v))),m(e,["contents"],g)}const l=p(t,["systemInstruction"]);e!==void 0&&l!=null&&m(e,["systemInstruction"],KU(Ir(l)));const c=p(t,["tools"]);if(e!==void 0&&c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>kTe(v))),m(e,["tools"],g)}const f=p(t,["toolConfig"]);e!==void 0&&f!=null&&m(e,["toolConfig"],UTe(f));const h=p(t,["kmsKeyName"]);return e!==void 0&&h!=null&&m(e,["encryption_spec","kmsKeyName"],h),n}function BTe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],$H(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],FTe(i,n)),n}function qTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],ya(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function $Te(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],ya(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function zTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function HTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],ya(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],zTe(i,n)),n}function GTe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function jTe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],GTe(n,e)),e}function Ov(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["model"]);i!=null&&m(e,["model"],i);const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["updateTime"]);s!=null&&m(e,["updateTime"],s);const l=p(t,["expireTime"]);l!=null&&m(e,["expireTime"],l);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function KTe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function WTe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ov(s))),m(e,["cachedContents"],o)}return e}function Lv(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["model"]);i!=null&&m(e,["model"],i);const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["updateTime"]);s!=null&&m(e,["updateTime"],s);const l=p(t,["expireTime"]);l!=null&&m(e,["expireTime"],l);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function YTe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function JTe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Lv(s))),m(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QTe extends yc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vg(oc.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=BTe(this.apiClient,e);return l=ke("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Lv(h))}else{const f=dTe(this.apiClient,e);return l=ke("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ov(h))}}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=qTe(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Lv(h))}else{const f=hTe(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ov(h))}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=$Te(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=YTe(h),v=new FU;return Object.assign(v,g),v})}else{const f=pTe(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=KTe(h),v=new FU;return Object.assign(v,g),v})}}async update(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=HTe(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Lv(h))}else{const f=gTe(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ov(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=jTe(e);return l=ke("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=JTe(h),v=new BU;return Object.assign(v,g),v})}else{const f=vTe(e);return l=ke("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=WTe(h),v=new BU;return Object.assign(v,g),v})}}}function WU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qt(t){return this instanceof qt?(this.v=t,this):new qt(t)}function Uf(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(E){return function(b){return Promise.resolve(b).then(E,g)}}function l(E,b){r[E]&&(i[E]=function(S){return new Promise(function(A,I){o.push([E,S,A,I])>1||c(E,S)})},b&&(i[E]=b(i[E])))}function c(E,b){try{f(r[E](b))}catch(S){v(o[0][3],S)}}function f(E){E.value instanceof qt?Promise.resolve(E.value.v).then(h,g):v(o[0][2],E)}function h(E){c("next",E)}function g(E){c("throw",E)}function v(E,b){E(b),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Yp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof WU=="function"?WU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(l,c){s=t[o](s),i(l,c,s.done,s.value)})}}function i(o,s,l,c){Promise.resolve(c).then(function(f){o({value:f,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XTe(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:iG(n)}function iG(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ZTe(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function YU(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!iG(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class eEe{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new tEe(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class tEe{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),ZTe(o)}async sendMessage(e){var n;await this.sendPromise;const r=Ir(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const c=await i,f=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=c.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let v=[];h!=null&&(v=(l=h.slice(g))!==null&&l!==void 0?l:[]);const E=f?[f]:[];this.recordHistory(r,E,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Ir(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?YU(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Uf(this,arguments,function*(){var s,l,c,f;const h=[];try{for(var g=!0,v=Yp(e),E;E=yield qt(v.next()),s=E.done,!s;g=!0){f=E.value,g=!1;const b=f;if(XTe(b)){const S=(i=(r=b.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;S!==void 0&&h.push(S)}yield yield qt(b)}}catch(b){l={error:b}}finally{try{!g&&!s&&(c=v.return)&&(yield qt(c.call(v)))}finally{if(l)throw l.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...YU(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wT extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,wT.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nEe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function rEe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],nEe(n,e)),e}function iEe(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["message"]);r!=null&&m(e,["message"],r);const i=p(t,["code"]);return i!=null&&m(e,["code"],i),e}function oEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["mimeType"]);i!=null&&m(e,["mimeType"],i);const o=p(t,["sizeBytes"]);o!=null&&m(e,["sizeBytes"],o);const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const l=p(t,["expirationTime"]);l!=null&&m(e,["expirationTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["sha256Hash"]);f!=null&&m(e,["sha256Hash"],f);const h=p(t,["uri"]);h!=null&&m(e,["uri"],h);const g=p(t,["downloadUri"]);g!=null&&m(e,["downloadUri"],g);const v=p(t,["state"]);v!=null&&m(e,["state"],v);const E=p(t,["source"]);E!=null&&m(e,["source"],E);const b=p(t,["videoMetadata"]);b!=null&&m(e,["videoMetadata"],b);const S=p(t,["error"]);return S!=null&&m(e,["error"],iEe(S)),e}function sEe(t){const e={},n=p(t,["file"]);n!=null&&m(e,["file"],oEe(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function aEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","file"],YH(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function lEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","file"],YH(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function uEe(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["message"]);r!=null&&m(e,["message"],r);const i=p(t,["code"]);return i!=null&&m(e,["code"],i),e}function wC(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["mimeType"]);i!=null&&m(e,["mimeType"],i);const o=p(t,["sizeBytes"]);o!=null&&m(e,["sizeBytes"],o);const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const l=p(t,["expirationTime"]);l!=null&&m(e,["expirationTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["sha256Hash"]);f!=null&&m(e,["sha256Hash"],f);const h=p(t,["uri"]);h!=null&&m(e,["uri"],h);const g=p(t,["downloadUri"]);g!=null&&m(e,["downloadUri"],g);const v=p(t,["state"]);v!=null&&m(e,["state"],v);const E=p(t,["source"]);E!=null&&m(e,["source"],E);const b=p(t,["videoMetadata"]);b!=null&&m(e,["videoMetadata"],b);const S=p(t,["error"]);return S!=null&&m(e,["error"],uEe(S)),e}function cEe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>wC(s))),m(e,["files"],o)}return e}function fEe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function dEe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hEe extends yc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vg(oc.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>wC(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=rEe(e);return o=ke("files",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=cEe(c),h=new R_e;return Object.assign(h,f),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=sEe(e);return o=ke("upload/v1beta/files",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=fEe(c),h=new P_e;return Object.assign(h,f),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=aEe(e);return o=ke("files/{file}",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>wC(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=lEe(e);return o=ke("files/{file}",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=dEe(c),h=new M_e;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pEe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function oG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],pEe(n)),e}function mEe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],oG(r)),e}function gEe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>mEe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function yEe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],oG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],gEe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function vEe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function _Ee(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function TEe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function EEe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],vEe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],_Ee(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],TEe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function wEe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>EEe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function bEe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function SEe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function AEe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],SEe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function CEe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function xEe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],CEe(n)),e}function IEe(){return{}}function REe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function PEe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>bEe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],AEe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],xEe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],IEe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],REe(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function MEe(t){const e={},n=p(t,["handle"]);if(n!=null&&m(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function JU(){return{}}function NEe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function DEe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],NEe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function kEe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function OEe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],kEe(r)),e}function LEe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function VEe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const l=p(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const g=p(t,["speechConfig"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","speechConfig"],yEe(a1(g)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],wEe(Ir(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let q=Wd(b);Array.isArray(q)&&(q=q.map(z=>PEe(Kd(z)))),m(e,["setup","tools"],q)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],MEe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],JU());const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&m(e,["setup","outputAudioTranscription"],JU());const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&m(e,["setup","realtimeInputConfig"],DEe(N));const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&m(e,["setup","contextWindowCompression"],OEe(D));const V=p(t,["proactivity"]);return e!==void 0&&V!=null&&m(e,["setup","proactivity"],LEe(V)),n}function UEe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],vt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],VEe(i,n)),n}function FEe(){return{}}function BEe(){return{}}function qEe(t){const e={},n=p(t,["media"]);n!=null&&m(e,["mediaChunks"],zH(n));const r=p(t,["audio"]);r!=null&&m(e,["audio"],GH(r));const i=p(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(t,["video"]);o!=null&&m(e,["video"],HH(o));const s=p(t,["text"]);return s!=null&&m(e,["text"],s),p(t,["activityStart"])!=null&&m(e,["activityStart"],FEe()),p(t,["activityEnd"])!=null&&m(e,["activityEnd"],BEe()),e}function sG(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["weight"]);return r!=null&&m(e,["weight"],r),e}function $Ee(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>sG(i))),m(e,["weightedPrompts"],r)}return e}function aG(t){const e={},n=p(t,["temperature"]);n!=null&&m(e,["temperature"],n);const r=p(t,["topK"]);r!=null&&m(e,["topK"],r);const i=p(t,["seed"]);i!=null&&m(e,["seed"],i);const o=p(t,["guidance"]);o!=null&&m(e,["guidance"],o);const s=p(t,["bpm"]);s!=null&&m(e,["bpm"],s);const l=p(t,["density"]);l!=null&&m(e,["density"],l);const c=p(t,["brightness"]);c!=null&&m(e,["brightness"],c);const f=p(t,["scale"]);f!=null&&m(e,["scale"],f);const h=p(t,["muteBass"]);h!=null&&m(e,["muteBass"],h);const g=p(t,["muteDrums"]);g!=null&&m(e,["muteDrums"],g);const v=p(t,["onlyBassAndDrums"]);v!=null&&m(e,["onlyBassAndDrums"],v);const E=p(t,["musicGenerationMode"]);return E!=null&&m(e,["musicGenerationMode"],E),e}function zEe(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],aG(n)),e}function lG(t){const e={},n=p(t,["model"]);return n!=null&&m(e,["model"],n),e}function uG(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>sG(i))),m(e,["weightedPrompts"],r)}return e}function bC(t){const e={},n=p(t,["setup"]);n!=null&&m(e,["setup"],lG(n));const r=p(t,["clientContent"]);r!=null&&m(e,["clientContent"],uG(r));const i=p(t,["musicGenerationConfig"]);i!=null&&m(e,["musicGenerationConfig"],aG(i));const o=p(t,["playbackControl"]);return o!=null&&m(e,["playbackControl"],o),e}function HEe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function GEe(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],HEe(n)),e}function jEe(t){const e={},n=p(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],GEe(n)),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function KEe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function WEe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function YEe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function JEe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],KEe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],WEe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],YEe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function QEe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>JEe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function XEe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const l=p(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function ZEe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function ewe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],ZEe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function twe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function nwe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],twe(n)),e}function rwe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function iwe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function owe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],iwe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const l=p(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function swe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],owe(n)),e}function awe(){return{}}function lwe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function uwe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(v=>XEe(v))),m(e,["functionDeclarations"],g)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],ewe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],nwe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],rwe(s));const l=p(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],swe(l)),p(t,["urlContext"])!=null&&m(e,["urlContext"],awe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],lwe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function cwe(t){const e={},n=p(t,["handle"]);n!=null&&m(e,["handle"],n);const r=p(t,["transparent"]);return r!=null&&m(e,["transparent"],r),e}function QU(){return{}}function fwe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function dwe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],fwe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function hwe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function pwe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],hwe(r)),e}function mwe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function gwe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const l=p(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const g=p(t,["speechConfig"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","speechConfig"],jEe(a1(g)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],QEe(Ir(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let q=Wd(b);Array.isArray(q)&&(q=q.map(z=>uwe(Kd(z)))),m(e,["setup","tools"],q)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],cwe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],QU());const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&m(e,["setup","outputAudioTranscription"],QU());const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&m(e,["setup","realtimeInputConfig"],dwe(N));const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&m(e,["setup","contextWindowCompression"],pwe(D));const V=p(t,["proactivity"]);return e!==void 0&&V!=null&&m(e,["setup","proactivity"],mwe(V)),n}function ywe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],vt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],gwe(i,n)),n}function vwe(){return{}}function _we(){return{}}function Twe(t){const e={},n=p(t,["media"]);n!=null&&m(e,["mediaChunks"],zH(n));const r=p(t,["audio"]);r!=null&&m(e,["audio"],GH(r));const i=p(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(t,["video"]);o!=null&&m(e,["video"],HH(o));const s=p(t,["text"]);return s!=null&&m(e,["text"],s),p(t,["activityStart"])!=null&&m(e,["activityStart"],vwe()),p(t,["activityEnd"])!=null&&m(e,["activityEnd"],_we()),e}function Ewe(){return{}}function wwe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function bwe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Swe(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Awe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],wwe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],bwe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Swe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function Cwe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Awe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function XU(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["finished"]);return r!=null&&m(e,["finished"],r),e}function xwe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function Iwe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>xwe(i))),m(e,["urlMetadata"],r)}return e}function Rwe(t){const e={},n=p(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],Cwe(n));const r=p(t,["turnComplete"]);r!=null&&m(e,["turnComplete"],r);const i=p(t,["interrupted"]);i!=null&&m(e,["interrupted"],i);const o=p(t,["groundingMetadata"]);o!=null&&m(e,["groundingMetadata"],o);const s=p(t,["generationComplete"]);s!=null&&m(e,["generationComplete"],s);const l=p(t,["inputTranscription"]);l!=null&&m(e,["inputTranscription"],XU(l));const c=p(t,["outputTranscription"]);c!=null&&m(e,["outputTranscription"],XU(c));const f=p(t,["urlContextMetadata"]);return f!=null&&m(e,["urlContextMetadata"],Iwe(f)),e}function Pwe(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function Mwe(t){const e={},n=p(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Pwe(i))),m(e,["functionCalls"],r)}return e}function Nwe(t){const e={},n=p(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function hv(t){const e={},n=p(t,["modality"]);n!=null&&m(e,["modality"],n);const r=p(t,["tokenCount"]);return r!=null&&m(e,["tokenCount"],r),e}function Dwe(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=p(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=p(t,["responseTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const s=p(t,["thoughtsTokenCount"]);s!=null&&m(e,["thoughtsTokenCount"],s);const l=p(t,["totalTokenCount"]);l!=null&&m(e,["totalTokenCount"],l);const c=p(t,["promptTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(E=>hv(E))),m(e,["promptTokensDetails"],v)}const f=p(t,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(E=>hv(E))),m(e,["cacheTokensDetails"],v)}const h=p(t,["responseTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(E=>hv(E))),m(e,["responseTokensDetails"],v)}const g=p(t,["toolUsePromptTokensDetails"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>hv(E))),m(e,["toolUsePromptTokensDetails"],v)}return e}function kwe(t){const e={},n=p(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function Owe(t){const e={},n=p(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const r=p(t,["resumable"]);r!=null&&m(e,["resumable"],r);const i=p(t,["lastConsumedClientMessageIndex"]);return i!=null&&m(e,["lastConsumedClientMessageIndex"],i),e}function Lwe(t){const e={};p(t,["setupComplete"])!=null&&m(e,["setupComplete"],Ewe());const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],Rwe(r));const i=p(t,["toolCall"]);i!=null&&m(e,["toolCall"],Mwe(i));const o=p(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],Nwe(o));const s=p(t,["usageMetadata"]);s!=null&&m(e,["usageMetadata"],Dwe(s));const l=p(t,["goAway"]);l!=null&&m(e,["goAway"],kwe(l));const c=p(t,["sessionResumptionUpdate"]);return c!=null&&m(e,["sessionResumptionUpdate"],Owe(c)),e}function Vwe(){return{}}function Uwe(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["weight"]);return r!=null&&m(e,["weight"],r),e}function Fwe(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Uwe(i))),m(e,["weightedPrompts"],r)}return e}function Bwe(t){const e={},n=p(t,["temperature"]);n!=null&&m(e,["temperature"],n);const r=p(t,["topK"]);r!=null&&m(e,["topK"],r);const i=p(t,["seed"]);i!=null&&m(e,["seed"],i);const o=p(t,["guidance"]);o!=null&&m(e,["guidance"],o);const s=p(t,["bpm"]);s!=null&&m(e,["bpm"],s);const l=p(t,["density"]);l!=null&&m(e,["density"],l);const c=p(t,["brightness"]);c!=null&&m(e,["brightness"],c);const f=p(t,["scale"]);f!=null&&m(e,["scale"],f);const h=p(t,["muteBass"]);h!=null&&m(e,["muteBass"],h);const g=p(t,["muteDrums"]);g!=null&&m(e,["muteDrums"],g);const v=p(t,["onlyBassAndDrums"]);v!=null&&m(e,["onlyBassAndDrums"],v);const E=p(t,["musicGenerationMode"]);return E!=null&&m(e,["musicGenerationMode"],E),e}function qwe(t){const e={},n=p(t,["clientContent"]);n!=null&&m(e,["clientContent"],Fwe(n));const r=p(t,["musicGenerationConfig"]);return r!=null&&m(e,["musicGenerationConfig"],Bwe(r)),e}function $we(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);r!=null&&m(e,["mimeType"],r);const i=p(t,["sourceMetadata"]);return i!=null&&m(e,["sourceMetadata"],qwe(i)),e}function zwe(t){const e={},n=p(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>$we(i))),m(e,["audioChunks"],r)}return e}function Hwe(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["filteredReason"]);return r!=null&&m(e,["filteredReason"],r),e}function Gwe(t){const e={};p(t,["setupComplete"])!=null&&m(e,["setupComplete"],Vwe());const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],zwe(r));const i=p(t,["filteredPrompt"]);return i!=null&&m(e,["filteredPrompt"],Hwe(i)),e}function jwe(t){const e={},n=p(t,["sessionId"]);return n!=null&&m(e,["sessionId"],n),e}function Kwe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function Wwe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Ywe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Jwe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Kwe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],Wwe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Ywe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function Qwe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Jwe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function ZU(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["finished"]);return r!=null&&m(e,["finished"],r),e}function Xwe(t){const e={},n=p(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],Qwe(n));const r=p(t,["turnComplete"]);r!=null&&m(e,["turnComplete"],r);const i=p(t,["interrupted"]);i!=null&&m(e,["interrupted"],i);const o=p(t,["groundingMetadata"]);o!=null&&m(e,["groundingMetadata"],o);const s=p(t,["generationComplete"]);s!=null&&m(e,["generationComplete"],s);const l=p(t,["inputTranscription"]);l!=null&&m(e,["inputTranscription"],ZU(l));const c=p(t,["outputTranscription"]);return c!=null&&m(e,["outputTranscription"],ZU(c)),e}function Zwe(t){const e={},n=p(t,["args"]);n!=null&&m(e,["args"],n);const r=p(t,["name"]);return r!=null&&m(e,["name"],r),e}function ebe(t){const e={},n=p(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Zwe(i))),m(e,["functionCalls"],r)}return e}function tbe(t){const e={},n=p(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function pv(t){const e={},n=p(t,["modality"]);n!=null&&m(e,["modality"],n);const r=p(t,["tokenCount"]);return r!=null&&m(e,["tokenCount"],r),e}function nbe(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=p(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=p(t,["candidatesTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const s=p(t,["thoughtsTokenCount"]);s!=null&&m(e,["thoughtsTokenCount"],s);const l=p(t,["totalTokenCount"]);l!=null&&m(e,["totalTokenCount"],l);const c=p(t,["promptTokensDetails"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(b=>pv(b))),m(e,["promptTokensDetails"],E)}const f=p(t,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(b=>pv(b))),m(e,["cacheTokensDetails"],E)}const h=p(t,["candidatesTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(b=>pv(b))),m(e,["responseTokensDetails"],E)}const g=p(t,["toolUsePromptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(b=>pv(b))),m(e,["toolUsePromptTokensDetails"],E)}const v=p(t,["trafficType"]);return v!=null&&m(e,["trafficType"],v),e}function rbe(t){const e={},n=p(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function ibe(t){const e={},n=p(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const r=p(t,["resumable"]);r!=null&&m(e,["resumable"],r);const i=p(t,["lastConsumedClientMessageIndex"]);return i!=null&&m(e,["lastConsumedClientMessageIndex"],i),e}function obe(t){const e={},n=p(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],jwe(n));const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],Xwe(r));const i=p(t,["toolCall"]);i!=null&&m(e,["toolCall"],ebe(i));const o=p(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],tbe(o));const s=p(t,["usageMetadata"]);s!=null&&m(e,["usageMetadata"],nbe(s));const l=p(t,["goAway"]);l!=null&&m(e,["goAway"],rbe(l));const c=p(t,["sessionResumptionUpdate"]);return c!=null&&m(e,["sessionResumptionUpdate"],ibe(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sbe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function abe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function lbe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function ube(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],sbe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],abe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],lbe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function bT(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ube(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function cbe(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const l=p(t,["format"]);l!=null&&m(e,["format"],l);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const g=p(t,["maxProperties"]);g!=null&&m(e,["maxProperties"],g);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const I=p(t,["nullable"]);I!=null&&m(e,["nullable"],I);const N=p(t,["pattern"]);N!=null&&m(e,["pattern"],N);const D=p(t,["properties"]);D!=null&&m(e,["properties"],D);const V=p(t,["propertyOrdering"]);V!=null&&m(e,["propertyOrdering"],V);const q=p(t,["required"]);q!=null&&m(e,["required"],q);const z=p(t,["title"]);z!=null&&m(e,["title"],z);const O=p(t,["type"]);return O!=null&&m(e,["type"],O),e}function fbe(t){const e={};if(p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["category"]);n!=null&&m(e,["category"],n);const r=p(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function dbe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function hbe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function pbe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],hbe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function mbe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function gbe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],mbe(n)),e}function ybe(){return{}}function vbe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function _be(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>dbe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],pbe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],gbe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],ybe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],vbe(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function Tbe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function Ebe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function wbe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],Ebe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function bbe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],Tbe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],wbe(r)),e}function Sbe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function cG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],Sbe(n)),e}function Abe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],cG(r)),e}function Cbe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Abe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function xbe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],cG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],Cbe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function Ibe(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function Rbe(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],bT(Ir(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const l=p(e,["topK"]);l!=null&&m(r,["topK"],l);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const g=p(e,["responseLogprobs"]);g!=null&&m(r,["responseLogprobs"],g);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const I=p(e,["responseSchema"]);I!=null&&m(r,["responseSchema"],cbe(o1(I)));const N=p(e,["responseJsonSchema"]);if(N!=null&&m(r,["responseJsonSchema"],N),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=p(e,["safetySettings"]);if(n!==void 0&&D!=null){let F=D;Array.isArray(F)&&(F=F.map(G=>fbe(G))),m(n,["safetySettings"],F)}const V=p(e,["tools"]);if(n!==void 0&&V!=null){let F=Wd(V);Array.isArray(F)&&(F=F.map(G=>_be(Kd(G)))),m(n,["tools"],F)}const q=p(e,["toolConfig"]);if(n!==void 0&&q!=null&&m(n,["toolConfig"],bbe(q)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=p(e,["cachedContent"]);n!==void 0&&z!=null&&m(n,["cachedContent"],ya(t,z));const O=p(e,["responseModalities"]);O!=null&&m(r,["responseModalities"],O);const L=p(e,["mediaResolution"]);L!=null&&m(r,["mediaResolution"],L);const k=p(e,["speechConfig"]);if(k!=null&&m(r,["speechConfig"],xbe(s1(k))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const $=p(e,["thinkingConfig"]);return $!=null&&m(r,["thinkingConfig"],Ibe($)),r}function e4(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Yi(i);Array.isArray(s)&&(s=s.map(l=>bT(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["generationConfig"],Rbe(t,o,n)),n}function Pbe(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Mbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["contents"]);i!=null&&m(n,["requests[]","content"],KH(t,i));const o=p(e,["config"]);o!=null&&m(n,["config"],Pbe(o,n));const s=p(e,["model"]);return s!==void 0&&m(n,["requests[]","model"],vt(t,s)),n}function Nbe(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=p(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["aspectRatio"]);e!==void 0&&i!=null&&m(e,["parameters","aspectRatio"],i);const o=p(t,["guidanceScale"]);if(e!==void 0&&o!=null&&m(e,["parameters","guidanceScale"],o),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&m(e,["parameters","safetySetting"],s);const l=p(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=p(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&m(e,["parameters","includeSafetyAttributes"],c);const f=p(t,["includeRaiReason"]);e!==void 0&&f!=null&&m(e,["parameters","includeRaiReason"],f);const h=p(t,["language"]);e!==void 0&&h!=null&&m(e,["parameters","language"],h);const g=p(t,["outputMimeType"]);e!==void 0&&g!=null&&m(e,["parameters","outputOptions","mimeType"],g);const v=p(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&m(e,["parameters","outputOptions","compressionQuality"],v),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const E=p(t,["imageSize"]);if(e!==void 0&&E!=null&&m(e,["parameters","sampleImageSize"],E),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Dbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&m(n,["config"],Nbe(o,n)),n}function kbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],vt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function Obe(t,e,n){const r={},i=p(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const s=p(e,["filter"]);n!==void 0&&s!=null&&m(n,["_query","filter"],s);const l=p(e,["queryBase"]);return n!==void 0&&l!=null&&m(n,["_url","models_url"],JH(t,l)),r}function Lbe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],Obe(t,r,n)),n}function Vbe(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function Ube(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],vt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],Vbe(i,n)),n}function Fbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],vt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function Bbe(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function qbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Yi(i);Array.isArray(s)&&(s=s.map(l=>bT(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],Bbe(o)),n}function fG(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],vc(n));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function $be(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);if(e!==void 0&&i!=null&&m(e,["instances[0]","image"],fG(i)),p(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function zbe(t,e){const n={},r=p(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=p(t,["durationSeconds"]);if(e!==void 0&&i!=null&&m(e,["parameters","durationSeconds"],i),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const s=p(t,["resolution"]);e!==void 0&&s!=null&&m(e,["parameters","resolution"],s);const l=p(t,["personGeneration"]);if(e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=p(t,["negativePrompt"]);e!==void 0&&c!=null&&m(e,["parameters","negativePrompt"],c);const f=p(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&m(e,["parameters","enhancePrompt"],f),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(p(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(p(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Hbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["image"]);if(o!=null&&m(n,["instances[0]","image"],fG(o)),p(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=p(e,["source"]);s!=null&&m(n,["config"],$be(s,n));const l=p(e,["config"]);return l!=null&&m(n,["config"],zbe(l,n)),n}function Gbe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function jbe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Kbe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Wbe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Gbe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],jbe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Kbe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function Jd(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Wbe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function Ybe(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const l=p(t,["format"]);l!=null&&m(e,["format"],l);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const g=p(t,["maxProperties"]);g!=null&&m(e,["maxProperties"],g);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const I=p(t,["nullable"]);I!=null&&m(e,["nullable"],I);const N=p(t,["pattern"]);N!=null&&m(e,["pattern"],N);const D=p(t,["properties"]);D!=null&&m(e,["properties"],D);const V=p(t,["propertyOrdering"]);V!=null&&m(e,["propertyOrdering"],V);const q=p(t,["required"]);q!=null&&m(e,["required"],q);const z=p(t,["title"]);z!=null&&m(e,["title"],z);const O=p(t,["type"]);return O!=null&&m(e,["type"],O),e}function Jbe(t){const e={},n=p(t,["featureSelectionPreference"]);return n!=null&&m(e,["featureSelectionPreference"],n),e}function Qbe(t){const e={},n=p(t,["method"]);n!=null&&m(e,["method"],n);const r=p(t,["category"]);r!=null&&m(e,["category"],r);const i=p(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function Xbe(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const l=p(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function Zbe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function eSe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],Zbe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function tSe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function nSe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],tSe(n)),e}function rSe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function iSe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function oSe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],iSe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const l=p(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function sSe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],oSe(n)),e}function aSe(){return{}}function lSe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function dG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(v=>Xbe(v))),m(e,["functionDeclarations"],g)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],eSe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],nSe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],rSe(s));const l=p(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],sSe(l)),p(t,["urlContext"])!=null&&m(e,["urlContext"],aSe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],lSe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function uSe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function cSe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function fSe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],cSe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function dSe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],uSe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],fSe(r)),e}function hSe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function pSe(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],hSe(n)),e}function mSe(t){const e={},n=p(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],pSe(n)),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function gSe(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function ySe(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],Jd(Ir(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const l=p(e,["topK"]);l!=null&&m(r,["topK"],l);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const g=p(e,["responseLogprobs"]);g!=null&&m(r,["responseLogprobs"],g);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const I=p(e,["responseSchema"]);I!=null&&m(r,["responseSchema"],Ybe(o1(I)));const N=p(e,["responseJsonSchema"]);N!=null&&m(r,["responseJsonSchema"],N);const D=p(e,["routingConfig"]);D!=null&&m(r,["routingConfig"],D);const V=p(e,["modelSelectionConfig"]);V!=null&&m(r,["modelConfig"],Jbe(V));const q=p(e,["safetySettings"]);if(n!==void 0&&q!=null){let Re=q;Array.isArray(Re)&&(Re=Re.map(ee=>Qbe(ee))),m(n,["safetySettings"],Re)}const z=p(e,["tools"]);if(n!==void 0&&z!=null){let Re=Wd(z);Array.isArray(Re)&&(Re=Re.map(ee=>dG(Kd(ee)))),m(n,["tools"],Re)}const O=p(e,["toolConfig"]);n!==void 0&&O!=null&&m(n,["toolConfig"],dSe(O));const L=p(e,["labels"]);n!==void 0&&L!=null&&m(n,["labels"],L);const k=p(e,["cachedContent"]);n!==void 0&&k!=null&&m(n,["cachedContent"],ya(t,k));const $=p(e,["responseModalities"]);$!=null&&m(r,["responseModalities"],$);const F=p(e,["mediaResolution"]);F!=null&&m(r,["mediaResolution"],F);const G=p(e,["speechConfig"]);G!=null&&m(r,["speechConfig"],mSe(s1(G)));const H=p(e,["audioTimestamp"]);H!=null&&m(r,["audioTimestamp"],H);const Ae=p(e,["thinkingConfig"]);return Ae!=null&&m(r,["thinkingConfig"],gSe(Ae)),r}function t4(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Yi(i);Array.isArray(s)&&(s=s.map(l=>Jd(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["generationConfig"],ySe(t,o,n)),n}function vSe(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["instances[]","title"],i);const o=p(t,["outputDimensionality"]);e!==void 0&&o!=null&&m(e,["parameters","outputDimensionality"],o);const s=p(t,["mimeType"]);e!==void 0&&s!=null&&m(e,["instances[]","mimeType"],s);const l=p(t,["autoTruncate"]);return e!==void 0&&l!=null&&m(e,["parameters","autoTruncate"],l),n}function _Se(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["contents"]);i!=null&&m(n,["instances[]","content"],KH(t,i));const o=p(e,["config"]);return o!=null&&m(n,["config"],vSe(o,n)),n}function TSe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const l=p(t,["guidanceScale"]);e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=p(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const g=p(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&m(e,["parameters","includeSafetyAttributes"],g);const v=p(t,["includeRaiReason"]);e!==void 0&&v!=null&&m(e,["parameters","includeRaiReason"],v);const E=p(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const S=p(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&m(e,["parameters","addWatermark"],A);const I=p(t,["imageSize"]);e!==void 0&&I!=null&&m(e,["parameters","sampleImageSize"],I);const N=p(t,["enhancePrompt"]);return e!==void 0&&N!=null&&m(e,["parameters","enhancePrompt"],N),n}function ESe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&m(n,["config"],TSe(o,n)),n}function ds(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["imageBytes"]);r!=null&&m(e,["bytesBase64Encoded"],vc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function wSe(t){const e={},n=p(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const r=p(t,["segmentationClasses"]);r!=null&&m(e,["maskClasses"],r);const i=p(t,["maskDilation"]);return i!=null&&m(e,["dilation"],i),e}function bSe(t){const e={},n=p(t,["controlType"]);n!=null&&m(e,["controlType"],n);const r=p(t,["enableControlImageComputation"]);return r!=null&&m(e,["computeControl"],r),e}function SSe(t){const e={},n=p(t,["styleDescription"]);return n!=null&&m(e,["styleDescription"],n),e}function ASe(t){const e={},n=p(t,["subjectType"]);n!=null&&m(e,["subjectType"],n);const r=p(t,["subjectDescription"]);return r!=null&&m(e,["subjectDescription"],r),e}function CSe(t){const e={},n=p(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],ds(n));const r=p(t,["referenceId"]);r!=null&&m(e,["referenceId"],r);const i=p(t,["referenceType"]);i!=null&&m(e,["referenceType"],i);const o=p(t,["maskImageConfig"]);o!=null&&m(e,["maskImageConfig"],wSe(o));const s=p(t,["controlImageConfig"]);s!=null&&m(e,["controlImageConfig"],bSe(s));const l=p(t,["styleImageConfig"]);l!=null&&m(e,["styleImageConfig"],SSe(l));const c=p(t,["subjectImageConfig"]);return c!=null&&m(e,["subjectImageConfig"],ASe(c)),e}function xSe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const l=p(t,["guidanceScale"]);e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=p(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const g=p(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&m(e,["parameters","includeSafetyAttributes"],g);const v=p(t,["includeRaiReason"]);e!==void 0&&v!=null&&m(e,["parameters","includeRaiReason"],v);const E=p(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const S=p(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&m(e,["parameters","addWatermark"],A);const I=p(t,["editMode"]);e!==void 0&&I!=null&&m(e,["parameters","editMode"],I);const N=p(t,["baseSteps"]);return e!==void 0&&N!=null&&m(e,["parameters","editConfig","baseSteps"],N),n}function ISe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>CSe(c))),m(n,["instances[0]","referenceImages"],l)}const s=p(e,["config"]);return s!=null&&m(n,["config"],xSe(s,n)),n}function RSe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["includeRaiReason"]);e!==void 0&&i!=null&&m(e,["parameters","includeRaiReason"],i);const o=p(t,["outputMimeType"]);e!==void 0&&o!=null&&m(e,["parameters","outputOptions","mimeType"],o);const s=p(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&m(e,["parameters","outputOptions","compressionQuality"],s);const l=p(t,["enhanceInputImage"]);e!==void 0&&l!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],l);const c=p(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const f=p(t,["numberOfImages"]);e!==void 0&&f!=null&&m(e,["parameters","sampleCount"],f);const h=p(t,["mode"]);return e!==void 0&&h!=null&&m(e,["parameters","mode"],h),n}function PSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["image"]);i!=null&&m(n,["instances[0]","image"],ds(i));const o=p(e,["upscaleFactor"]);o!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=p(e,["config"]);return s!=null&&m(n,["config"],RSe(s,n)),n}function MSe(t){const e={},n=p(t,["productImage"]);return n!=null&&m(e,["image"],ds(n)),e}function NSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["personImage"]);e!==void 0&&i!=null&&m(e,["instances[0]","personImage","image"],ds(i));const o=p(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>MSe(l))),m(e,["instances[0]","productImages"],s)}return n}function DSe(t,e){const n={},r=p(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["baseSteps"]);e!==void 0&&i!=null&&m(e,["parameters","editConfig","baseSteps"],i);const o=p(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const s=p(t,["seed"]);e!==void 0&&s!=null&&m(e,["parameters","seed"],s);const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&m(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const f=p(t,["addWatermark"]);e!==void 0&&f!=null&&m(e,["parameters","addWatermark"],f);const h=p(t,["outputMimeType"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","mimeType"],h);const g=p(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&m(e,["parameters","outputOptions","compressionQuality"],g);const v=p(t,["enhancePrompt"]);return e!==void 0&&v!=null&&m(e,["parameters","enhancePrompt"],v),n}function kSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["source"]);i!=null&&m(n,["config"],NSe(i,n));const o=p(e,["config"]);return o!=null&&m(n,["config"],DSe(o,n)),n}function OSe(t){const e={},n=p(t,["image"]);return n!=null&&m(e,["image"],ds(n)),e}function LSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],ds(i));const o=p(t,["scribbleImage"]);return e!==void 0&&o!=null&&m(e,["instances[0]","scribble"],OSe(o)),n}function VSe(t,e){const n={},r=p(t,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const i=p(t,["maxPredictions"]);e!==void 0&&i!=null&&m(e,["parameters","maxPredictions"],i);const o=p(t,["confidenceThreshold"]);e!==void 0&&o!=null&&m(e,["parameters","confidenceThreshold"],o);const s=p(t,["maskDilation"]);e!==void 0&&s!=null&&m(e,["parameters","maskDilation"],s);const l=p(t,["binaryColorThreshold"]);return e!==void 0&&l!=null&&m(e,["parameters","binaryColorThreshold"],l),n}function USe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["source"]);i!=null&&m(n,["config"],LSe(i,n));const o=p(e,["config"]);return o!=null&&m(n,["config"],VSe(o,n)),n}function FSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],vt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function BSe(t,e,n){const r={},i=p(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const s=p(e,["filter"]);n!==void 0&&s!=null&&m(n,["_query","filter"],s);const l=p(e,["queryBase"]);return n!==void 0&&l!=null&&m(n,["_url","models_url"],JH(t,l)),r}function qSe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],BSe(t,r,n)),n}function $Se(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function zSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],$Se(i,n)),n}function HSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],vt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function GSe(t,e){const n={},r=p(t,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],Jd(Ir(r)));const i=p(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>dG(l))),m(e,["tools"],s)}const o=p(t,["generationConfig"]);return e!==void 0&&o!=null&&m(e,["generationConfig"],o),n}function jSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Yi(i);Array.isArray(s)&&(s=s.map(l=>Jd(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],GSe(o,n)),n}function KSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["contents"]);if(i!=null){let s=Yi(i);Array.isArray(s)&&(s=s.map(l=>Jd(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],o),n}function hG(t){const e={},n=p(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["videoBytes"]);r!=null&&m(e,["bytesBase64Encoded"],vc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function WSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],ds(i));const o=p(t,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],hG(o)),n}function YSe(t){const e={},n=p(t,["image"]);n!=null&&m(e,["image"],ds(n));const r=p(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function JSe(t,e){const n={},r=p(t,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=p(t,["fps"]);e!==void 0&&o!=null&&m(e,["parameters","fps"],o);const s=p(t,["durationSeconds"]);e!==void 0&&s!=null&&m(e,["parameters","durationSeconds"],s);const l=p(t,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const c=p(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=p(t,["resolution"]);e!==void 0&&f!=null&&m(e,["parameters","resolution"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const g=p(t,["pubsubTopic"]);e!==void 0&&g!=null&&m(e,["parameters","pubsubTopic"],g);const v=p(t,["negativePrompt"]);e!==void 0&&v!=null&&m(e,["parameters","negativePrompt"],v);const E=p(t,["enhancePrompt"]);e!==void 0&&E!=null&&m(e,["parameters","enhancePrompt"],E);const b=p(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const S=p(t,["lastFrame"]);e!==void 0&&S!=null&&m(e,["instances[0]","lastFrame"],ds(S));const A=p(t,["referenceImages"]);if(e!==void 0&&A!=null){let N=A;Array.isArray(N)&&(N=N.map(D=>YSe(D))),m(e,["instances[0]","referenceImages"],N)}const I=p(t,["compressionQuality"]);return e!==void 0&&I!=null&&m(e,["parameters","compressionQuality"],I),n}function QSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],vt(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["image"]);o!=null&&m(n,["instances[0]","image"],ds(o));const s=p(e,["video"]);s!=null&&m(n,["instances[0]","video"],hG(s));const l=p(e,["source"]);l!=null&&m(n,["config"],WSe(l,n));const c=p(e,["config"]);return c!=null&&m(n,["config"],JSe(c,n)),n}function XSe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function ZSe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function eAe(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function tAe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],XSe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],ZSe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],eAe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function nAe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>tAe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function rAe(t){const e={},n=p(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function iAe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function oAe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>iAe(i))),m(e,["urlMetadata"],r)}return e}function sAe(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],nAe(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],rAe(r));const i=p(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],oAe(s));const l=p(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);return g!=null&&m(e,["safetyRatings"],g),e}function n4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>sAe(f))),m(e,["candidates"],c)}const i=p(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const s=p(t,["responseId"]);s!=null&&m(e,["responseId"],s);const l=p(t,["usageMetadata"]);return l!=null&&m(e,["usageMetadata"],l),e}function aAe(t){const e={},n=p(t,["values"]);return n!=null&&m(e,["values"],n),e}function lAe(){return{}}function uAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>aAe(s))),m(e,["embeddings"],o)}return p(t,["metadata"])!=null&&m(e,["metadata"],lAe()),e}function cAe(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],vc(n));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function pG(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=p(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=p(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function fAe(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["image"],cAe(n));const r=p(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=p(t,["_self"]);return i!=null&&m(e,["safetyAttributes"],pG(i)),e}function dAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>fAe(s))),m(e,["generatedImages"],o)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],pG(i)),e}function hAe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=p(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function SC(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["version"]);o!=null&&m(e,["version"],o);const s=p(t,["_self"]);s!=null&&m(e,["tunedModelInfo"],hAe(s));const l=p(t,["inputTokenLimit"]);l!=null&&m(e,["inputTokenLimit"],l);const c=p(t,["outputTokenLimit"]);c!=null&&m(e,["outputTokenLimit"],c);const f=p(t,["supportedGenerationMethods"]);return f!=null&&m(e,["supportedActions"],f),e}function pAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["_self"]);if(i!=null){let o=QH(i);Array.isArray(o)&&(o=o.map(s=>SC(s))),m(e,["models"],o)}return e}function mAe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function gAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["totalTokens"]);r!=null&&m(e,["totalTokens"],r);const i=p(t,["cachedContentTokenCount"]);return i!=null&&m(e,["cachedContentTokenCount"],i),e}function yAe(t){const e={},n=p(t,["video","uri"]);n!=null&&m(e,["uri"],n);const r=p(t,["video","encodedVideo"]);r!=null&&m(e,["videoBytes"],vc(r));const i=p(t,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function vAe(t){const e={},n=p(t,["_self"]);return n!=null&&m(e,["video"],yAe(n)),e}function _Ae(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>vAe(s))),m(e,["generatedVideos"],o)}const r=p(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function TAe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const s=p(t,["response","generateVideoResponse"]);return s!=null&&m(e,["response"],_Ae(s)),e}function EAe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function wAe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function bAe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function SAe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],EAe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],wAe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],bAe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function AAe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>SAe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function CAe(t){const e={},n=p(t,["citations"]);return n!=null&&m(e,["citations"],n),e}function xAe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function IAe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>xAe(i))),m(e,["urlMetadata"],r)}return e}function RAe(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],AAe(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],CAe(r));const i=p(t,["finishMessage"]);i!=null&&m(e,["finishMessage"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],IAe(s));const l=p(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);return g!=null&&m(e,["safetyRatings"],g),e}function r4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>RAe(h))),m(e,["candidates"],f)}const i=p(t,["createTime"]);i!=null&&m(e,["createTime"],i);const o=p(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const s=p(t,["promptFeedback"]);s!=null&&m(e,["promptFeedback"],s);const l=p(t,["responseId"]);l!=null&&m(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function PAe(t){const e={},n=p(t,["truncated"]);n!=null&&m(e,["truncated"],n);const r=p(t,["token_count"]);return r!=null&&m(e,["tokenCount"],r),e}function MAe(t){const e={},n=p(t,["values"]);n!=null&&m(e,["values"],n);const r=p(t,["statistics"]);return r!=null&&m(e,["statistics"],PAe(r)),e}function NAe(t){const e={},n=p(t,["billableCharacterCount"]);return n!=null&&m(e,["billableCharacterCount"],n),e}function DAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>MAe(s))),m(e,["embeddings"],o)}const i=p(t,["metadata"]);return i!=null&&m(e,["metadata"],NAe(i)),e}function mG(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["bytesBase64Encoded"]);r!=null&&m(e,["imageBytes"],vc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function gG(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=p(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=p(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function ST(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["image"],mG(n));const r=p(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=p(t,["_self"]);i!=null&&m(e,["safetyAttributes"],gG(i));const o=p(t,["prompt"]);return o!=null&&m(e,["enhancedPrompt"],o),e}function kAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ST(s))),m(e,["generatedImages"],o)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],gG(i)),e}function OAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>ST(o))),m(e,["generatedImages"],i)}return e}function LAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>ST(o))),m(e,["generatedImages"],i)}return e}function VAe(t){const e={},n=p(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ST(i))),m(e,["generatedImages"],r)}return e}function UAe(t){const e={},n=p(t,["label"]);n!=null&&m(e,["label"],n);const r=p(t,["score"]);return r!=null&&m(e,["score"],r),e}function FAe(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["mask"],mG(n));const r=p(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>UAe(o))),m(e,["labels"],i)}return e}function BAe(t){const e={},n=p(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>FAe(i))),m(e,["generatedMasks"],r)}return e}function qAe(t){const e={},n=p(t,["endpoint"]);n!=null&&m(e,["name"],n);const r=p(t,["deployedModelId"]);return r!=null&&m(e,["deployedModelId"],r),e}function $Ae(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=p(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function zAe(t){const e={},n=p(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const r=p(t,["epoch"]);r!=null&&m(e,["epoch"],r);const i=p(t,["step"]);return i!=null&&m(e,["step"],i),e}function AC(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["versionId"]);o!=null&&m(e,["version"],o);const s=p(t,["deployedModels"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>qAe(v))),m(e,["endpoints"],g)}const l=p(t,["labels"]);l!=null&&m(e,["labels"],l);const c=p(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],$Ae(c));const f=p(t,["defaultCheckpointId"]);f!=null&&m(e,["defaultCheckpointId"],f);const h=p(t,["checkpoints"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>zAe(v))),m(e,["checkpoints"],g)}return e}function HAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["_self"]);if(i!=null){let o=QH(i);Array.isArray(o)&&(o=o.map(s=>AC(s))),m(e,["models"],o)}return e}function GAe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function jAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["totalTokens"]);return r!=null&&m(e,["totalTokens"],r),e}function KAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["tokensInfo"]);return r!=null&&m(e,["tokensInfo"],r),e}function WAe(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const r=p(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],vc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function YAe(t){const e={},n=p(t,["_self"]);return n!=null&&m(e,["video"],WAe(n)),e}function JAe(t){const e={},n=p(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>YAe(s))),m(e,["generatedVideos"],o)}const r=p(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function QAe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const s=p(t,["response"]);return s!=null&&m(e,["response"],JAe(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XAe="Content-Type",ZAe="X-Server-Timeout",eCe="User-Agent",CC="x-goog-api-client",tCe="1.17.0",nCe=`google-genai-sdk/${tCe}`,rCe="v1beta1",iCe="v1beta",i4=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class oCe{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:rCe,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:iCe,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&sCe(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await o4(i),new _C(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await o4(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Uf(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:l,value:c}=yield qt(i.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const g=JSON.parse(f);if("error"in g){const v=JSON.parse(JSON.stringify(g.error)),E=v.status,b=v.code,S=`got status: ${E}. ${JSON.stringify(g)}`;if(b>=400&&b<600)throw new wT({message:S,status:b})}}catch(g){if(g.name==="ApiError")throw g}s+=f;let h=s.match(i4);for(;h;){const g=h[1];try{const v=new Response(g,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield qt(new _C(v)),s=s.slice(h[0].length),h=s.match(i4)}catch(v){throw new Error(`exception parsing stream chunk ${g}. ${v}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=nCe+" "+this.clientOptions.userAgentExtra;return e[eCe]=n,e[CC]=n,e[XAe]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(ZAe,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:ke("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function o4(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new wT({message:i,status:n}):new Error(i)}}function sCe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const l=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=s[c],h=l[c];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?l[c]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),l[c]=f)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aCe="mcp_used/unknown";let lCe=!1;function yG(t){for(const e of t)if(uCe(e)||typeof e=="object"&&"inputSchema"in e)return!0;return lCe}function vG(t){var e;const n=(e=t[CC])!==null&&e!==void 0?e:"";t[CC]=(n+` ${aCe}`).trimStart()}function uCe(t){return t!==null&&typeof t=="object"&&t instanceof l1}function cCe(t,e=100){return Uf(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield qt(t.listTools({cursor:r}));for(const s of o.tools)yield yield qt(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class l1{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new l1(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var l=!0,c=(n=void 0,Yp(cCe(h))),f;f=await c.next(),e=f.done,!e;l=!0){i=f.value,l=!1;const g=i;s.push(g);const v=g.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=h}}catch(g){n={error:g}}finally{try{!l&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),q_e(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fCe(t,e,n){const r=new D_e;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=Gwe(i);Object.assign(r,o),e(r)}class dCe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=mCe(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let f=()=>{};const h=new Promise(D=>{f=D}),g=e.callbacks,v=function(){f({})},E=this.apiClient,b={onopen:v,onmessage:D=>{fCe(E,g.onmessage,D)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=g==null?void 0:g.onclose)!==null&&r!==void 0?r:function(D){}},S=this.webSocketFactory.create(c,pCe(s),b);S.connect(),await h;const A=vt(this.apiClient,e.model),I=lG({model:A}),N=bC({setup:I});return S.send(JSON.stringify(N)),new hCe(S,this.apiClient)}}class hCe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=$Ee(e),r=uG(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=zEe(e),r=bC(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=bC({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(xf.PLAY)}pause(){this.sendPlaybackControl(xf.PAUSE)}stop(){this.sendPlaybackControl(xf.STOP)}resetContext(){this.sendPlaybackControl(xf.RESET_CONTEXT)}close(){this.conn.close()}}function pCe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function mCe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gCe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function yCe(t,e,n){const r=new N_e;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=obe(o);Object.assign(r,s)}else{const s=Lwe(o);Object.assign(r,s)}e(r)}class vCe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new dCe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&yG(e.config.tools)&&vG(g);const v=wCe(g);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v);else{const k=this.apiClient.getApiKey();let $="BidiGenerateContent",F="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),$="BidiGenerateContentConstrained",F="access_token"),h=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${$}?${F}=${k}`}let E=()=>{};const b=new Promise(k=>{E=k}),S=e.callbacks,A=function(){var k;(k=S==null?void 0:S.onopen)===null||k===void 0||k.call(S),E({})},I=this.apiClient,N={onopen:A,onmessage:k=>{yCe(I,S.onmessage,k)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(k){}},D=this.webSocketFactory.create(h,ECe(v),N);D.connect(),await b;let V=vt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const k=this.apiClient.getProject(),$=this.apiClient.getLocation();V=`projects/${k}/locations/${$}/`+V}let q={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[W_.AUDIO]}:e.config.responseModalities=[W_.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const z=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],O=[];for(const k of z)if(this.isCallableTool(k)){const $=k;O.push(await $.tool())}else O.push(k);O.length>0&&(e.config.tools=O);const L={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=ywe(this.apiClient,L):q=UEe(this.apiClient,L),delete q.config,D.send(JSON.stringify(q)),new TCe(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const _Ce={turnComplete:!0};class TCe{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Yi(n.turns),e.isVertexAI()?r=r.map(i=>Jd(i)):r=r.map(i=>bT(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(gCe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},_Ce),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Twe(e)}:n={realtimeInput:qEe(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ECe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function wCe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s4=10;function a4(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ff(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ff(t){return"callTool"in t&&typeof t.callTool=="function"}function bCe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Ff(i)))!==null&&r!==void 0?r:!1}function SCe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Ff(i)))!==null&&r!==void 0?r:!1}function l4(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ACe extends yc{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!bCe(n)||a4(n.config))return await this.generateContentInternal(c);if(SCe(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,h;const g=Yi(c.contents),v=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:s4;let E=0;for(;E<v&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const b=f.candidates[0].content,S=[];for(const A of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Ff(A)){const N=await A.callTool(f.functionCalls);S.push(...N)}E++,h={role:"user",parts:S},c.contents=Yi(c.contents),c.contents.push(b),c.contents.push(h),l4(c.config)&&(g.push(b),g.push(h))}return l4(c.config)&&(f.automaticFunctionCallingHistory=g),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),a4(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new vg(oc.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Ff(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&yG(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),vG(f),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return l}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Ff(s)){const l=s,c=await l.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,l)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:s4;let s=!1,l=0;const c=await this.initAfcToolsMap(e);return(function(f,h,g){var v,E;return Uf(this,arguments,function*(){for(var b,S,A,I;l<o;){s&&(l++,s=!1);const q=yield qt(f.processParamsMaybeAddMcpUsage(g)),z=yield qt(f.generateContentStreamInternal(q)),O=[],L=[];try{for(var N=!0,D=(S=void 0,Yp(z)),V;V=yield qt(D.next()),b=V.done,!b;N=!0){I=V.value,N=!1;const k=I;if(yield yield qt(k),k.candidates&&(!((v=k.candidates[0])===null||v===void 0)&&v.content)){L.push(k.candidates[0].content);for(const $ of(E=k.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(l<o&&$.functionCall){if(!$.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has($.functionCall.name)){const F=yield qt(h.get($.functionCall.name).callTool([$.functionCall]));O.push(...F)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${$.functionCall.name}`)}}}}catch(k){S={error:k}}finally{try{!N&&!b&&(A=D.return)&&(yield qt(A.call(D)))}finally{if(S)throw S.error}}if(O.length>0){s=!0;const k=new _p;k.candidates=[{content:{role:"user",parts:O}}],yield yield qt(k);const $=[];$.push(...L),$.push({role:"user",parts:O});const F=Yi(g.contents).concat($);g.contents=F}else break}})})(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=t4(this.apiClient,e);return l=ke("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=r4(h),v=new _p;return Object.assign(v,g),v})}else{const f=e4(this.apiClient,e);return l=ke("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=n4(h),v=new _p;return Object.assign(v,g),v})}}async generateContentStreamInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=t4(this.apiClient,e);return l=ke("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(g){return Uf(this,arguments,function*(){var v,E,b,S;try{for(var A=!0,I=Yp(g),N;N=yield qt(I.next()),v=N.done,!v;A=!0){S=N.value,A=!1;const D=S,V=r4(yield qt(D.json()));V.sdkHttpResponse={headers:D.headers};const q=new _p;Object.assign(q,V),yield yield qt(q)}}catch(D){E={error:D}}finally{try{!A&&!v&&(b=I.return)&&(yield qt(b.call(I)))}finally{if(E)throw E.error}}})})}else{const f=e4(this.apiClient,e);return l=ke("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(g){return Uf(this,arguments,function*(){var v,E,b,S;try{for(var A=!0,I=Yp(g),N;N=yield qt(I.next()),v=N.done,!v;A=!0){S=N.value,A=!1;const D=S,V=n4(yield qt(D.json()));V.sdkHttpResponse={headers:D.headers};const q=new _p;Object.assign(q,V),yield yield qt(q)}}catch(D){E={error:D}}finally{try{!A&&!v&&(b=I.return)&&(yield qt(b.call(I)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=_Se(this.apiClient,e);return l=ke("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=DAe(h),v=new NU;return Object.assign(v,g),v})}else{const f=Mbe(this.apiClient,e);return l=ke("{model}:batchEmbedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=uAe(h),v=new NU;return Object.assign(v,g),v})}}async generateImagesInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=ESe(this.apiClient,e);return l=ke("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=kAe(h),v=new DU;return Object.assign(v,g),v})}else{const f=Dbe(this.apiClient,e);return l=ke("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=dAe(h),v=new DU;return Object.assign(v,g),v})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=ISe(this.apiClient,e);return o=ke("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=OAe(c),h=new S_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=PSe(this.apiClient,e);return o=ke("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=LAe(c),h=new A_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=kSe(this.apiClient,e);return o=ke("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=VAe(c),h=new C_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=USe(this.apiClient,e);return o=ke("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=BAe(c),h=new x_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=FSe(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>AC(h))}else{const f=kbe(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>SC(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=qSe(this.apiClient,e);return l=ke("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=HAe(h),v=new kU;return Object.assign(v,g),v})}else{const f=Lbe(this.apiClient,e);return l=ke("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=pAe(h),v=new kU;return Object.assign(v,g),v})}}async update(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=zSe(this.apiClient,e);return l=ke("{model}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>AC(h))}else{const f=Ube(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>SC(h))}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=HSe(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=GAe(h),v=new OU;return Object.assign(v,g),v})}else{const f=Fbe(this.apiClient,e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=mAe(h),v=new OU;return Object.assign(v,g),v})}}async countTokens(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=jSe(this.apiClient,e);return l=ke("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=jAe(h),v=new LU;return Object.assign(v,g),v})}else{const f=qbe(this.apiClient,e);return l=ke("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=gAe(h),v=new LU;return Object.assign(v,g),v})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=KSe(this.apiClient,e);return o=ke("{model}:computeTokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=KAe(c),h=new I_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=QSe(this.apiClient,e);return l=ke("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const g=QAe(h),v=new Y_;return Object.assign(v,g),v})}else{const f=Hbe(this.apiClient,e);return l=ke("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=TAe(h),v=new Y_;return Object.assign(v,g),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CCe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function xCe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["operationName"],n);const r=p(t,["resourceName"]);r!=null&&m(e,["_url","resourceName"],r);const i=p(t,["config"]);return i!=null&&m(e,["config"],i),e}function ICe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RCe extends yc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=ICe(e);return l=ke("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const f=CCe(e);return l=ke("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=xCe(e);return o=ke("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PCe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function _G(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],PCe(n)),e}function MCe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],_G(r)),e}function NCe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>MCe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function DCe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],_G(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],NCe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function kCe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function OCe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function LCe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function VCe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],kCe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],OCe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],LCe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["codeExecutionResult"]);l!=null&&m(e,["codeExecutionResult"],l);const c=p(t,["executableCode"]);c!=null&&m(e,["executableCode"],c);const f=p(t,["functionCall"]);f!=null&&m(e,["functionCall"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function UCe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>VCe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function FCe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function BCe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function qCe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],BCe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function $Ce(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function zCe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],$Ce(n)),e}function HCe(){return{}}function GCe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function jCe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>FCe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],qCe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],zCe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],HCe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],GCe(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function KCe(t){const e={},n=p(t,["handle"]);if(n!=null&&m(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function u4(){return{}}function WCe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function YCe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],WCe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function JCe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function QCe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],JCe(r)),e}function XCe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function ZCe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const l=p(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const g=p(t,["speechConfig"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","speechConfig"],DCe(a1(g)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],UCe(Ir(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let q=Wd(b);Array.isArray(q)&&(q=q.map(z=>jCe(Kd(z)))),m(e,["setup","tools"],q)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],KCe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],u4());const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&m(e,["setup","outputAudioTranscription"],u4());const N=p(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&m(e,["setup","realtimeInputConfig"],YCe(N));const D=p(t,["contextWindowCompression"]);e!==void 0&&D!=null&&m(e,["setup","contextWindowCompression"],QCe(D));const V=p(t,["proactivity"]);return e!==void 0&&V!=null&&m(e,["setup","proactivity"],XCe(V)),n}function exe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],vt(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],ZCe(i,n)),n}function txe(t,e,n){const r={},i=p(e,["expireTime"]);n!==void 0&&i!=null&&m(n,["expireTime"],i);const o=p(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&m(n,["newSessionExpireTime"],o);const s=p(e,["uses"]);n!==void 0&&s!=null&&m(n,["uses"],s);const l=p(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&m(n,["bidiGenerateContentSetup"],exe(t,l));const c=p(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&m(n,["fieldMask"],c),r}function nxe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],txe(t,r,n)),n}function rxe(t){const e={},n=p(t,["name"]);return n!=null&&m(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ixe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function oxe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=ixe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class sxe extends yc{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=nxe(this.apiClient,e);o=ke("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const c=oxe(l,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>rxe(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function axe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function lxe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function uxe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],lxe(n,e)),e}function cxe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function fxe(t){const e={},n=p(t,["textInput"]);n!=null&&m(e,["textInput"],n);const r=p(t,["output"]);return r!=null&&m(e,["output"],r),e}function dxe(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=p(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>fxe(i))),m(e,["examples","examples"],r)}return e}function hxe(t,e){const n={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=p(t,["epochCount"]);e!==void 0&&i!=null&&m(e,["tuningTask","hyperparameters","epochCount"],i);const o=p(t,["learningRateMultiplier"]);if(o!=null&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=p(t,["batchSize"]);e!==void 0&&s!=null&&m(e,["tuningTask","hyperparameters","batchSize"],s);const l=p(t,["learningRate"]);return e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","learningRate"],l),n}function pxe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["preTunedModel"]);r!=null&&m(e,["preTunedModel"],r);const i=p(t,["trainingDataset"]);i!=null&&m(e,["tuningTask","trainingData"],dxe(i));const o=p(t,["config"]);return o!=null&&m(e,["config"],hxe(o,e)),e}function mxe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function gxe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function yxe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],gxe(n,e)),e}function vxe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function _xe(t,e){const n={},r=p(t,["gcsUri"]);e!==void 0&&r!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=p(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],i),p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Txe(t,e){const n={},r=p(t,["gcsUri"]);r!=null&&m(n,["validationDatasetUri"],r);const i=p(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function Exe(t,e){const n={},r=p(t,["validationDataset"]);e!==void 0&&r!=null&&m(e,["supervisedTuningSpec"],Txe(r,n));const i=p(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&m(e,["tunedModelDisplayName"],i);const o=p(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const s=p(t,["epochCount"]);e!==void 0&&s!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const l=p(t,["learningRateMultiplier"]);e!==void 0&&l!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const c=p(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=p(t,["preTunedModelCheckpointId"]);f!=null&&m(n,["preTunedModel","checkpointId"],f);const h=p(t,["adapterSize"]);if(e!==void 0&&h!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function wxe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["preTunedModel"]);r!=null&&m(e,["preTunedModel"],r);const i=p(t,["trainingDataset"]);i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],_xe(i,e));const o=p(t,["config"]);return o!=null&&m(e,["config"],Exe(o,e)),e}function bxe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["model"],n);const r=p(t,["name"]);return r!=null&&m(e,["endpoint"],r),e}function TG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],WH(i));const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["tuningTask","startTime"]);s!=null&&m(e,["startTime"],s);const l=p(t,["tuningTask","completeTime"]);l!=null&&m(e,["endTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["description"]);f!=null&&m(e,["description"],f);const h=p(t,["baseModel"]);h!=null&&m(e,["baseModel"],h);const g=p(t,["_self"]);g!=null&&m(e,["tunedModel"],bxe(g));const v=p(t,["customBaseModel"]);v!=null&&m(e,["customBaseModel"],v);const E=p(t,["experiment"]);E!=null&&m(e,["experiment"],E);const b=p(t,["labels"]);b!=null&&m(e,["labels"],b);const S=p(t,["outputUri"]);S!=null&&m(e,["outputUri"],S);const A=p(t,["pipelineJob"]);A!=null&&m(e,["pipelineJob"],A);const I=p(t,["serviceAccount"]);I!=null&&m(e,["serviceAccount"],I);const N=p(t,["tunedModelDisplayName"]);return N!=null&&m(e,["tunedModelDisplayName"],N),e}function Sxe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>TG(s))),m(e,["tuningJobs"],o)}return e}function Axe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=p(t,["done"]);o!=null&&m(e,["done"],o);const s=p(t,["error"]);return s!=null&&m(e,["error"],s),e}function Cxe(t){const e={},n=p(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const r=p(t,["epoch"]);r!=null&&m(e,["epoch"],r);const i=p(t,["step"]);i!=null&&m(e,["step"],i);const o=p(t,["endpoint"]);return o!=null&&m(e,["endpoint"],o),e}function xxe(t){const e={},n=p(t,["model"]);n!=null&&m(e,["model"],n);const r=p(t,["endpoint"]);r!=null&&m(e,["endpoint"],r);const i=p(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Cxe(s))),m(e,["checkpoints"],o)}return e}function xC(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],WH(i));const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["startTime"]);s!=null&&m(e,["startTime"],s);const l=p(t,["endTime"]);l!=null&&m(e,["endTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["error"]);f!=null&&m(e,["error"],f);const h=p(t,["description"]);h!=null&&m(e,["description"],h);const g=p(t,["baseModel"]);g!=null&&m(e,["baseModel"],g);const v=p(t,["tunedModel"]);v!=null&&m(e,["tunedModel"],xxe(v));const E=p(t,["preTunedModel"]);E!=null&&m(e,["preTunedModel"],E);const b=p(t,["supervisedTuningSpec"]);b!=null&&m(e,["supervisedTuningSpec"],b);const S=p(t,["tuningDataStats"]);S!=null&&m(e,["tuningDataStats"],S);const A=p(t,["encryptionSpec"]);A!=null&&m(e,["encryptionSpec"],A);const I=p(t,["partnerModelTuningSpec"]);I!=null&&m(e,["partnerModelTuningSpec"],I);const N=p(t,["customBaseModel"]);N!=null&&m(e,["customBaseModel"],N);const D=p(t,["experiment"]);D!=null&&m(e,["experiment"],D);const V=p(t,["labels"]);V!=null&&m(e,["labels"],V);const q=p(t,["outputUri"]);q!=null&&m(e,["outputUri"],q);const z=p(t,["pipelineJob"]);z!=null&&m(e,["pipelineJob"],z);const O=p(t,["serviceAccount"]);O!=null&&m(e,["serviceAccount"],O);const L=p(t,["tunedModelDisplayName"]);return L!=null&&m(e,["tunedModelDisplayName"],L),e}function Ixe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>xC(s))),m(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rxe extends yc{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new vg(oc.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:vC.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=mxe(e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>xC(h))}else{const f=axe(e);return l=ke("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>TG(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=yxe(e);return l=ke("tuningJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=Ixe(h),v=new UU;return Object.assign(v,g),v})}else{const f=uxe(e);return l=ke("tunedModels",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=Sxe(h),v=new UU;return Object.assign(v,g),v})}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const c=vxe(e);s=ke("{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=cxe(e);s=ke("{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=wxe(e);return o=ke("tuningJobs",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>xC(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=pxe(e);return o=ke("tunedModels",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>Axe(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pxe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Mxe=1024*1024*8,Nxe=3,Dxe=1e3,kxe=2,OS="x-goog-upload-status";async function Oxe(t,e,n){var r,i,o;let s=0,l=0,c=new _C(new Response),f="upload";for(s=t.size;l<s;){const g=Math.min(Mxe,s-l),v=t.slice(l,l+g);l+g>=s&&(f+=", finalize");let E=0,b=Dxe;for(;E<Nxe&&(c=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(g)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[OS]));)E++,await Vxe(b),b=b*kxe;if(l+=g,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[OS])!=="active")break;if(s<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[OS])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function Lxe(t){return{size:t.size,type:t.type}}function Vxe(t){return new Promise(e=>setTimeout(e,t))}class Uxe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Oxe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Lxe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fxe{create(e,n,r){return new Bxe(e,n,r)}}class Bxe{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c4="x-goog-api-key";class qxe{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(c4)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(c4,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $xe="gl-node/";class zxe{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=b_e(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new qxe(this.apiKey);this.apiClient=new oCe({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:$xe+"web",uploader:new Uxe,downloader:new Pxe}),this.models=new ACe(this.apiClient),this.live=new vCe(this.apiClient,i,new Fxe),this.batches=new W0e(this.apiClient),this.chats=new eEe(this.models,this.apiClient),this.caches=new QTe(this.apiClient),this.files=new hEe(this.apiClient),this.operations=new RCe(this.apiClient),this.authTokens=new sxe(this.apiClient),this.tunings=new Rxe(this.apiClient)}}const Hxe="AIzaSyByOfSHfNNIwPKwNOkklamTuSy1-t3NOPI",AT=new zxe({apiKey:Hxe}),Gxe=async t=>{var e;try{const n=await AT.models.generateImages({model:"imagen-4.0-generate-001",prompt:`Futuristic, dark, dystopian, gritty, mysterious, quest item. ${t}`,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"16:9"}});if(n.generatedImages&&n.generatedImages.length>0)return`data:image/jpeg;base64,${n.generatedImages[0].image.imageBytes}`;throw new Error("No image was generated by the API.")}catch(n){console.error("Error generating image with Gemini API:",n);let r="An unknown error occurred.";if(n instanceof Error){r=n.message;try{const i=n.message.includes("ApiError: ")?n.message.split("ApiError: ")[1]:n.message,o=JSON.parse(i);r=((e=o==null?void 0:o.error)==null?void 0:e.message)||r}catch{}}throw new Error(`Failed to generate image: ${r}`)}},jxe=async t=>{var e;try{const{prompt:n,tone:r,keywords:i,wordCount:o}=t,s=`Ты — талантливый сценарист для текстовых квестов в мрачном, загадочном сеттинге. Напиши художественное описание для одной игровой сцены на русском языке.

        Инструкции:
        - Тон/атмосфера: ${r}.
        - Обязательно упомяни следующие ключевые детали: ${i||"не указаны"}.
        - Объем текста: примерно ${o} слов.
        - Твой ответ должен содержать ТОЛЬКО готовый текст для сцены. Не добавляй заголовков, комментариев, цитат или приветствий.
        - Текст должен быть захватывающим и погружающим игрока в атмосферу.

        Основная идея от автора:
        "${n}"`,c=(await AT.models.generateContent({model:"gemini-2.5-flash",contents:s})).text;if(!c)throw new Error("API вернул пустой ответ.");return c.trim()}catch(n){console.error("Error generating text with Gemini API:",n);let r="Произошла неизвестная ошибка при генерации текста.";if(n instanceof Error){r=n.message;try{const i=n.message.includes("ApiError: ")?n.message.split("ApiError: ")[1]:n.message,o=JSON.parse(i);r=((e=o==null?void 0:o.error)==null?void 0:e.message)||r}catch{}}throw new Error(`Не удалось сгенерировать текст: ${r}`)}},Kxe=async t=>{if(!t||t.trim().length<10)throw new Error("Текст узла слишком короткий для анализа.");try{const e=`Ты — гейм-дизайнер, создающий текстовый квест. Основываясь на описании игровой сцены ниже, предложи 3-4 интересных и логичных варианта выбора для игрока. Варианты должны быть краткими и ориентированными на действие.

        Описание сцены:
        "${t}"

        Инструкции:
        - Верни ТОЛЬКО JSON-массив строк.
        - Никаких лишних комментариев, пояснений или markdown-форматирования.
        - Пример ответа: ["Осмотреть стол", "Подойти к окну", "Проверить карманы"]`,r=(await AT.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:ht.ARRAY,items:{type:ht.STRING}}}})).text.trim();if(!r)throw new Error("API вернул пустой ответ.");const i=JSON.parse(r);if(!Array.isArray(i)||!i.every(o=>typeof o=="string"))throw new Error("API вернул некорректный формат данных.");return i}catch(e){console.error("Error generating choices with Gemini API:",e);let n="Произошла неизвестная ошибка при генерации выборов.";throw e instanceof Error&&(n=`Не удалось сгенерировать выборы: ${e.message}`),new Error(n)}},Wxe=async t=>{const{prompt:e,genre:n,keywords:r,nodesCount:i,addLogic:o,complexity:s}=t,l={type:ht.OBJECT,description:"A dictionary of key-value pairs where values must be strings. Numbers should be converted to strings, e.g., '1'.",additionalProperties:{type:ht.STRING}},c={type:ht.OBJECT,description:"A dictionary of key-value pairs where values must be numbers.",additionalProperties:{type:ht.NUMBER}},f={type:ht.OBJECT,description:"Optional condition to show this choice. E.g. { 'has_item': 'key_card' } or { 'var_eq': { 'power_on': '1' } }.",properties:{has_item:{type:ht.STRING},missing_item:{type:ht.STRING},var_eq:l,var_neq:l}},h={type:ht.OBJECT,description:"An effect to apply. E.g. { 'inv_add': 'key_card' } or { 'set': { 'power_on': '1' } }.",properties:{inv_add:{type:ht.STRING},inv_remove:{type:ht.STRING},set:l,add:c}},g={type:ht.OBJECT,properties:{label:{type:ht.STRING,description:"The text displayed to the player for this choice, in Russian."},to:{type:ht.STRING,description:"The 'id' of the node this choice leads to. Must be one of the other generated node IDs."},when:{...f,nullable:!0},effects:{type:ht.ARRAY,items:h,nullable:!0}},required:["label","to"]},v={type:ht.OBJECT,properties:{id:{type:ht.STRING,description:"A unique, short, snake_case identifier for this node. The first node must have the id 'start'."},text:{type:ht.STRING,description:"The main descriptive text for this scene, in Russian. Should be engaging and atmospheric."},choices:{type:ht.ARRAY,description:"A list of 2-3 actions the player can take.",items:g,nullable:!0},effects:{type:ht.ARRAY,items:h,nullable:!0,description:"Optional effects that trigger upon entering this node."},end:{type:ht.OBJECT,nullable:!0,properties:{type:{type:ht.STRING,description:"'win' or 'lose'"},message:{type:ht.STRING,description:"Final message to the player, in Russian."}}}},required:["id","text"]},E={type:ht.OBJECT,properties:{nodes:{type:ht.ARRAY,description:"An array of all the quest nodes.",items:v}},required:["nodes"]};let b="";o&&(b=`
    **Игровая логика (Уровень сложности: ${s}):**
    1.  **Предметы и Переменные:** Придумай 1-3 ключевых предмета (например: 'старый_ключ', 'карта') и/или переменные состояния (например: 'генератор_включен'). Используй для них snake_case.
    2.  **ВАЖНОЕ ПРАВИЛО:** Для всех переменных в эффектах 'set' и условиях 'var_eq'/'var_neq' ВСЕГДА используй СТРОКИ в качестве значений (например, '1', 'true', 'активно'). Только для эффекта 'add' используй ЧИСЛА.
    3.  **Размещение:** В некоторых узлах добавь эффект 'effects' для добавления предмета в инвентарь или установки переменной. Формат: \`"effects": [{"inv_add": "название_предмета"}]\` или \`"effects": [{"set": {"переменная": "1"}}]\`. Для увеличения числовой переменной: \`"effects": [{"add": {"очки": 10}}]\`
    4.  **Преграды:** В других узлах создай выборы, которые требуют наличия предмета или определенного значения переменной. Используй условие 'when'. Формат: \`"when": {"has_item": "название_предмета"}\` или \`"when": {"var_eq": {"переменная": "1"}}\`.
    5.  **Сложность:**
        -   'easy': Простая логика (найти 1 предмет для 1 двери).
        -   'medium': Несколько предметов или переменных, возможно, одна ложная концовка.
        -   'hard': Комплексные взаимодействия, нелинейность, несколько условий для одного выбора.
    6.  **Структура JSON:** Поля 'when' и 'effects' являются опциональными. Добавляй их только там, где это необходимо для создания игровой механики.
    `);const S=`Ты — опытный сценарист и гейм-дизайнер текстовых квестов. Твоя задача — создать структуру для целого квеста на основе идеи автора, включая игровую логику.

    Инструкции:
    1.  Создай связную историю, состоящую примерно из ${i} узлов.
    2.  Первый узел ОБЯЗАТЕЛЬНО должен иметь id "start".
    3.  Все id узлов должны быть уникальными, короткими и в стиле snake_case (например: 'dark_corridor', 'captain_bridge').
    4.  Для каждого узла напиши атмосферный текст на русском языке.
    5.  Для каждого узла придумай 2-3 логичных варианта выбора ('choices').
    6.  Поле 'to' в каждом выборе должно ссылаться на id другого существующего узла, создавая связный граф истории. Убедись, что нет ссылок на несуществующие id.
    7.  Хотя бы один узел должен быть конечным, завершая историю (используй поле 'end', например: \`"end": {"type": "win", "message": "Вы победили!"}\`). У конечных узлов не должно быть поля 'choices'.
    ${b}
    8.  Верни результат в формате JSON, соответствующем предоставленной схеме. Не добавляй никаких комментариев или лишнего текста вне JSON.

    Параметры квеста от автора:
    -   Жанр/Сеттинг: ${n}
    -   Основная завязка сюжета: "${e}"
    -   Ключевые элементы, которые нужно включить: ${r||"не указаны"}
    `;try{const I=(await AT.models.generateContent({model:"gemini-2.5-flash",contents:S,config:{responseMimeType:"application/json",responseSchema:E}})).text.trim();if(!I)throw new Error("API вернул пустой ответ.");const N=JSON.parse(I);if(!N.nodes||!Array.isArray(N.nodes))throw new Error("API вернул некорректную структуру данных (отсутствует массив nodes).");const D={};for(const V of N.nodes)if(V.id){const{id:q,...z}=V;z.choices&&z.choices.length===0&&delete z.choices,z.effects&&z.effects.length===0&&delete z.effects,D[q]=z}if(!D.start)throw new Error("Сгенерированный сценарий не содержит обязательного узла 'start'.");return D}catch(A){console.error("Error generating quest DSL with Gemini API:",A);let I="Произошла неизвестная ошибка при генерации сценария.";throw A instanceof Error&&(I=`Не удалось сгенерировать сценарий: ${A.message}`),new Error(I)}},Yxe=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6-H5V5h12v4z"})}),Tp=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),EG=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-red-500 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),f4=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),Jxe=()=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-stone-400 hover:text-amber-400 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:[P.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),P.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),Qxe=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),Xxe=()=>P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-amber-400 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),IC=({nodeId:t,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:l,onFinishRename:c,onDeleteNode:f,level:h=0,visited:g})=>{const v=e.nodes[t];if(!v||g.has(t))return null;g.add(t);const E=()=>{c(t,i)},b=(v.choices||[]).map(S=>S.to).concat((v.branch||[]).map(S=>S.to)).concat(v.fallback?[v.fallback]:[]).filter((S,A,I)=>S&&e.nodes[S]&&I.indexOf(S)===A);return P.jsxs("div",{className:"relative",children:[h>0&&P.jsx("div",{className:"absolute top-0 left-[-11px] h-full w-px bg-stone-600"}),h>0&&P.jsx("div",{className:"absolute top-4 left-[-11px] w-3 h-px bg-stone-600"}),P.jsx("div",{className:`pl-${h*4}`,children:P.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md transition-colors group ${n===t?"bg-amber-500":"bg-stone-700 hover:bg-stone-600"}`,children:[r===t?P.jsx("input",{type:"text",value:i,onChange:S=>o(S.target.value),onBlur:E,onKeyDown:S=>S.key==="Enter"&&E(),className:"bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-2 py-1 text-sm w-full",autoFocus:!0}):P.jsx("button",{onClick:()=>s(t),className:`w-full text-left font-mono text-sm ${n===t?"text-stone-900 font-bold":""}`,children:t}),t!=="start"&&r!==t&&P.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[P.jsx("button",{onClick:()=>l(t),className:"p-1",children:P.jsx(Jxe,{})}),P.jsx("button",{onClick:()=>f(t),className:"p-1",children:P.jsx(EG,{})})]})]})}),P.jsx("div",{className:"mt-1",children:b.map(S=>P.jsx(IC,{nodeId:S,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:l,onFinishRename:c,onDeleteNode:f,level:h+1,visited:g},S))})]})},Zxe=()=>{var Tc,So,Ao,Co,jr;const{questId:t}=S4(),e=X_(),[n,r]=R.useState(null),[i,o]=R.useState(null),[s,l]=R.useState("start"),[c,f]=R.useState(!0),[h,g]=R.useState(!1),[v,E]=R.useState(""),[b,S]=R.useState(null),[A,I]=R.useState({}),[N,D]=R.useState(null),[V,q]=R.useState(""),[z,O]=R.useState(null),L=R.useRef(!1),[k,$]=R.useState(!1),[F,G]=R.useState({prompt:"",tone:"Таинственный",keywords:"",wordCount:100}),[H,Ae]=R.useState({loading:!1,error:"",text:""}),[Re,ee]=R.useState(!1),[he,Ee]=R.useState([]),[Le,K]=R.useState(""),ae=R.useCallback((re,ge=!1)=>{o(re),ge||(L.current=!0)},[]);R.useEffect(()=>{if(!t){E("Квест не найден."),f(!1);return}f(!0);const re=po(Vr,"games",t),ge=_m(re,xe=>{if(xe.exists()){const be={id:xe.id,...xe.data()};r(be),L.current||ae(JSON.parse(JSON.stringify(be.dsl)),!0)}else E("Квест не найден.");f(!1)},xe=>{console.error(xe),E("Ошибка загрузки квеста."),f(!1)});return()=>ge()},[t,ae]),R.useEffect(()=>{O(null),Ee([]),K("")},[s]);const ue=async()=>{if(!(!t||!i)){g(!0);try{await ym(po(Vr,"games",t),{title:i.meta.title,dsl:i,updatedAt:ul()}),S(new Date),L.current=!1}catch(re){console.error(re),alert("Не удалось сохранить изменения.")}finally{g(!1)}}},ve=(re,ge,xe)=>{if(!i)return;const be={...i,nodes:{...i.nodes}};be.nodes[re]={...be.nodes[re],[ge]:xe},ae(be)},Pe=(re,ge,xe,be)=>{if(!i)return;const Ie={...i,nodes:{...i.nodes}},Ge=[...Ie.nodes[re].choices||[]],lt={...Ge[ge]};be===void 0||Array.isArray(be)&&be.length===0?delete lt[xe]:lt[xe]=be,Ge[ge]=lt,Ie.nodes[re]={...Ie.nodes[re],choices:Ge},ae(Ie)},Be=(re,ge,xe)=>{var be,Ie,Ge,lt,un,Je,Tt,On,ii;if(i)if(xe==="__CREATE_NEW__"){const An=prompt("Введите ID нового узла (латиницей, без пробелов):");if(An&&/^[a-zA-Z0-9_]+$/.test(An)){if(i.nodes[An]){alert("Узел с таким ID уже существует.");const cn=document.getElementById(`choice-to-${ge}`);cn&&(cn.value=((Ge=(Ie=(be=i.nodes[re])==null?void 0:be.choices)==null?void 0:Ie[ge])==null?void 0:Ge.to)||"");return}const Tr={...i,nodes:{...i.nodes}};Tr.nodes[An]={text:"Новый узел..."};const Rt=[...Tr.nodes[re].choices||[]];Rt[ge]={...Rt[ge],to:An},Tr.nodes[re]={...Tr.nodes[re],choices:Rt},ae(Tr),l(An)}else if(An){alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.");const Tr=document.getElementById(`choice-to-${ge}`);Tr&&(Tr.value=((Je=(un=(lt=i.nodes[re])==null?void 0:lt.choices)==null?void 0:un[ge])==null?void 0:Je.to)||"")}else{const Tr=document.getElementById(`choice-to-${ge}`);Tr&&(Tr.value=((ii=(On=(Tt=i.nodes[re])==null?void 0:Tt.choices)==null?void 0:On[ge])==null?void 0:ii.to)||"")}}else Pe(re,ge,"to",xe)},ze=re=>{if(!i)return;const ge={...i,nodes:{...i.nodes}},xe=[...ge.nodes[re].choices||[]];xe.push({label:"",to:""}),ge.nodes[re]={...ge.nodes[re],choices:xe},ae(ge)},ln=(re,ge)=>{if(!i||!window.confirm("Вы уверены, что хотите удалить этот выбор?"))return;const xe={...i,nodes:{...i.nodes}},be=[...xe.nodes[re].choices||[]];be.splice(ge,1),xe.nodes[re]={...xe.nodes[re],choices:be},ae(xe)},_t=()=>{if(!i)return;const re=prompt("Введите ID нового узла (латиницей, без пробелов):");if(re&&/^[a-zA-Z0-9_]+$/.test(re)){if(i.nodes[re]){alert("Узел с таким ID уже существует.");return}const ge={...i,nodes:{...i.nodes}};ge.nodes[re]={text:"Новый узел..."},ae(ge),l(re)}else re&&alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.")},Se=(re,ge)=>{if(!i||!ge||ge===re||re==="start")return;if(!/^[a-zA-Z0-9_]+$/.test(ge)){alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.");return}if(i.nodes[ge]){alert("Узел с таким ID уже существует.");return}const xe=JSON.parse(JSON.stringify(i));xe.nodes[ge]=xe.nodes[re],delete xe.nodes[re],Object.values(xe.nodes).forEach(be=>{be.choices&&be.choices.forEach(Ie=>{Ie.to===re&&(Ie.to=ge)}),be.branch&&be.branch.forEach(Ie=>{Ie.to===re&&(Ie.to=ge)}),be.fallback===re&&(be.fallback=ge)}),ae(xe),s===re&&l(ge)},je=re=>{D(re),q(re)},Ye=(re,ge)=>{ge.trim()&&ge.trim()!==re&&Se(re,ge.trim()),D(null),q("")},me=re=>{if(!i||re==="start"||!window.confirm(`Вы уверены, что хотите удалить узел "${re}"? Это действие необратимо.`))return;const ge=[];if(Object.entries(i.nodes).forEach(([be,Ie])=>{if(be===re)return;((Ie.choices||[]).some(lt=>lt.to===re)||(Ie.branch||[]).some(lt=>lt.to===re)||Ie.fallback===re)&&ge.push(be)}),ge.length>0&&!window.confirm(`Внимание! На этот узел ссылаются следующие узлы: ${ge.join(", ")}. Все ссылки будут удалены. Продолжить?`))return;const xe=JSON.parse(JSON.stringify(i));delete xe.nodes[re],Object.values(xe.nodes).forEach(be=>{be.choices&&(be.choices=be.choices.map(Ie=>Ie.to===re?{...Ie,to:""}:Ie)),be.branch&&(be.branch=be.branch.filter(Ie=>Ie.to!==re)),be.fallback===re&&(be.fallback=void 0)}),s===re&&l("start"),ae(xe)},Kt=async re=>{var xe;if(!i||!t)return;const ge=(xe=document.getElementById(`image-prompt-${re}`))==null?void 0:xe.value;if(!ge){alert("Пожалуйста, введите описание для генерации изображения.");return}I(be=>({...be,[re]:{loading:!0,error:""}}));try{const be=await Gxe(ge),Ie=`${re}_${Date.now()}`,Ge=xA(hre,`quests/${t}/images/${Ie}.jpeg`),lt=be.split(",")[1],un=await Jne(Ge,lt,"base64",{contentType:"image/jpeg"}),Je=await _3(un.ref),Tt=JSON.parse(JSON.stringify(i));Tt.assets.images||(Tt.assets.images={}),Tt.assets.images[Ie]=Je,Tt.nodes[re].bg=Ie,ae(Tt),I(On=>({...On,[re]:{loading:!1,error:""}}))}catch(be){let Ie=be.message||"Ошибка генерации или загрузки";be instanceof Al.FirebaseError&&be.code==="storage/unauthorized"&&(Ie="Ошибка прав доступа. Проверьте правила безопасности Firebase Storage."),I(Ge=>({...Ge,[re]:{loading:!1,error:Ie}}))}},et=re=>re?re.all&&Array.isArray(re.all)?re.all:typeof re=="object"&&!re.all&&!re.any&&!re.not?[re]:[]:[],nn=re=>{if(re.length!==0)return re.length===1?re[0]:{all:re}},Sn=re=>{var Ie;const ge=(Ie=Ue==null?void 0:Ue.choices)==null?void 0:Ie[re];if(!ge)return;const be=[...et(ge.when),{has_item:""}];Pe(s,re,"when",nn(be))},Wt=(re,ge,xe)=>{var lt;const be=(lt=Ue==null?void 0:Ue.choices)==null?void 0:lt[re];if(!be)return;const Ge=[...et(be.when)];Ge[ge]=xe,Pe(s,re,"when",nn(Ge))},va=(re,ge)=>{var Ge;const xe=(Ge=Ue==null?void 0:Ue.choices)==null?void 0:Ge[re];if(!xe)return;const Ie=et(xe.when).filter((lt,un)=>un!==ge);Pe(s,re,"when",nn(Ie))},Fl=re=>{var Ie;const ge=(Ie=Ue==null?void 0:Ue.choices)==null?void 0:Ie[re];if(!ge)return;const be=[...ge.effects||[],{set:{variable:""}}];Pe(s,re,"effects",be)},bo=(re,ge,xe)=>{var lt;const be=(lt=Ue==null?void 0:Ue.choices)==null?void 0:lt[re];if(!be)return;const Ge=[...be.effects||[]];Ge[ge]=xe,Pe(s,re,"effects",Ge)},hs=(re,ge)=>{var Ge;const xe=(Ge=Ue==null?void 0:Ue.choices)==null?void 0:Ge[re];if(!xe)return;const Ie=(xe.effects||[]).filter((lt,un)=>un!==ge);Pe(s,re,"effects",Ie)},Qd=()=>{Ue&&(Ae({loading:!1,error:"",text:""}),G(re=>({...re,prompt:Ue.text||""})),$(!0))},_a=async re=>{re.preventDefault(),Ae({loading:!0,error:"",text:""});try{const ge=await jxe(F);Ae({loading:!1,error:"",text:ge})}catch(ge){Ae({loading:!1,error:ge.message,text:""})}},Bl=()=>{H.text&&(ve(s,"text",H.text),$(!1))},_c=async()=>{if(!(!Ue||typeof Ue.text!="string")){ee(!0),Ee([]),K("");try{const re=await Kxe(Ue.text);Ee(re)}catch(re){K(re.message)}finally{ee(!1)}}},Yt=re=>{if(!i||!s)return;const ge=JSON.parse(JSON.stringify(i)),xe=ge.nodes[s];xe.choices||(xe.choices=[]),xe.choices.push({label:re,to:""}),ae(ge),Ee(be=>be.filter(Ie=>Ie!==re))};if(c)return P.jsx("div",{className:"text-center p-8 font-display text-2xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА РЕДАКТОРА..."});if(v)return P.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:v});if(!n||!i)return null;const Ue=i.nodes[s],ar=new Set,yn=Object.keys(i.nodes),Ta=yn.includes("start")?"start":yn[0]||null;return P.jsxs("div",{className:"container mx-auto py-8 px-4",children:[P.jsxs("div",{className:"flex justify-between items-center mb-6",children:[P.jsxs("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[P.jsx("button",{onClick:()=>e("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:"← Назад"}),P.jsx("input",{type:"text",value:i.meta.title,onChange:re=>ae({...i,meta:{...i.meta,title:re.target.value}}),className:"font-display text-4xl text-stone-200 bg-transparent border-0 focus:ring-2 focus:ring-amber-500 rounded-md p-1 truncate"})]}),P.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[b&&P.jsxs("span",{className:"text-sm text-stone-400",children:["Сохранено: ",b.toLocaleTimeString()]}),P.jsxs("button",{onClick:ue,disabled:h,className:"flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[P.jsx(Yxe,{})," ",h?"СОХРАНЕНИЕ...":"СОХРАНИТЬ"]})]})]}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[P.jsxs("div",{className:"md:col-span-1 bg-stone-800/50 border border-stone-700 p-4 rounded-md flex flex-col h-full max-h-[75vh]",children:[P.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4 flex-shrink-0",children:"Узлы Сценария"}),P.jsxs("div",{className:"flex-grow overflow-y-auto space-y-1 pr-2",children:[Ta&&i.nodes[Ta]&&P.jsx(IC,{nodeId:Ta,dsl:i,selectedNodeId:s,onSelectNode:l,onStartRename:je,onFinishRename:Ye,onDeleteNode:me,renamingNodeId:N,renamingValue:V,setRenamingValue:q,visited:ar}),yn.filter(re=>!ar.has(re)).map(re=>P.jsx(IC,{nodeId:re,dsl:i,selectedNodeId:s,onSelectNode:l,onStartRename:je,onFinishRename:Ye,onDeleteNode:me,renamingNodeId:N,renamingValue:V,setRenamingValue:q,visited:ar},re))]}),P.jsxs("button",{onClick:_t,className:"mt-4 w-full flex items-center justify-center bg-stone-600 hover:bg-stone-500 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:[P.jsx(Qxe,{})," Создать узел"]})]}),P.jsx("div",{className:"md:col-span-3 bg-stone-800/50 border border-stone-700 p-6 rounded-md space-y-6 max-h-[75vh] overflow-y-auto",children:Ue?P.jsxs("div",{children:[P.jsxs("h3",{className:"font-display text-3xl text-stone-100 mb-4 border-b-2 border-amber-500 pb-2",children:["Узел: ",P.jsx("span",{className:"text-amber-400",children:s})]}),P.jsxs("div",{children:[P.jsxs("div",{className:"flex justify-between items-center mb-1",children:[P.jsx("label",{htmlFor:"nodeText",className:"text-sm font-bold text-stone-400 block",children:"Текст узла:"}),P.jsxs("button",{onClick:Qd,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors",children:[P.jsx(Tp,{})," Сгенерировать с AI"]})]}),P.jsx("textarea",{id:"nodeText",value:Ue.text,onChange:re=>ve(s,"text",re.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-40 resize-y"})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:"Фоновое изображение (AI):"}),P.jsxs("div",{className:"aspect-video bg-stone-900 rounded-md overflow-hidden relative flex items-center justify-center",children:[i.assets.images[Ue.bg||""]?P.jsx("img",{src:i.assets.images[Ue.bg||""],alt:"Generated background",className:"w-full h-full object-cover"}):P.jsx("span",{className:"text-stone-500",children:"Нет изображения"}),((Tc=A[s])==null?void 0:Tc.loading)&&P.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:P.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"})})]}),P.jsxs("div",{className:"flex gap-2",children:[P.jsx("input",{id:`image-prompt-${s}`,type:"text",placeholder:"Опишите сцену... (на английском)",className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),P.jsxs("button",{onClick:()=>Kt(s),disabled:(So=A[s])==null?void 0:So.loading,className:"flex items-center justify-center font-display text-lg bg-sky-600 text-white py-2 px-4 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600",children:[P.jsx(Tp,{})," ",(Ao=A[s])!=null&&Ao.loading?"Генерация...":"Создать"]})]}),((Co=A[s])==null?void 0:Co.error)&&P.jsx("p",{className:"text-red-500 text-sm mt-1",children:(jr=A[s])==null?void 0:jr.error})]}),P.jsxs("div",{children:[P.jsxs("div",{className:"flex justify-between items-center mt-6 mb-2",children:[P.jsx("h4",{className:"text-lg font-bold text-stone-300",children:"Выборы:"}),P.jsxs("button",{onClick:_c,disabled:Re,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[P.jsx(Tp,{})," ",Re?"Думаю...":"Предложить выборы"]})]}),Le&&P.jsx("p",{className:"text-red-500 text-sm my-2",children:Le}),he.length>0&&P.jsxs("div",{className:"p-2 bg-stone-900/50 rounded-md mb-2",children:[P.jsx("p",{className:"text-xs text-stone-400 mb-2",children:"Нажмите, чтобы добавить вариант:"}),P.jsx("div",{className:"flex flex-wrap gap-2",children:he.map((re,ge)=>P.jsxs("button",{onClick:()=>Yt(re),className:"bg-sky-800 text-sky-200 text-sm px-3 py-1 rounded-full hover:bg-sky-700 transition-colors",children:['+ "',re,'"']},ge))})]}),P.jsxs("div",{className:"space-y-2",children:[(Ue.choices||[]).map((re,ge)=>P.jsxs("div",{className:"bg-stone-900/50 p-3 rounded-md transition-all",children:[P.jsxs("div",{className:"flex gap-2 items-center",children:[P.jsx("input",{type:"text",value:re.label,onChange:xe=>Pe(s,ge,"label",xe.target.value),placeholder:"Текст выбора",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none"}),P.jsx("span",{className:"text-stone-400",children:"→"}),P.jsxs("select",{id:`choice-to-${ge}`,value:re.to||"",onChange:xe=>Be(s,ge,xe.target.value),className:"w-48 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none",children:[P.jsx("option",{value:"",disabled:!0,children:"Выберите узел..."}),P.jsx("option",{value:"__CREATE_NEW__",className:"text-sky-400 font-semibold",children:"[ Создать новый узел... ]"}),yn.map(xe=>P.jsx("option",{value:xe,children:xe},xe))]}),P.jsx("button",{onClick:()=>O(z===ge?null:ge),title:"Условия и эффекты",children:P.jsx(Xxe,{})}),P.jsx("button",{onClick:()=>ln(s,ge),title:"Удалить выбор",children:P.jsx(EG,{})})]}),z===ge&&P.jsxs("div",{className:"mt-3 space-y-4 border-t border-stone-700 pt-3",children:[P.jsxs("div",{children:[P.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2",children:"Условия видимости (должны быть выполнены все)"}),P.jsx("div",{className:"space-y-2",children:et(re.when).map((xe,be)=>{const Ie=Object.keys(xe)[0]||"has_item",Ge=xe[Ie],lt=Je=>{let Tt={};Je==="var_eq"||Je==="var_neq"?Tt={[Je]:{"":""}}:Tt={[Je]:""},Wt(ge,be,Tt)},un=(Je,Tt)=>{if(Ie==="var_eq"||Ie==="var_neq"){const On=Object.keys(Ge)[0],ii=Ge[On],An=Je==="key"?{[Tt]:ii}:{[On]:Tt};Wt(ge,be,{[Ie]:An})}else Wt(ge,be,{[Ie]:Tt})};return P.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[P.jsxs("select",{value:Ie,onChange:Je=>lt(Je.target.value),className:"bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none",children:[P.jsx("option",{value:"has_item",children:"Инвентарь: Есть"}),P.jsx("option",{value:"missing_item",children:"Инвентарь: Нет"}),P.jsx("option",{value:"var_eq",children:"Переменная ="}),P.jsx("option",{value:"var_neq",children:"Переменная ≠"})]}),Ie==="var_eq"||Ie==="var_neq"?P.jsxs(P.Fragment,{children:[P.jsx("input",{type:"text",value:Object.keys(Ge)[0]||"",onChange:Je=>un("key",Je.target.value),placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),P.jsx("input",{type:"text",value:Object.values(Ge)[0]||"",onChange:Je=>un("value",Je.target.value),placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"})]}):P.jsx("input",{type:"text",value:Ge,onChange:Je=>un("value",Je.target.value),placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),P.jsx("button",{onClick:()=>va(ge,be),className:"text-stone-500 hover:text-red-400",children:P.jsx(f4,{})})]},be)})}),P.jsx("button",{onClick:()=>Sn(ge),className:"mt-2 text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Добавить условие"})]}),P.jsxs("div",{children:[P.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2",children:"Эффекты при выборе"}),P.jsx("div",{className:"space-y-2",children:(re.effects||[]).map((xe,be)=>{const Ie=Object.keys(xe)[0],Ge=xe[Ie],lt=Je=>{let Tt={};Je==="set"||Je==="add"?Tt={[Je]:{"":""}}:Tt={[Je]:""},bo(ge,be,Tt)},un=(Je,Tt)=>{if(Ie==="set"||Ie==="add"){const On=Object.keys(Ge)[0],ii=Ge[On],An=Je==="key"?{[Tt]:ii}:{[On]:Tt};bo(ge,be,{[Ie]:An})}else bo(ge,be,{[Ie]:Tt})};return P.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[P.jsxs("select",{value:Ie,onChange:Je=>lt(Je.target.value),className:"bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none",children:[P.jsx("option",{value:"set",children:"Установить переменную"}),P.jsx("option",{value:"add",children:"Добавить к переменной"}),P.jsx("option",{value:"inv_add",children:"Добавить предмет"}),P.jsx("option",{value:"inv_remove",children:"Удалить предмет"})]}),Ie==="set"||Ie==="add"?P.jsxs(P.Fragment,{children:[P.jsx("input",{type:"text",value:Ge&&typeof Ge=="object"&&Object.keys(Ge)[0]||"",onChange:Je=>un("key",Je.target.value),placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),P.jsx("input",{type:Ie==="add"?"number":"text",value:Ge&&typeof Ge=="object"?String(Object.values(Ge)[0]??""):"",onChange:Je=>un("value",Je.target.value),placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"})]}):P.jsx("input",{type:"text",value:String(Ge??""),onChange:Je=>un("value",Je.target.value),placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),P.jsx("button",{onClick:()=>hs(ge,be),className:"text-stone-500 hover:text-red-400",children:P.jsx(f4,{})})]},be)})}),P.jsx("button",{onClick:()=>Fl(ge),className:"mt-2 text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Добавить эффект"})]})]})]},ge)),P.jsx("button",{onClick:()=>ze(s),className:"w-full text-stone-300 hover:bg-stone-700 p-2 rounded-md transition-colors text-sm font-semibold",children:"+ Добавить выбор"})]})]})]}):P.jsx("p",{className:"text-stone-400",children:"Выберите узел для редактирования"})})]}),k&&P.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>$(!1),role:"dialog","aria-modal":"true",children:P.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:re=>re.stopPropagation(),children:[P.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[P.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[P.jsx(Tp,{})," AI-Ассистент Сценариста"]}),P.jsx("button",{onClick:()=>$(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),P.jsxs("form",{onSubmit:_a,className:"p-6 space-y-4 overflow-y-auto",children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"ai-prompt",className:"text-sm font-bold text-stone-400 block mb-1",children:"Основная идея сцены:"}),P.jsx("textarea",{id:"ai-prompt",value:F.prompt,onChange:re=>G({...F,prompt:re.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:"Напр.: Герой входит в таверну, где за столом сидит загадочный незнакомец...",required:!0})]}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"ai-tone",className:"text-sm font-bold text-stone-400 block mb-1",children:"Тон / Атмосфера:"}),P.jsxs("select",{id:"ai-tone",value:F.tone,onChange:re=>G({...F,tone:re.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[P.jsx("option",{children:"Таинственный"}),P.jsx("option",{children:"Напряженный"}),P.jsx("option",{children:"Юмористический"}),P.jsx("option",{children:"Эпический"}),P.jsx("option",{children:"Мрачный"}),P.jsx("option",{children:"Спокойный"})]})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"ai-keywords",className:"text-sm font-bold text-stone-400 block mb-1",children:"Ключевые детали (через запятую):"}),P.jsx("input",{id:"ai-keywords",type:"text",value:F.keywords,onChange:re=>G({...F,keywords:re.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: камин, старая карта, шрам"})]})]}),P.jsxs("div",{children:[P.jsxs("label",{htmlFor:"ai-word-count",className:"text-sm font-bold text-stone-400 block mb-1",children:["Примерная длина текста: ",P.jsxs("span",{className:"font-mono text-amber-400",children:[F.wordCount," слов"]})]}),P.jsx("input",{id:"ai-word-count",type:"range",min:"30",max:"300",step:"10",value:F.wordCount,onChange:re=>G({...F,wordCount:parseInt(re.target.value,10)}),className:"w-full h-2 bg-stone-700 rounded-lg appearance-none cursor-pointer accent-amber-500"})]}),P.jsxs("button",{type:"submit",disabled:H.loading,className:"w-full flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[P.jsx(Tp,{})," ",H.loading?"ГЕНЕРАЦИЯ...":"СГЕНЕРИРОВАТЬ ТЕКСТ"]}),H.error&&P.jsx("p",{className:"text-red-500 text-center text-sm",children:H.error}),H.text&&P.jsxs("div",{className:"space-y-3 pt-4 border-t border-stone-700",children:[P.jsx("h4",{className:"text-sm font-bold text-stone-400 block",children:"Результат:"}),P.jsx("div",{className:"bg-stone-900 p-4 rounded-md text-stone-300 whitespace-pre-wrap max-h-48 overflow-y-auto",children:H.text}),P.jsx("button",{type:"button",onClick:Bl,className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Вставить в редактор"})]})]})]})})]})},d4=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),eIe=()=>{const t=X_(),[e,n]=R.useState({prompt:"",keywords:"",nodesCount:"5-7"}),[r,i]=R.useState("Киберпанк-нуар"),[o,s]=R.useState(""),[l,c]=R.useState(!1),[f,h]=R.useState("easy"),[g,v]=R.useState({loading:!1,error:""}),E=A=>{const{name:I,value:N}=A.target;n(D=>({...D,[I]:N}))},b=A=>{i(A.target.value)},S=async A=>{A.preventDefault();const I=r==="__CUSTOM__"?o:r;if(!I.trim()){v({loading:!1,error:"Пожалуйста, укажите жанр."});return}v({loading:!0,error:""});try{const N={...e,genre:I,addLogic:l,complexity:f},D=await Wxe(N),V=`AI: ${e.prompt.substring(0,30)}...`,z={format:"bk-quest@1",meta:{id:`quest_ai_${Date.now()}`,title:V,version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:D},O=await vm(Wo(Vr,"games"),{title:V,status:"draft",createdAt:ul(),updatedAt:ul(),dsl:z});t(`/admin/quest/${O.id}`)}catch(N){v({loading:!1,error:N.message})}};return P.jsxs("div",{className:"container mx-auto py-8 px-4",children:[P.jsx("div",{className:"flex items-center mb-6",children:P.jsx("button",{onClick:()=>t("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:"← Назад"})}),P.jsxs("div",{className:"max-w-4xl mx-auto bg-stone-800/50 border border-stone-700 p-8 rounded-md",children:[P.jsxs("h2",{className:"font-display text-4xl text-amber-400 mb-2 flex items-center",children:[P.jsx(d4,{}),"AI-Архитектор Квестов"]}),P.jsx("p",{className:"text-stone-400 mb-6",children:"Опишите вашу идею, и AI создаст базовую структуру сценария, которую вы сможете доработать в редакторе."}),P.jsxs("form",{onSubmit:S,className:"space-y-6",children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"prompt",className:"text-sm font-bold text-stone-300 block mb-2",children:"Основная завязка сюжета:"}),P.jsx("textarea",{id:"prompt",name:"prompt",value:e.prompt,onChange:E,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:"Напр.: Детектив в киберпанк-городе расследует исчезновение ученого. Квест начинается в его мрачном офисе...",required:!0})]}),P.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"genre",className:"text-sm font-bold text-stone-300 block mb-2",children:"Жанр / Сеттинг:"}),P.jsxs("select",{id:"genre",name:"genre",value:r,onChange:b,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[P.jsx("option",{children:"Киберпанк-нуар"}),P.jsx("option",{children:"Темное фэнтези"}),P.jsx("option",{children:"Научная фантастика"}),P.jsx("option",{children:"Космический хоррор"}),P.jsx("option",{children:"Мистический триллер"}),P.jsx("option",{children:"Детектив"}),P.jsx("option",{children:"Постапокалипсис"}),P.jsx("option",{children:"Выживание"}),P.jsx("option",{children:"Приключение"}),P.jsx("option",{value:"__CUSTOM__",children:"Свой вариант..."})]})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"keywords",className:"text-sm font-bold text-stone-300 block mb-2",children:"Ключевые элементы (через запятую):"}),P.jsx("input",{id:"keywords",name:"keywords",type:"text",value:e.keywords,onChange:E,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: импланты, корпорация, дождь"})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"nodesCount",className:"text-sm font-bold text-stone-300 block mb-2",children:"Примерное кол-во узлов:"}),P.jsx("input",{id:"nodesCount",name:"nodesCount",type:"text",value:e.nodesCount,onChange:E,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: 5-7"})]})]}),r==="__CUSTOM__"&&P.jsxs("div",{children:[P.jsx("label",{htmlFor:"customGenre",className:"text-sm font-bold text-stone-300 block mb-2",children:"Ваш собственный жанр:"}),P.jsx("input",{id:"customGenre",name:"customGenre",type:"text",value:o,onChange:A=>s(A.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: Подводное стимпанк-королевство грибов",required:!0})]}),P.jsxs("div",{className:"space-y-4 pt-4 border-t border-stone-600",children:[P.jsxs("label",{htmlFor:"addLogic",className:"flex items-center cursor-pointer",children:[P.jsx("input",{type:"checkbox",id:"addLogic",checked:l,onChange:A=>c(A.target.checked),className:"h-5 w-5 rounded border-stone-500 bg-stone-700 text-sky-500 focus:ring-sky-600"}),P.jsx("span",{className:"ml-3 text-stone-300 font-semibold",children:"Добавить игровую логику (предметы, условия, эффекты)"})]}),l&&P.jsxs("div",{className:"pl-8",children:[P.jsx("label",{htmlFor:"complexity",className:"text-sm font-bold text-stone-300 block mb-2",children:"Сложность логики:"}),P.jsxs("select",{id:"complexity",name:"complexity",value:f,onChange:A=>h(A.target.value),className:"w-full md:w-1/2 bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[P.jsx("option",{value:"easy",children:"Легко"}),P.jsx("option",{value:"medium",children:"Средне"}),P.jsx("option",{value:"hard",children:"Сложно"})]})]})]}),P.jsx("div",{className:"pt-4 border-t border-stone-700",children:P.jsxs("button",{type:"submit",disabled:g.loading,className:"w-full flex items-center justify-center font-display text-2xl bg-sky-600 text-white py-3 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[P.jsx(d4,{}),g.loading?"СОЗДАНИЕ СЦЕНАРИЯ...":"СГЕНЕРИРОВАТЬ КВЕСТ"]})}),g.error&&P.jsx("p",{className:"text-red-500 text-center text-sm",children:g.error})]})]})]})},tIe=()=>P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:P.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),h4=()=>{const[t,e]=R.useState(""),[n,r]=R.useState(""),[i,o]=R.useState(""),s=async l=>{l.preventDefault(),o("");try{await DF(Kp,t,n)}catch(c){o("Ошибка входа. Проверьте почту и пароль."),console.error(c)}};return P.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:P.jsxs("div",{className:"w-full max-w-sm p-8 bg-stone-800/50 border border-stone-700 rounded-md shadow-lg",children:[P.jsx("h2",{className:"font-display text-3xl text-center text-stone-200 mb-6 tracking-wider",children:"ВХОД В ПАНЕЛЬ"}),P.jsxs("form",{onSubmit:s,className:"space-y-4",children:[P.jsx("input",{type:"email",value:t,onChange:l=>e(l.target.value),placeholder:"Email",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Email",required:!0}),P.jsx("input",{type:"password",value:n,onChange:l=>r(l.target.value),placeholder:"Пароль",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Password",required:!0}),P.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[P.jsx(tIe,{}),"ВОЙТИ"]}),i&&P.jsx("p",{className:"text-red-500 text-center text-sm mt-4",children:i})]})]})})},nIe=()=>P.jsx("header",{className:"bg-black/50 border-b-2 border-amber-500/50 p-4 sticky top-0 z-20 backdrop-blur-sm",children:P.jsxs("div",{className:"container mx-auto text-center",children:[P.jsx("a",{href:"/#",className:"font-display text-4xl md:text-5xl text-amber-400 tracking-widest no-underline",children:"B_KOMHATE"}),P.jsx("p",{className:"text-stone-400 text-sm tracking-wider",children:"QUEST & CODEWORD PLATFORM"})]})}),p4=()=>P.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[P.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),P.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Страница не найдена."}),P.jsx("a",{href:"/#/admin",className:"text-amber-400 hover:text-amber-300 mt-4",children:"Перейти в панель управления"})]}),rIe=()=>{const{currentUser:t,loading:e}=pre(),n=fs();if(e)return P.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:P.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ИНИЦИАЛИЗАЦИЯ СИСТЕМЫ..."})});if(t)return P.jsxs(kN,{children:[P.jsx(Jr,{path:"/admin",element:P.jsx(g_e,{})}),P.jsx(Jr,{path:"/admin/quest/:questId",element:P.jsx(Zxe,{})}),P.jsx(Jr,{path:"/admin/architect",element:P.jsx(eIe,{})})," ",P.jsx(Jr,{path:"/",element:P.jsx(DN,{to:"/admin",replace:!0})}),P.jsx(Jr,{path:"/view",element:P.jsx($V,{})}),P.jsx(Jr,{path:"/play/:questId",element:P.jsx(zV,{})}),P.jsx(Jr,{path:"*",element:P.jsx(p4,{})})]});const r=n.pathname.startsWith("/admin");return P.jsxs(kN,{children:[P.jsx(Jr,{path:"/view",element:P.jsx($V,{})}),P.jsx(Jr,{path:"/play/:questId",element:P.jsx(zV,{})}),r&&P.jsx(Jr,{path:"/admin/*",element:P.jsx(h4,{})}),P.jsx(Jr,{path:"/admin",element:P.jsx(h4,{})}),P.jsx(Jr,{path:"/",element:P.jsx(DN,{to:"/admin",replace:!0})}),P.jsx(Jr,{path:"*",element:P.jsx(p4,{})})]})},iIe=()=>P.jsx("div",{className:"min-h-screen",children:P.jsx(mre,{children:P.jsxs(v7,{children:[P.jsx(nIe,{}),P.jsx("main",{children:P.jsx(rIe,{})})]})})}),wG=document.getElementById("root");if(!wG)throw new Error("Could not find root element to mount to");const oIe=s8.createRoot(wG);oIe.render(P.jsx(m4.StrictMode,{children:P.jsx(iIe,{})}));
