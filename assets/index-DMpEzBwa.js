var Z9=Object.defineProperty;var e8=(t,e,n)=>e in t?Z9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Sw=(t,e,n)=>e8(t,typeof e!="symbol"?e+"":e,n);function t8(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function as(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Aw={exports:{}},rp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AM;function n8(){if(AM)return rp;AM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var s=null;if(o!==void 0&&(s=""+o),i.key!==void 0&&(s=""+i.key),"key"in i){o={};for(var l in i)l!=="key"&&(o[l]=i[l])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:o}}return rp.Fragment=e,rp.jsx=n,rp.jsxs=n,rp}var xM;function r8(){return xM||(xM=1,Aw.exports=n8()),Aw.exports}var C=r8(),xw={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CM;function i8(){if(CM)return Qe;CM=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;function v(K){return K===null||typeof K!="object"?null:(K=g&&K[g]||K["@@iterator"],typeof K=="function"?K:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function A(K,de,ue){this.props=K,this.context=de,this.refs=S,this.updater=ue||E}A.prototype.isReactComponent={},A.prototype.setState=function(K,de){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,de,"setState")},A.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function I(){}I.prototype=A.prototype;function D(K,de,ue){this.props=K,this.context=de,this.refs=S,this.updater=ue||E}var k=D.prototype=new I;k.constructor=D,b(k,A.prototype),k.isPureReactComponent=!0;var q=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},H=Object.prototype.hasOwnProperty;function M(K,de,ue,Te,Le,Oe){return ue=Oe.ref,{$$typeof:t,type:K,key:de,ref:ue!==void 0?ue:null,props:Oe}}function L(K,de){return M(K.type,de,void 0,void 0,void 0,K.props)}function O(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function F(K){var de={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ue){return de[ue]})}var U=/\/+/g;function z(K,de){return typeof K=="object"&&K!==null&&K.key!=null?F(""+K.key):de.toString(36)}function G(){}function Ce(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(G,G):(K.status="pending",K.then(function(de){K.status==="pending"&&(K.status="fulfilled",K.value=de)},function(de){K.status==="pending"&&(K.status="rejected",K.reason=de)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function be(K,de,ue,Te,Le){var Oe=typeof K;(Oe==="undefined"||Oe==="boolean")&&(K=null);var qe=!1;if(K===null)qe=!0;else switch(Oe){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(K.$$typeof){case t:case e:qe=!0;break;case h:return qe=K._init,be(qe(K._payload),de,ue,Te,Le)}}if(qe)return Le=Le(K),qe=Te===""?"."+z(K,0):Te,q(Le)?(ue="",qe!=null&&(ue=qe.replace(U,"$&/")+"/"),be(Le,de,ue,"",function(Ee){return Ee})):Le!=null&&(O(Le)&&(Le=L(Le,ue+(Le.key==null||K&&K.key===Le.key?"":(""+Le.key).replace(U,"$&/")+"/")+qe)),de.push(Le)),1;qe=0;var Pt=Te===""?".":Te+":";if(q(K))for(var ht=0;ht<K.length;ht++)Te=K[ht],Oe=Pt+z(Te,ht),qe+=be(Te,de,ue,Oe,Le);else if(ht=v(K),typeof ht=="function")for(K=ht.call(K),ht=0;!(Te=K.next()).done;)Te=Te.value,Oe=Pt+z(Te,ht++),qe+=be(Te,de,ue,Oe,Le);else if(Oe==="object"){if(typeof K.then=="function")return be(Ce(K),de,ue,Te,Le);throw de=String(K),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.")}return qe}function ee(K,de,ue){if(K==null)return K;var Te=[],Le=0;return be(K,Te,"","",function(Oe){return de.call(ue,Oe,Le++)}),Te}function le(K){if(K._status===-1){var de=K._result;de=de(),de.then(function(ue){(K._status===0||K._status===-1)&&(K._status=1,K._result=ue)},function(ue){(K._status===0||K._status===-1)&&(K._status=2,K._result=ue)}),K._status===-1&&(K._status=0,K._result=de)}if(K._status===1)return K._result.default;throw K._result}var Se=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var de=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(de))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function Ve(){}return Qe.Children={map:ee,forEach:function(K,de,ue){ee(K,function(){de.apply(this,arguments)},ue)},count:function(K){var de=0;return ee(K,function(){de++}),de},toArray:function(K){return ee(K,function(de){return de})||[]},only:function(K){if(!O(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Qe.Component=A,Qe.Fragment=n,Qe.Profiler=i,Qe.PureComponent=D,Qe.StrictMode=r,Qe.Suspense=c,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(K){return $.H.useMemoCache(K)}},Qe.cache=function(K){return function(){return K.apply(null,arguments)}},Qe.cloneElement=function(K,de,ue){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Te=b({},K.props),Le=K.key,Oe=void 0;if(de!=null)for(qe in de.ref!==void 0&&(Oe=void 0),de.key!==void 0&&(Le=""+de.key),de)!H.call(de,qe)||qe==="key"||qe==="__self"||qe==="__source"||qe==="ref"&&de.ref===void 0||(Te[qe]=de[qe]);var qe=arguments.length-2;if(qe===1)Te.children=ue;else if(1<qe){for(var Pt=Array(qe),ht=0;ht<qe;ht++)Pt[ht]=arguments[ht+2];Te.children=Pt}return M(K.type,Le,void 0,void 0,Oe,Te)},Qe.createContext=function(K){return K={$$typeof:s,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:o,_context:K},K},Qe.createElement=function(K,de,ue){var Te,Le={},Oe=null;if(de!=null)for(Te in de.key!==void 0&&(Oe=""+de.key),de)H.call(de,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Le[Te]=de[Te]);var qe=arguments.length-2;if(qe===1)Le.children=ue;else if(1<qe){for(var Pt=Array(qe),ht=0;ht<qe;ht++)Pt[ht]=arguments[ht+2];Le.children=Pt}if(K&&K.defaultProps)for(Te in qe=K.defaultProps,qe)Le[Te]===void 0&&(Le[Te]=qe[Te]);return M(K,Oe,void 0,void 0,null,Le)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(K){return{$$typeof:l,render:K}},Qe.isValidElement=O,Qe.lazy=function(K){return{$$typeof:h,_payload:{_status:-1,_result:K},_init:le}},Qe.memo=function(K,de){return{$$typeof:f,type:K,compare:de===void 0?null:de}},Qe.startTransition=function(K){var de=$.T,ue={};$.T=ue;try{var Te=K(),Le=$.S;Le!==null&&Le(ue,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(Ve,Se)}catch(Oe){Se(Oe)}finally{$.T=de}},Qe.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Qe.use=function(K){return $.H.use(K)},Qe.useActionState=function(K,de,ue){return $.H.useActionState(K,de,ue)},Qe.useCallback=function(K,de){return $.H.useCallback(K,de)},Qe.useContext=function(K){return $.H.useContext(K)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(K,de){return $.H.useDeferredValue(K,de)},Qe.useEffect=function(K,de,ue){var Te=$.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Te.useEffect(K,de)},Qe.useId=function(){return $.H.useId()},Qe.useImperativeHandle=function(K,de,ue){return $.H.useImperativeHandle(K,de,ue)},Qe.useInsertionEffect=function(K,de){return $.H.useInsertionEffect(K,de)},Qe.useLayoutEffect=function(K,de){return $.H.useLayoutEffect(K,de)},Qe.useMemo=function(K,de){return $.H.useMemo(K,de)},Qe.useOptimistic=function(K,de){return $.H.useOptimistic(K,de)},Qe.useReducer=function(K,de,ue){return $.H.useReducer(K,de,ue)},Qe.useRef=function(K){return $.H.useRef(K)},Qe.useState=function(K){return $.H.useState(K)},Qe.useSyncExternalStore=function(K,de,ue){return $.H.useSyncExternalStore(K,de,ue)},Qe.useTransition=function(){return $.H.useTransition()},Qe.version="19.1.1",Qe}var IM;function xd(){return IM||(IM=1,xw.exports=i8()),xw.exports}var R=xd();const T4=as(R),o8=t8({__proto__:null,default:T4},[R]);var Cw={exports:{}},ip={},Iw={exports:{}},Rw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RM;function s8(){return RM||(RM=1,(function(t){function e(ee,le){var Se=ee.length;ee.push(le);e:for(;0<Se;){var Ve=Se-1>>>1,K=ee[Ve];if(0<i(K,le))ee[Ve]=le,ee[Se]=K,Se=Ve;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var le=ee[0],Se=ee.pop();if(Se!==le){ee[0]=Se;e:for(var Ve=0,K=ee.length,de=K>>>1;Ve<de;){var ue=2*(Ve+1)-1,Te=ee[ue],Le=ue+1,Oe=ee[Le];if(0>i(Te,Se))Le<K&&0>i(Oe,Te)?(ee[Ve]=Oe,ee[Le]=Se,Ve=Le):(ee[Ve]=Te,ee[ue]=Se,Ve=ue);else if(Le<K&&0>i(Oe,Se))ee[Ve]=Oe,ee[Le]=Se,Ve=Le;else break e}}return le}function i(ee,le){var Se=ee.sortIndex-le.sortIndex;return Se!==0?Se:ee.id-le.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],f=[],h=1,g=null,v=3,E=!1,b=!1,S=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function q(ee){for(var le=n(f);le!==null;){if(le.callback===null)r(f);else if(le.startTime<=ee)r(f),le.sortIndex=le.expirationTime,e(c,le);else break;le=n(f)}}function $(ee){if(S=!1,q(ee),!b)if(n(c)!==null)b=!0,H||(H=!0,z());else{var le=n(f);le!==null&&be($,le.startTime-ee)}}var H=!1,M=-1,L=5,O=-1;function F(){return A?!0:!(t.unstable_now()-O<L)}function U(){if(A=!1,H){var ee=t.unstable_now();O=ee;var le=!0;try{e:{b=!1,S&&(S=!1,D(M),M=-1),E=!0;var Se=v;try{t:{for(q(ee),g=n(c);g!==null&&!(g.expirationTime>ee&&F());){var Ve=g.callback;if(typeof Ve=="function"){g.callback=null,v=g.priorityLevel;var K=Ve(g.expirationTime<=ee);if(ee=t.unstable_now(),typeof K=="function"){g.callback=K,q(ee),le=!0;break t}g===n(c)&&r(c),q(ee)}else r(c);g=n(c)}if(g!==null)le=!0;else{var de=n(f);de!==null&&be($,de.startTime-ee),le=!1}}break e}finally{g=null,v=Se,E=!1}le=void 0}}finally{le?z():H=!1}}}var z;if(typeof k=="function")z=function(){k(U)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Ce=G.port2;G.port1.onmessage=U,z=function(){Ce.postMessage(null)}}else z=function(){I(U,0)};function be(ee,le){M=I(function(){ee(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var le=3;break;default:le=v}var Se=v;v=le;try{return ee()}finally{v=Se}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(ee,le){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Se=v;v=ee;try{return le()}finally{v=Se}},t.unstable_scheduleCallback=function(ee,le,Se){var Ve=t.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Ve+Se:Ve):Se=Ve,ee){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Se+K,ee={id:h++,callback:le,priorityLevel:ee,startTime:Se,expirationTime:K,sortIndex:-1},Se>Ve?(ee.sortIndex=Se,e(f,ee),n(c)===null&&ee===n(f)&&(S?(D(M),M=-1):S=!0,be($,Se-Ve))):(ee.sortIndex=K,e(c,ee),b||E||(b=!0,H||(H=!0,z()))),ee},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(ee){var le=v;return function(){var Se=v;v=le;try{return ee.apply(this,arguments)}finally{v=Se}}}})(Rw)),Rw}var PM;function a8(){return PM||(PM=1,Iw.exports=s8()),Iw.exports}var Pw={exports:{}},wr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NM;function l8(){if(NM)return wr;NM=1;var t=xd();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(c,f,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:f,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return wr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,wr.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(c,f,null,h)},wr.flushSync=function(c){var f=s.T,h=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=f,r.p=h,r.d.f()}},wr.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},wr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},wr.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,g=l(h,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,E=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:E}):h==="script"&&r.d.X(c,{crossOrigin:g,integrity:v,fetchPriority:E,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},wr.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=l(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},wr.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,g=l(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},wr.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=l(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},wr.requestFormReset=function(c){r.d.r(c)},wr.unstable_batchedUpdates=function(c,f){return c(f)},wr.useFormState=function(c,f,h){return s.H.useFormState(c,f,h)},wr.useFormStatus=function(){return s.H.useHostTransitionStatus()},wr.version="19.1.1",wr}var MM;function E4(){if(MM)return Pw.exports;MM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Pw.exports=l8(),Pw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DM;function u8(){if(DM)return ip;DM=1;var t=a8(),e=xd(),n=E4();function r(a){var u="https://react.dev/errors/"+a;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var u=a,d=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(d=u.return),a=u.return;while(a)}return u.tag===3?d:null}function s(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function l(a){if(o(a)!==a)throw Error(r(188))}function c(a){var u=a.alternate;if(!u){if(u=o(a),u===null)throw Error(r(188));return u!==a?null:a}for(var d=a,y=u;;){var T=d.return;if(T===null)break;var w=T.alternate;if(w===null){if(y=T.return,y!==null){d=y;continue}break}if(T.child===w.child){for(w=T.child;w;){if(w===d)return l(T),a;if(w===y)return l(T),u;w=w.sibling}throw Error(r(188))}if(d.return!==y.return)d=T,y=w;else{for(var N=!1,V=T.child;V;){if(V===d){N=!0,d=T,y=w;break}if(V===y){N=!0,y=T,d=w;break}V=V.sibling}if(!N){for(V=w.child;V;){if(V===d){N=!0,d=w,y=T;break}if(V===y){N=!0,y=w,d=T;break}V=V.sibling}if(!N)throw Error(r(189))}}if(d.alternate!==y)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?a:u}function f(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a;for(a=a.child;a!==null;){if(u=f(a),u!==null)return u;a=a.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),k=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var G=Symbol.for("react.client.reference");function Ce(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===G?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case $:return"Suspense";case H:return"SuspenseList";case O:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case k:return(a.displayName||"Context")+".Provider";case D:return(a._context.displayName||"Context")+".Consumer";case q:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case M:return u=a.displayName||null,u!==null?u:Ce(a.type)||"Memo";case L:u=a._payload,a=a._init;try{return Ce(a(u))}catch{}}return null}var be=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},Ve=[],K=-1;function de(a){return{current:a}}function ue(a){0>K||(a.current=Ve[K],Ve[K]=null,K--)}function Te(a,u){K++,Ve[K]=a.current,a.current=u}var Le=de(null),Oe=de(null),qe=de(null),Pt=de(null);function ht(a,u){switch(Te(qe,u),Te(Oe,a),Te(Le,null),u.nodeType){case 9:case 11:a=(a=u.documentElement)&&(a=a.namespaceURI)?ZN(a):0;break;default:if(a=u.tagName,u=u.namespaceURI)u=ZN(u),a=eM(u,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ue(Le),Te(Le,a)}function Ee(){ue(Le),ue(Oe),ue(qe)}function je(a){a.memoizedState!==null&&Te(Pt,a);var u=Le.current,d=eM(u,a.type);u!==d&&(Te(Oe,a),Te(Le,d))}function Ye(a){Oe.current===a&&(ue(Le),ue(Oe)),Pt.current===a&&(ue(Pt),Xh._currentValue=Se)}var me=Object.prototype.hasOwnProperty,Lt=t.unstable_scheduleCallback,st=t.unstable_cancelCallback,En=t.unstable_shouldYield,Cn=t.unstable_requestPaint,pn=t.unstable_now,Ta=t.unstable_getCurrentPriorityLevel,Ea=t.unstable_ImmediatePriority,cs=t.unstable_UserBlockingPriority,Ao=t.unstable_NormalPriority,ih=t.unstable_LowPriority,wa=t.unstable_IdlePriority,$l=t.log,bc=t.unstable_setDisableYieldValue,en=null,mt=null;function Nr(a){if(typeof $l=="function"&&bc(a),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(en,a)}catch{}}var Ln=Math.clz32?Math.clz32:fs,ba=Math.log,Sc=Math.LN2;function fs(a){return a>>>=0,a===0?32:31-(ba(a)/Sc|0)|0}var ds=256,hs=4194304;function ii(a){var u=a&42;if(u!==0)return u;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Sa(a,u,d){var y=a.pendingLanes;if(y===0)return 0;var T=0,w=a.suspendedLanes,N=a.pingedLanes;a=a.warmLanes;var V=y&134217727;return V!==0?(y=V&~w,y!==0?T=ii(y):(N&=V,N!==0?T=ii(N):d||(d=V&~a,d!==0&&(T=ii(d))))):(V=y&~w,V!==0?T=ii(V):N!==0?T=ii(N):d||(d=y&~a,d!==0&&(T=ii(d)))),T===0?0:u!==0&&u!==T&&(u&w)===0&&(w=T&-T,d=u&-u,w>=d||w===32&&(d&4194048)!==0)?u:T}function ps(a,u){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&u)===0}function zl(a,u){switch(a){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $t(){var a=ds;return ds<<=1,(ds&4194048)===0&&(ds=256),a}function ms(){var a=hs;return hs<<=1,(hs&62914560)===0&&(hs=4194304),a}function jr(a){for(var u=[],d=0;31>d;d++)u.push(a);return u}function oi(a,u){a.pendingLanes|=u,u!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Aa(a,u,d,y,T,w){var N=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var V=a.entanglements,j=a.expirationTimes,te=a.hiddenUpdates;for(d=N&~d;0<d;){var ce=31-Ln(d),he=1<<ce;V[ce]=0,j[ce]=-1;var ne=te[ce];if(ne!==null)for(te[ce]=null,ce=0;ce<ne.length;ce++){var re=ne[ce];re!==null&&(re.lane&=-536870913)}d&=~he}y!==0&&si(a,y,0),w!==0&&T===0&&a.tag!==0&&(a.suspendedLanes|=w&~(N&~u))}function si(a,u,d){a.pendingLanes|=u,a.suspendedLanes&=~u;var y=31-Ln(u);a.entangledLanes|=u,a.entanglements[y]=a.entanglements[y]|1073741824|d&4194090}function xa(a,u){var d=a.entangledLanes|=u;for(a=a.entanglements;d;){var y=31-Ln(d),T=1<<y;T&u|a[y]&u&&(a[y]|=u),d&=~T}}function io(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function gs(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Y(){var a=le.p;return a!==0?a:(a=window.event,a===void 0?32:_M(a.type))}function ae(a,u){var d=le.p;try{return le.p=a,u()}finally{le.p=d}}var we=Math.random().toString(36).slice(2),ye="__reactFiber$"+we,ve="__reactProps$"+we,Xe="__reactContainer$"+we,gt="__reactEvents$"+we,Vt="__reactListeners$"+we,Kt="__reactHandles$"+we,Tt="__reactResources$"+we,at="__reactMarker$"+we;function et(a){delete a[ye],delete a[ve],delete a[gt],delete a[Vt],delete a[Kt]}function ln(a){var u=a[ye];if(u)return u;for(var d=a.parentNode;d;){if(u=d[Xe]||d[ye]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(a=iM(a);a!==null;){if(d=a[ye])return d;a=iM(a)}return u}a=d,d=a.parentNode}return null}function Ut(a){if(a=a[ye]||a[Xe]){var u=a.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return a}return null}function jn(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a.stateNode;throw Error(r(33))}function un(a){var u=a[Tt];return u||(u=a[Tt]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Ft(a){a[at]=!0}var Hl=new Set,Ac={};function oo(a,u){ys(a,u),ys(a+"Capture",u)}function ys(a,u){for(Ac[a]=u,a=0;a<u.length;a++)Hl.add(u[a])}var bg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sg={},Gl={};function Ag(a){return me.call(Gl,a)?!0:me.call(Sg,a)?!1:bg.test(a)?Gl[a]=!0:(Sg[a]=!0,!1)}function Ca(a,u,d){if(Ag(u))if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(u);return}}a.setAttribute(u,""+d)}}function xo(a,u,d){if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttribute(u,""+d)}}function ur(a,u,d,y){if(y===null)a.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(u,d,""+y)}}var jl,xg;function vs(a){if(jl===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);jl=u&&u[1]||"",xg=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jl+a+xg}var xc=!1;function Cc(a,u){if(!a||xc)return"";xc=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var ne=re}Reflect.construct(a,[],he)}else{try{he.call()}catch(re){ne=re}a.call(he.prototype)}}else{try{throw Error()}catch(re){ne=re}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&ne&&typeof re.stack=="string")return[re.stack,ne.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=y.DetermineComponentFrameRoot(),N=w[0],V=w[1];if(N&&V){var j=N.split(`
`),te=V.split(`
`);for(T=y=0;y<j.length&&!j[y].includes("DetermineComponentFrameRoot");)y++;for(;T<te.length&&!te[T].includes("DetermineComponentFrameRoot");)T++;if(y===j.length||T===te.length)for(y=j.length-1,T=te.length-1;1<=y&&0<=T&&j[y]!==te[T];)T--;for(;1<=y&&0<=T;y--,T--)if(j[y]!==te[T]){if(y!==1||T!==1)do if(y--,T--,0>T||j[y]!==te[T]){var ce=`
`+j[y].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=y&&0<=T);break}}}finally{xc=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?vs(d):""}function oh(a){switch(a.tag){case 26:case 27:case 5:return vs(a.type);case 16:return vs("Lazy");case 13:return vs("Suspense");case 19:return vs("SuspenseList");case 0:case 15:return Cc(a.type,!1);case 11:return Cc(a.type.render,!1);case 1:return Cc(a.type,!0);case 31:return vs("Activity");default:return""}}function Ic(a){try{var u="";do u+=oh(a),a=a.return;while(a);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Mr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function sh(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function IT(a){var u=sh(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),y=""+a[u];if(!a.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var T=d.get,w=d.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return T.call(this)},set:function(N){y=""+N,w.call(this,N)}}),Object.defineProperty(a,u,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(N){y=""+N},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function Rc(a){a._valueTracker||(a._valueTracker=IT(a))}function ah(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var d=u.getValue(),y="";return a&&(y=sh(a)?a.checked?"true":"false":a.value),a=y,a!==d?(u.setValue(a),!0):!1}function Kl(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var RT=/[\n"\\]/g;function In(a){return a.replace(RT,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ai(a,u,d,y,T,w,N,V){a.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.type=N:a.removeAttribute("type"),u!=null?N==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+Mr(u)):a.value!==""+Mr(u)&&(a.value=""+Mr(u)):N!=="submit"&&N!=="reset"||a.removeAttribute("value"),u!=null?Ia(a,N,Mr(u)):d!=null?Ia(a,N,Mr(d)):y!=null&&a.removeAttribute("value"),T==null&&w!=null&&(a.defaultChecked=!!w),T!=null&&(a.checked=T&&typeof T!="function"&&typeof T!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?a.name=""+Mr(V):a.removeAttribute("name")}function Wl(a,u,d,y,T,w,N,V){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),u!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||u!=null))return;d=d!=null?""+Mr(d):"",u=u!=null?""+Mr(u):d,V||u===a.value||(a.value=u),a.defaultValue=u}y=y??T,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=V?a.checked:!!y,a.defaultChecked=!!y,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(a.name=N)}function Ia(a,u,d){u==="number"&&Kl(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function _s(a,u,d,y){if(a=a.options,u){u={};for(var T=0;T<d.length;T++)u["$"+d[T]]=!0;for(d=0;d<a.length;d++)T=u.hasOwnProperty("$"+a[d].value),a[d].selected!==T&&(a[d].selected=T),T&&y&&(a[d].defaultSelected=!0)}else{for(d=""+Mr(d),u=null,T=0;T<a.length;T++){if(a[T].value===d){a[T].selected=!0,y&&(a[T].defaultSelected=!0);return}u!==null||a[T].disabled||(u=a[T])}u!==null&&(u.selected=!0)}}function Nt(a,u,d){if(u!=null&&(u=""+Mr(u),u!==a.value&&(a.value=u),d==null)){a.defaultValue!==u&&(a.defaultValue=u);return}a.defaultValue=d!=null?""+Mr(d):""}function Yl(a,u,d,y){if(u==null){if(y!=null){if(d!=null)throw Error(r(92));if(be(y)){if(1<y.length)throw Error(r(93));y=y[0]}d=y}d==null&&(d=""),u=d}d=Mr(u),a.defaultValue=d,y=a.textContent,y===d&&y!==""&&y!==null&&(a.value=y)}function Ni(a,u){if(u){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=u;return}}a.textContent=u}var Jl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cg(a,u,d){var y=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?y?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="":y?a.setProperty(u,d):typeof d!="number"||d===0||Jl.has(u)?u==="float"?a.cssFloat=d:a[u]=(""+d).trim():a[u]=d+"px"}function lh(a,u,d){if(u!=null&&typeof u!="object")throw Error(r(62));if(a=a.style,d!=null){for(var y in d)!d.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var T in u)y=u[T],u.hasOwnProperty(T)&&d[T]!==y&&Cg(a,T,y)}else for(var w in u)u.hasOwnProperty(w)&&Cg(a,w,u[w])}function uh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),NT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pc(a){return NT.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Ts=null;function Mi(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Es=null,ws=null;function ch(a){var u=Ut(a);if(u&&(a=u.stateNode)){var d=a[ve]||null;e:switch(a=u.stateNode,u.type){case"input":if(ai(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+In(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var y=d[u];if(y!==a&&y.form===a.form){var T=y[ve]||null;if(!T)throw Error(r(90));ai(y,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(u=0;u<d.length;u++)y=d[u],y.form===a.form&&ah(y)}break e;case"textarea":Nt(a,d.value,d.defaultValue);break e;case"select":u=d.value,u!=null&&_s(a,!!d.multiple,u,!1)}}}var Co=!1;function Ig(a,u,d){if(Co)return a(u,d);Co=!0;try{var y=a(u);return y}finally{if(Co=!1,(Es!==null||ws!==null)&&(Ey(),Es&&(u=Es,a=ws,ws=Es=null,ch(u),a)))for(u=0;u<a.length;u++)ch(a[u])}}function Ql(a,u){var d=a.stateNode;if(d===null)return null;var y=d[ve]||null;if(y===null)return null;d=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(r(231,u,typeof d));return d}var so=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Di=!1;if(so)try{var Xl={};Object.defineProperty(Xl,"passive",{get:function(){Di=!0}}),window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{Di=!1}var Io=null,Ra=null,bs=null;function fh(){if(bs)return bs;var a,u=Ra,d=u.length,y,T="value"in Io?Io.value:Io.textContent,w=T.length;for(a=0;a<d&&u[a]===T[a];a++);var N=d-a;for(y=1;y<=N&&u[d-y]===T[w-y];y++);return bs=T.slice(a,1<y?1-y:void 0)}function Ro(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function Po(){return!0}function dh(){return!1}function Kn(a){function u(d,y,T,w,N){this._reactName=d,this._targetInst=T,this.type=y,this.nativeEvent=w,this.target=N,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(d=a[V],this[V]=d?d(w):w[V]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Po:dh,this.isPropagationStopped=dh,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),u}var wt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nc=Kn(wt),Zl=h({},wt,{view:0,detail:0}),Rg=Kn(Zl),Mc,Dc,No,eu=h({},Zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ru,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==No&&(No&&a.type==="mousemove"?(Mc=a.screenX-No.screenX,Dc=a.screenY-No.screenY):Dc=Mc=0,No=a),Mc)},movementY:function(a){return"movementY"in a?a.movementY:Dc}}),ki=Kn(eu),Pg=h({},eu,{dataTransfer:0}),MT=Kn(Pg),tu=h({},Zl,{relatedTarget:0}),kc=Kn(tu),hh=h({},wt,{animationName:0,elapsedTime:0,pseudoElement:0}),Oc=Kn(hh),Ng=h({},wt,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Lc=Kn(Ng),DT=h({},wt,{data:0}),ph=Kn(DT),nu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mh(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Dg[a])?!!u[a]:!1}function ru(){return mh}var kg=h({},Zl,{key:function(a){if(a.key){var u=nu[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=Ro(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Mg[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ru,charCode:function(a){return a.type==="keypress"?Ro(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ro(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Vc=Kn(kg),Og=h({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gh=Kn(Og),Ss=h({},Zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ru}),Lg=Kn(Ss),Vg=h({},wt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ug=Kn(Vg),Fg=h({},eu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Uc=Kn(Fg),Dr=h({},wt,{newState:0,oldState:0}),Bg=Kn(Dr),qg=[9,13,27,32],Mo=so&&"CompositionEvent"in window,_=null;so&&"documentMode"in document&&(_=document.documentMode);var x=so&&"TextEvent"in window&&!_,P=so&&(!Mo||_&&8<_&&11>=_),B=" ",Q=!1;function oe(a,u){switch(a){case"keyup":return qg.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ae(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ut=!1;function Vn(a,u){switch(a){case"compositionend":return Ae(u);case"keypress":return u.which!==32?null:(Q=!0,B);case"textInput":return a=u.data,a===B&&Q?null:a;default:return null}}function ct(a,u){if(ut)return a==="compositionend"||!Mo&&oe(a,u)?(a=fh(),bs=Ra=Io=null,ut=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return P&&u.locale!=="ko"?null:u.data;default:return null}}var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!Wn[a.type]:u==="textarea"}function As(a,u,d,y){Es?ws?ws.push(y):ws=[y]:Es=y,u=Cy(u,"onChange"),0<u.length&&(d=new Nc("onChange","change",null,d,y),a.push({event:d,listeners:u}))}var cr=null,Do=null;function yh(a){WN(a,0)}function $g(a){var u=jn(a);if(ah(u))return a}function m1(a,u){if(a==="change")return u}var g1=!1;if(so){var kT;if(so){var OT="oninput"in document;if(!OT){var y1=document.createElement("div");y1.setAttribute("oninput","return;"),OT=typeof y1.oninput=="function"}kT=OT}else kT=!1;g1=kT&&(!document.documentMode||9<document.documentMode)}function v1(){cr&&(cr.detachEvent("onpropertychange",_1),Do=cr=null)}function _1(a){if(a.propertyName==="value"&&$g(Do)){var u=[];As(u,Do,a,Mi(a)),Ig(yh,u)}}function RG(a,u,d){a==="focusin"?(v1(),cr=u,Do=d,cr.attachEvent("onpropertychange",_1)):a==="focusout"&&v1()}function PG(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return $g(Do)}function NG(a,u){if(a==="click")return $g(u)}function MG(a,u){if(a==="input"||a==="change")return $g(u)}function DG(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var li=typeof Object.is=="function"?Object.is:DG;function vh(a,u){if(li(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var d=Object.keys(a),y=Object.keys(u);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var T=d[y];if(!me.call(u,T)||!li(a[T],u[T]))return!1}return!0}function T1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function E1(a,u){var d=T1(a);a=0;for(var y;d;){if(d.nodeType===3){if(y=a+d.textContent.length,a<=u&&y>=u)return{node:d,offset:u-a};a=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=T1(d)}}function w1(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?w1(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function b1(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var u=Kl(a.document);u instanceof a.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)a=u.contentWindow;else break;u=Kl(a.document)}return u}function LT(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}var kG=so&&"documentMode"in document&&11>=document.documentMode,Fc=null,VT=null,_h=null,UT=!1;function S1(a,u,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;UT||Fc==null||Fc!==Kl(y)||(y=Fc,"selectionStart"in y&&LT(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),_h&&vh(_h,y)||(_h=y,y=Cy(VT,"onSelect"),0<y.length&&(u=new Nc("onSelect","select",null,u,d),a.push({event:u,listeners:y}),u.target=Fc)))}function iu(a,u){var d={};return d[a.toLowerCase()]=u.toLowerCase(),d["Webkit"+a]="webkit"+u,d["Moz"+a]="moz"+u,d}var Bc={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionrun:iu("Transition","TransitionRun"),transitionstart:iu("Transition","TransitionStart"),transitioncancel:iu("Transition","TransitionCancel"),transitionend:iu("Transition","TransitionEnd")},FT={},A1={};so&&(A1=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function ou(a){if(FT[a])return FT[a];if(!Bc[a])return a;var u=Bc[a],d;for(d in u)if(u.hasOwnProperty(d)&&d in A1)return FT[a]=u[d];return a}var x1=ou("animationend"),C1=ou("animationiteration"),I1=ou("animationstart"),OG=ou("transitionrun"),LG=ou("transitionstart"),VG=ou("transitioncancel"),R1=ou("transitionend"),P1=new Map,BT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");BT.push("scrollEnd");function ao(a,u){P1.set(a,u),oo(u,[a])}var N1=new WeakMap;function Oi(a,u){if(typeof a=="object"&&a!==null){var d=N1.get(a);return d!==void 0?d:(u={value:a,source:u,stack:Ic(u)},N1.set(a,u),u)}return{value:a,source:u,stack:Ic(u)}}var Li=[],qc=0,qT=0;function zg(){for(var a=qc,u=qT=qc=0;u<a;){var d=Li[u];Li[u++]=null;var y=Li[u];Li[u++]=null;var T=Li[u];Li[u++]=null;var w=Li[u];if(Li[u++]=null,y!==null&&T!==null){var N=y.pending;N===null?T.next=T:(T.next=N.next,N.next=T),y.pending=T}w!==0&&M1(d,T,w)}}function Hg(a,u,d,y){Li[qc++]=a,Li[qc++]=u,Li[qc++]=d,Li[qc++]=y,qT|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function $T(a,u,d,y){return Hg(a,u,d,y),Gg(a)}function $c(a,u){return Hg(a,null,null,u),Gg(a)}function M1(a,u,d){a.lanes|=d;var y=a.alternate;y!==null&&(y.lanes|=d);for(var T=!1,w=a.return;w!==null;)w.childLanes|=d,y=w.alternate,y!==null&&(y.childLanes|=d),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(T=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,T&&u!==null&&(T=31-Ln(d),a=w.hiddenUpdates,y=a[T],y===null?a[T]=[u]:y.push(u),u.lane=d|536870912),w):null}function Gg(a){if(50<Hh)throw Hh=0,WE=null,Error(r(185));for(var u=a.return;u!==null;)a=u,u=a.return;return a.tag===3?a.stateNode:null}var zc={};function UG(a,u,d,y){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(a,u,d,y){return new UG(a,u,d,y)}function zT(a){return a=a.prototype,!(!a||!a.isReactComponent)}function xs(a,u){var d=a.alternate;return d===null?(d=ui(a.tag,u,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=u,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,u=a.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function D1(a,u){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=u,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,u=d.dependencies,a.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),a}function jg(a,u,d,y,T,w){var N=0;if(y=a,typeof a=="function")zT(a)&&(N=1);else if(typeof a=="string")N=B9(a,d,Le.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case O:return a=ui(31,d,u,T),a.elementType=O,a.lanes=w,a;case b:return su(d.children,T,w,u);case S:N=8,T|=24;break;case A:return a=ui(12,d,u,T|2),a.elementType=A,a.lanes=w,a;case $:return a=ui(13,d,u,T),a.elementType=$,a.lanes=w,a;case H:return a=ui(19,d,u,T),a.elementType=H,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case I:case k:N=10;break e;case D:N=9;break e;case q:N=11;break e;case M:N=14;break e;case L:N=16,y=null;break e}N=29,d=Error(r(130,a===null?"null":typeof a,"")),y=null}return u=ui(N,d,u,T),u.elementType=a,u.type=y,u.lanes=w,u}function su(a,u,d,y){return a=ui(7,a,y,u),a.lanes=d,a}function HT(a,u,d){return a=ui(6,a,null,u),a.lanes=d,a}function GT(a,u,d){return u=ui(4,a.children!==null?a.children:[],a.key,u),u.lanes=d,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}var Hc=[],Gc=0,Kg=null,Wg=0,Vi=[],Ui=0,au=null,Cs=1,Is="";function lu(a,u){Hc[Gc++]=Wg,Hc[Gc++]=Kg,Kg=a,Wg=u}function k1(a,u,d){Vi[Ui++]=Cs,Vi[Ui++]=Is,Vi[Ui++]=au,au=a;var y=Cs;a=Is;var T=32-Ln(y)-1;y&=~(1<<T),d+=1;var w=32-Ln(u)+T;if(30<w){var N=T-T%5;w=(y&(1<<N)-1).toString(32),y>>=N,T-=N,Cs=1<<32-Ln(u)+T|d<<T|y,Is=w+a}else Cs=1<<w|d<<T|y,Is=a}function jT(a){a.return!==null&&(lu(a,1),k1(a,1,0))}function KT(a){for(;a===Kg;)Kg=Hc[--Gc],Hc[Gc]=null,Wg=Hc[--Gc],Hc[Gc]=null;for(;a===au;)au=Vi[--Ui],Vi[Ui]=null,Is=Vi[--Ui],Vi[Ui]=null,Cs=Vi[--Ui],Vi[Ui]=null}var kr=null,mn=null,Et=!1,uu=null,ko=!1,WT=Error(r(519));function cu(a){var u=Error(r(418,""));throw wh(Oi(u,a)),WT}function O1(a){var u=a.stateNode,d=a.type,y=a.memoizedProps;switch(u[ye]=a,u[ve]=y,d){case"dialog":rt("cancel",u),rt("close",u);break;case"iframe":case"object":case"embed":rt("load",u);break;case"video":case"audio":for(d=0;d<jh.length;d++)rt(jh[d],u);break;case"source":rt("error",u);break;case"img":case"image":case"link":rt("error",u),rt("load",u);break;case"details":rt("toggle",u);break;case"input":rt("invalid",u),Wl(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Rc(u);break;case"select":rt("invalid",u);break;case"textarea":rt("invalid",u),Yl(u,y.value,y.defaultValue,y.children),Rc(u)}d=y.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||y.suppressHydrationWarning===!0||XN(u.textContent,d)?(y.popover!=null&&(rt("beforetoggle",u),rt("toggle",u)),y.onScroll!=null&&rt("scroll",u),y.onScrollEnd!=null&&rt("scrollend",u),y.onClick!=null&&(u.onclick=Iy),u=!0):u=!1,u||cu(a)}function L1(a){for(kr=a.return;kr;)switch(kr.tag){case 5:case 13:ko=!1;return;case 27:case 3:ko=!0;return;default:kr=kr.return}}function Th(a){if(a!==kr)return!1;if(!Et)return L1(a),Et=!0,!1;var u=a.tag,d;if((d=u!==3&&u!==27)&&((d=u===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||cw(a.type,a.memoizedProps)),d=!d),d&&mn&&cu(a),L1(a),u===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(u===0){mn=uo(a.nextSibling);break e}u--}else d!=="$"&&d!=="$!"&&d!=="$?"||u++;a=a.nextSibling}mn=null}}else u===27?(u=mn,Ga(a.type)?(a=pw,pw=null,mn=a):mn=u):mn=kr?uo(a.stateNode.nextSibling):null;return!0}function Eh(){mn=kr=null,Et=!1}function V1(){var a=uu;return a!==null&&(Yr===null?Yr=a:Yr.push.apply(Yr,a),uu=null),a}function wh(a){uu===null?uu=[a]:uu.push(a)}var YT=de(null),fu=null,Rs=null;function Pa(a,u,d){Te(YT,u._currentValue),u._currentValue=d}function Ps(a){a._currentValue=YT.current,ue(YT)}function JT(a,u,d){for(;a!==null;){var y=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),a===d)break;a=a.return}}function QT(a,u,d,y){var T=a.child;for(T!==null&&(T.return=a);T!==null;){var w=T.dependencies;if(w!==null){var N=T.child;w=w.firstContext;e:for(;w!==null;){var V=w;w=T;for(var j=0;j<u.length;j++)if(V.context===u[j]){w.lanes|=d,V=w.alternate,V!==null&&(V.lanes|=d),JT(w.return,d,a),y||(N=null);break e}w=V.next}}else if(T.tag===18){if(N=T.return,N===null)throw Error(r(341));N.lanes|=d,w=N.alternate,w!==null&&(w.lanes|=d),JT(N,d,a),N=null}else N=T.child;if(N!==null)N.return=T;else for(N=T;N!==null;){if(N===a){N=null;break}if(T=N.sibling,T!==null){T.return=N.return,N=T;break}N=N.return}T=N}}function bh(a,u,d,y){a=null;for(var T=u,w=!1;T!==null;){if(!w){if((T.flags&524288)!==0)w=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var N=T.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var V=T.type;li(T.pendingProps.value,N.value)||(a!==null?a.push(V):a=[V])}}else if(T===Pt.current){if(N=T.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(a!==null?a.push(Xh):a=[Xh])}T=T.return}a!==null&&QT(u,a,d,y),u.flags|=262144}function Yg(a){for(a=a.firstContext;a!==null;){if(!li(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function du(a){fu=a,Rs=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Er(a){return U1(fu,a)}function Jg(a,u){return fu===null&&du(a),U1(a,u)}function U1(a,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},Rs===null){if(a===null)throw Error(r(308));Rs=u,a.dependencies={lanes:0,firstContext:u},a.flags|=524288}else Rs=Rs.next=u;return d}var FG=typeof AbortController<"u"?AbortController:function(){var a=[],u=this.signal={aborted:!1,addEventListener:function(d,y){a.push(y)}};this.abort=function(){u.aborted=!0,a.forEach(function(d){return d()})}},BG=t.unstable_scheduleCallback,qG=t.unstable_NormalPriority,Fn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function XT(){return{controller:new FG,data:new Map,refCount:0}}function Sh(a){a.refCount--,a.refCount===0&&BG(qG,function(){a.controller.abort()})}var Ah=null,ZT=0,jc=0,Kc=null;function $G(a,u){if(Ah===null){var d=Ah=[];ZT=0,jc=tw(),Kc={status:"pending",value:void 0,then:function(y){d.push(y)}}}return ZT++,u.then(F1,F1),u}function F1(){if(--ZT===0&&Ah!==null){Kc!==null&&(Kc.status="fulfilled");var a=Ah;Ah=null,jc=0,Kc=null;for(var u=0;u<a.length;u++)(0,a[u])()}}function zG(a,u){var d=[],y={status:"pending",value:null,reason:null,then:function(T){d.push(T)}};return a.then(function(){y.status="fulfilled",y.value=u;for(var T=0;T<d.length;T++)(0,d[T])(u)},function(T){for(y.status="rejected",y.reason=T,T=0;T<d.length;T++)(0,d[T])(void 0)}),y}var B1=ee.S;ee.S=function(a,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&$G(a,u),B1!==null&&B1(a,u)};var hu=de(null);function eE(){var a=hu.current;return a!==null?a:zt.pooledCache}function Qg(a,u){u===null?Te(hu,hu.current):Te(hu,u.pool)}function q1(){var a=eE();return a===null?null:{parent:Fn._currentValue,pool:a}}var xh=Error(r(460)),$1=Error(r(474)),Xg=Error(r(542)),tE={then:function(){}};function z1(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Zg(){}function H1(a,u,d){switch(d=a[d],d===void 0?a.push(u):d!==u&&(u.then(Zg,Zg),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,j1(a),a;default:if(typeof u.status=="string")u.then(Zg,Zg);else{if(a=zt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=u,a.status="pending",a.then(function(y){if(u.status==="pending"){var T=u;T.status="fulfilled",T.value=y}},function(y){if(u.status==="pending"){var T=u;T.status="rejected",T.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,j1(a),a}throw Ch=u,xh}}var Ch=null;function G1(){if(Ch===null)throw Error(r(459));var a=Ch;return Ch=null,a}function j1(a){if(a===xh||a===Xg)throw Error(r(483))}var Na=!1;function nE(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rE(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ma(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Da(a,u,d){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(St&2)!==0){var T=y.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),y.pending=u,u=Gg(a),M1(a,null,d),u}return Hg(a,y,u,d),Gg(a)}function Ih(a,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194048)!==0)){var y=u.lanes;y&=a.pendingLanes,d|=y,u.lanes=d,xa(a,d)}}function iE(a,u){var d=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var T=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var N={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?T=w=N:w=w.next=N,d=d.next}while(d!==null);w===null?T=w=u:w=w.next=u}else T=w=u;d={baseState:y.baseState,firstBaseUpdate:T,lastBaseUpdate:w,shared:y.shared,callbacks:y.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=u}var oE=!1;function Rh(){if(oE){var a=Kc;if(a!==null)throw a}}function Ph(a,u,d,y){oE=!1;var T=a.updateQueue;Na=!1;var w=T.firstBaseUpdate,N=T.lastBaseUpdate,V=T.shared.pending;if(V!==null){T.shared.pending=null;var j=V,te=j.next;j.next=null,N===null?w=te:N.next=te,N=j;var ce=a.alternate;ce!==null&&(ce=ce.updateQueue,V=ce.lastBaseUpdate,V!==N&&(V===null?ce.firstBaseUpdate=te:V.next=te,ce.lastBaseUpdate=j))}if(w!==null){var he=T.baseState;N=0,ce=te=j=null,V=w;do{var ne=V.lane&-536870913,re=ne!==V.lane;if(re?(ft&ne)===ne:(y&ne)===ne){ne!==0&&ne===jc&&(oE=!0),ce!==null&&(ce=ce.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var Ge=a,$e=V;ne=u;var kt=d;switch($e.tag){case 1:if(Ge=$e.payload,typeof Ge=="function"){he=Ge.call(kt,he,ne);break e}he=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=$e.payload,ne=typeof Ge=="function"?Ge.call(kt,he,ne):Ge,ne==null)break e;he=h({},he,ne);break e;case 2:Na=!0}}ne=V.callback,ne!==null&&(a.flags|=64,re&&(a.flags|=8192),re=T.callbacks,re===null?T.callbacks=[ne]:re.push(ne))}else re={lane:ne,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ce===null?(te=ce=re,j=he):ce=ce.next=re,N|=ne;if(V=V.next,V===null){if(V=T.shared.pending,V===null)break;re=V,V=re.next,re.next=null,T.lastBaseUpdate=re,T.shared.pending=null}}while(!0);ce===null&&(j=he),T.baseState=j,T.firstBaseUpdate=te,T.lastBaseUpdate=ce,w===null&&(T.shared.lanes=0),qa|=N,a.lanes=N,a.memoizedState=he}}function K1(a,u){if(typeof a!="function")throw Error(r(191,a));a.call(u)}function W1(a,u){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)K1(d[a],u)}var Wc=de(null),ey=de(0);function Y1(a,u){a=Vs,Te(ey,a),Te(Wc,u),Vs=a|u.baseLanes}function sE(){Te(ey,Vs),Te(Wc,Wc.current)}function aE(){Vs=ey.current,ue(Wc),ue(ey)}var ka=0,Ze=null,Mt=null,Rn=null,ty=!1,Yc=!1,pu=!1,ny=0,Nh=0,Jc=null,HG=0;function wn(){throw Error(r(321))}function lE(a,u){if(u===null)return!1;for(var d=0;d<u.length&&d<a.length;d++)if(!li(a[d],u[d]))return!1;return!0}function uE(a,u,d,y,T,w){return ka=w,Ze=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ee.H=a===null||a.memoizedState===null?MP:DP,pu=!1,w=d(y,T),pu=!1,Yc&&(w=Q1(u,d,y,T)),J1(a),w}function J1(a){ee.H=ly;var u=Mt!==null&&Mt.next!==null;if(ka=0,Rn=Mt=Ze=null,ty=!1,Nh=0,Jc=null,u)throw Error(r(300));a===null||Yn||(a=a.dependencies,a!==null&&Yg(a)&&(Yn=!0))}function Q1(a,u,d,y){Ze=a;var T=0;do{if(Yc&&(Jc=null),Nh=0,Yc=!1,25<=T)throw Error(r(301));if(T+=1,Rn=Mt=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ee.H=QG,w=u(d,y)}while(Yc);return w}function GG(){var a=ee.H,u=a.useState()[0];return u=typeof u.then=="function"?Mh(u):u,a=a.useState()[0],(Mt!==null?Mt.memoizedState:null)!==a&&(Ze.flags|=1024),u}function cE(){var a=ny!==0;return ny=0,a}function fE(a,u,d){u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~d}function dE(a){if(ty){for(a=a.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}ty=!1}ka=0,Rn=Mt=Ze=null,Yc=!1,Nh=ny=0,Jc=null}function Kr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?Ze.memoizedState=Rn=a:Rn=Rn.next=a,Rn}function Pn(){if(Mt===null){var a=Ze.alternate;a=a!==null?a.memoizedState:null}else a=Mt.next;var u=Rn===null?Ze.memoizedState:Rn.next;if(u!==null)Rn=u,Mt=a;else{if(a===null)throw Ze.alternate===null?Error(r(467)):Error(r(310));Mt=a,a={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Rn===null?Ze.memoizedState=Rn=a:Rn=Rn.next=a}return Rn}function hE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mh(a){var u=Nh;return Nh+=1,Jc===null&&(Jc=[]),a=H1(Jc,a,u),u=Ze,(Rn===null?u.memoizedState:Rn.next)===null&&(u=u.alternate,ee.H=u===null||u.memoizedState===null?MP:DP),a}function ry(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Mh(a);if(a.$$typeof===k)return Er(a)}throw Error(r(438,String(a)))}function pE(a){var u=null,d=Ze.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var y=Ze.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(T){return T.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=hE(),Ze.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(a),y=0;y<a;y++)d[y]=F;return u.index++,d}function Ns(a,u){return typeof u=="function"?u(a):u}function iy(a){var u=Pn();return mE(u,Mt,a)}function mE(a,u,d){var y=a.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=d;var T=a.baseQueue,w=y.pending;if(w!==null){if(T!==null){var N=T.next;T.next=w.next,w.next=N}u.baseQueue=T=w,y.pending=null}if(w=a.baseState,T===null)a.memoizedState=w;else{u=T.next;var V=N=null,j=null,te=u,ce=!1;do{var he=te.lane&-536870913;if(he!==te.lane?(ft&he)===he:(ka&he)===he){var ne=te.revertLane;if(ne===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),he===jc&&(ce=!0);else if((ka&ne)===ne){te=te.next,ne===jc&&(ce=!0);continue}else he={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},j===null?(V=j=he,N=w):j=j.next=he,Ze.lanes|=ne,qa|=ne;he=te.action,pu&&d(w,he),w=te.hasEagerState?te.eagerState:d(w,he)}else ne={lane:he,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},j===null?(V=j=ne,N=w):j=j.next=ne,Ze.lanes|=he,qa|=he;te=te.next}while(te!==null&&te!==u);if(j===null?N=w:j.next=V,!li(w,a.memoizedState)&&(Yn=!0,ce&&(d=Kc,d!==null)))throw d;a.memoizedState=w,a.baseState=N,a.baseQueue=j,y.lastRenderedState=w}return T===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function gE(a){var u=Pn(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=a;var y=d.dispatch,T=d.pending,w=u.memoizedState;if(T!==null){d.pending=null;var N=T=T.next;do w=a(w,N.action),N=N.next;while(N!==T);li(w,u.memoizedState)||(Yn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),d.lastRenderedState=w}return[w,y]}function X1(a,u,d){var y=Ze,T=Pn(),w=Et;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=u();var N=!li((Mt||T).memoizedState,d);N&&(T.memoizedState=d,Yn=!0),T=T.queue;var V=tP.bind(null,y,T,a);if(Dh(2048,8,V,[a]),T.getSnapshot!==u||N||Rn!==null&&Rn.memoizedState.tag&1){if(y.flags|=2048,Qc(9,oy(),eP.bind(null,y,T,d,u),null),zt===null)throw Error(r(349));w||(ka&124)!==0||Z1(y,u,d)}return d}function Z1(a,u,d){a.flags|=16384,a={getSnapshot:u,value:d},u=Ze.updateQueue,u===null?(u=hE(),Ze.updateQueue=u,u.stores=[a]):(d=u.stores,d===null?u.stores=[a]:d.push(a))}function eP(a,u,d,y){u.value=d,u.getSnapshot=y,nP(u)&&rP(a)}function tP(a,u,d){return d(function(){nP(u)&&rP(a)})}function nP(a){var u=a.getSnapshot;a=a.value;try{var d=u();return!li(a,d)}catch{return!0}}function rP(a){var u=$c(a,2);u!==null&&pi(u,a,2)}function yE(a){var u=Kr();if(typeof a=="function"){var d=a;if(a=d(),pu){Nr(!0);try{d()}finally{Nr(!1)}}}return u.memoizedState=u.baseState=a,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:a},u}function iP(a,u,d,y){return a.baseState=d,mE(a,Mt,typeof y=="function"?y:Ns)}function jG(a,u,d,y,T){if(ay(a))throw Error(r(485));if(a=u.action,a!==null){var w={payload:T,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){w.listeners.push(N)}};ee.T!==null?d(!0):w.isTransition=!1,y(w),d=u.pending,d===null?(w.next=u.pending=w,oP(u,w)):(w.next=d.next,u.pending=d.next=w)}}function oP(a,u){var d=u.action,y=u.payload,T=a.state;if(u.isTransition){var w=ee.T,N={};ee.T=N;try{var V=d(T,y),j=ee.S;j!==null&&j(N,V),sP(a,u,V)}catch(te){vE(a,u,te)}finally{ee.T=w}}else try{w=d(T,y),sP(a,u,w)}catch(te){vE(a,u,te)}}function sP(a,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(y){aP(a,u,y)},function(y){return vE(a,u,y)}):aP(a,u,d)}function aP(a,u,d){u.status="fulfilled",u.value=d,lP(u),a.state=d,u=a.pending,u!==null&&(d=u.next,d===u?a.pending=null:(d=d.next,u.next=d,oP(a,d)))}function vE(a,u,d){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=d,lP(u),u=u.next;while(u!==y)}a.action=null}function lP(a){a=a.listeners;for(var u=0;u<a.length;u++)(0,a[u])()}function uP(a,u){return u}function cP(a,u){if(Et){var d=zt.formState;if(d!==null){e:{var y=Ze;if(Et){if(mn){t:{for(var T=mn,w=ko;T.nodeType!==8;){if(!w){T=null;break t}if(T=uo(T.nextSibling),T===null){T=null;break t}}w=T.data,T=w==="F!"||w==="F"?T:null}if(T){mn=uo(T.nextSibling),y=T.data==="F!";break e}}cu(y)}y=!1}y&&(u=d[0])}}return d=Kr(),d.memoizedState=d.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uP,lastRenderedState:u},d.queue=y,d=RP.bind(null,Ze,y),y.dispatch=d,y=yE(!1),w=bE.bind(null,Ze,!1,y.queue),y=Kr(),T={state:u,dispatch:null,action:a,pending:null},y.queue=T,d=jG.bind(null,Ze,T,w,d),T.dispatch=d,y.memoizedState=a,[u,d,!1]}function fP(a){var u=Pn();return dP(u,Mt,a)}function dP(a,u,d){if(u=mE(a,u,uP)[0],a=iy(Ns)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Mh(u)}catch(N){throw N===xh?Xg:N}else y=u;u=Pn();var T=u.queue,w=T.dispatch;return d!==u.memoizedState&&(Ze.flags|=2048,Qc(9,oy(),KG.bind(null,T,d),null)),[y,w,a]}function KG(a,u){a.action=u}function hP(a){var u=Pn(),d=Mt;if(d!==null)return dP(u,d,a);Pn(),u=u.memoizedState,d=Pn();var y=d.queue.dispatch;return d.memoizedState=a,[u,y,!1]}function Qc(a,u,d,y){return a={tag:a,create:d,deps:y,inst:u,next:null},u=Ze.updateQueue,u===null&&(u=hE(),Ze.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=a.next=a:(y=d.next,d.next=a,a.next=y,u.lastEffect=a),a}function oy(){return{destroy:void 0,resource:void 0}}function pP(){return Pn().memoizedState}function sy(a,u,d,y){var T=Kr();y=y===void 0?null:y,Ze.flags|=a,T.memoizedState=Qc(1|u,oy(),d,y)}function Dh(a,u,d,y){var T=Pn();y=y===void 0?null:y;var w=T.memoizedState.inst;Mt!==null&&y!==null&&lE(y,Mt.memoizedState.deps)?T.memoizedState=Qc(u,w,d,y):(Ze.flags|=a,T.memoizedState=Qc(1|u,w,d,y))}function mP(a,u){sy(8390656,8,a,u)}function gP(a,u){Dh(2048,8,a,u)}function yP(a,u){return Dh(4,2,a,u)}function vP(a,u){return Dh(4,4,a,u)}function _P(a,u){if(typeof u=="function"){a=a();var d=u(a);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function TP(a,u,d){d=d!=null?d.concat([a]):null,Dh(4,4,_P.bind(null,u,a),d)}function _E(){}function EP(a,u){var d=Pn();u=u===void 0?null:u;var y=d.memoizedState;return u!==null&&lE(u,y[1])?y[0]:(d.memoizedState=[a,u],a)}function wP(a,u){var d=Pn();u=u===void 0?null:u;var y=d.memoizedState;if(u!==null&&lE(u,y[1]))return y[0];if(y=a(),pu){Nr(!0);try{a()}finally{Nr(!1)}}return d.memoizedState=[y,u],y}function TE(a,u,d){return d===void 0||(ka&1073741824)!==0?a.memoizedState=u:(a.memoizedState=d,a=AN(),Ze.lanes|=a,qa|=a,d)}function bP(a,u,d,y){return li(d,u)?d:Wc.current!==null?(a=TE(a,d,y),li(a,u)||(Yn=!0),a):(ka&42)===0?(Yn=!0,a.memoizedState=d):(a=AN(),Ze.lanes|=a,qa|=a,u)}function SP(a,u,d,y,T){var w=le.p;le.p=w!==0&&8>w?w:8;var N=ee.T,V={};ee.T=V,bE(a,!1,u,d);try{var j=T(),te=ee.S;if(te!==null&&te(V,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var ce=zG(j,y);kh(a,u,ce,hi(a))}else kh(a,u,y,hi(a))}catch(he){kh(a,u,{then:function(){},status:"rejected",reason:he},hi())}finally{le.p=w,ee.T=N}}function WG(){}function EE(a,u,d,y){if(a.tag!==5)throw Error(r(476));var T=AP(a).queue;SP(a,T,u,Se,d===null?WG:function(){return xP(a),d(y)})}function AP(a){var u=a.memoizedState;if(u!==null)return u;u={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:Se},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:d},next:null},a.memoizedState=u,a=a.alternate,a!==null&&(a.memoizedState=u),u}function xP(a){var u=AP(a).next.queue;kh(a,u,{},hi())}function wE(){return Er(Xh)}function CP(){return Pn().memoizedState}function IP(){return Pn().memoizedState}function YG(a){for(var u=a.return;u!==null;){switch(u.tag){case 24:case 3:var d=hi();a=Ma(d);var y=Da(u,a,d);y!==null&&(pi(y,u,d),Ih(y,u,d)),u={cache:XT()},a.payload=u;return}u=u.return}}function JG(a,u,d){var y=hi();d={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},ay(a)?PP(u,d):(d=$T(a,u,d,y),d!==null&&(pi(d,a,y),NP(d,u,y)))}function RP(a,u,d){var y=hi();kh(a,u,d,y)}function kh(a,u,d,y){var T={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(ay(a))PP(u,T);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var N=u.lastRenderedState,V=w(N,d);if(T.hasEagerState=!0,T.eagerState=V,li(V,N))return Hg(a,u,T,0),zt===null&&zg(),!1}catch{}finally{}if(d=$T(a,u,T,y),d!==null)return pi(d,a,y),NP(d,u,y),!0}return!1}function bE(a,u,d,y){if(y={lane:2,revertLane:tw(),action:y,hasEagerState:!1,eagerState:null,next:null},ay(a)){if(u)throw Error(r(479))}else u=$T(a,d,y,2),u!==null&&pi(u,a,2)}function ay(a){var u=a.alternate;return a===Ze||u!==null&&u===Ze}function PP(a,u){Yc=ty=!0;var d=a.pending;d===null?u.next=u:(u.next=d.next,d.next=u),a.pending=u}function NP(a,u,d){if((d&4194048)!==0){var y=u.lanes;y&=a.pendingLanes,d|=y,u.lanes=d,xa(a,d)}}var ly={readContext:Er,use:ry,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useInsertionEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useSyncExternalStore:wn,useId:wn,useHostTransitionStatus:wn,useFormState:wn,useActionState:wn,useOptimistic:wn,useMemoCache:wn,useCacheRefresh:wn},MP={readContext:Er,use:ry,useCallback:function(a,u){return Kr().memoizedState=[a,u===void 0?null:u],a},useContext:Er,useEffect:mP,useImperativeHandle:function(a,u,d){d=d!=null?d.concat([a]):null,sy(4194308,4,_P.bind(null,u,a),d)},useLayoutEffect:function(a,u){return sy(4194308,4,a,u)},useInsertionEffect:function(a,u){sy(4,2,a,u)},useMemo:function(a,u){var d=Kr();u=u===void 0?null:u;var y=a();if(pu){Nr(!0);try{a()}finally{Nr(!1)}}return d.memoizedState=[y,u],y},useReducer:function(a,u,d){var y=Kr();if(d!==void 0){var T=d(u);if(pu){Nr(!0);try{d(u)}finally{Nr(!1)}}}else T=u;return y.memoizedState=y.baseState=T,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:T},y.queue=a,a=a.dispatch=JG.bind(null,Ze,a),[y.memoizedState,a]},useRef:function(a){var u=Kr();return a={current:a},u.memoizedState=a},useState:function(a){a=yE(a);var u=a.queue,d=RP.bind(null,Ze,u);return u.dispatch=d,[a.memoizedState,d]},useDebugValue:_E,useDeferredValue:function(a,u){var d=Kr();return TE(d,a,u)},useTransition:function(){var a=yE(!1);return a=SP.bind(null,Ze,a.queue,!0,!1),Kr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,u,d){var y=Ze,T=Kr();if(Et){if(d===void 0)throw Error(r(407));d=d()}else{if(d=u(),zt===null)throw Error(r(349));(ft&124)!==0||Z1(y,u,d)}T.memoizedState=d;var w={value:d,getSnapshot:u};return T.queue=w,mP(tP.bind(null,y,w,a),[a]),y.flags|=2048,Qc(9,oy(),eP.bind(null,y,w,d,u),null),d},useId:function(){var a=Kr(),u=zt.identifierPrefix;if(Et){var d=Is,y=Cs;d=(y&~(1<<32-Ln(y)-1)).toString(32)+d,u="«"+u+"R"+d,d=ny++,0<d&&(u+="H"+d.toString(32)),u+="»"}else d=HG++,u="«"+u+"r"+d.toString(32)+"»";return a.memoizedState=u},useHostTransitionStatus:wE,useFormState:cP,useActionState:cP,useOptimistic:function(a){var u=Kr();u.memoizedState=u.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=bE.bind(null,Ze,!0,d),d.dispatch=u,[a,u]},useMemoCache:pE,useCacheRefresh:function(){return Kr().memoizedState=YG.bind(null,Ze)}},DP={readContext:Er,use:ry,useCallback:EP,useContext:Er,useEffect:gP,useImperativeHandle:TP,useInsertionEffect:yP,useLayoutEffect:vP,useMemo:wP,useReducer:iy,useRef:pP,useState:function(){return iy(Ns)},useDebugValue:_E,useDeferredValue:function(a,u){var d=Pn();return bP(d,Mt.memoizedState,a,u)},useTransition:function(){var a=iy(Ns)[0],u=Pn().memoizedState;return[typeof a=="boolean"?a:Mh(a),u]},useSyncExternalStore:X1,useId:CP,useHostTransitionStatus:wE,useFormState:fP,useActionState:fP,useOptimistic:function(a,u){var d=Pn();return iP(d,Mt,a,u)},useMemoCache:pE,useCacheRefresh:IP},QG={readContext:Er,use:ry,useCallback:EP,useContext:Er,useEffect:gP,useImperativeHandle:TP,useInsertionEffect:yP,useLayoutEffect:vP,useMemo:wP,useReducer:gE,useRef:pP,useState:function(){return gE(Ns)},useDebugValue:_E,useDeferredValue:function(a,u){var d=Pn();return Mt===null?TE(d,a,u):bP(d,Mt.memoizedState,a,u)},useTransition:function(){var a=gE(Ns)[0],u=Pn().memoizedState;return[typeof a=="boolean"?a:Mh(a),u]},useSyncExternalStore:X1,useId:CP,useHostTransitionStatus:wE,useFormState:hP,useActionState:hP,useOptimistic:function(a,u){var d=Pn();return Mt!==null?iP(d,Mt,a,u):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:pE,useCacheRefresh:IP},Xc=null,Oh=0;function uy(a){var u=Oh;return Oh+=1,Xc===null&&(Xc=[]),H1(Xc,a,u)}function Lh(a,u){u=u.props.ref,a.ref=u!==void 0?u:null}function cy(a,u){throw u.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(u),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a)))}function kP(a){var u=a._init;return u(a._payload)}function OP(a){function u(J,W){if(a){var Z=J.deletions;Z===null?(J.deletions=[W],J.flags|=16):Z.push(W)}}function d(J,W){if(!a)return null;for(;W!==null;)u(J,W),W=W.sibling;return null}function y(J){for(var W=new Map;J!==null;)J.key!==null?W.set(J.key,J):W.set(J.index,J),J=J.sibling;return W}function T(J,W){return J=xs(J,W),J.index=0,J.sibling=null,J}function w(J,W,Z){return J.index=Z,a?(Z=J.alternate,Z!==null?(Z=Z.index,Z<W?(J.flags|=67108866,W):Z):(J.flags|=67108866,W)):(J.flags|=1048576,W)}function N(J){return a&&J.alternate===null&&(J.flags|=67108866),J}function V(J,W,Z,fe){return W===null||W.tag!==6?(W=HT(Z,J.mode,fe),W.return=J,W):(W=T(W,Z),W.return=J,W)}function j(J,W,Z,fe){var De=Z.type;return De===b?ce(J,W,Z.props.children,fe,Z.key):W!==null&&(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===L&&kP(De)===W.type)?(W=T(W,Z.props),Lh(W,Z),W.return=J,W):(W=jg(Z.type,Z.key,Z.props,null,J.mode,fe),Lh(W,Z),W.return=J,W)}function te(J,W,Z,fe){return W===null||W.tag!==4||W.stateNode.containerInfo!==Z.containerInfo||W.stateNode.implementation!==Z.implementation?(W=GT(Z,J.mode,fe),W.return=J,W):(W=T(W,Z.children||[]),W.return=J,W)}function ce(J,W,Z,fe,De){return W===null||W.tag!==7?(W=su(Z,J.mode,fe,De),W.return=J,W):(W=T(W,Z),W.return=J,W)}function he(J,W,Z){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=HT(""+W,J.mode,Z),W.return=J,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return Z=jg(W.type,W.key,W.props,null,J.mode,Z),Lh(Z,W),Z.return=J,Z;case E:return W=GT(W,J.mode,Z),W.return=J,W;case L:var fe=W._init;return W=fe(W._payload),he(J,W,Z)}if(be(W)||z(W))return W=su(W,J.mode,Z,null),W.return=J,W;if(typeof W.then=="function")return he(J,uy(W),Z);if(W.$$typeof===k)return he(J,Jg(J,W),Z);cy(J,W)}return null}function ne(J,W,Z,fe){var De=W!==null?W.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return De!==null?null:V(J,W,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case v:return Z.key===De?j(J,W,Z,fe):null;case E:return Z.key===De?te(J,W,Z,fe):null;case L:return De=Z._init,Z=De(Z._payload),ne(J,W,Z,fe)}if(be(Z)||z(Z))return De!==null?null:ce(J,W,Z,fe,null);if(typeof Z.then=="function")return ne(J,W,uy(Z),fe);if(Z.$$typeof===k)return ne(J,W,Jg(J,Z),fe);cy(J,Z)}return null}function re(J,W,Z,fe,De){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return J=J.get(Z)||null,V(W,J,""+fe,De);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case v:return J=J.get(fe.key===null?Z:fe.key)||null,j(W,J,fe,De);case E:return J=J.get(fe.key===null?Z:fe.key)||null,te(W,J,fe,De);case L:var tt=fe._init;return fe=tt(fe._payload),re(J,W,Z,fe,De)}if(be(fe)||z(fe))return J=J.get(Z)||null,ce(W,J,fe,De,null);if(typeof fe.then=="function")return re(J,W,Z,uy(fe),De);if(fe.$$typeof===k)return re(J,W,Z,Jg(W,fe),De);cy(W,fe)}return null}function Ge(J,W,Z,fe){for(var De=null,tt=null,Fe=W,He=W=0,Qn=null;Fe!==null&&He<Z.length;He++){Fe.index>He?(Qn=Fe,Fe=null):Qn=Fe.sibling;var yt=ne(J,Fe,Z[He],fe);if(yt===null){Fe===null&&(Fe=Qn);break}a&&Fe&&yt.alternate===null&&u(J,Fe),W=w(yt,W,He),tt===null?De=yt:tt.sibling=yt,tt=yt,Fe=Qn}if(He===Z.length)return d(J,Fe),Et&&lu(J,He),De;if(Fe===null){for(;He<Z.length;He++)Fe=he(J,Z[He],fe),Fe!==null&&(W=w(Fe,W,He),tt===null?De=Fe:tt.sibling=Fe,tt=Fe);return Et&&lu(J,He),De}for(Fe=y(Fe);He<Z.length;He++)Qn=re(Fe,J,He,Z[He],fe),Qn!==null&&(a&&Qn.alternate!==null&&Fe.delete(Qn.key===null?He:Qn.key),W=w(Qn,W,He),tt===null?De=Qn:tt.sibling=Qn,tt=Qn);return a&&Fe.forEach(function(Ja){return u(J,Ja)}),Et&&lu(J,He),De}function $e(J,W,Z,fe){if(Z==null)throw Error(r(151));for(var De=null,tt=null,Fe=W,He=W=0,Qn=null,yt=Z.next();Fe!==null&&!yt.done;He++,yt=Z.next()){Fe.index>He?(Qn=Fe,Fe=null):Qn=Fe.sibling;var Ja=ne(J,Fe,yt.value,fe);if(Ja===null){Fe===null&&(Fe=Qn);break}a&&Fe&&Ja.alternate===null&&u(J,Fe),W=w(Ja,W,He),tt===null?De=Ja:tt.sibling=Ja,tt=Ja,Fe=Qn}if(yt.done)return d(J,Fe),Et&&lu(J,He),De;if(Fe===null){for(;!yt.done;He++,yt=Z.next())yt=he(J,yt.value,fe),yt!==null&&(W=w(yt,W,He),tt===null?De=yt:tt.sibling=yt,tt=yt);return Et&&lu(J,He),De}for(Fe=y(Fe);!yt.done;He++,yt=Z.next())yt=re(Fe,J,He,yt.value,fe),yt!==null&&(a&&yt.alternate!==null&&Fe.delete(yt.key===null?He:yt.key),W=w(yt,W,He),tt===null?De=yt:tt.sibling=yt,tt=yt);return a&&Fe.forEach(function(X9){return u(J,X9)}),Et&&lu(J,He),De}function kt(J,W,Z,fe){if(typeof Z=="object"&&Z!==null&&Z.type===b&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case v:e:{for(var De=Z.key;W!==null;){if(W.key===De){if(De=Z.type,De===b){if(W.tag===7){d(J,W.sibling),fe=T(W,Z.props.children),fe.return=J,J=fe;break e}}else if(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===L&&kP(De)===W.type){d(J,W.sibling),fe=T(W,Z.props),Lh(fe,Z),fe.return=J,J=fe;break e}d(J,W);break}else u(J,W);W=W.sibling}Z.type===b?(fe=su(Z.props.children,J.mode,fe,Z.key),fe.return=J,J=fe):(fe=jg(Z.type,Z.key,Z.props,null,J.mode,fe),Lh(fe,Z),fe.return=J,J=fe)}return N(J);case E:e:{for(De=Z.key;W!==null;){if(W.key===De)if(W.tag===4&&W.stateNode.containerInfo===Z.containerInfo&&W.stateNode.implementation===Z.implementation){d(J,W.sibling),fe=T(W,Z.children||[]),fe.return=J,J=fe;break e}else{d(J,W);break}else u(J,W);W=W.sibling}fe=GT(Z,J.mode,fe),fe.return=J,J=fe}return N(J);case L:return De=Z._init,Z=De(Z._payload),kt(J,W,Z,fe)}if(be(Z))return Ge(J,W,Z,fe);if(z(Z)){if(De=z(Z),typeof De!="function")throw Error(r(150));return Z=De.call(Z),$e(J,W,Z,fe)}if(typeof Z.then=="function")return kt(J,W,uy(Z),fe);if(Z.$$typeof===k)return kt(J,W,Jg(J,Z),fe);cy(J,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,W!==null&&W.tag===6?(d(J,W.sibling),fe=T(W,Z),fe.return=J,J=fe):(d(J,W),fe=HT(Z,J.mode,fe),fe.return=J,J=fe),N(J)):d(J,W)}return function(J,W,Z,fe){try{Oh=0;var De=kt(J,W,Z,fe);return Xc=null,De}catch(Fe){if(Fe===xh||Fe===Xg)throw Fe;var tt=ui(29,Fe,null,J.mode);return tt.lanes=fe,tt.return=J,tt}finally{}}}var Zc=OP(!0),LP=OP(!1),Fi=de(null),Oo=null;function Oa(a){var u=a.alternate;Te(Bn,Bn.current&1),Te(Fi,a),Oo===null&&(u===null||Wc.current!==null||u.memoizedState!==null)&&(Oo=a)}function VP(a){if(a.tag===22){if(Te(Bn,Bn.current),Te(Fi,a),Oo===null){var u=a.alternate;u!==null&&u.memoizedState!==null&&(Oo=a)}}else La()}function La(){Te(Bn,Bn.current),Te(Fi,Fi.current)}function Ms(a){ue(Fi),Oo===a&&(Oo=null),ue(Bn)}var Bn=de(0);function fy(a){for(var u=a;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||hw(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function SE(a,u,d,y){u=a.memoizedState,d=d(y,u),d=d==null?u:h({},u,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var AE={enqueueSetState:function(a,u,d){a=a._reactInternals;var y=hi(),T=Ma(y);T.payload=u,d!=null&&(T.callback=d),u=Da(a,T,y),u!==null&&(pi(u,a,y),Ih(u,a,y))},enqueueReplaceState:function(a,u,d){a=a._reactInternals;var y=hi(),T=Ma(y);T.tag=1,T.payload=u,d!=null&&(T.callback=d),u=Da(a,T,y),u!==null&&(pi(u,a,y),Ih(u,a,y))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var d=hi(),y=Ma(d);y.tag=2,u!=null&&(y.callback=u),u=Da(a,y,d),u!==null&&(pi(u,a,d),Ih(u,a,d))}};function UP(a,u,d,y,T,w,N){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,w,N):u.prototype&&u.prototype.isPureReactComponent?!vh(d,y)||!vh(T,w):!0}function FP(a,u,d,y){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,y),u.state!==a&&AE.enqueueReplaceState(u,u.state,null)}function mu(a,u){var d=u;if("ref"in u){d={};for(var y in u)y!=="ref"&&(d[y]=u[y])}if(a=a.defaultProps){d===u&&(d=h({},d));for(var T in a)d[T]===void 0&&(d[T]=a[T])}return d}var dy=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function BP(a){dy(a)}function qP(a){console.error(a)}function $P(a){dy(a)}function hy(a,u){try{var d=a.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function zP(a,u,d){try{var y=a.onCaughtError;y(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function xE(a,u,d){return d=Ma(d),d.tag=3,d.payload={element:null},d.callback=function(){hy(a,u)},d}function HP(a){return a=Ma(a),a.tag=3,a}function GP(a,u,d,y){var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var w=y.value;a.payload=function(){return T(w)},a.callback=function(){zP(u,d,y)}}var N=d.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(a.callback=function(){zP(u,d,y),typeof T!="function"&&($a===null?$a=new Set([this]):$a.add(this));var V=y.stack;this.componentDidCatch(y.value,{componentStack:V!==null?V:""})})}function XG(a,u,d,y,T){if(d.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=d.alternate,u!==null&&bh(u,d,T,!0),d=Fi.current,d!==null){switch(d.tag){case 13:return Oo===null?JE():d.alternate===null&&gn===0&&(gn=3),d.flags&=-257,d.flags|=65536,d.lanes=T,y===tE?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([y]):u.add(y),XE(a,y,T)),!1;case 22:return d.flags|=65536,y===tE?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([y]):d.add(y)),XE(a,y,T)),!1}throw Error(r(435,d.tag))}return XE(a,y,T),JE(),!1}if(Et)return u=Fi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=T,y!==WT&&(a=Error(r(422),{cause:y}),wh(Oi(a,d)))):(y!==WT&&(u=Error(r(423),{cause:y}),wh(Oi(u,d))),a=a.current.alternate,a.flags|=65536,T&=-T,a.lanes|=T,y=Oi(y,d),T=xE(a.stateNode,y,T),iE(a,T),gn!==4&&(gn=2)),!1;var w=Error(r(520),{cause:y});if(w=Oi(w,d),zh===null?zh=[w]:zh.push(w),gn!==4&&(gn=2),u===null)return!0;y=Oi(y,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,a=T&-T,d.lanes|=a,a=xE(d.stateNode,y,a),iE(d,a),!1;case 1:if(u=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&($a===null||!$a.has(w))))return d.flags|=65536,T&=-T,d.lanes|=T,T=HP(T),GP(T,a,d,y),iE(d,T),!1}d=d.return}while(d!==null);return!1}var jP=Error(r(461)),Yn=!1;function fr(a,u,d,y){u.child=a===null?LP(u,null,d,y):Zc(u,a.child,d,y)}function KP(a,u,d,y,T){d=d.render;var w=u.ref;if("ref"in y){var N={};for(var V in y)V!=="ref"&&(N[V]=y[V])}else N=y;return du(u),y=uE(a,u,d,N,w,T),V=cE(),a!==null&&!Yn?(fE(a,u,T),Ds(a,u,T)):(Et&&V&&jT(u),u.flags|=1,fr(a,u,y,T),u.child)}function WP(a,u,d,y,T){if(a===null){var w=d.type;return typeof w=="function"&&!zT(w)&&w.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=w,YP(a,u,w,y,T)):(a=jg(d.type,null,y,u,u.mode,T),a.ref=u.ref,a.return=u,u.child=a)}if(w=a.child,!kE(a,T)){var N=w.memoizedProps;if(d=d.compare,d=d!==null?d:vh,d(N,y)&&a.ref===u.ref)return Ds(a,u,T)}return u.flags|=1,a=xs(w,y),a.ref=u.ref,a.return=u,u.child=a}function YP(a,u,d,y,T){if(a!==null){var w=a.memoizedProps;if(vh(w,y)&&a.ref===u.ref)if(Yn=!1,u.pendingProps=y=w,kE(a,T))(a.flags&131072)!==0&&(Yn=!0);else return u.lanes=a.lanes,Ds(a,u,T)}return CE(a,u,d,y,T)}function JP(a,u,d){var y=u.pendingProps,T=y.children,w=a!==null?a.memoizedState:null;if(y.mode==="hidden"){if((u.flags&128)!==0){if(y=w!==null?w.baseLanes|d:d,a!==null){for(T=u.child=a.child,w=0;T!==null;)w=w|T.lanes|T.childLanes,T=T.sibling;u.childLanes=w&~y}else u.childLanes=0,u.child=null;return QP(a,u,y,d)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},a!==null&&Qg(u,w!==null?w.cachePool:null),w!==null?Y1(u,w):sE(),VP(u);else return u.lanes=u.childLanes=536870912,QP(a,u,w!==null?w.baseLanes|d:d,d)}else w!==null?(Qg(u,w.cachePool),Y1(u,w),La(),u.memoizedState=null):(a!==null&&Qg(u,null),sE(),La());return fr(a,u,T,d),u.child}function QP(a,u,d,y){var T=eE();return T=T===null?null:{parent:Fn._currentValue,pool:T},u.memoizedState={baseLanes:d,cachePool:T},a!==null&&Qg(u,null),sE(),VP(u),a!==null&&bh(a,u,y,!0),null}function py(a,u){var d=u.ref;if(d===null)a!==null&&a.ref!==null&&(u.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(a===null||a.ref!==d)&&(u.flags|=4194816)}}function CE(a,u,d,y,T){return du(u),d=uE(a,u,d,y,void 0,T),y=cE(),a!==null&&!Yn?(fE(a,u,T),Ds(a,u,T)):(Et&&y&&jT(u),u.flags|=1,fr(a,u,d,T),u.child)}function XP(a,u,d,y,T,w){return du(u),u.updateQueue=null,d=Q1(u,y,d,T),J1(a),y=cE(),a!==null&&!Yn?(fE(a,u,w),Ds(a,u,w)):(Et&&y&&jT(u),u.flags|=1,fr(a,u,d,w),u.child)}function ZP(a,u,d,y,T){if(du(u),u.stateNode===null){var w=zc,N=d.contextType;typeof N=="object"&&N!==null&&(w=Er(N)),w=new d(y,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=AE,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=y,w.state=u.memoizedState,w.refs={},nE(u),N=d.contextType,w.context=typeof N=="object"&&N!==null?Er(N):zc,w.state=u.memoizedState,N=d.getDerivedStateFromProps,typeof N=="function"&&(SE(u,d,N,y),w.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(N=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),N!==w.state&&AE.enqueueReplaceState(w,w.state,null),Ph(u,y,w,T),Rh(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(a===null){w=u.stateNode;var V=u.memoizedProps,j=mu(d,V);w.props=j;var te=w.context,ce=d.contextType;N=zc,typeof ce=="object"&&ce!==null&&(N=Er(ce));var he=d.getDerivedStateFromProps;ce=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function",V=u.pendingProps!==V,ce||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(V||te!==N)&&FP(u,w,y,N),Na=!1;var ne=u.memoizedState;w.state=ne,Ph(u,y,w,T),Rh(),te=u.memoizedState,V||ne!==te||Na?(typeof he=="function"&&(SE(u,d,he,y),te=u.memoizedState),(j=Na||UP(u,d,j,y,ne,te,N))?(ce||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=te),w.props=y,w.state=te,w.context=N,y=j):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{w=u.stateNode,rE(a,u),N=u.memoizedProps,ce=mu(d,N),w.props=ce,he=u.pendingProps,ne=w.context,te=d.contextType,j=zc,typeof te=="object"&&te!==null&&(j=Er(te)),V=d.getDerivedStateFromProps,(te=typeof V=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==he||ne!==j)&&FP(u,w,y,j),Na=!1,ne=u.memoizedState,w.state=ne,Ph(u,y,w,T),Rh();var re=u.memoizedState;N!==he||ne!==re||Na||a!==null&&a.dependencies!==null&&Yg(a.dependencies)?(typeof V=="function"&&(SE(u,d,V,y),re=u.memoizedState),(ce=Na||UP(u,d,ce,y,ne,re,j)||a!==null&&a.dependencies!==null&&Yg(a.dependencies))?(te||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(y,re,j),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(y,re,j)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=re),w.props=y,w.state=re,w.context=j,y=ce):(typeof w.componentDidUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=1024),y=!1)}return w=y,py(a,u),y=(u.flags&128)!==0,w||y?(w=u.stateNode,d=y&&typeof d.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,a!==null&&y?(u.child=Zc(u,a.child,null,T),u.child=Zc(u,null,d,T)):fr(a,u,d,T),u.memoizedState=w.state,a=u.child):a=Ds(a,u,T),a}function eN(a,u,d,y){return Eh(),u.flags|=256,fr(a,u,d,y),u.child}var IE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function RE(a){return{baseLanes:a,cachePool:q1()}}function PE(a,u,d){return a=a!==null?a.childLanes&~d:0,u&&(a|=Bi),a}function tN(a,u,d){var y=u.pendingProps,T=!1,w=(u.flags&128)!==0,N;if((N=w)||(N=a!==null&&a.memoizedState===null?!1:(Bn.current&2)!==0),N&&(T=!0,u.flags&=-129),N=(u.flags&32)!==0,u.flags&=-33,a===null){if(Et){if(T?Oa(u):La(),Et){var V=mn,j;if(j=V){e:{for(j=V,V=ko;j.nodeType!==8;){if(!V){V=null;break e}if(j=uo(j.nextSibling),j===null){V=null;break e}}V=j}V!==null?(u.memoizedState={dehydrated:V,treeContext:au!==null?{id:Cs,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},j=ui(18,null,null,0),j.stateNode=V,j.return=u,u.child=j,kr=u,mn=null,j=!0):j=!1}j||cu(u)}if(V=u.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return hw(V)?u.lanes=32:u.lanes=536870912,null;Ms(u)}return V=y.children,y=y.fallback,T?(La(),T=u.mode,V=my({mode:"hidden",children:V},T),y=su(y,T,d,null),V.return=u,y.return=u,V.sibling=y,u.child=V,T=u.child,T.memoizedState=RE(d),T.childLanes=PE(a,N,d),u.memoizedState=IE,y):(Oa(u),NE(u,V))}if(j=a.memoizedState,j!==null&&(V=j.dehydrated,V!==null)){if(w)u.flags&256?(Oa(u),u.flags&=-257,u=ME(a,u,d)):u.memoizedState!==null?(La(),u.child=a.child,u.flags|=128,u=null):(La(),T=y.fallback,V=u.mode,y=my({mode:"visible",children:y.children},V),T=su(T,V,d,null),T.flags|=2,y.return=u,T.return=u,y.sibling=T,u.child=y,Zc(u,a.child,null,d),y=u.child,y.memoizedState=RE(d),y.childLanes=PE(a,N,d),u.memoizedState=IE,u=T);else if(Oa(u),hw(V)){if(N=V.nextSibling&&V.nextSibling.dataset,N)var te=N.dgst;N=te,y=Error(r(419)),y.stack="",y.digest=N,wh({value:y,source:null,stack:null}),u=ME(a,u,d)}else if(Yn||bh(a,u,d,!1),N=(d&a.childLanes)!==0,Yn||N){if(N=zt,N!==null&&(y=d&-d,y=(y&42)!==0?1:io(y),y=(y&(N.suspendedLanes|d))!==0?0:y,y!==0&&y!==j.retryLane))throw j.retryLane=y,$c(a,y),pi(N,a,y),jP;V.data==="$?"||JE(),u=ME(a,u,d)}else V.data==="$?"?(u.flags|=192,u.child=a.child,u=null):(a=j.treeContext,mn=uo(V.nextSibling),kr=u,Et=!0,uu=null,ko=!1,a!==null&&(Vi[Ui++]=Cs,Vi[Ui++]=Is,Vi[Ui++]=au,Cs=a.id,Is=a.overflow,au=u),u=NE(u,y.children),u.flags|=4096);return u}return T?(La(),T=y.fallback,V=u.mode,j=a.child,te=j.sibling,y=xs(j,{mode:"hidden",children:y.children}),y.subtreeFlags=j.subtreeFlags&65011712,te!==null?T=xs(te,T):(T=su(T,V,d,null),T.flags|=2),T.return=u,y.return=u,y.sibling=T,u.child=y,y=T,T=u.child,V=a.child.memoizedState,V===null?V=RE(d):(j=V.cachePool,j!==null?(te=Fn._currentValue,j=j.parent!==te?{parent:te,pool:te}:j):j=q1(),V={baseLanes:V.baseLanes|d,cachePool:j}),T.memoizedState=V,T.childLanes=PE(a,N,d),u.memoizedState=IE,y):(Oa(u),d=a.child,a=d.sibling,d=xs(d,{mode:"visible",children:y.children}),d.return=u,d.sibling=null,a!==null&&(N=u.deletions,N===null?(u.deletions=[a],u.flags|=16):N.push(a)),u.child=d,u.memoizedState=null,d)}function NE(a,u){return u=my({mode:"visible",children:u},a.mode),u.return=a,a.child=u}function my(a,u){return a=ui(22,a,null,u),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ME(a,u,d){return Zc(u,a.child,null,d),a=NE(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function nN(a,u,d){a.lanes|=u;var y=a.alternate;y!==null&&(y.lanes|=u),JT(a.return,u,d)}function DE(a,u,d,y,T){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:T}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=y,w.tail=d,w.tailMode=T)}function rN(a,u,d){var y=u.pendingProps,T=y.revealOrder,w=y.tail;if(fr(a,u,y.children,d),y=Bn.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&nN(a,d,u);else if(a.tag===19)nN(a,d,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}switch(Te(Bn,y),T){case"forwards":for(d=u.child,T=null;d!==null;)a=d.alternate,a!==null&&fy(a)===null&&(T=d),d=d.sibling;d=T,d===null?(T=u.child,u.child=null):(T=d.sibling,d.sibling=null),DE(u,!1,T,d,w);break;case"backwards":for(d=null,T=u.child,u.child=null;T!==null;){if(a=T.alternate,a!==null&&fy(a)===null){u.child=T;break}a=T.sibling,T.sibling=d,d=T,T=a}DE(u,!0,d,null,w);break;case"together":DE(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ds(a,u,d){if(a!==null&&(u.dependencies=a.dependencies),qa|=u.lanes,(d&u.childLanes)===0)if(a!==null){if(bh(a,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(a!==null&&u.child!==a.child)throw Error(r(153));if(u.child!==null){for(a=u.child,d=xs(a,a.pendingProps),u.child=d,d.return=u;a.sibling!==null;)a=a.sibling,d=d.sibling=xs(a,a.pendingProps),d.return=u;d.sibling=null}return u.child}function kE(a,u){return(a.lanes&u)!==0?!0:(a=a.dependencies,!!(a!==null&&Yg(a)))}function ZG(a,u,d){switch(u.tag){case 3:ht(u,u.stateNode.containerInfo),Pa(u,Fn,a.memoizedState.cache),Eh();break;case 27:case 5:je(u);break;case 4:ht(u,u.stateNode.containerInfo);break;case 10:Pa(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Oa(u),u.flags|=128,null):(d&u.child.childLanes)!==0?tN(a,u,d):(Oa(u),a=Ds(a,u,d),a!==null?a.sibling:null);Oa(u);break;case 19:var T=(a.flags&128)!==0;if(y=(d&u.childLanes)!==0,y||(bh(a,u,d,!1),y=(d&u.childLanes)!==0),T){if(y)return rN(a,u,d);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Te(Bn,Bn.current),y)break;return null;case 22:case 23:return u.lanes=0,JP(a,u,d);case 24:Pa(u,Fn,a.memoizedState.cache)}return Ds(a,u,d)}function iN(a,u,d){if(a!==null)if(a.memoizedProps!==u.pendingProps)Yn=!0;else{if(!kE(a,d)&&(u.flags&128)===0)return Yn=!1,ZG(a,u,d);Yn=(a.flags&131072)!==0}else Yn=!1,Et&&(u.flags&1048576)!==0&&k1(u,Wg,u.index);switch(u.lanes=0,u.tag){case 16:e:{a=u.pendingProps;var y=u.elementType,T=y._init;if(y=T(y._payload),u.type=y,typeof y=="function")zT(y)?(a=mu(y,a),u.tag=1,u=ZP(null,u,y,a,d)):(u.tag=0,u=CE(null,u,y,a,d));else{if(y!=null){if(T=y.$$typeof,T===q){u.tag=11,u=KP(null,u,y,a,d);break e}else if(T===M){u.tag=14,u=WP(null,u,y,a,d);break e}}throw u=Ce(y)||y,Error(r(306,u,""))}}return u;case 0:return CE(a,u,u.type,u.pendingProps,d);case 1:return y=u.type,T=mu(y,u.pendingProps),ZP(a,u,y,T,d);case 3:e:{if(ht(u,u.stateNode.containerInfo),a===null)throw Error(r(387));y=u.pendingProps;var w=u.memoizedState;T=w.element,rE(a,u),Ph(u,y,null,d);var N=u.memoizedState;if(y=N.cache,Pa(u,Fn,y),y!==w.cache&&QT(u,[Fn],d,!0),Rh(),y=N.element,w.isDehydrated)if(w={element:y,isDehydrated:!1,cache:N.cache},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){u=eN(a,u,y,d);break e}else if(y!==T){T=Oi(Error(r(424)),u),wh(T),u=eN(a,u,y,d);break e}else{switch(a=u.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(mn=uo(a.firstChild),kr=u,Et=!0,uu=null,ko=!0,d=LP(u,null,y,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Eh(),y===T){u=Ds(a,u,d);break e}fr(a,u,y,d)}u=u.child}return u;case 26:return py(a,u),a===null?(d=lM(u.type,null,u.pendingProps,null))?u.memoizedState=d:Et||(d=u.type,a=u.pendingProps,y=Ry(qe.current).createElement(d),y[ye]=u,y[ve]=a,hr(y,d,a),Ft(y),u.stateNode=y):u.memoizedState=lM(u.type,a.memoizedProps,u.pendingProps,a.memoizedState),null;case 27:return je(u),a===null&&Et&&(y=u.stateNode=oM(u.type,u.pendingProps,qe.current),kr=u,ko=!0,T=mn,Ga(u.type)?(pw=T,mn=uo(y.firstChild)):mn=T),fr(a,u,u.pendingProps.children,d),py(a,u),a===null&&(u.flags|=4194304),u.child;case 5:return a===null&&Et&&((T=y=mn)&&(y=C9(y,u.type,u.pendingProps,ko),y!==null?(u.stateNode=y,kr=u,mn=uo(y.firstChild),ko=!1,T=!0):T=!1),T||cu(u)),je(u),T=u.type,w=u.pendingProps,N=a!==null?a.memoizedProps:null,y=w.children,cw(T,w)?y=null:N!==null&&cw(T,N)&&(u.flags|=32),u.memoizedState!==null&&(T=uE(a,u,GG,null,null,d),Xh._currentValue=T),py(a,u),fr(a,u,y,d),u.child;case 6:return a===null&&Et&&((a=d=mn)&&(d=I9(d,u.pendingProps,ko),d!==null?(u.stateNode=d,kr=u,mn=null,a=!0):a=!1),a||cu(u)),null;case 13:return tN(a,u,d);case 4:return ht(u,u.stateNode.containerInfo),y=u.pendingProps,a===null?u.child=Zc(u,null,y,d):fr(a,u,y,d),u.child;case 11:return KP(a,u,u.type,u.pendingProps,d);case 7:return fr(a,u,u.pendingProps,d),u.child;case 8:return fr(a,u,u.pendingProps.children,d),u.child;case 12:return fr(a,u,u.pendingProps.children,d),u.child;case 10:return y=u.pendingProps,Pa(u,u.type,y.value),fr(a,u,y.children,d),u.child;case 9:return T=u.type._context,y=u.pendingProps.children,du(u),T=Er(T),y=y(T),u.flags|=1,fr(a,u,y,d),u.child;case 14:return WP(a,u,u.type,u.pendingProps,d);case 15:return YP(a,u,u.type,u.pendingProps,d);case 19:return rN(a,u,d);case 31:return y=u.pendingProps,d=u.mode,y={mode:y.mode,children:y.children},a===null?(d=my(y,d),d.ref=u.ref,u.child=d,d.return=u,u=d):(d=xs(a.child,y),d.ref=u.ref,u.child=d,d.return=u,u=d),u;case 22:return JP(a,u,d);case 24:return du(u),y=Er(Fn),a===null?(T=eE(),T===null&&(T=zt,w=XT(),T.pooledCache=w,w.refCount++,w!==null&&(T.pooledCacheLanes|=d),T=w),u.memoizedState={parent:y,cache:T},nE(u),Pa(u,Fn,T)):((a.lanes&d)!==0&&(rE(a,u),Ph(u,null,null,d),Rh()),T=a.memoizedState,w=u.memoizedState,T.parent!==y?(T={parent:y,cache:y},u.memoizedState=T,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=T),Pa(u,Fn,y)):(y=w.cache,Pa(u,Fn,y),y!==T.cache&&QT(u,[Fn],d,!0))),fr(a,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function ks(a){a.flags|=4}function oN(a,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!hM(u)){if(u=Fi.current,u!==null&&((ft&4194048)===ft?Oo!==null:(ft&62914560)!==ft&&(ft&536870912)===0||u!==Oo))throw Ch=tE,$1;a.flags|=8192}}function gy(a,u){u!==null&&(a.flags|=4),a.flags&16384&&(u=a.tag!==22?ms():536870912,a.lanes|=u,rf|=u)}function Vh(a,u){if(!Et)switch(a.tailMode){case"hidden":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function cn(a){var u=a.alternate!==null&&a.alternate.child===a.child,d=0,y=0;if(u)for(var T=a.child;T!==null;)d|=T.lanes|T.childLanes,y|=T.subtreeFlags&65011712,y|=T.flags&65011712,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)d|=T.lanes|T.childLanes,y|=T.subtreeFlags,y|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=y,a.childLanes=d,u}function e9(a,u,d){var y=u.pendingProps;switch(KT(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(u),null;case 1:return cn(u),null;case 3:return d=u.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Ps(Fn),Ee(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Th(u)?ks(u):a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,V1())),cn(u),null;case 26:return d=u.memoizedState,a===null?(ks(u),d!==null?(cn(u),oN(u,d)):(cn(u),u.flags&=-16777217)):d?d!==a.memoizedState?(ks(u),cn(u),oN(u,d)):(cn(u),u.flags&=-16777217):(a.memoizedProps!==y&&ks(u),cn(u),u.flags&=-16777217),null;case 27:Ye(u),d=qe.current;var T=u.type;if(a!==null&&u.stateNode!=null)a.memoizedProps!==y&&ks(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return cn(u),null}a=Le.current,Th(u)?O1(u):(a=oM(T,y,d),u.stateNode=a,ks(u))}return cn(u),null;case 5:if(Ye(u),d=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==y&&ks(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return cn(u),null}if(a=Le.current,Th(u))O1(u);else{switch(T=Ry(qe.current),a){case 1:a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=T.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof y.is=="string"?T.createElement("select",{is:y.is}):T.createElement("select"),y.multiple?a.multiple=!0:y.size&&(a.size=y.size);break;default:a=typeof y.is=="string"?T.createElement(d,{is:y.is}):T.createElement(d)}}a[ye]=u,a[ve]=y;e:for(T=u.child;T!==null;){if(T.tag===5||T.tag===6)a.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===u)break e;for(;T.sibling===null;){if(T.return===null||T.return===u)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}u.stateNode=a;e:switch(hr(a,d,y),d){case"button":case"input":case"select":case"textarea":a=!!y.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ks(u)}}return cn(u),u.flags&=-16777217,null;case 6:if(a&&u.stateNode!=null)a.memoizedProps!==y&&ks(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(r(166));if(a=qe.current,Th(u)){if(a=u.stateNode,d=u.memoizedProps,y=null,T=kr,T!==null)switch(T.tag){case 27:case 5:y=T.memoizedProps}a[ye]=u,a=!!(a.nodeValue===d||y!==null&&y.suppressHydrationWarning===!0||XN(a.nodeValue,d)),a||cu(u)}else a=Ry(a).createTextNode(y),a[ye]=u,u.stateNode=a}return cn(u),null;case 13:if(y=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(T=Th(u),y!==null&&y.dehydrated!==null){if(a===null){if(!T)throw Error(r(318));if(T=u.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[ye]=u}else Eh(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;cn(u),T=!1}else T=V1(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=T),T=!0;if(!T)return u.flags&256?(Ms(u),u):(Ms(u),null)}if(Ms(u),(u.flags&128)!==0)return u.lanes=d,u;if(d=y!==null,a=a!==null&&a.memoizedState!==null,d){y=u.child,T=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(T=y.alternate.memoizedState.cachePool.pool);var w=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(w=y.memoizedState.cachePool.pool),w!==T&&(y.flags|=2048)}return d!==a&&d&&(u.child.flags|=8192),gy(u,u.updateQueue),cn(u),null;case 4:return Ee(),a===null&&ow(u.stateNode.containerInfo),cn(u),null;case 10:return Ps(u.type),cn(u),null;case 19:if(ue(Bn),T=u.memoizedState,T===null)return cn(u),null;if(y=(u.flags&128)!==0,w=T.rendering,w===null)if(y)Vh(T,!1);else{if(gn!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(w=fy(a),w!==null){for(u.flags|=128,Vh(T,!1),a=w.updateQueue,u.updateQueue=a,gy(u,a),u.subtreeFlags=0,a=d,d=u.child;d!==null;)D1(d,a),d=d.sibling;return Te(Bn,Bn.current&1|2),u.child}a=a.sibling}T.tail!==null&&pn()>_y&&(u.flags|=128,y=!0,Vh(T,!1),u.lanes=4194304)}else{if(!y)if(a=fy(w),a!==null){if(u.flags|=128,y=!0,a=a.updateQueue,u.updateQueue=a,gy(u,a),Vh(T,!0),T.tail===null&&T.tailMode==="hidden"&&!w.alternate&&!Et)return cn(u),null}else 2*pn()-T.renderingStartTime>_y&&d!==536870912&&(u.flags|=128,y=!0,Vh(T,!1),u.lanes=4194304);T.isBackwards?(w.sibling=u.child,u.child=w):(a=T.last,a!==null?a.sibling=w:u.child=w,T.last=w)}return T.tail!==null?(u=T.tail,T.rendering=u,T.tail=u.sibling,T.renderingStartTime=pn(),u.sibling=null,a=Bn.current,Te(Bn,y?a&1|2:a&1),u):(cn(u),null);case 22:case 23:return Ms(u),aE(),y=u.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(d&536870912)!==0&&(u.flags&128)===0&&(cn(u),u.subtreeFlags&6&&(u.flags|=8192)):cn(u),d=u.updateQueue,d!==null&&gy(u,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==d&&(u.flags|=2048),a!==null&&ue(hu),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),Ps(Fn),cn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function t9(a,u){switch(KT(u),u.tag){case 1:return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Ps(Fn),Ee(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 26:case 27:case 5:return Ye(u),null;case 13:if(Ms(u),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Eh()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return ue(Bn),null;case 4:return Ee(),null;case 10:return Ps(u.type),null;case 22:case 23:return Ms(u),aE(),a!==null&&ue(hu),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 24:return Ps(Fn),null;case 25:return null;default:return null}}function sN(a,u){switch(KT(u),u.tag){case 3:Ps(Fn),Ee();break;case 26:case 27:case 5:Ye(u);break;case 4:Ee();break;case 13:Ms(u);break;case 19:ue(Bn);break;case 10:Ps(u.type);break;case 22:case 23:Ms(u),aE(),a!==null&&ue(hu);break;case 24:Ps(Fn)}}function Uh(a,u){try{var d=u.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var T=y.next;d=T;do{if((d.tag&a)===a){y=void 0;var w=d.create,N=d.inst;y=w(),N.destroy=y}d=d.next}while(d!==T)}}catch(V){Bt(u,u.return,V)}}function Va(a,u,d){try{var y=u.updateQueue,T=y!==null?y.lastEffect:null;if(T!==null){var w=T.next;y=w;do{if((y.tag&a)===a){var N=y.inst,V=N.destroy;if(V!==void 0){N.destroy=void 0,T=u;var j=d,te=V;try{te()}catch(ce){Bt(T,j,ce)}}}y=y.next}while(y!==w)}}catch(ce){Bt(u,u.return,ce)}}function aN(a){var u=a.updateQueue;if(u!==null){var d=a.stateNode;try{W1(u,d)}catch(y){Bt(a,a.return,y)}}}function lN(a,u,d){d.props=mu(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(y){Bt(a,u,y)}}function Fh(a,u){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof d=="function"?a.refCleanup=d(y):d.current=y}}catch(T){Bt(a,u,T)}}function Lo(a,u){var d=a.ref,y=a.refCleanup;if(d!==null)if(typeof y=="function")try{y()}catch(T){Bt(a,u,T)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(T){Bt(a,u,T)}else d.current=null}function uN(a){var u=a.type,d=a.memoizedProps,y=a.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&y.focus();break e;case"img":d.src?y.src=d.src:d.srcSet&&(y.srcset=d.srcSet)}}catch(T){Bt(a,a.return,T)}}function OE(a,u,d){try{var y=a.stateNode;w9(y,a.type,d,u),y[ve]=u}catch(T){Bt(a,a.return,T)}}function cN(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ga(a.type)||a.tag===4}function LE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||cN(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ga(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function VE(a,u,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,u?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,u):(u=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,u.appendChild(a),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=Iy));else if(y!==4&&(y===27&&Ga(a.type)&&(d=a.stateNode,u=null),a=a.child,a!==null))for(VE(a,u,d),a=a.sibling;a!==null;)VE(a,u,d),a=a.sibling}function yy(a,u,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,u?d.insertBefore(a,u):d.appendChild(a);else if(y!==4&&(y===27&&Ga(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(yy(a,u,d),a=a.sibling;a!==null;)yy(a,u,d),a=a.sibling}function fN(a){var u=a.stateNode,d=a.memoizedProps;try{for(var y=a.type,T=u.attributes;T.length;)u.removeAttributeNode(T[0]);hr(u,y,d),u[ye]=a,u[ve]=d}catch(w){Bt(a,a.return,w)}}var Os=!1,bn=!1,UE=!1,dN=typeof WeakSet=="function"?WeakSet:Set,Jn=null;function n9(a,u){if(a=a.containerInfo,lw=Oy,a=b1(a),LT(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var T=y.anchorOffset,w=y.focusNode;y=y.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var N=0,V=-1,j=-1,te=0,ce=0,he=a,ne=null;t:for(;;){for(var re;he!==d||T!==0&&he.nodeType!==3||(V=N+T),he!==w||y!==0&&he.nodeType!==3||(j=N+y),he.nodeType===3&&(N+=he.nodeValue.length),(re=he.firstChild)!==null;)ne=he,he=re;for(;;){if(he===a)break t;if(ne===d&&++te===T&&(V=N),ne===w&&++ce===y&&(j=N),(re=he.nextSibling)!==null)break;he=ne,ne=he.parentNode}he=re}d=V===-1||j===-1?null:{start:V,end:j}}else d=null}d=d||{start:0,end:0}}else d=null;for(uw={focusedElem:a,selectionRange:d},Oy=!1,Jn=u;Jn!==null;)if(u=Jn,a=u.child,(u.subtreeFlags&1024)!==0&&a!==null)a.return=u,Jn=a;else for(;Jn!==null;){switch(u=Jn,w=u.alternate,a=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,d=u,T=w.memoizedProps,w=w.memoizedState,y=d.stateNode;try{var Ge=mu(d.type,T,d.elementType===d.type);a=y.getSnapshotBeforeUpdate(Ge,w),y.__reactInternalSnapshotBeforeUpdate=a}catch($e){Bt(d,d.return,$e)}}break;case 3:if((a&1024)!==0){if(a=u.stateNode.containerInfo,d=a.nodeType,d===9)dw(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":dw(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=u.sibling,a!==null){a.return=u.return,Jn=a;break}Jn=u.return}}function hN(a,u,d){var y=d.flags;switch(d.tag){case 0:case 11:case 15:Ua(a,d),y&4&&Uh(5,d);break;case 1:if(Ua(a,d),y&4)if(a=d.stateNode,u===null)try{a.componentDidMount()}catch(N){Bt(d,d.return,N)}else{var T=mu(d.type,u.memoizedProps);u=u.memoizedState;try{a.componentDidUpdate(T,u,a.__reactInternalSnapshotBeforeUpdate)}catch(N){Bt(d,d.return,N)}}y&64&&aN(d),y&512&&Fh(d,d.return);break;case 3:if(Ua(a,d),y&64&&(a=d.updateQueue,a!==null)){if(u=null,d.child!==null)switch(d.child.tag){case 27:case 5:u=d.child.stateNode;break;case 1:u=d.child.stateNode}try{W1(a,u)}catch(N){Bt(d,d.return,N)}}break;case 27:u===null&&y&4&&fN(d);case 26:case 5:Ua(a,d),u===null&&y&4&&uN(d),y&512&&Fh(d,d.return);break;case 12:Ua(a,d);break;case 13:Ua(a,d),y&4&&gN(a,d),y&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=f9.bind(null,d),R9(a,d))));break;case 22:if(y=d.memoizedState!==null||Os,!y){u=u!==null&&u.memoizedState!==null||bn,T=Os;var w=bn;Os=y,(bn=u)&&!w?Fa(a,d,(d.subtreeFlags&8772)!==0):Ua(a,d),Os=T,bn=w}break;case 30:break;default:Ua(a,d)}}function pN(a){var u=a.alternate;u!==null&&(a.alternate=null,pN(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&et(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var tn=null,Wr=!1;function Ls(a,u,d){for(d=d.child;d!==null;)mN(a,u,d),d=d.sibling}function mN(a,u,d){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(en,d)}catch{}switch(d.tag){case 26:bn||Lo(d,u),Ls(a,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:bn||Lo(d,u);var y=tn,T=Wr;Ga(d.type)&&(tn=d.stateNode,Wr=!1),Ls(a,u,d),Wh(d.stateNode),tn=y,Wr=T;break;case 5:bn||Lo(d,u);case 6:if(y=tn,T=Wr,tn=null,Ls(a,u,d),tn=y,Wr=T,tn!==null)if(Wr)try{(tn.nodeType===9?tn.body:tn.nodeName==="HTML"?tn.ownerDocument.body:tn).removeChild(d.stateNode)}catch(w){Bt(d,u,w)}else try{tn.removeChild(d.stateNode)}catch(w){Bt(d,u,w)}break;case 18:tn!==null&&(Wr?(a=tn,rM(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),np(a)):rM(tn,d.stateNode));break;case 4:y=tn,T=Wr,tn=d.stateNode.containerInfo,Wr=!0,Ls(a,u,d),tn=y,Wr=T;break;case 0:case 11:case 14:case 15:bn||Va(2,d,u),bn||Va(4,d,u),Ls(a,u,d);break;case 1:bn||(Lo(d,u),y=d.stateNode,typeof y.componentWillUnmount=="function"&&lN(d,u,y)),Ls(a,u,d);break;case 21:Ls(a,u,d);break;case 22:bn=(y=bn)||d.memoizedState!==null,Ls(a,u,d),bn=y;break;default:Ls(a,u,d)}}function gN(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{np(a)}catch(d){Bt(u,u.return,d)}}function r9(a){switch(a.tag){case 13:case 19:var u=a.stateNode;return u===null&&(u=a.stateNode=new dN),u;case 22:return a=a.stateNode,u=a._retryCache,u===null&&(u=a._retryCache=new dN),u;default:throw Error(r(435,a.tag))}}function FE(a,u){var d=r9(a);u.forEach(function(y){var T=d9.bind(null,a,y);d.has(y)||(d.add(y),y.then(T,T))})}function ci(a,u){var d=u.deletions;if(d!==null)for(var y=0;y<d.length;y++){var T=d[y],w=a,N=u,V=N;e:for(;V!==null;){switch(V.tag){case 27:if(Ga(V.type)){tn=V.stateNode,Wr=!1;break e}break;case 5:tn=V.stateNode,Wr=!1;break e;case 3:case 4:tn=V.stateNode.containerInfo,Wr=!0;break e}V=V.return}if(tn===null)throw Error(r(160));mN(w,N,T),tn=null,Wr=!1,w=T.alternate,w!==null&&(w.return=null),T.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)yN(u,a),u=u.sibling}var lo=null;function yN(a,u){var d=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ci(u,a),fi(a),y&4&&(Va(3,a,a.return),Uh(3,a),Va(5,a,a.return));break;case 1:ci(u,a),fi(a),y&512&&(bn||d===null||Lo(d,d.return)),y&64&&Os&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?y:d.concat(y))));break;case 26:var T=lo;if(ci(u,a),fi(a),y&512&&(bn||d===null||Lo(d,d.return)),y&4){var w=d!==null?d.memoizedState:null;if(y=a.memoizedState,d===null)if(y===null)if(a.stateNode===null){e:{y=a.type,d=a.memoizedProps,T=T.ownerDocument||T;t:switch(y){case"title":w=T.getElementsByTagName("title")[0],(!w||w[at]||w[ye]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=T.createElement(y),T.head.insertBefore(w,T.querySelector("head > title"))),hr(w,y,d),w[ye]=a,Ft(w),y=w;break e;case"link":var N=fM("link","href",T).get(y+(d.href||""));if(N){for(var V=0;V<N.length;V++)if(w=N[V],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){N.splice(V,1);break t}}w=T.createElement(y),hr(w,y,d),T.head.appendChild(w);break;case"meta":if(N=fM("meta","content",T).get(y+(d.content||""))){for(V=0;V<N.length;V++)if(w=N[V],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){N.splice(V,1);break t}}w=T.createElement(y),hr(w,y,d),T.head.appendChild(w);break;default:throw Error(r(468,y))}w[ye]=a,Ft(w),y=w}a.stateNode=y}else dM(T,a.type,a.stateNode);else a.stateNode=cM(T,y,a.memoizedProps);else w!==y?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,y===null?dM(T,a.type,a.stateNode):cM(T,y,a.memoizedProps)):y===null&&a.stateNode!==null&&OE(a,a.memoizedProps,d.memoizedProps)}break;case 27:ci(u,a),fi(a),y&512&&(bn||d===null||Lo(d,d.return)),d!==null&&y&4&&OE(a,a.memoizedProps,d.memoizedProps);break;case 5:if(ci(u,a),fi(a),y&512&&(bn||d===null||Lo(d,d.return)),a.flags&32){T=a.stateNode;try{Ni(T,"")}catch(re){Bt(a,a.return,re)}}y&4&&a.stateNode!=null&&(T=a.memoizedProps,OE(a,T,d!==null?d.memoizedProps:T)),y&1024&&(UE=!0);break;case 6:if(ci(u,a),fi(a),y&4){if(a.stateNode===null)throw Error(r(162));y=a.memoizedProps,d=a.stateNode;try{d.nodeValue=y}catch(re){Bt(a,a.return,re)}}break;case 3:if(My=null,T=lo,lo=Py(u.containerInfo),ci(u,a),lo=T,fi(a),y&4&&d!==null&&d.memoizedState.isDehydrated)try{np(u.containerInfo)}catch(re){Bt(a,a.return,re)}UE&&(UE=!1,vN(a));break;case 4:y=lo,lo=Py(a.stateNode.containerInfo),ci(u,a),fi(a),lo=y;break;case 12:ci(u,a),fi(a);break;case 13:ci(u,a),fi(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(GE=pn()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,FE(a,y)));break;case 22:T=a.memoizedState!==null;var j=d!==null&&d.memoizedState!==null,te=Os,ce=bn;if(Os=te||T,bn=ce||j,ci(u,a),bn=ce,Os=te,fi(a),y&8192)e:for(u=a.stateNode,u._visibility=T?u._visibility&-2:u._visibility|1,T&&(d===null||j||Os||bn||gu(a)),d=null,u=a;;){if(u.tag===5||u.tag===26){if(d===null){j=d=u;try{if(w=j.stateNode,T)N=w.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{V=j.stateNode;var he=j.memoizedProps.style,ne=he!=null&&he.hasOwnProperty("display")?he.display:null;V.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(re){Bt(j,j.return,re)}}}else if(u.tag===6){if(d===null){j=u;try{j.stateNode.nodeValue=T?"":j.memoizedProps}catch(re){Bt(j,j.return,re)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=a.updateQueue,y!==null&&(d=y.retryQueue,d!==null&&(y.retryQueue=null,FE(a,d))));break;case 19:ci(u,a),fi(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,FE(a,y)));break;case 30:break;case 21:break;default:ci(u,a),fi(a)}}function fi(a){var u=a.flags;if(u&2){try{for(var d,y=a.return;y!==null;){if(cN(y)){d=y;break}y=y.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var T=d.stateNode,w=LE(a);yy(a,w,T);break;case 5:var N=d.stateNode;d.flags&32&&(Ni(N,""),d.flags&=-33);var V=LE(a);yy(a,V,N);break;case 3:case 4:var j=d.stateNode.containerInfo,te=LE(a);VE(a,te,j);break;default:throw Error(r(161))}}catch(ce){Bt(a,a.return,ce)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function vN(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var u=a;vN(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),a=a.sibling}}function Ua(a,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)hN(a,u.alternate,u),u=u.sibling}function gu(a){for(a=a.child;a!==null;){var u=a;switch(u.tag){case 0:case 11:case 14:case 15:Va(4,u,u.return),gu(u);break;case 1:Lo(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&lN(u,u.return,d),gu(u);break;case 27:Wh(u.stateNode);case 26:case 5:Lo(u,u.return),gu(u);break;case 22:u.memoizedState===null&&gu(u);break;case 30:gu(u);break;default:gu(u)}a=a.sibling}}function Fa(a,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,T=a,w=u,N=w.flags;switch(w.tag){case 0:case 11:case 15:Fa(T,w,d),Uh(4,w);break;case 1:if(Fa(T,w,d),y=w,T=y.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(te){Bt(y,y.return,te)}if(y=w,T=y.updateQueue,T!==null){var V=y.stateNode;try{var j=T.shared.hiddenCallbacks;if(j!==null)for(T.shared.hiddenCallbacks=null,T=0;T<j.length;T++)K1(j[T],V)}catch(te){Bt(y,y.return,te)}}d&&N&64&&aN(w),Fh(w,w.return);break;case 27:fN(w);case 26:case 5:Fa(T,w,d),d&&y===null&&N&4&&uN(w),Fh(w,w.return);break;case 12:Fa(T,w,d);break;case 13:Fa(T,w,d),d&&N&4&&gN(T,w);break;case 22:w.memoizedState===null&&Fa(T,w,d),Fh(w,w.return);break;case 30:break;default:Fa(T,w,d)}u=u.sibling}}function BE(a,u){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(a=u.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Sh(d))}function qE(a,u){a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&Sh(a))}function Vo(a,u,d,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)_N(a,u,d,y),u=u.sibling}function _N(a,u,d,y){var T=u.flags;switch(u.tag){case 0:case 11:case 15:Vo(a,u,d,y),T&2048&&Uh(9,u);break;case 1:Vo(a,u,d,y);break;case 3:Vo(a,u,d,y),T&2048&&(a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&Sh(a)));break;case 12:if(T&2048){Vo(a,u,d,y),a=u.stateNode;try{var w=u.memoizedProps,N=w.id,V=w.onPostCommit;typeof V=="function"&&V(N,u.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(j){Bt(u,u.return,j)}}else Vo(a,u,d,y);break;case 13:Vo(a,u,d,y);break;case 23:break;case 22:w=u.stateNode,N=u.alternate,u.memoizedState!==null?w._visibility&2?Vo(a,u,d,y):Bh(a,u):w._visibility&2?Vo(a,u,d,y):(w._visibility|=2,ef(a,u,d,y,(u.subtreeFlags&10256)!==0)),T&2048&&BE(N,u);break;case 24:Vo(a,u,d,y),T&2048&&qE(u.alternate,u);break;default:Vo(a,u,d,y)}}function ef(a,u,d,y,T){for(T=T&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var w=a,N=u,V=d,j=y,te=N.flags;switch(N.tag){case 0:case 11:case 15:ef(w,N,V,j,T),Uh(8,N);break;case 23:break;case 22:var ce=N.stateNode;N.memoizedState!==null?ce._visibility&2?ef(w,N,V,j,T):Bh(w,N):(ce._visibility|=2,ef(w,N,V,j,T)),T&&te&2048&&BE(N.alternate,N);break;case 24:ef(w,N,V,j,T),T&&te&2048&&qE(N.alternate,N);break;default:ef(w,N,V,j,T)}u=u.sibling}}function Bh(a,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=a,y=u,T=y.flags;switch(y.tag){case 22:Bh(d,y),T&2048&&BE(y.alternate,y);break;case 24:Bh(d,y),T&2048&&qE(y.alternate,y);break;default:Bh(d,y)}u=u.sibling}}var qh=8192;function tf(a){if(a.subtreeFlags&qh)for(a=a.child;a!==null;)TN(a),a=a.sibling}function TN(a){switch(a.tag){case 26:tf(a),a.flags&qh&&a.memoizedState!==null&&$9(lo,a.memoizedState,a.memoizedProps);break;case 5:tf(a);break;case 3:case 4:var u=lo;lo=Py(a.stateNode.containerInfo),tf(a),lo=u;break;case 22:a.memoizedState===null&&(u=a.alternate,u!==null&&u.memoizedState!==null?(u=qh,qh=16777216,tf(a),qh=u):tf(a));break;default:tf(a)}}function EN(a){var u=a.alternate;if(u!==null&&(a=u.child,a!==null)){u.child=null;do u=a.sibling,a.sibling=null,a=u;while(a!==null)}}function $h(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var y=u[d];Jn=y,bN(y,a)}EN(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)wN(a),a=a.sibling}function wN(a){switch(a.tag){case 0:case 11:case 15:$h(a),a.flags&2048&&Va(9,a,a.return);break;case 3:$h(a);break;case 12:$h(a);break;case 22:var u=a.stateNode;a.memoizedState!==null&&u._visibility&2&&(a.return===null||a.return.tag!==13)?(u._visibility&=-3,vy(a)):$h(a);break;default:$h(a)}}function vy(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var y=u[d];Jn=y,bN(y,a)}EN(a)}for(a=a.child;a!==null;){switch(u=a,u.tag){case 0:case 11:case 15:Va(8,u,u.return),vy(u);break;case 22:d=u.stateNode,d._visibility&2&&(d._visibility&=-3,vy(u));break;default:vy(u)}a=a.sibling}}function bN(a,u){for(;Jn!==null;){var d=Jn;switch(d.tag){case 0:case 11:case 15:Va(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var y=d.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Sh(d.memoizedState.cache)}if(y=d.child,y!==null)y.return=d,Jn=y;else e:for(d=a;Jn!==null;){y=Jn;var T=y.sibling,w=y.return;if(pN(y),y===d){Jn=null;break e}if(T!==null){T.return=w,Jn=T;break e}Jn=w}}}var i9={getCacheForType:function(a){var u=Er(Fn),d=u.data.get(a);return d===void 0&&(d=a(),u.data.set(a,d)),d}},o9=typeof WeakMap=="function"?WeakMap:Map,St=0,zt=null,nt=null,ft=0,At=0,di=null,Ba=!1,nf=!1,$E=!1,Vs=0,gn=0,qa=0,yu=0,zE=0,Bi=0,rf=0,zh=null,Yr=null,HE=!1,GE=0,_y=1/0,Ty=null,$a=null,dr=0,za=null,of=null,sf=0,jE=0,KE=null,SN=null,Hh=0,WE=null;function hi(){if((St&2)!==0&&ft!==0)return ft&-ft;if(ee.T!==null){var a=jc;return a!==0?a:tw()}return Y()}function AN(){Bi===0&&(Bi=(ft&536870912)===0||Et?$t():536870912);var a=Fi.current;return a!==null&&(a.flags|=32),Bi}function pi(a,u,d){(a===zt&&(At===2||At===9)||a.cancelPendingCommit!==null)&&(af(a,0),Ha(a,ft,Bi,!1)),oi(a,d),((St&2)===0||a!==zt)&&(a===zt&&((St&2)===0&&(yu|=d),gn===4&&Ha(a,ft,Bi,!1)),Uo(a))}function xN(a,u,d){if((St&6)!==0)throw Error(r(327));var y=!d&&(u&124)===0&&(u&a.expiredLanes)===0||ps(a,u),T=y?l9(a,u):QE(a,u,!0),w=y;do{if(T===0){nf&&!y&&Ha(a,u,0,!1);break}else{if(d=a.current.alternate,w&&!s9(d)){T=QE(a,u,!1),w=!1;continue}if(T===2){if(w=u,a.errorRecoveryDisabledLanes&w)var N=0;else N=a.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){u=N;e:{var V=a;T=zh;var j=V.current.memoizedState.isDehydrated;if(j&&(af(V,N).flags|=256),N=QE(V,N,!1),N!==2){if($E&&!j){V.errorRecoveryDisabledLanes|=w,yu|=w,T=4;break e}w=Yr,Yr=T,w!==null&&(Yr===null?Yr=w:Yr.push.apply(Yr,w))}T=N}if(w=!1,T!==2)continue}}if(T===1){af(a,0),Ha(a,u,0,!0);break}e:{switch(y=a,w=T,w){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Ha(y,u,Bi,!Ba);break e;case 2:Yr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(T=GE+300-pn(),10<T)){if(Ha(y,u,Bi,!Ba),Sa(y,0,!0)!==0)break e;y.timeoutHandle=tM(CN.bind(null,y,d,Yr,Ty,HE,u,Bi,yu,rf,Ba,w,2,-0,0),T);break e}CN(y,d,Yr,Ty,HE,u,Bi,yu,rf,Ba,w,0,-0,0)}}break}while(!0);Uo(a)}function CN(a,u,d,y,T,w,N,V,j,te,ce,he,ne,re){if(a.timeoutHandle=-1,he=u.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Qh={stylesheets:null,count:0,unsuspend:q9},TN(u),he=z9(),he!==null)){a.cancelPendingCommit=he(kN.bind(null,a,u,w,d,y,T,N,V,j,ce,1,ne,re)),Ha(a,w,N,!te);return}kN(a,u,w,d,y,T,N,V,j)}function s9(a){for(var u=a;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var y=0;y<d.length;y++){var T=d[y],w=T.getSnapshot;T=T.value;try{if(!li(w(),T))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ha(a,u,d,y){u&=~zE,u&=~yu,a.suspendedLanes|=u,a.pingedLanes&=~u,y&&(a.warmLanes|=u),y=a.expirationTimes;for(var T=u;0<T;){var w=31-Ln(T),N=1<<w;y[w]=-1,T&=~N}d!==0&&si(a,d,u)}function Ey(){return(St&6)===0?(Gh(0),!1):!0}function YE(){if(nt!==null){if(At===0)var a=nt.return;else a=nt,Rs=fu=null,dE(a),Xc=null,Oh=0,a=nt;for(;a!==null;)sN(a.alternate,a),a=a.return;nt=null}}function af(a,u){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,S9(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),YE(),zt=a,nt=d=xs(a.current,null),ft=u,At=0,di=null,Ba=!1,nf=ps(a,u),$E=!1,rf=Bi=zE=yu=qa=gn=0,Yr=zh=null,HE=!1,(u&8)!==0&&(u|=u&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=u;0<y;){var T=31-Ln(y),w=1<<T;u|=a[T],y&=~w}return Vs=u,zg(),d}function IN(a,u){Ze=null,ee.H=ly,u===xh||u===Xg?(u=G1(),At=3):u===$1?(u=G1(),At=4):At=u===jP?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,di=u,nt===null&&(gn=1,hy(a,Oi(u,a.current)))}function RN(){var a=ee.H;return ee.H=ly,a===null?ly:a}function PN(){var a=ee.A;return ee.A=i9,a}function JE(){gn=4,Ba||(ft&4194048)!==ft&&Fi.current!==null||(nf=!0),(qa&134217727)===0&&(yu&134217727)===0||zt===null||Ha(zt,ft,Bi,!1)}function QE(a,u,d){var y=St;St|=2;var T=RN(),w=PN();(zt!==a||ft!==u)&&(Ty=null,af(a,u)),u=!1;var N=gn;e:do try{if(At!==0&&nt!==null){var V=nt,j=di;switch(At){case 8:YE(),N=6;break e;case 3:case 2:case 9:case 6:Fi.current===null&&(u=!0);var te=At;if(At=0,di=null,lf(a,V,j,te),d&&nf){N=0;break e}break;default:te=At,At=0,di=null,lf(a,V,j,te)}}a9(),N=gn;break}catch(ce){IN(a,ce)}while(!0);return u&&a.shellSuspendCounter++,Rs=fu=null,St=y,ee.H=T,ee.A=w,nt===null&&(zt=null,ft=0,zg()),N}function a9(){for(;nt!==null;)NN(nt)}function l9(a,u){var d=St;St|=2;var y=RN(),T=PN();zt!==a||ft!==u?(Ty=null,_y=pn()+500,af(a,u)):nf=ps(a,u);e:do try{if(At!==0&&nt!==null){u=nt;var w=di;t:switch(At){case 1:At=0,di=null,lf(a,u,w,1);break;case 2:case 9:if(z1(w)){At=0,di=null,MN(u);break}u=function(){At!==2&&At!==9||zt!==a||(At=7),Uo(a)},w.then(u,u);break e;case 3:At=7;break e;case 4:At=5;break e;case 7:z1(w)?(At=0,di=null,MN(u)):(At=0,di=null,lf(a,u,w,7));break;case 5:var N=null;switch(nt.tag){case 26:N=nt.memoizedState;case 5:case 27:var V=nt;if(!N||hM(N)){At=0,di=null;var j=V.sibling;if(j!==null)nt=j;else{var te=V.return;te!==null?(nt=te,wy(te)):nt=null}break t}}At=0,di=null,lf(a,u,w,5);break;case 6:At=0,di=null,lf(a,u,w,6);break;case 8:YE(),gn=6;break e;default:throw Error(r(462))}}u9();break}catch(ce){IN(a,ce)}while(!0);return Rs=fu=null,ee.H=y,ee.A=T,St=d,nt!==null?0:(zt=null,ft=0,zg(),gn)}function u9(){for(;nt!==null&&!En();)NN(nt)}function NN(a){var u=iN(a.alternate,a,Vs);a.memoizedProps=a.pendingProps,u===null?wy(a):nt=u}function MN(a){var u=a,d=u.alternate;switch(u.tag){case 15:case 0:u=XP(d,u,u.pendingProps,u.type,void 0,ft);break;case 11:u=XP(d,u,u.pendingProps,u.type.render,u.ref,ft);break;case 5:dE(u);default:sN(d,u),u=nt=D1(u,Vs),u=iN(d,u,Vs)}a.memoizedProps=a.pendingProps,u===null?wy(a):nt=u}function lf(a,u,d,y){Rs=fu=null,dE(u),Xc=null,Oh=0;var T=u.return;try{if(XG(a,T,u,d,ft)){gn=1,hy(a,Oi(d,a.current)),nt=null;return}}catch(w){if(T!==null)throw nt=T,w;gn=1,hy(a,Oi(d,a.current)),nt=null;return}u.flags&32768?(Et||y===1?a=!0:nf||(ft&536870912)!==0?a=!1:(Ba=a=!0,(y===2||y===9||y===3||y===6)&&(y=Fi.current,y!==null&&y.tag===13&&(y.flags|=16384))),DN(u,a)):wy(u)}function wy(a){var u=a;do{if((u.flags&32768)!==0){DN(u,Ba);return}a=u.return;var d=e9(u.alternate,u,Vs);if(d!==null){nt=d;return}if(u=u.sibling,u!==null){nt=u;return}nt=u=a}while(u!==null);gn===0&&(gn=5)}function DN(a,u){do{var d=t9(a.alternate,a);if(d!==null){d.flags&=32767,nt=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(a=a.sibling,a!==null)){nt=a;return}nt=a=d}while(a!==null);gn=6,nt=null}function kN(a,u,d,y,T,w,N,V,j){a.cancelPendingCommit=null;do by();while(dr!==0);if((St&6)!==0)throw Error(r(327));if(u!==null){if(u===a.current)throw Error(r(177));if(w=u.lanes|u.childLanes,w|=qT,Aa(a,d,w,N,V,j),a===zt&&(nt=zt=null,ft=0),of=u,za=a,sf=d,jE=w,KE=T,SN=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,h9(Ao,function(){return FN(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=ee.T,ee.T=null,T=le.p,le.p=2,N=St,St|=4;try{n9(a,u,d)}finally{St=N,le.p=T,ee.T=y}}dr=1,ON(),LN(),VN()}}function ON(){if(dr===1){dr=0;var a=za,u=of,d=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||d){d=ee.T,ee.T=null;var y=le.p;le.p=2;var T=St;St|=4;try{yN(u,a);var w=uw,N=b1(a.containerInfo),V=w.focusedElem,j=w.selectionRange;if(N!==V&&V&&V.ownerDocument&&w1(V.ownerDocument.documentElement,V)){if(j!==null&&LT(V)){var te=j.start,ce=j.end;if(ce===void 0&&(ce=te),"selectionStart"in V)V.selectionStart=te,V.selectionEnd=Math.min(ce,V.value.length);else{var he=V.ownerDocument||document,ne=he&&he.defaultView||window;if(ne.getSelection){var re=ne.getSelection(),Ge=V.textContent.length,$e=Math.min(j.start,Ge),kt=j.end===void 0?$e:Math.min(j.end,Ge);!re.extend&&$e>kt&&(N=kt,kt=$e,$e=N);var J=E1(V,$e),W=E1(V,kt);if(J&&W&&(re.rangeCount!==1||re.anchorNode!==J.node||re.anchorOffset!==J.offset||re.focusNode!==W.node||re.focusOffset!==W.offset)){var Z=he.createRange();Z.setStart(J.node,J.offset),re.removeAllRanges(),$e>kt?(re.addRange(Z),re.extend(W.node,W.offset)):(Z.setEnd(W.node,W.offset),re.addRange(Z))}}}}for(he=[],re=V;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<he.length;V++){var fe=he[V];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Oy=!!lw,uw=lw=null}finally{St=T,le.p=y,ee.T=d}}a.current=u,dr=2}}function LN(){if(dr===2){dr=0;var a=za,u=of,d=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||d){d=ee.T,ee.T=null;var y=le.p;le.p=2;var T=St;St|=4;try{hN(a,u.alternate,u)}finally{St=T,le.p=y,ee.T=d}}dr=3}}function VN(){if(dr===4||dr===3){dr=0,Cn();var a=za,u=of,d=sf,y=SN;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?dr=5:(dr=0,of=za=null,UN(a,a.pendingLanes));var T=a.pendingLanes;if(T===0&&($a=null),gs(d),u=u.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(en,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=ee.T,T=le.p,le.p=2,ee.T=null;try{for(var w=a.onRecoverableError,N=0;N<y.length;N++){var V=y[N];w(V.value,{componentStack:V.stack})}}finally{ee.T=u,le.p=T}}(sf&3)!==0&&by(),Uo(a),T=a.pendingLanes,(d&4194090)!==0&&(T&42)!==0?a===WE?Hh++:(Hh=0,WE=a):Hh=0,Gh(0)}}function UN(a,u){(a.pooledCacheLanes&=u)===0&&(u=a.pooledCache,u!=null&&(a.pooledCache=null,Sh(u)))}function by(a){return ON(),LN(),VN(),FN()}function FN(){if(dr!==5)return!1;var a=za,u=jE;jE=0;var d=gs(sf),y=ee.T,T=le.p;try{le.p=32>d?32:d,ee.T=null,d=KE,KE=null;var w=za,N=sf;if(dr=0,of=za=null,sf=0,(St&6)!==0)throw Error(r(331));var V=St;if(St|=4,wN(w.current),_N(w,w.current,N,d),St=V,Gh(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(en,w)}catch{}return!0}finally{le.p=T,ee.T=y,UN(a,u)}}function BN(a,u,d){u=Oi(d,u),u=xE(a.stateNode,u,2),a=Da(a,u,2),a!==null&&(oi(a,2),Uo(a))}function Bt(a,u,d){if(a.tag===3)BN(a,a,d);else for(;u!==null;){if(u.tag===3){BN(u,a,d);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&($a===null||!$a.has(y))){a=Oi(d,a),d=HP(2),y=Da(u,d,2),y!==null&&(GP(d,y,u,a),oi(y,2),Uo(y));break}}u=u.return}}function XE(a,u,d){var y=a.pingCache;if(y===null){y=a.pingCache=new o9;var T=new Set;y.set(u,T)}else T=y.get(u),T===void 0&&(T=new Set,y.set(u,T));T.has(d)||($E=!0,T.add(d),a=c9.bind(null,a,u,d),u.then(a,a))}function c9(a,u,d){var y=a.pingCache;y!==null&&y.delete(u),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,zt===a&&(ft&d)===d&&(gn===4||gn===3&&(ft&62914560)===ft&&300>pn()-GE?(St&2)===0&&af(a,0):zE|=d,rf===ft&&(rf=0)),Uo(a)}function qN(a,u){u===0&&(u=ms()),a=$c(a,u),a!==null&&(oi(a,u),Uo(a))}function f9(a){var u=a.memoizedState,d=0;u!==null&&(d=u.retryLane),qN(a,d)}function d9(a,u){var d=0;switch(a.tag){case 13:var y=a.stateNode,T=a.memoizedState;T!==null&&(d=T.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(u),qN(a,d)}function h9(a,u){return Lt(a,u)}var Sy=null,uf=null,ZE=!1,Ay=!1,ew=!1,vu=0;function Uo(a){a!==uf&&a.next===null&&(uf===null?Sy=uf=a:uf=uf.next=a),Ay=!0,ZE||(ZE=!0,m9())}function Gh(a,u){if(!ew&&Ay){ew=!0;do for(var d=!1,y=Sy;y!==null;){if(a!==0){var T=y.pendingLanes;if(T===0)var w=0;else{var N=y.suspendedLanes,V=y.pingedLanes;w=(1<<31-Ln(42|a)+1)-1,w&=T&~(N&~V),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,GN(y,w))}else w=ft,w=Sa(y,y===zt?w:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(w&3)===0||ps(y,w)||(d=!0,GN(y,w));y=y.next}while(d);ew=!1}}function p9(){$N()}function $N(){Ay=ZE=!1;var a=0;vu!==0&&(b9()&&(a=vu),vu=0);for(var u=pn(),d=null,y=Sy;y!==null;){var T=y.next,w=zN(y,u);w===0?(y.next=null,d===null?Sy=T:d.next=T,T===null&&(uf=d)):(d=y,(a!==0||(w&3)!==0)&&(Ay=!0)),y=T}Gh(a)}function zN(a,u){for(var d=a.suspendedLanes,y=a.pingedLanes,T=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var N=31-Ln(w),V=1<<N,j=T[N];j===-1?((V&d)===0||(V&y)!==0)&&(T[N]=zl(V,u)):j<=u&&(a.expiredLanes|=V),w&=~V}if(u=zt,d=ft,d=Sa(a,a===u?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,d===0||a===u&&(At===2||At===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&st(y),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||ps(a,d)){if(u=d&-d,u===a.callbackPriority)return u;switch(y!==null&&st(y),gs(d)){case 2:case 8:d=cs;break;case 32:d=Ao;break;case 268435456:d=wa;break;default:d=Ao}return y=HN.bind(null,a),d=Lt(d,y),a.callbackPriority=u,a.callbackNode=d,u}return y!==null&&y!==null&&st(y),a.callbackPriority=2,a.callbackNode=null,2}function HN(a,u){if(dr!==0&&dr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(by()&&a.callbackNode!==d)return null;var y=ft;return y=Sa(a,a===zt?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(xN(a,y,u),zN(a,pn()),a.callbackNode!=null&&a.callbackNode===d?HN.bind(null,a):null)}function GN(a,u){if(by())return null;xN(a,u,!0)}function m9(){A9(function(){(St&6)!==0?Lt(Ea,p9):$N()})}function tw(){return vu===0&&(vu=$t()),vu}function jN(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Pc(""+a)}function KN(a,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,a.id&&d.setAttribute("form",a.id),u.parentNode.insertBefore(d,u),a=new FormData(a),d.parentNode.removeChild(d),a}function g9(a,u,d,y,T){if(u==="submit"&&d&&d.stateNode===T){var w=jN((T[ve]||null).action),N=y.submitter;N&&(u=(u=N[ve]||null)?jN(u.formAction):N.getAttribute("formAction"),u!==null&&(w=u,N=null));var V=new Nc("action","action",null,y,T);a.push({event:V,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(vu!==0){var j=N?KN(T,N):new FormData(T);EE(d,{pending:!0,data:j,method:T.method,action:w},null,j)}}else typeof w=="function"&&(V.preventDefault(),j=N?KN(T,N):new FormData(T),EE(d,{pending:!0,data:j,method:T.method,action:w},w,j))},currentTarget:T}]})}}for(var nw=0;nw<BT.length;nw++){var rw=BT[nw],y9=rw.toLowerCase(),v9=rw[0].toUpperCase()+rw.slice(1);ao(y9,"on"+v9)}ao(x1,"onAnimationEnd"),ao(C1,"onAnimationIteration"),ao(I1,"onAnimationStart"),ao("dblclick","onDoubleClick"),ao("focusin","onFocus"),ao("focusout","onBlur"),ao(OG,"onTransitionRun"),ao(LG,"onTransitionStart"),ao(VG,"onTransitionCancel"),ao(R1,"onTransitionEnd"),ys("onMouseEnter",["mouseout","mouseover"]),ys("onMouseLeave",["mouseout","mouseover"]),ys("onPointerEnter",["pointerout","pointerover"]),ys("onPointerLeave",["pointerout","pointerover"]),oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oo("onBeforeInput",["compositionend","keypress","textInput","paste"]),oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jh));function WN(a,u){u=(u&4)!==0;for(var d=0;d<a.length;d++){var y=a[d],T=y.event;y=y.listeners;e:{var w=void 0;if(u)for(var N=y.length-1;0<=N;N--){var V=y[N],j=V.instance,te=V.currentTarget;if(V=V.listener,j!==w&&T.isPropagationStopped())break e;w=V,T.currentTarget=te;try{w(T)}catch(ce){dy(ce)}T.currentTarget=null,w=j}else for(N=0;N<y.length;N++){if(V=y[N],j=V.instance,te=V.currentTarget,V=V.listener,j!==w&&T.isPropagationStopped())break e;w=V,T.currentTarget=te;try{w(T)}catch(ce){dy(ce)}T.currentTarget=null,w=j}}}}function rt(a,u){var d=u[gt];d===void 0&&(d=u[gt]=new Set);var y=a+"__bubble";d.has(y)||(YN(u,a,2,!1),d.add(y))}function iw(a,u,d){var y=0;u&&(y|=4),YN(d,a,y,u)}var xy="_reactListening"+Math.random().toString(36).slice(2);function ow(a){if(!a[xy]){a[xy]=!0,Hl.forEach(function(d){d!=="selectionchange"&&(_9.has(d)||iw(d,!1,a),iw(d,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[xy]||(u[xy]=!0,iw("selectionchange",!1,u))}}function YN(a,u,d,y){switch(_M(u)){case 2:var T=j9;break;case 8:T=K9;break;default:T=_w}d=T.bind(null,u,d,a),T=void 0,!Di||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),y?T!==void 0?a.addEventListener(u,d,{capture:!0,passive:T}):a.addEventListener(u,d,!0):T!==void 0?a.addEventListener(u,d,{passive:T}):a.addEventListener(u,d,!1)}function sw(a,u,d,y,T){var w=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var N=y.tag;if(N===3||N===4){var V=y.stateNode.containerInfo;if(V===T)break;if(N===4)for(N=y.return;N!==null;){var j=N.tag;if((j===3||j===4)&&N.stateNode.containerInfo===T)return;N=N.return}for(;V!==null;){if(N=ln(V),N===null)return;if(j=N.tag,j===5||j===6||j===26||j===27){y=w=N;continue e}V=V.parentNode}}y=y.return}Ig(function(){var te=w,ce=Mi(d),he=[];e:{var ne=P1.get(a);if(ne!==void 0){var re=Nc,Ge=a;switch(a){case"keypress":if(Ro(d)===0)break e;case"keydown":case"keyup":re=Vc;break;case"focusin":Ge="focus",re=kc;break;case"focusout":Ge="blur",re=kc;break;case"beforeblur":case"afterblur":re=kc;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ki;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=MT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Lg;break;case x1:case C1:case I1:re=Oc;break;case R1:re=Ug;break;case"scroll":case"scrollend":re=Rg;break;case"wheel":re=Uc;break;case"copy":case"cut":case"paste":re=Lc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=gh;break;case"toggle":case"beforetoggle":re=Bg}var $e=(u&4)!==0,kt=!$e&&(a==="scroll"||a==="scrollend"),J=$e?ne!==null?ne+"Capture":null:ne;$e=[];for(var W=te,Z;W!==null;){var fe=W;if(Z=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Z===null||J===null||(fe=Ql(W,J),fe!=null&&$e.push(Kh(W,fe,Z))),kt)break;W=W.return}0<$e.length&&(ne=new re(ne,Ge,null,d,ce),he.push({event:ne,listeners:$e}))}}if((u&7)===0){e:{if(ne=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",ne&&d!==Ts&&(Ge=d.relatedTarget||d.fromElement)&&(ln(Ge)||Ge[Xe]))break e;if((re||ne)&&(ne=ce.window===ce?ce:(ne=ce.ownerDocument)?ne.defaultView||ne.parentWindow:window,re?(Ge=d.relatedTarget||d.toElement,re=te,Ge=Ge?ln(Ge):null,Ge!==null&&(kt=o(Ge),$e=Ge.tag,Ge!==kt||$e!==5&&$e!==27&&$e!==6)&&(Ge=null)):(re=null,Ge=te),re!==Ge)){if($e=ki,fe="onMouseLeave",J="onMouseEnter",W="mouse",(a==="pointerout"||a==="pointerover")&&($e=gh,fe="onPointerLeave",J="onPointerEnter",W="pointer"),kt=re==null?ne:jn(re),Z=Ge==null?ne:jn(Ge),ne=new $e(fe,W+"leave",re,d,ce),ne.target=kt,ne.relatedTarget=Z,fe=null,ln(ce)===te&&($e=new $e(J,W+"enter",Ge,d,ce),$e.target=Z,$e.relatedTarget=kt,fe=$e),kt=fe,re&&Ge)t:{for($e=re,J=Ge,W=0,Z=$e;Z;Z=cf(Z))W++;for(Z=0,fe=J;fe;fe=cf(fe))Z++;for(;0<W-Z;)$e=cf($e),W--;for(;0<Z-W;)J=cf(J),Z--;for(;W--;){if($e===J||J!==null&&$e===J.alternate)break t;$e=cf($e),J=cf(J)}$e=null}else $e=null;re!==null&&JN(he,ne,re,$e,!1),Ge!==null&&kt!==null&&JN(he,kt,Ge,$e,!0)}}e:{if(ne=te?jn(te):window,re=ne.nodeName&&ne.nodeName.toLowerCase(),re==="select"||re==="input"&&ne.type==="file")var De=m1;else if(Un(ne))if(g1)De=MG;else{De=PG;var tt=RG}else re=ne.nodeName,!re||re.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&uh(te.elementType)&&(De=m1):De=NG;if(De&&(De=De(a,te))){As(he,De,d,ce);break e}tt&&tt(a,ne,te),a==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&Ia(ne,"number",ne.value)}switch(tt=te?jn(te):window,a){case"focusin":(Un(tt)||tt.contentEditable==="true")&&(Fc=tt,VT=te,_h=null);break;case"focusout":_h=VT=Fc=null;break;case"mousedown":UT=!0;break;case"contextmenu":case"mouseup":case"dragend":UT=!1,S1(he,d,ce);break;case"selectionchange":if(kG)break;case"keydown":case"keyup":S1(he,d,ce)}var Fe;if(Mo)e:{switch(a){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else ut?oe(a,d)&&(He="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(He="onCompositionStart");He&&(P&&d.locale!=="ko"&&(ut||He!=="onCompositionStart"?He==="onCompositionEnd"&&ut&&(Fe=fh()):(Io=ce,Ra="value"in Io?Io.value:Io.textContent,ut=!0)),tt=Cy(te,He),0<tt.length&&(He=new ph(He,a,null,d,ce),he.push({event:He,listeners:tt}),Fe?He.data=Fe:(Fe=Ae(d),Fe!==null&&(He.data=Fe)))),(Fe=x?Vn(a,d):ct(a,d))&&(He=Cy(te,"onBeforeInput"),0<He.length&&(tt=new ph("onBeforeInput","beforeinput",null,d,ce),he.push({event:tt,listeners:He}),tt.data=Fe)),g9(he,a,te,d,ce)}WN(he,u)})}function Kh(a,u,d){return{instance:a,listener:u,currentTarget:d}}function Cy(a,u){for(var d=u+"Capture",y=[];a!==null;){var T=a,w=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||w===null||(T=Ql(a,d),T!=null&&y.unshift(Kh(a,T,w)),T=Ql(a,u),T!=null&&y.push(Kh(a,T,w))),a.tag===3)return y;a=a.return}return[]}function cf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function JN(a,u,d,y,T){for(var w=u._reactName,N=[];d!==null&&d!==y;){var V=d,j=V.alternate,te=V.stateNode;if(V=V.tag,j!==null&&j===y)break;V!==5&&V!==26&&V!==27||te===null||(j=te,T?(te=Ql(d,w),te!=null&&N.unshift(Kh(d,te,j))):T||(te=Ql(d,w),te!=null&&N.push(Kh(d,te,j)))),d=d.return}N.length!==0&&a.push({event:u,listeners:N})}var T9=/\r\n?/g,E9=/\u0000|\uFFFD/g;function QN(a){return(typeof a=="string"?a:""+a).replace(T9,`
`).replace(E9,"")}function XN(a,u){return u=QN(u),QN(a)===u}function Iy(){}function Dt(a,u,d,y,T,w){switch(d){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||Ni(a,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&Ni(a,""+y);break;case"className":xo(a,"class",y);break;case"tabIndex":xo(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":xo(a,d,y);break;case"style":lh(a,y,w);break;case"data":if(u!=="object"){xo(a,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||d!=="href")){a.removeAttribute(d);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(d);break}y=Pc(""+y),a.setAttribute(d,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(u!=="input"&&Dt(a,u,"name",T.name,T,null),Dt(a,u,"formEncType",T.formEncType,T,null),Dt(a,u,"formMethod",T.formMethod,T,null),Dt(a,u,"formTarget",T.formTarget,T,null)):(Dt(a,u,"encType",T.encType,T,null),Dt(a,u,"method",T.method,T,null),Dt(a,u,"target",T.target,T,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(d);break}y=Pc(""+y),a.setAttribute(d,y);break;case"onClick":y!=null&&(a.onclick=Iy);break;case"onScroll":y!=null&&rt("scroll",a);break;case"onScrollEnd":y!=null&&rt("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(d=y.__html,d!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}d=Pc(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,""+y):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":y===!0?a.setAttribute(d,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,y):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(d,y):a.removeAttribute(d);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(d):a.setAttribute(d,y);break;case"popover":rt("beforetoggle",a),rt("toggle",a),Ca(a,"popover",y);break;case"xlinkActuate":ur(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ur(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ur(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ur(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ur(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ur(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ur(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ur(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ur(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ca(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=PT.get(d)||d,Ca(a,d,y))}}function aw(a,u,d,y,T,w){switch(d){case"style":lh(a,y,w);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(d=y.__html,d!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"children":typeof y=="string"?Ni(a,y):(typeof y=="number"||typeof y=="bigint")&&Ni(a,""+y);break;case"onScroll":y!=null&&rt("scroll",a);break;case"onScrollEnd":y!=null&&rt("scrollend",a);break;case"onClick":y!=null&&(a.onclick=Iy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ac.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(T=d.endsWith("Capture"),u=d.slice(2,T?d.length-7:void 0),w=a[ve]||null,w=w!=null?w[d]:null,typeof w=="function"&&a.removeEventListener(u,w,T),typeof y=="function")){typeof w!="function"&&w!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(u,y,T);break e}d in a?a[d]=y:y===!0?a.setAttribute(d,""):Ca(a,d,y)}}}function hr(a,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",a),rt("load",a);var y=!1,T=!1,w;for(w in d)if(d.hasOwnProperty(w)){var N=d[w];if(N!=null)switch(w){case"src":y=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Dt(a,u,w,N,d,null)}}T&&Dt(a,u,"srcSet",d.srcSet,d,null),y&&Dt(a,u,"src",d.src,d,null);return;case"input":rt("invalid",a);var V=w=N=T=null,j=null,te=null;for(y in d)if(d.hasOwnProperty(y)){var ce=d[y];if(ce!=null)switch(y){case"name":T=ce;break;case"type":N=ce;break;case"checked":j=ce;break;case"defaultChecked":te=ce;break;case"value":w=ce;break;case"defaultValue":V=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,u));break;default:Dt(a,u,y,ce,d,null)}}Wl(a,w,V,j,te,N,T,!1),Rc(a);return;case"select":rt("invalid",a),y=N=w=null;for(T in d)if(d.hasOwnProperty(T)&&(V=d[T],V!=null))switch(T){case"value":w=V;break;case"defaultValue":N=V;break;case"multiple":y=V;default:Dt(a,u,T,V,d,null)}u=w,d=N,a.multiple=!!y,u!=null?_s(a,!!y,u,!1):d!=null&&_s(a,!!y,d,!0);return;case"textarea":rt("invalid",a),w=T=y=null;for(N in d)if(d.hasOwnProperty(N)&&(V=d[N],V!=null))switch(N){case"value":y=V;break;case"defaultValue":T=V;break;case"children":w=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:Dt(a,u,N,V,d,null)}Yl(a,y,T,w),Rc(a);return;case"option":for(j in d)if(d.hasOwnProperty(j)&&(y=d[j],y!=null))switch(j){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Dt(a,u,j,y,d,null)}return;case"dialog":rt("beforetoggle",a),rt("toggle",a),rt("cancel",a),rt("close",a);break;case"iframe":case"object":rt("load",a);break;case"video":case"audio":for(y=0;y<jh.length;y++)rt(jh[y],a);break;case"image":rt("error",a),rt("load",a);break;case"details":rt("toggle",a);break;case"embed":case"source":case"link":rt("error",a),rt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in d)if(d.hasOwnProperty(te)&&(y=d[te],y!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Dt(a,u,te,y,d,null)}return;default:if(uh(u)){for(ce in d)d.hasOwnProperty(ce)&&(y=d[ce],y!==void 0&&aw(a,u,ce,y,d,void 0));return}}for(V in d)d.hasOwnProperty(V)&&(y=d[V],y!=null&&Dt(a,u,V,y,d,null))}function w9(a,u,d,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,w=null,N=null,V=null,j=null,te=null,ce=null;for(re in d){var he=d[re];if(d.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":j=he;default:y.hasOwnProperty(re)||Dt(a,u,re,null,y,he)}}for(var ne in y){var re=y[ne];if(he=d[ne],y.hasOwnProperty(ne)&&(re!=null||he!=null))switch(ne){case"type":w=re;break;case"name":T=re;break;case"checked":te=re;break;case"defaultChecked":ce=re;break;case"value":N=re;break;case"defaultValue":V=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,u));break;default:re!==he&&Dt(a,u,ne,re,y,he)}}ai(a,N,V,j,te,ce,w,T);return;case"select":re=N=V=ne=null;for(w in d)if(j=d[w],d.hasOwnProperty(w)&&j!=null)switch(w){case"value":break;case"multiple":re=j;default:y.hasOwnProperty(w)||Dt(a,u,w,null,y,j)}for(T in y)if(w=y[T],j=d[T],y.hasOwnProperty(T)&&(w!=null||j!=null))switch(T){case"value":ne=w;break;case"defaultValue":V=w;break;case"multiple":N=w;default:w!==j&&Dt(a,u,T,w,y,j)}u=V,d=N,y=re,ne!=null?_s(a,!!d,ne,!1):!!y!=!!d&&(u!=null?_s(a,!!d,u,!0):_s(a,!!d,d?[]:"",!1));return;case"textarea":re=ne=null;for(V in d)if(T=d[V],d.hasOwnProperty(V)&&T!=null&&!y.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:Dt(a,u,V,null,y,T)}for(N in y)if(T=y[N],w=d[N],y.hasOwnProperty(N)&&(T!=null||w!=null))switch(N){case"value":ne=T;break;case"defaultValue":re=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==w&&Dt(a,u,N,T,y,w)}Nt(a,ne,re);return;case"option":for(var Ge in d)if(ne=d[Ge],d.hasOwnProperty(Ge)&&ne!=null&&!y.hasOwnProperty(Ge))switch(Ge){case"selected":a.selected=!1;break;default:Dt(a,u,Ge,null,y,ne)}for(j in y)if(ne=y[j],re=d[j],y.hasOwnProperty(j)&&ne!==re&&(ne!=null||re!=null))switch(j){case"selected":a.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Dt(a,u,j,ne,y,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in d)ne=d[$e],d.hasOwnProperty($e)&&ne!=null&&!y.hasOwnProperty($e)&&Dt(a,u,$e,null,y,ne);for(te in y)if(ne=y[te],re=d[te],y.hasOwnProperty(te)&&ne!==re&&(ne!=null||re!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,u));break;default:Dt(a,u,te,ne,y,re)}return;default:if(uh(u)){for(var kt in d)ne=d[kt],d.hasOwnProperty(kt)&&ne!==void 0&&!y.hasOwnProperty(kt)&&aw(a,u,kt,void 0,y,ne);for(ce in y)ne=y[ce],re=d[ce],!y.hasOwnProperty(ce)||ne===re||ne===void 0&&re===void 0||aw(a,u,ce,ne,y,re);return}}for(var J in d)ne=d[J],d.hasOwnProperty(J)&&ne!=null&&!y.hasOwnProperty(J)&&Dt(a,u,J,null,y,ne);for(he in y)ne=y[he],re=d[he],!y.hasOwnProperty(he)||ne===re||ne==null&&re==null||Dt(a,u,he,ne,y,re)}var lw=null,uw=null;function Ry(a){return a.nodeType===9?a:a.ownerDocument}function ZN(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eM(a,u){if(a===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&u==="foreignObject"?0:a}function cw(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var fw=null;function b9(){var a=window.event;return a&&a.type==="popstate"?a===fw?!1:(fw=a,!0):(fw=null,!1)}var tM=typeof setTimeout=="function"?setTimeout:void 0,S9=typeof clearTimeout=="function"?clearTimeout:void 0,nM=typeof Promise=="function"?Promise:void 0,A9=typeof queueMicrotask=="function"?queueMicrotask:typeof nM<"u"?function(a){return nM.resolve(null).then(a).catch(x9)}:tM;function x9(a){setTimeout(function(){throw a})}function Ga(a){return a==="head"}function rM(a,u){var d=u,y=0,T=0;do{var w=d.nextSibling;if(a.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(0<y&&8>y){d=y;var N=a.ownerDocument;if(d&1&&Wh(N.documentElement),d&2&&Wh(N.body),d&4)for(d=N.head,Wh(d),N=d.firstChild;N;){var V=N.nextSibling,j=N.nodeName;N[at]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&N.rel.toLowerCase()==="stylesheet"||d.removeChild(N),N=V}}if(T===0){a.removeChild(w),np(u);return}T--}else d==="$"||d==="$?"||d==="$!"?T++:y=d.charCodeAt(0)-48;else y=0;d=w}while(d);np(u)}function dw(a){var u=a.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":dw(d),et(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function C9(a,u,d,y){for(;a.nodeType===1;){var T=d;if(a.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[at])switch(u){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==T.rel||a.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||a.getAttribute("title")!==(T.title==null?null:T.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(T.src==null?null:T.src)||a.getAttribute("type")!==(T.type==null?null:T.type)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(u==="input"&&a.type==="hidden"){var w=T.name==null?null:""+T.name;if(T.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=uo(a.nextSibling),a===null)break}return null}function I9(a,u,d){if(u==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=uo(a.nextSibling),a===null))return null;return a}function hw(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function R9(a,u){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")u();else{var y=function(){u(),d.removeEventListener("DOMContentLoaded",y)};d.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function uo(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return a}var pw=null;function iM(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(u===0)return a;u--}else d==="/$"&&u++}a=a.previousSibling}return null}function oM(a,u,d){switch(u=Ry(d),a){case"html":if(a=u.documentElement,!a)throw Error(r(452));return a;case"head":if(a=u.head,!a)throw Error(r(453));return a;case"body":if(a=u.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Wh(a){for(var u=a.attributes;u.length;)a.removeAttributeNode(u[0]);et(a)}var qi=new Map,sM=new Set;function Py(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Us=le.d;le.d={f:P9,r:N9,D:M9,C:D9,L:k9,m:O9,X:V9,S:L9,M:U9};function P9(){var a=Us.f(),u=Ey();return a||u}function N9(a){var u=Ut(a);u!==null&&u.tag===5&&u.type==="form"?xP(u):Us.r(a)}var ff=typeof document>"u"?null:document;function aM(a,u,d){var y=ff;if(y&&typeof u=="string"&&u){var T=In(u);T='link[rel="'+a+'"][href="'+T+'"]',typeof d=="string"&&(T+='[crossorigin="'+d+'"]'),sM.has(T)||(sM.add(T),a={rel:a,crossOrigin:d,href:u},y.querySelector(T)===null&&(u=y.createElement("link"),hr(u,"link",a),Ft(u),y.head.appendChild(u)))}}function M9(a){Us.D(a),aM("dns-prefetch",a,null)}function D9(a,u){Us.C(a,u),aM("preconnect",a,u)}function k9(a,u,d){Us.L(a,u,d);var y=ff;if(y&&a&&u){var T='link[rel="preload"][as="'+In(u)+'"]';u==="image"&&d&&d.imageSrcSet?(T+='[imagesrcset="'+In(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(T+='[imagesizes="'+In(d.imageSizes)+'"]')):T+='[href="'+In(a)+'"]';var w=T;switch(u){case"style":w=df(a);break;case"script":w=hf(a)}qi.has(w)||(a=h({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:a,as:u},d),qi.set(w,a),y.querySelector(T)!==null||u==="style"&&y.querySelector(Yh(w))||u==="script"&&y.querySelector(Jh(w))||(u=y.createElement("link"),hr(u,"link",a),Ft(u),y.head.appendChild(u)))}}function O9(a,u){Us.m(a,u);var d=ff;if(d&&a){var y=u&&typeof u.as=="string"?u.as:"script",T='link[rel="modulepreload"][as="'+In(y)+'"][href="'+In(a)+'"]',w=T;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=hf(a)}if(!qi.has(w)&&(a=h({rel:"modulepreload",href:a},u),qi.set(w,a),d.querySelector(T)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Jh(w)))return}y=d.createElement("link"),hr(y,"link",a),Ft(y),d.head.appendChild(y)}}}function L9(a,u,d){Us.S(a,u,d);var y=ff;if(y&&a){var T=un(y).hoistableStyles,w=df(a);u=u||"default";var N=T.get(w);if(!N){var V={loading:0,preload:null};if(N=y.querySelector(Yh(w)))V.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":u},d),(d=qi.get(w))&&mw(a,d);var j=N=y.createElement("link");Ft(j),hr(j,"link",a),j._p=new Promise(function(te,ce){j.onload=te,j.onerror=ce}),j.addEventListener("load",function(){V.loading|=1}),j.addEventListener("error",function(){V.loading|=2}),V.loading|=4,Ny(N,u,y)}N={type:"stylesheet",instance:N,count:1,state:V},T.set(w,N)}}}function V9(a,u){Us.X(a,u);var d=ff;if(d&&a){var y=un(d).hoistableScripts,T=hf(a),w=y.get(T);w||(w=d.querySelector(Jh(T)),w||(a=h({src:a,async:!0},u),(u=qi.get(T))&&gw(a,u),w=d.createElement("script"),Ft(w),hr(w,"link",a),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(T,w))}}function U9(a,u){Us.M(a,u);var d=ff;if(d&&a){var y=un(d).hoistableScripts,T=hf(a),w=y.get(T);w||(w=d.querySelector(Jh(T)),w||(a=h({src:a,async:!0,type:"module"},u),(u=qi.get(T))&&gw(a,u),w=d.createElement("script"),Ft(w),hr(w,"link",a),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},y.set(T,w))}}function lM(a,u,d,y){var T=(T=qe.current)?Py(T):null;if(!T)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=df(d.href),d=un(T).hoistableStyles,y=d.get(u),y||(y={type:"style",instance:null,count:0,state:null},d.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=df(d.href);var w=un(T).hoistableStyles,N=w.get(a);if(N||(T=T.ownerDocument||T,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,N),(w=T.querySelector(Yh(a)))&&!w._p&&(N.instance=w,N.state.loading=5),qi.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},qi.set(a,d),w||F9(T,a,d,N.state))),u&&y===null)throw Error(r(528,""));return N}if(u&&y!==null)throw Error(r(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=hf(d),d=un(T).hoistableScripts,y=d.get(u),y||(y={type:"script",instance:null,count:0,state:null},d.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function df(a){return'href="'+In(a)+'"'}function Yh(a){return'link[rel="stylesheet"]['+a+"]"}function uM(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function F9(a,u,d,y){a.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=a.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),hr(u,"link",d),Ft(u),a.head.appendChild(u))}function hf(a){return'[src="'+In(a)+'"]'}function Jh(a){return"script[async]"+a}function cM(a,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var y=a.querySelector('style[data-href~="'+In(d.href)+'"]');if(y)return u.instance=y,Ft(y),y;var T=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),Ft(y),hr(y,"style",T),Ny(y,d.precedence,a),u.instance=y;case"stylesheet":T=df(d.href);var w=a.querySelector(Yh(T));if(w)return u.state.loading|=4,u.instance=w,Ft(w),w;y=uM(d),(T=qi.get(T))&&mw(y,T),w=(a.ownerDocument||a).createElement("link"),Ft(w);var N=w;return N._p=new Promise(function(V,j){N.onload=V,N.onerror=j}),hr(w,"link",y),u.state.loading|=4,Ny(w,d.precedence,a),u.instance=w;case"script":return w=hf(d.src),(T=a.querySelector(Jh(w)))?(u.instance=T,Ft(T),T):(y=d,(T=qi.get(w))&&(y=h({},d),gw(y,T)),a=a.ownerDocument||a,T=a.createElement("script"),Ft(T),hr(T,"link",y),a.head.appendChild(T),u.instance=T);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,Ny(y,d.precedence,a));return u.instance}function Ny(a,u,d){for(var y=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=y.length?y[y.length-1]:null,w=T,N=0;N<y.length;N++){var V=y[N];if(V.dataset.precedence===u)w=V;else if(w!==T)break}w?w.parentNode.insertBefore(a,w.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(a,u.firstChild))}function mw(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.title==null&&(a.title=u.title)}function gw(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.integrity==null&&(a.integrity=u.integrity)}var My=null;function fM(a,u,d){if(My===null){var y=new Map,T=My=new Map;T.set(d,y)}else T=My,y=T.get(d),y||(y=new Map,T.set(d,y));if(y.has(a))return y;for(y.set(a,null),d=d.getElementsByTagName(a),T=0;T<d.length;T++){var w=d[T];if(!(w[at]||w[ye]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var N=w.getAttribute(u)||"";N=a+N;var V=y.get(N);V?V.push(w):y.set(N,[w])}}return y}function dM(a,u,d){a=a.ownerDocument||a,a.head.insertBefore(d,u==="title"?a.querySelector("head > title"):null)}function B9(a,u,d){if(d===1||u.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return a=u.disabled,typeof u.precedence=="string"&&a==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function hM(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Qh=null;function q9(){}function $9(a,u,d){if(Qh===null)throw Error(r(475));var y=Qh;if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var T=df(d.href),w=a.querySelector(Yh(T));if(w){a=w._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(y.count++,y=Dy.bind(y),a.then(y,y)),u.state.loading|=4,u.instance=w,Ft(w);return}w=a.ownerDocument||a,d=uM(d),(T=qi.get(T))&&mw(d,T),w=w.createElement("link"),Ft(w);var N=w;N._p=new Promise(function(V,j){N.onload=V,N.onerror=j}),hr(w,"link",d),u.instance=w}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(y.count++,u=Dy.bind(y),a.addEventListener("load",u),a.addEventListener("error",u))}}function z9(){if(Qh===null)throw Error(r(475));var a=Qh;return a.stylesheets&&a.count===0&&yw(a,a.stylesheets),0<a.count?function(u){var d=setTimeout(function(){if(a.stylesheets&&yw(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(d)}}:null}function Dy(){if(this.count--,this.count===0){if(this.stylesheets)yw(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var ky=null;function yw(a,u){a.stylesheets=null,a.unsuspend!==null&&(a.count++,ky=new Map,u.forEach(H9,a),ky=null,Dy.call(a))}function H9(a,u){if(!(u.state.loading&4)){var d=ky.get(a);if(d)var y=d.get(null);else{d=new Map,ky.set(a,d);for(var T=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<T.length;w++){var N=T[w];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(d.set(N.dataset.precedence,N),y=N)}y&&d.set(null,y)}T=u.instance,N=T.getAttribute("data-precedence"),w=d.get(N)||y,w===y&&d.set(null,T),d.set(N,T),this.count++,y=Dy.bind(this),T.addEventListener("load",y),T.addEventListener("error",y),w?w.parentNode.insertBefore(T,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(T,a.firstChild)),u.state.loading|=4}}var Xh={$$typeof:k,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function G9(a,u,d,y,T,w,N,V){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.hiddenUpdates=jr(null),this.identifierPrefix=y,this.onUncaughtError=T,this.onCaughtError=w,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function pM(a,u,d,y,T,w,N,V,j,te,ce,he){return a=new G9(a,u,d,N,V,j,te,he),u=1,w===!0&&(u|=24),w=ui(3,null,null,u),a.current=w,w.stateNode=a,u=XT(),u.refCount++,a.pooledCache=u,u.refCount++,w.memoizedState={element:y,isDehydrated:d,cache:u},nE(w),a}function mM(a){return a?(a=zc,a):zc}function gM(a,u,d,y,T,w){T=mM(T),y.context===null?y.context=T:y.pendingContext=T,y=Ma(u),y.payload={element:d},w=w===void 0?null:w,w!==null&&(y.callback=w),d=Da(a,y,u),d!==null&&(pi(d,a,u),Ih(d,a,u))}function yM(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<u?d:u}}function vw(a,u){yM(a,u),(a=a.alternate)&&yM(a,u)}function vM(a){if(a.tag===13){var u=$c(a,67108864);u!==null&&pi(u,a,67108864),vw(a,67108864)}}var Oy=!0;function j9(a,u,d,y){var T=ee.T;ee.T=null;var w=le.p;try{le.p=2,_w(a,u,d,y)}finally{le.p=w,ee.T=T}}function K9(a,u,d,y){var T=ee.T;ee.T=null;var w=le.p;try{le.p=8,_w(a,u,d,y)}finally{le.p=w,ee.T=T}}function _w(a,u,d,y){if(Oy){var T=Tw(y);if(T===null)sw(a,u,y,Ly,d),TM(a,y);else if(Y9(T,a,u,d,y))y.stopPropagation();else if(TM(a,y),u&4&&-1<W9.indexOf(a)){for(;T!==null;){var w=Ut(T);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var N=ii(w.pendingLanes);if(N!==0){var V=w;for(V.pendingLanes|=2,V.entangledLanes|=2;N;){var j=1<<31-Ln(N);V.entanglements[1]|=j,N&=~j}Uo(w),(St&6)===0&&(_y=pn()+500,Gh(0))}}break;case 13:V=$c(w,2),V!==null&&pi(V,w,2),Ey(),vw(w,2)}if(w=Tw(y),w===null&&sw(a,u,y,Ly,d),w===T)break;T=w}T!==null&&y.stopPropagation()}else sw(a,u,y,null,d)}}function Tw(a){return a=Mi(a),Ew(a)}var Ly=null;function Ew(a){if(Ly=null,a=ln(a),a!==null){var u=o(a);if(u===null)a=null;else{var d=u.tag;if(d===13){if(a=s(u),a!==null)return a;a=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null)}}return Ly=a,null}function _M(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ta()){case Ea:return 2;case cs:return 8;case Ao:case ih:return 32;case wa:return 268435456;default:return 32}default:return 32}}var ww=!1,ja=null,Ka=null,Wa=null,Zh=new Map,ep=new Map,Ya=[],W9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TM(a,u){switch(a){case"focusin":case"focusout":ja=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Zh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ep.delete(u.pointerId)}}function tp(a,u,d,y,T,w){return a===null||a.nativeEvent!==w?(a={blockedOn:u,domEventName:d,eventSystemFlags:y,nativeEvent:w,targetContainers:[T]},u!==null&&(u=Ut(u),u!==null&&vM(u)),a):(a.eventSystemFlags|=y,u=a.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),a)}function Y9(a,u,d,y,T){switch(u){case"focusin":return ja=tp(ja,a,u,d,y,T),!0;case"dragenter":return Ka=tp(Ka,a,u,d,y,T),!0;case"mouseover":return Wa=tp(Wa,a,u,d,y,T),!0;case"pointerover":var w=T.pointerId;return Zh.set(w,tp(Zh.get(w)||null,a,u,d,y,T)),!0;case"gotpointercapture":return w=T.pointerId,ep.set(w,tp(ep.get(w)||null,a,u,d,y,T)),!0}return!1}function EM(a){var u=ln(a.target);if(u!==null){var d=o(u);if(d!==null){if(u=d.tag,u===13){if(u=s(d),u!==null){a.blockedOn=u,ae(a.priority,function(){if(d.tag===13){var y=hi();y=io(y);var T=$c(d,y);T!==null&&pi(T,d,y),vw(d,y)}});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Vy(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var d=Tw(a.nativeEvent);if(d===null){d=a.nativeEvent;var y=new d.constructor(d.type,d);Ts=y,d.target.dispatchEvent(y),Ts=null}else return u=Ut(d),u!==null&&vM(u),a.blockedOn=d,!1;u.shift()}return!0}function wM(a,u,d){Vy(a)&&d.delete(u)}function J9(){ww=!1,ja!==null&&Vy(ja)&&(ja=null),Ka!==null&&Vy(Ka)&&(Ka=null),Wa!==null&&Vy(Wa)&&(Wa=null),Zh.forEach(wM),ep.forEach(wM)}function Uy(a,u){a.blockedOn===u&&(a.blockedOn=null,ww||(ww=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,J9)))}var Fy=null;function bM(a){Fy!==a&&(Fy=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Fy===a&&(Fy=null);for(var u=0;u<a.length;u+=3){var d=a[u],y=a[u+1],T=a[u+2];if(typeof y!="function"){if(Ew(y||d)===null)continue;break}var w=Ut(d);w!==null&&(a.splice(u,3),u-=3,EE(w,{pending:!0,data:T,method:d.method,action:y},y,T))}}))}function np(a){function u(j){return Uy(j,a)}ja!==null&&Uy(ja,a),Ka!==null&&Uy(Ka,a),Wa!==null&&Uy(Wa,a),Zh.forEach(u),ep.forEach(u);for(var d=0;d<Ya.length;d++){var y=Ya[d];y.blockedOn===a&&(y.blockedOn=null)}for(;0<Ya.length&&(d=Ya[0],d.blockedOn===null);)EM(d),d.blockedOn===null&&Ya.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(y=0;y<d.length;y+=3){var T=d[y],w=d[y+1],N=T[ve]||null;if(typeof w=="function")N||bM(d);else if(N){var V=null;if(w&&w.hasAttribute("formAction")){if(T=w,N=w[ve]||null)V=N.formAction;else if(Ew(T)!==null)continue}else V=N.action;typeof V=="function"?d[y+1]=V:(d.splice(y,3),y-=3),bM(d)}}}function bw(a){this._internalRoot=a}By.prototype.render=bw.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(r(409));var d=u.current,y=hi();gM(d,y,a,u,null,null)},By.prototype.unmount=bw.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;gM(a.current,2,null,a,null,null),Ey(),u[Xe]=null}};function By(a){this._internalRoot=a}By.prototype.unstable_scheduleHydration=function(a){if(a){var u=Y();a={blockedOn:null,target:a,priority:u};for(var d=0;d<Ya.length&&u!==0&&u<Ya[d].priority;d++);Ya.splice(d,0,a),d===0&&EM(a)}};var SM=e.version;if(SM!=="19.1.1")throw Error(r(527,SM,"19.1.1"));le.findDOMNode=function(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=c(u),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var Q9={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qy.isDisabled&&qy.supportsFiber)try{en=qy.inject(Q9),mt=qy}catch{}}return ip.createRoot=function(a,u){if(!i(a))throw Error(r(299));var d=!1,y="",T=BP,w=qP,N=$P,V=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(N=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(V=u.unstable_transitionCallbacks)),u=pM(a,1,!1,null,null,d,y,T,w,N,V,null),a[Xe]=u.current,ow(a),new bw(u)},ip.hydrateRoot=function(a,u,d){if(!i(a))throw Error(r(299));var y=!1,T="",w=BP,N=qP,V=$P,j=null,te=null;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(N=d.onCaughtError),d.onRecoverableError!==void 0&&(V=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(j=d.unstable_transitionCallbacks),d.formState!==void 0&&(te=d.formState)),u=pM(a,1,!0,u,d??null,y,T,w,N,V,j,te),u.context=mM(null),d=u.current,y=hi(),y=io(y),T=Ma(y),T.callback=null,Da(d,T,y),d=y,u.current.lanes=d,oi(u,d),Uo(u),a[Xe]=u.current,ow(a),new By(u)},ip.version="19.1.1",ip}var kM;function c8(){if(kM)return Cw.exports;kM=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cw.exports=u8(),Cw.exports}var f8=c8();const d8=as(f8);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var OM="popstate";function h8(t={}){function e(i,o){let{pathname:s="/",search:l="",hash:c=""}=uc(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),FS("",{pathname:s,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),l="";if(s&&s.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");l=f===-1?c:c.slice(0,f)}return l+"#"+(typeof o=="string"?o:em(o))}function r(i,o){Qi(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return m8(e,n,r,t)}function an(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p8(){return Math.random().toString(36).substring(2,10)}function LM(t,e){return{usr:t.state,key:t.key,idx:e}}function FS(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?uc(e):e,state:n,key:e&&e.key||r||p8()}}function em({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function uc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function m8(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l="POP",c=null,f=h();f==null&&(f=0,s.replaceState({...s.state,idx:f},""));function h(){return(s.state||{idx:null}).idx}function g(){l="POP";let A=h(),I=A==null?null:A-f;f=A,c&&c({action:l,location:S.location,delta:I})}function v(A,I){l="PUSH";let D=FS(S.location,A,I);n&&n(D,A),f=h()+1;let k=LM(D,f),q=S.createHref(D);try{s.pushState(k,"",q)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(q)}o&&c&&c({action:l,location:S.location,delta:1})}function E(A,I){l="REPLACE";let D=FS(S.location,A,I);n&&n(D,A),f=h();let k=LM(D,f),q=S.createHref(D);s.replaceState(k,"",q),o&&c&&c({action:l,location:S.location,delta:0})}function b(A){return g8(A)}let S={get action(){return l},get location(){return t(i,s)},listen(A){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(OM,g),c=A,()=>{i.removeEventListener(OM,g),c=null}},createHref(A){return e(i,A)},createURL:b,encodeLocation(A){let I=b(A);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:v,replace:E,go(A){return s.go(A)}};return S}function g8(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),an(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:em(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function w4(t,e,n="/"){return y8(t,e,n,!1)}function y8(t,e,n,r){let i=typeof e=="string"?uc(e):e,o=Js(i.pathname||"/",n);if(o==null)return null;let s=b4(t);v8(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let f=R8(o);l=C8(s[c],f,r)}return l}function b4(t,e=[],n=[],r="",i=!1){let o=(s,l,c=i,f)=>{let h={relativePath:f===void 0?s.path||"":f,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;an(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let g=Gs([r,h.relativePath]),v=n.concat(h);s.children&&s.children.length>0&&(an(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),b4(s.children,e,v,g,c)),!(s.path==null&&!s.index)&&e.push({path:g,score:A8(g,s.index),routesMeta:v})};return t.forEach((s,l)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))o(s,l);else for(let f of S4(s.path))o(s,l,!0,f)}),e}function S4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=S4(r.join("/")),l=[];return l.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&l.push(...s),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function v8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:x8(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var _8=/^:[\w-]+$/,T8=3,E8=2,w8=1,b8=10,S8=-2,VM=t=>t==="*";function A8(t,e){let n=t.split("/"),r=n.length;return n.some(VM)&&(r+=S8),e&&(r+=E8),n.filter(i=>!VM(i)).reduce((i,o)=>i+(_8.test(o)?T8:o===""?w8:b8),r)}function x8(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function C8(t,e,n=!1){let{routesMeta:r}=t,i={},o="/",s=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,h=o==="/"?e:e.slice(o.length)||"/",g=Bv({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),v=c.route;if(!g&&f&&n&&!r[r.length-1].route.index&&(g=Bv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!g)return null;Object.assign(i,g.params),s.push({params:i,pathname:Gs([o,g.pathname]),pathnameBase:D8(Gs([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=Gs([o,g.pathnameBase]))}return s}function Bv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=I8(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,{paramName:h,isOptional:g},v)=>{if(h==="*"){let b=l[v]||"";s=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const E=l[v];return g&&!E?f[h]=void 0:f[h]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:s,pattern:t}}function I8(t,e=!1,n=!0){Qi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function R8(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Js(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function P8(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?uc(t):t;return{pathname:n?n.startsWith("/")?n:N8(n,e):e,search:k8(r),hash:O8(i)}}function N8(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Nw(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function M8(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Dx(t){let e=M8(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function kx(t,e,n,r=!1){let i;typeof t=="string"?i=uc(t):(i={...t},an(!i.pathname||!i.pathname.includes("?"),Nw("?","pathname","search",i)),an(!i.pathname||!i.pathname.includes("#"),Nw("#","pathname","hash",i)),an(!i.search||!i.search.includes("#"),Nw("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(s==null)l=n;else{let g=e.length-1;if(!r&&s.startsWith("..")){let v=s.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}l=g>=0?e[g]:"/"}let c=P8(i,l),f=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}var Gs=t=>t.join("/").replace(/\/\/+/g,"/"),D8=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),k8=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,O8=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function L8(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var A4=["POST","PUT","PATCH","DELETE"];new Set(A4);var V8=["GET",...A4];new Set(V8);var Cd=R.createContext(null);Cd.displayName="DataRouter";var e0=R.createContext(null);e0.displayName="DataRouterState";R.createContext(!1);var x4=R.createContext({isTransitioning:!1});x4.displayName="ViewTransition";var U8=R.createContext(new Map);U8.displayName="Fetchers";var F8=R.createContext(null);F8.displayName="Await";var Eo=R.createContext(null);Eo.displayName="Navigation";var Lm=R.createContext(null);Lm.displayName="Location";var wo=R.createContext({outlet:null,matches:[],isDataRoute:!1});wo.displayName="Route";var Ox=R.createContext(null);Ox.displayName="RouteError";function B8(t,{relative:e}={}){an(Id(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(Eo),{hash:i,pathname:o,search:s}=Vm(t,{relative:e}),l=o;return n!=="/"&&(l=o==="/"?n:Gs([n,o])),r.createHref({pathname:l,search:s,hash:i})}function Id(){return R.useContext(Lm)!=null}function ls(){return an(Id(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Lm).location}var C4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function I4(t){R.useContext(Eo).static||R.useLayoutEffect(t)}function t0(){let{isDataRoute:t}=R.useContext(wo);return t?Z8():q8()}function q8(){an(Id(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(Cd),{basename:e,navigator:n}=R.useContext(Eo),{matches:r}=R.useContext(wo),{pathname:i}=ls(),o=JSON.stringify(Dx(r)),s=R.useRef(!1);return I4(()=>{s.current=!0}),R.useCallback((c,f={})=>{if(Qi(s.current,C4),!s.current)return;if(typeof c=="number"){n.go(c);return}let h=kx(c,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Gs([e,h.pathname])),(f.replace?n.replace:n.push)(h,f.state,f)},[e,n,o,i,t])}R.createContext(null);function R4(){let{matches:t}=R.useContext(wo),e=t[t.length-1];return e?e.params:{}}function Vm(t,{relative:e}={}){let{matches:n}=R.useContext(wo),{pathname:r}=ls(),i=JSON.stringify(Dx(n));return R.useMemo(()=>kx(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function $8(t,e){return P4(t,e)}function P4(t,e,n,r,i){var D;an(Id(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=R.useContext(Eo),{matches:s}=R.useContext(wo),l=s[s.length-1],c=l?l.params:{},f=l?l.pathname:"/",h=l?l.pathnameBase:"/",g=l&&l.route;{let k=g&&g.path||"";N4(f,!g||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let v=ls(),E;if(e){let k=typeof e=="string"?uc(e):e;an(h==="/"||((D=k.pathname)==null?void 0:D.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${k.pathname}" was given in the \`location\` prop.`),E=k}else E=v;let b=E.pathname||"/",S=b;if(h!=="/"){let k=h.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let A=w4(t,{pathname:S});Qi(g||A!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Qi(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=K8(A&&A.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:Gs([h,o.encodeLocation?o.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:Gs([h,o.encodeLocation?o.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,n,r,i);return e&&I?R.createElement(Lm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},I):I}function z8(){let t=X8(),e=L8(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:o},"ErrorBoundary")," or"," ",R.createElement("code",{style:o},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,s)}var H8=R.createElement(z8,null),G8=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(wo.Provider,{value:this.props.routeContext},R.createElement(Ox.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function j8({routeContext:t,match:e,children:n}){let r=R.useContext(Cd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(wo.Provider,{value:t},n)}function K8(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let f=o.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);an(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let l=!1,c=-1;if(n)for(let f=0;f<o.length;f++){let h=o[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:v}=n,E=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,h,g)=>{let v,E=!1,b=null,S=null;n&&(v=s&&h.route.id?s[h.route.id]:void 0,b=h.route.errorElement||H8,l&&(c<0&&g===0?(N4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,S=null):c===g&&(E=!0,S=h.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,g+1)),I=()=>{let D;return v?D=b:E?D=S:h.route.Component?D=R.createElement(h.route.Component,null):h.route.element?D=h.route.element:D=f,R.createElement(j8,{match:h,routeContext:{outlet:f,matches:A,isDataRoute:n!=null},children:D})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?R.createElement(G8,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:r}):I()},null)}function Lx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W8(t){let e=R.useContext(Cd);return an(e,Lx(t)),e}function Y8(t){let e=R.useContext(e0);return an(e,Lx(t)),e}function J8(t){let e=R.useContext(wo);return an(e,Lx(t)),e}function Vx(t){let e=J8(t),n=e.matches[e.matches.length-1];return an(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Q8(){return Vx("useRouteId")}function X8(){var r;let t=R.useContext(Ox),e=Y8("useRouteError"),n=Vx("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Z8(){let{router:t}=W8("useNavigate"),e=Vx("useNavigate"),n=R.useRef(!1);return I4(()=>{n.current=!0}),R.useCallback(async(i,o={})=>{Qi(n.current,C4),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...o}))},[t,e])}var UM={};function N4(t,e,n){!e&&!UM[t]&&(UM[t]=!0,Qi(!1,n))}R.memo(ej);function ej({routes:t,future:e,state:n,unstable_onError:r}){return P4(t,void 0,n,r,e)}function FM({to:t,replace:e,state:n,relative:r}){an(Id(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=R.useContext(Eo);Qi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=R.useContext(wo),{pathname:s}=ls(),l=t0(),c=kx(t,Dx(o),s,r==="path"),f=JSON.stringify(c);return R.useEffect(()=>{l(JSON.parse(f),{replace:e,state:n,relative:r})},[l,f,r,e,n]),null}function Jr(t){an(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tj({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){an(!Id(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),l=R.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=uc(n));let{pathname:c="/",search:f="",hash:h="",state:g=null,key:v="default"}=n,E=R.useMemo(()=>{let b=Js(c,s);return b==null?null:{location:{pathname:b,search:f,hash:h,state:g,key:v},navigationType:r}},[s,c,f,h,g,v,r]);return Qi(E!=null,`<Router basename="${s}"> is not able to match the URL "${c}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:R.createElement(Eo.Provider,{value:l},R.createElement(Lm.Provider,{children:e,value:E}))}function BM({children:t,location:e}){return $8(BS(t),e)}function BS(t,e=[]){let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let o=[...e,i];if(r.type===R.Fragment){n.push.apply(n,BS(r.props.children,o));return}an(r.type===Jr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),an(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=BS(r.props.children,o)),n.push(s)}),n}var _v="get",Tv="application/x-www-form-urlencoded";function n0(t){return t!=null&&typeof t.tagName=="string"}function nj(t){return n0(t)&&t.tagName.toLowerCase()==="button"}function rj(t){return n0(t)&&t.tagName.toLowerCase()==="form"}function ij(t){return n0(t)&&t.tagName.toLowerCase()==="input"}function oj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sj(t,e){return t.button===0&&(!e||e==="_self")&&!oj(t)}var $y=null;function aj(){if($y===null)try{new FormData(document.createElement("form"),0),$y=!1}catch{$y=!0}return $y}var lj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mw(t){return t!=null&&!lj.has(t)?(Qi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tv}"`),null):t}function uj(t,e){let n,r,i,o,s;if(rj(t)){let l=t.getAttribute("action");r=l?Js(l,e):null,n=t.getAttribute("method")||_v,i=Mw(t.getAttribute("enctype"))||Tv,o=new FormData(t)}else if(nj(t)||ij(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?Js(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||_v,i=Mw(t.getAttribute("formenctype"))||Mw(l.getAttribute("enctype"))||Tv,o=new FormData(l,t),!aj()){let{name:f,type:h,value:g}=t;if(h==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,g)}}else{if(n0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_v,r=null,i=Tv,s=t}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ux(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cj(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Js(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function fj(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function hj(t,e,n){let r=await Promise.all(t.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await fj(o,n);return s.links?s.links():[]}return[]}));return yj(r.flat(1).filter(dj).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function qM(t,e,n,r,i,o){let s=(c,f)=>n[f]?c.route.id!==n[f].route.id:!0,l=(c,f)=>{var h;return n[f].pathname!==c.pathname||((h=n[f].route.path)==null?void 0:h.endsWith("*"))&&n[f].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,f)=>s(c,f)||l(c,f)):o==="data"?e.filter((c,f)=>{var g;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(s(c,f)||l(c,f))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function pj(t,e,{includeHydrateFallback:n}={}){return mj(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function mj(t){return[...new Set(t)]}function gj(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function yj(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let o=JSON.stringify(gj(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function M4(){let t=R.useContext(Cd);return Ux(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function vj(){let t=R.useContext(e0);return Ux(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Fx=R.createContext(void 0);Fx.displayName="FrameworkContext";function D4(){let t=R.useContext(Fx);return Ux(t,"You must render this element inside a <HydratedRouter> element"),t}function _j(t,e){let n=R.useContext(Fx),[r,i]=R.useState(!1),[o,s]=R.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:f,onMouseLeave:h,onTouchStart:g}=e,v=R.useRef(null);R.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let S=I=>{I.forEach(D=>{s(D.isIntersecting)})},A=new IntersectionObserver(S,{threshold:.5});return v.current&&A.observe(v.current),()=>{A.disconnect()}}},[t]),R.useEffect(()=>{if(r){let S=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{i(!0)},b=()=>{i(!1),s(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:op(l,E),onBlur:op(c,b),onMouseEnter:op(f,E),onMouseLeave:op(h,b),onTouchStart:op(g,E)}]:[!1,v,{}]}function op(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Tj({page:t,...e}){let{router:n}=M4(),r=R.useMemo(()=>w4(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?R.createElement(wj,{page:t,matches:r,...e}):null}function Ej(t){let{manifest:e,routeModules:n}=D4(),[r,i]=R.useState([]);return R.useEffect(()=>{let o=!1;return hj(t,e,n).then(s=>{o||i(s)}),()=>{o=!0}},[t,e,n]),r}function wj({page:t,matches:e,...n}){let r=ls(),{manifest:i,routeModules:o}=D4(),{basename:s}=M4(),{loaderData:l,matches:c}=vj(),f=R.useMemo(()=>qM(t,e,c,i,r,"data"),[t,e,c,i,r]),h=R.useMemo(()=>qM(t,e,c,i,r,"assets"),[t,e,c,i,r]),g=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,S=!1;if(e.forEach(I=>{var k;let D=i.routes[I.route.id];!D||!D.hasLoader||(!f.some(q=>q.route.id===I.route.id)&&I.route.id in l&&((k=o[I.route.id])!=null&&k.shouldRevalidate)||D.hasClientLoader?S=!0:b.add(I.route.id))}),b.size===0)return[];let A=cj(t,s,"data");return S&&b.size>0&&A.searchParams.set("_routes",e.filter(I=>b.has(I.route.id)).map(I=>I.route.id).join(",")),[A.pathname+A.search]},[s,l,r,i,f,e,t,o]),v=R.useMemo(()=>pj(h,i),[h,i]),E=Ej(h);return R.createElement(R.Fragment,null,g.map(b=>R.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),v.map(b=>R.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),E.map(({key:b,link:S})=>R.createElement("link",{key:b,nonce:n.nonce,...S})))}function bj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var k4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{k4&&(window.__reactRouterVersion="7.8.2")}catch{}function Sj({basename:t,children:e,window:n}){let r=R.useRef();r.current==null&&(r.current=h8({window:n,v5Compat:!0}));let i=r.current,[o,s]=R.useState({action:i.action,location:i.location}),l=R.useCallback(c=>{R.startTransition(()=>s(c))},[s]);return R.useLayoutEffect(()=>i.listen(l),[i,l]),R.createElement(tj,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i})}var O4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L4=R.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:l,target:c,to:f,preventScrollReset:h,viewTransition:g,...v},E){let{basename:b}=R.useContext(Eo),S=typeof f=="string"&&O4.test(f),A,I=!1;if(typeof f=="string"&&S&&(A=f,k4))try{let O=new URL(window.location.href),F=f.startsWith("//")?new URL(O.protocol+f):new URL(f),U=Js(F.pathname,b);F.origin===O.origin&&U!=null?f=U+F.search+F.hash:I=!0}catch{Qi(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let D=B8(f,{relative:i}),[k,q,$]=_j(r,v),H=Ij(f,{replace:s,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:g});function M(O){e&&e(O),O.defaultPrevented||H(O)}let L=R.createElement("a",{...v,...$,href:A||D,onClick:I||o?e:M,ref:bj(E,q),target:c,"data-discover":!S&&n==="render"?"true":void 0});return k&&!S?R.createElement(R.Fragment,null,L,R.createElement(Tj,{page:D})):L});L4.displayName="Link";var Aj=R.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:l,children:c,...f},h){let g=Vm(s,{relative:f.relative}),v=ls(),E=R.useContext(e0),{navigator:b,basename:S}=R.useContext(Eo),A=E!=null&&Dj(g)&&l===!0,I=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,D=v.pathname,k=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(D=D.toLowerCase(),k=k?k.toLowerCase():null,I=I.toLowerCase()),k&&S&&(k=Js(k,S)||k);const q=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let $=D===I||!i&&D.startsWith(I)&&D.charAt(q)==="/",H=k!=null&&(k===I||!i&&k.startsWith(I)&&k.charAt(I.length)==="/"),M={isActive:$,isPending:H,isTransitioning:A},L=$?e:void 0,O;typeof r=="function"?O=r(M):O=[r,$?"active":null,H?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(M):o;return R.createElement(L4,{...f,"aria-current":L,className:O,ref:h,style:F,to:s,viewTransition:l},typeof c=="function"?c(M):c)});Aj.displayName="NavLink";var xj=R.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:o,method:s=_v,action:l,onSubmit:c,relative:f,preventScrollReset:h,viewTransition:g,...v},E)=>{let b=Nj(),S=Mj(l,{relative:f}),A=s.toLowerCase()==="get"?"get":"post",I=typeof l=="string"&&O4.test(l),D=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let q=k.nativeEvent.submitter,$=(q==null?void 0:q.getAttribute("formmethod"))||s;b(q||k.currentTarget,{fetcherKey:e,method:$,navigate:n,replace:i,state:o,relative:f,preventScrollReset:h,viewTransition:g})};return R.createElement("form",{ref:E,method:A,action:S,onSubmit:r?c:D,...v,"data-discover":!I&&t==="render"?"true":void 0})});xj.displayName="Form";function Cj(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V4(t){let e=R.useContext(Cd);return an(e,Cj(t)),e}function Ij(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let l=t0(),c=ls(),f=Vm(t,{relative:o});return R.useCallback(h=>{if(sj(h,e)){h.preventDefault();let g=n!==void 0?n:em(c)===em(f);l(t,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[c,l,f,n,r,e,t,i,o,s])}var Rj=0,Pj=()=>`__${String(++Rj)}__`;function Nj(){let{router:t}=V4("useSubmit"),{basename:e}=R.useContext(Eo),n=Q8();return R.useCallback(async(r,i={})=>{let{action:o,method:s,encType:l,formData:c,body:f}=uj(r,e);if(i.navigate===!1){let h=i.fetcherKey||Pj();await t.fetch(h,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||s,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:f,formMethod:i.method||s,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Mj(t,{relative:e}={}){let{basename:n}=R.useContext(Eo),r=R.useContext(wo);an(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Vm(t||".",{relative:e})},s=ls();if(t==null){o.search=s.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(g=>g).forEach(g=>l.append("index",g));let h=l.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Gs([n,o.pathname])),em(o)}function Dj(t,{relative:e}={}){let n=R.useContext(x4);an(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=V4("useViewTransitionState"),i=Vm(t,{relative:e});if(!n.isTransitioning)return!1;let o=Js(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Js(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Bv(i.pathname,s)!=null||Bv(i.pathname,o)!=null}var kj=E4();const Oj=()=>{};var $M={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Lj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},F4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,h=o>>2,g=(o&3)<<4|l>>4;let v=(l&15)<<2|f>>6,E=f&63;c||(E=64,s||(v=64)),r.push(n[h],n[g],n[v],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(U4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Lj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||f==null||g==null)throw new Vj;const v=o<<2|l>>4;if(r.push(v),f!==64){const E=l<<4&240|f>>2;if(r.push(E),g!==64){const b=f<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uj=function(t){const e=U4(t);return F4.encodeByteArray(e,!0)},qv=function(t){return Uj(t).replace(/\./g,"")},Bx=function(t){try{return F4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $v(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Fj(n)||(t[n]=$v(t[n],e[n]));return t}function Fj(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=()=>qx().__FIREBASE_DEFAULTS__,qj=()=>{if(typeof process>"u"||typeof $M>"u")return;const t=$M.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$j=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bx(t[1]);return e&&JSON.parse(e)},r0=()=>{try{return Oj()||Bj()||qj()||$j()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},B4=t=>{var e,n;return(n=(e=r0())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},q4=t=>{const e=B4(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$x=()=>{var t;return(t=r0())==null?void 0:t.config},$4=t=>{var e;return(e=r0())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zx(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[qv(JSON.stringify(n)),qv(JSON.stringify(s)),""].join(".")}const Op={};function Hj(){const t={prod:[],emulator:[]};for(const e of Object.keys(Op))Op[e]?t.emulator.push(e):t.prod.push(e);return t}function Gj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let zM=!1;function Hx(t,e){if(typeof window>"u"||typeof document>"u"||!Il(window.location.host)||Op[t]===e||Op[t]||zM)return;Op[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=Hj().prod.length>0;function s(){const v=document.getElementById(r);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,E){v.setAttribute("width","24"),v.setAttribute("id",E),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{zM=!0,s()},v}function h(v,E){v.setAttribute("id",E),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=Gj(r),E=n("text"),b=document.getElementById(E)||document.createElement("span"),S=n("learnmore"),A=document.getElementById(S)||document.createElement("a"),I=n("preprendIcon"),D=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const k=v.element;l(k),h(A,S);const q=f();c(D,I),k.append(D,b,A,q),document.body.appendChild(k)}o?(b.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function i0(){var e;const t=(e=r0())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Kj(){return typeof window<"u"||H4()}function H4(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Wj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Gx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j4(){const t=fn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function K4(){return!i0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W4(){return!i0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function tm(){try{return typeof indexedDB=="object"}catch{return!1}}function Yj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jj="FirebaseError";class Rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Jj,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Qj(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Rr(i,l,r)}}function Qj(t,e){return t.replace(Xj,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Xj=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Zj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(GM(o)&&GM(s)){if(!Qs(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function GM(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ap(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Y4(t,e){const n=new e7(t,e);return n.subscribe.bind(n)}class e7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");t7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Dw),i.error===void 0&&(i.error=Dw),i.complete===void 0&&(i.complete=Dw);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n7=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new zj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(i7(e))try{this.getOrInitializeService({instanceIdentifier:Eu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Eu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eu){return this.instances.has(e)}getOptions(e=Eu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eu){return this.component?this.component.multipleInstances?e:Eu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function r7(t){return t===Eu?void 0:t}function i7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new n7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=[];var it;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(it||(it={}));const Q4={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},o7=it.INFO,s7={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},a7=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=s7[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o0{constructor(e){this.name=e,this._logLevel=o7,this._logHandler=a7,this._userLogHandler=null,jx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}function l7(t){jx.forEach(e=>{e.setLogLevel(t)})}function u7(t,e){for(const n of jx){let r=null;e&&e.level&&(r=Q4[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,o,...s)=>{const l=s.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");o>=(r??i.logLevel)&&t({level:it[o].toLowerCase(),message:l,args:s,type:i.name})}}}const c7=(t,e)=>e.some(n=>t instanceof n);let jM,KM;function f7(){return jM||(jM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d7(){return KM||(KM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X4=new WeakMap,qS=new WeakMap,Z4=new WeakMap,kw=new WeakMap,Kx=new WeakMap;function h7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(ll(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&X4.set(n,t)}).catch(()=>{}),Kx.set(e,t),e}function p7(t){if(qS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});qS.set(t,e)}let $S={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Z4.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ll(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function m7(t){$S=t($S)}function g7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ow(this),e,...n);return Z4.set(r,e.sort?e.sort():[e]),ll(r)}:d7().includes(t)?function(...e){return t.apply(Ow(this),e),ll(X4.get(this))}:function(...e){return ll(t.apply(Ow(this),e))}}function y7(t){return typeof t=="function"?g7(t):(t instanceof IDBTransaction&&p7(t),c7(t,f7())?new Proxy(t,$S):t)}function ll(t){if(t instanceof IDBRequest)return h7(t);if(kw.has(t))return kw.get(t);const e=y7(t);return e!==t&&(kw.set(t,e),Kx.set(e,t)),e}const Ow=t=>Kx.get(t);function v7(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=ll(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ll(s.result),c.oldVersion,c.newVersion,ll(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const _7=["get","getKey","getAll","getAllKeys","count"],T7=["put","add","delete","clear"],Lw=new Map;function WM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lw.get(e))return Lw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=T7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_7.includes(n)))return;const o=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&c.done]))[0]};return Lw.set(e,o),o}m7(t=>({...t,get:(e,n,r)=>WM(e,n)||t.get(e,n,r),has:(e,n)=>!!WM(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w7(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function w7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zv="@firebase/app",zS="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new o0("@firebase/app"),b7="@firebase/app-compat",S7="@firebase/analytics-compat",A7="@firebase/analytics",x7="@firebase/app-check-compat",C7="@firebase/app-check",I7="@firebase/auth",R7="@firebase/auth-compat",P7="@firebase/database",N7="@firebase/data-connect",M7="@firebase/database-compat",D7="@firebase/functions",k7="@firebase/functions-compat",O7="@firebase/installations",L7="@firebase/installations-compat",V7="@firebase/messaging",U7="@firebase/messaging-compat",F7="@firebase/performance",B7="@firebase/performance-compat",q7="@firebase/remote-config",$7="@firebase/remote-config-compat",z7="@firebase/storage",H7="@firebase/storage-compat",G7="@firebase/firestore",j7="@firebase/ai",K7="@firebase/firestore-compat",W7="firebase",Y7="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="[DEFAULT]",J7={[zv]:"fire-core",[b7]:"fire-core-compat",[A7]:"fire-analytics",[S7]:"fire-analytics-compat",[C7]:"fire-app-check",[x7]:"fire-app-check-compat",[I7]:"fire-auth",[R7]:"fire-auth-compat",[P7]:"fire-rtdb",[N7]:"fire-data-connect",[M7]:"fire-rtdb-compat",[D7]:"fire-fn",[k7]:"fire-fn-compat",[O7]:"fire-iid",[L7]:"fire-iid-compat",[V7]:"fire-fcm",[U7]:"fire-fcm-compat",[F7]:"fire-perf",[B7]:"fire-perf-compat",[q7]:"fire-rc",[$7]:"fire-rc-compat",[z7]:"fire-gcs",[H7]:"fire-gcs-compat",[G7]:"fire-fst",[K7]:"fire-fst-compat",[j7]:"fire-vertex","fire-js":"fire-js",[W7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new Map,jf=new Map,Kf=new Map;function nm(t,e){try{t.container.addComponent(e)}catch(n){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function eF(t,e){t.container.addOrOverwriteComponent(e)}function Zs(t){const e=t.name;if(Kf.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;Kf.set(e,t);for(const n of gl.values())nm(n,t);for(const n of jf.values())nm(n,t);return!0}function Pd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Q7(t,e,n=ml){Pd(t,e).clearInstance(n)}function Wx(t){return t.options!==void 0}function tF(t){return Wx(t)?!1:"authIdToken"in t||"appCheckToken"in t||"releaseOnDeref"in t||"automaticDataCollectionEnabled"in t}function Qt(t){return t==null?!1:t.settings!==void 0}function X7(){Kf.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Si=new cc("app","Firebase",Z7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nF=class{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(t,e){const n=Bx(t.split(".")[1]);if(n===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(n).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(n).exp*1e3,o=new Date().getTime();i-o<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class eK extends nF{constructor(e,n,r,i){const o=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!0,s={name:r,automaticDataCollectionEnabled:o};if(e.apiKey!==void 0)super(e,s,i);else{const l=e;super(l.options,s,i)}this._serverConfig={automaticDataCollectionEnabled:o,...n},this._serverConfig.authIdToken&&YM(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&YM(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Ai(zv,zS,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Jx(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Si.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=Y7;function Yx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ml,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Si.create("bad-app-name",{appName:String(i)});if(n||(n=$x()),!n)throw Si.create("no-options");const o=gl.get(i);if(o){if(Qs(n,o.options)&&Qs(r,o.config))return o;throw Si.create("duplicate-app",{appName:i})}const s=new J4(i);for(const c of Kf.values())s.addComponent(c);const l=new nF(n,r,s);return gl.set(i,l),l}function tK(t,e={}){if(Kj()&&!H4())throw Si.create("invalid-server-app-environment");let n,r=e||{};if(t&&(Wx(t)?n=t.options:tF(t)?r=t:n=t),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),n||(n=$x()),!n)throw Si.create("no-options");const i={...r,...n};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const o=h=>[...h].reduce((g,v)=>Math.imul(31,g)+v.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Si.create("finalization-registry-not-supported",{});const s=""+o(JSON.stringify(i)),l=jf.get(s);if(l)return l.incRefCount(r.releaseOnDeref),l;const c=new J4(s);for(const h of Kf.values())c.addComponent(h);const f=new eK(n,r,s,c);return jf.set(s,f),f}function s0(t=ml){const e=gl.get(t);if(!e&&t===ml&&$x())return Yx();if(!e)throw Si.create("no-app",{appName:t});return e}function nK(){return Array.from(gl.values())}async function Jx(t){let e=!1;const n=t.name;gl.has(n)?(e=!0,gl.delete(n)):jf.has(n)&&t.decRefCount()<=0&&(jf.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Ai(t,e,n){let r=J7[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(s.join(" "));return}Zs(new Xi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function rF(t,e){if(t!==null&&typeof t!="function")throw Si.create("invalid-log-argument");u7(t,e)}function iF(t){l7(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rK="firebase-heartbeat-database",iK=1,rm="firebase-heartbeat-store";let Vw=null;function oF(){return Vw||(Vw=v7(rK,iK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rm)}catch(n){console.warn(n)}}}}).catch(t=>{throw Si.create("idb-open",{originalErrorMessage:t.message})})),Vw}async function oK(t){try{const n=(await oF()).transaction(rm),r=await n.objectStore(rm).get(sF(t));return await n.done,r}catch(e){if(e instanceof Rr)Xs.warn(e.message);else{const n=Si.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xs.warn(n.message)}}}async function JM(t,e){try{const r=(await oF()).transaction(rm,"readwrite");await r.objectStore(rm).put(e,sF(t)),await r.done}catch(n){if(n instanceof Rr)Xs.warn(n.message);else{const r=Si.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xs.warn(r.message)}}}function sF(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sK=1024,aK=30;class lK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=QM();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>aK){const s=fK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=QM(),{heartbeatsToSend:r,unsentEntries:i}=uK(this._heartbeatsCache.heartbeats),o=qv(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Xs.warn(n),""}}}function QM(){return new Date().toISOString().substring(0,10)}function uK(t,e=sK){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),XM(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),XM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tm()?Yj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return JM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return JM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function XM(t){return qv(JSON.stringify({version:2,heartbeats:t})).length}function fK(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dK(t){Zs(new Xi("platform-logger",e=>new E7(e),"PRIVATE")),Zs(new Xi("heartbeat",e=>new lK(e),"PRIVATE")),Ai(zv,zS,t),Ai(zv,zS,"esm2020"),Ai("fire-js","")}dK("");const hK=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Rr,SDK_VERSION:aa,_DEFAULT_ENTRY_NAME:ml,_addComponent:nm,_addOrOverwriteComponent:eF,_apps:gl,_clearComponents:X7,_components:Kf,_getProvider:Pd,_isFirebaseApp:Wx,_isFirebaseServerApp:Qt,_isFirebaseServerAppSettings:tF,_registerComponent:Zs,_removeServiceInstance:Q7,_serverApps:jf,deleteApp:Jx,getApp:s0,getApps:nK,initializeApp:Yx,initializeServerApp:tK,onLog:rF,registerVersion:Ai,setLogLevel:iF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{constructor(e,n){this._delegate=e,this.firebase=n,nm(e,new Xi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Jx(this._delegate)))}_getService(e,n=ml){var i;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=ml){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){nm(this._delegate,e)}_addOrOverwriteComponent(e){eF(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ZM=new cc("app-compat","Firebase",mK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gK(t){const e={},n={__esModule:!0,initializeApp:o,app:i,registerVersion:Ai,setLogLevel:iF,onLog:rF,apps:null,SDK_VERSION:aa,INTERNAL:{registerComponent:l,removeApp:r,useAsService:c,modularAPIs:hK}};n.default=n,Object.defineProperty(n,"apps",{get:s});function r(f){delete e[f]}function i(f){if(f=f||ml,!HM(e,f))throw ZM.create("no-app",{appName:f});return e[f]}i.App=t;function o(f,h={}){const g=Yx(f,h);if(HM(e,g.name))return e[g.name];const v=new t(g,n);return e[g.name]=v,v}function s(){return Object.keys(e).map(f=>e[f])}function l(f){const h=f.name,g=h.replace("-compat","");if(Zs(f)&&f.type==="PUBLIC"){const v=(E=i())=>{if(typeof E[g]!="function")throw ZM.create("invalid-app-argument",{appName:h});return E[g]()};f.serviceProps!==void 0&&$v(v,f.serviceProps),n[g]=v,t.prototype[g]=function(...E){return this._getService.bind(this,h).apply(this,f.multipleInstances?E:[])}}return f.type==="PUBLIC"?n[g]:null}function c(f,h){return h==="serverAuth"?null:h}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(){const t=gK(pK);t.INTERNAL={...t.INTERNAL,createFirebaseNamespace:aF,extendNamespace:e,createSubscribe:Y4,ErrorFactory:cc,deepExtend:$v};function e(n){$v(t,n)}return t}const yK=aF();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new o0("@firebase/app-compat"),vK="@firebase/app-compat",_K="0.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(t){Ai(vK,_K,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=qx();if(t.firebase!==void 0){eD.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&eD.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const fc=yK;TK();var EK="firebase",wK="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fc.registerVersion(EK,wK,"app-compat");const sp={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},pf={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bK(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function lF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SK=bK,AK=lF,uF=new cc("auth","Firebase",lF());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new o0("@firebase/auth");function xK(t,...e){Hv.logLevel<=it.WARN&&Hv.warn(`Auth (${aa}): ${t}`,...e)}function Ev(t,...e){Hv.logLevel<=it.ERROR&&Hv.error(`Auth (${aa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,...e){throw Xx(t,...e)}function $n(t,...e){return Xx(t,...e)}function Qx(t,e,n){const r={...AK(),[e]:n};return new cc("auth","Firebase",r).create(e,{appName:t.name})}function nr(t){return Qx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nd(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&rr(t,"argument-error"),Qx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uF.create(t,...e)}function _e(t,e,...n){if(!t)throw Xx(e,...n)}function Ko(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ev(e),new Error(e)}function _o(t,e){t||Ko(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Zx(){return tD()==="http:"||tD()==="https:"}function tD(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zx()||G4()||"connection"in navigator)?navigator.onLine:!0}function IK(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.shortDelay=e,this.longDelay=n,_o(n>e,"Short delay should be less than long delay!"),this.isMobile=jj()||Gx()}get(){return CK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e){_o(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ko("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ko("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ko("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PK=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NK=new Um(3e4,6e4);function _n(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Tn(t,e,n,r,i={}){return fF(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const l=Rd({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:c,...o};return Wj()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Il(t.emulatorConfig.host)&&(f.credentials="include"),cF.fetch()(await dF(t,t.config.apiHost,n,l),f)})}async function fF(t,e,n){t._canInitEmulator=!1;const r={...RK,...e};try{const i=new DK(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw xp(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const l=o.ok?s.errorMessage:s.error.message,[c,f]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xp(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw xp(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw xp(t,"user-disabled",s);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Qx(t,h,f);rr(t,h)}}catch(i){if(i instanceof Rr)throw i;rr(t,"network-request-failed",{message:String(i)})}}async function la(t,e,n,r,i={}){const o=await Tn(t,e,n,r,i);return"mfaPendingCredential"in o&&rr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function dF(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?eC(t.config,i):`${t.config.apiScheme}://${i}`;return PK.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function MK(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DK{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($n(this.auth,"network-request-failed")),NK.get())})}}function xp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$n(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){return t!==void 0&&t.getResponse!==void 0}function rD(t){return t!==void 0&&t.enterprise!==void 0}class hF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return MK(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kK(t){return(await Tn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function pF(t,e){return Tn(t,"GET","/v2/recaptchaConfig",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OK(t,e){return Tn(t,"POST","/v1/accounts:delete",e)}async function LK(t,e){return Tn(t,"POST","/v1/accounts:update",e)}async function Gv(t,e){return Tn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VK(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),i=a0(r);_e(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Lp(Uw(i.auth_time)),issuedAtTime:Lp(Uw(i.iat)),expirationTime:Lp(Uw(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Uw(t){return Number(t)*1e3}function a0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ev("JWT malformed, contained fewer than 3 sections"),null;try{const i=Bx(n);return i?JSON.parse(i):(Ev("Failed to decode base64 JWT payload"),null)}catch(i){return Ev("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iD(t){const e=a0(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rr&&UK(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function UK({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lp(this.lastLoginAt),this.creationTime=Lp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function om(t){var g;const e=t.auth,n=await t.getIdToken(),r=await ea(t,Gv(e,{idToken:n}));_e(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=(g=i.providerUserInfo)!=null&&g.length?mF(i.providerUserInfo):[],s=qK(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),f=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new HS(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function BK(t){const e=Ne(t);await om(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qK(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mF(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $K(t,e){const n=await fF(t,{},async()=>{const r=Rd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await dF(t,i,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Il(t.emulatorConfig.host)&&(c.credentials="include"),cF.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zK(t,e){return Tn(t,"POST","/v2/accounts:revokeToken",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const n=iD(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await $K(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new kf;return r&&(_e(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(_e(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kf,this.toJSON())}_performRefresh(){return Ko("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mo{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new FK(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new HS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ea(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VK(this,e)}reload(){return BK(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await om(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(nr(this.auth));const e=await this.getIdToken();return await ea(this,OK(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,f=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:E,providerData:b,stsTokenManager:S}=n;_e(g&&S,e,"internal-error");const A=kf.fromJSON(this.name,S);_e(typeof g=="string",e,"internal-error"),Qa(r,e.name),Qa(i,e.name),_e(typeof v=="boolean",e,"internal-error"),_e(typeof E=="boolean",e,"internal-error"),Qa(o,e.name),Qa(s,e.name),Qa(l,e.name),Qa(c,e.name),Qa(f,e.name),Qa(h,e.name);const I=new mo({uid:g,auth:e,email:i,emailVerified:v,displayName:r,isAnonymous:E,photoURL:s,phoneNumber:o,tenantId:l,stsTokenManager:A,createdAt:f,lastLoginAt:h});return b&&Array.isArray(b)&&(I.providerData=b.map(D=>({...D}))),c&&(I._redirectEventId=c),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new kf;i.updateFromServerResponse(n);const o=new mo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await om(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];_e(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?mF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),l=new kf;l.updateFromIdToken(r);const c=new mo({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new HS(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=new Map;function Ei(t){_o(t instanceof Function,"Expected a class definition");let e=oD.get(t);return e?(_o(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oD.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gF.type="NONE";const Wf=gF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t,e,n){return`firebase:${t}:${e}:${n}`}class Of{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Fu(this.userKey,i.apiKey,o),this.fullPersistenceKey=Fu("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gv(this.auth,{idToken:e}).catch(()=>{});return n?mo._fromGetAccountInfoResponse(this.auth,n,e):null}return mo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Of(Ei(Wf),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||Ei(Wf);const s=Fu(r,e.config.apiKey,e.name);let l=null;for(const f of n)try{const h=await f._get(s);if(h){let g;if(typeof h=="string"){const v=await Gv(e,{idToken:h}).catch(()=>{});if(!v)break;g=await mo._fromGetAccountInfoResponse(e,v,h)}else g=mo._fromJSON(e,h);f!==o&&(l=g),o=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Of(o,e,r):(o=c[0],l&&await o._set(s,l.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(s)}catch{}})),new Of(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(TF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EF(e))return"Blackberry";if(wF(e))return"Webos";if(vF(e))return"Safari";if((e.includes("chrome/")||_F(e))&&!e.includes("edge/"))return"Chrome";if(Fm(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yF(t=fn()){return/firefox\//i.test(t)}function vF(t=fn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _F(t=fn()){return/crios\//i.test(t)}function TF(t=fn()){return/iemobile/i.test(t)}function Fm(t=fn()){return/android/i.test(t)}function EF(t=fn()){return/blackberry/i.test(t)}function wF(t=fn()){return/webos/i.test(t)}function Bm(t=fn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HK(t=fn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function GK(t=fn()){var e;return Bm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function jK(){return j4()&&document.documentMode===10}function bF(t=fn()){return Bm(t)||Fm(t)||wF(t)||EF(t)||/windows phone/i.test(t)||TF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(t,e=[]){let n;switch(t){case"Browser":n=sD(fn());break;case"Worker":n=`${sD(fn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${aa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,l)=>{try{const c=e(o);s(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WK(t,e={}){return Tn(t,"GET","/v2/passwordPolicy",_n(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK=6;class JK{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??YK,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aD(this),this.idTokenSubscription=new aD(this),this.beforeStateQueue=new KK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ei(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Of.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gv(this,{idToken:e}),r=await mo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Qt(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===l)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await om(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IK()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(nr(this));const n=e?Ne(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WK(this),n=new JK(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zK(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ei(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await Of.create(this,[Ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&xK(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function dn(t){return Ne(t)}class aD{constructor(e){this.auth=e,this.observer=null,this.addObserver=Y4(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XK(t){qm=t}function tC(t){return qm.loadJS(t)}function ZK(){return qm.recaptchaV2Script}function eW(){return qm.recaptchaEnterpriseScript}function tW(){return qm.gapiScript}function AF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW=500,rW=6e4,zy=1e12;class iW{constructor(e){this.auth=e,this.counter=zy,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new aW(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||zy;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||zy;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||zy;return(r=this._widgets.get(n))==null||r.execute(),""}}class oW{constructor(){this.enterprise=new sW}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class sW{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class aW{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;_e(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=lW(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},rW)},nW))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function lW(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const uW="recaptcha-enterprise",Vp="NO_RECAPTCHA";class xF{constructor(e){this.type=uW,this.auth=dn(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,l)=>{pF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const f=new hF(c);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,s(f.siteKey)}}).catch(c=>{l(c)})})}function i(o,s,l){const c=window.grecaptcha;rD(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(f=>{s(f)}).catch(()=>{s(Vp)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oW().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(l=>{if(!n&&rD(window.grecaptcha))i(l,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=eW();c.length!==0&&(c+=l),tC(c).then(()=>{i(l,o,s)}).catch(f=>{s(f)})}}).catch(l=>{s(l)})})}}async function ap(t,e,n,r=!1,i=!1){const o=new xF(t);let s;if(i)s=Vp;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,f=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ul(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ap(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await ap(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("PHONE_PROVIDER")){const l=await ap(t,e,n);return r(t,l).catch(async c=>{var f;if(((f=t._getRecaptchaConfig())==null?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await ap(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)})}else{const l=await ap(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(i+" provider is not supported.")}async function cW(t){const e=dn(t),n=await pF(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new hF(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new xF(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fW(t,e){const n=Pd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Qs(o,e??{}))return i;rr(i,"already-initialized")}return n.initialize({options:e})}function dW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ei);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CF(t,e,n){const r=dn(t);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=IF(e),{host:s,port:l}=hW(e),c=l===null?"":`:${l}`,f={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(Qs(f,r.config.emulator)&&Qs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Il(s)?(zx(`${o}//${s}${c}`),Hx("Auth",!0)):i||pW()}function IF(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hW(t){const e=IF(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:lD(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:lD(s)}}}function lD(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ko("not implemented")}_getIdTokenResponse(e){return Ko("not implemented")}_linkToIdToken(e,n){return Ko("not implemented")}_getReauthenticationResolver(e){return Ko("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e){return Tn(t,"POST","/v1/accounts:resetPassword",_n(t,e))}async function mW(t,e){return Tn(t,"POST","/v1/accounts:update",e)}async function gW(t,e){return Tn(t,"POST","/v1/accounts:signUp",e)}async function yW(t,e){return Tn(t,"POST","/v1/accounts:update",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vW(t,e){return la(t,"POST","/v1/accounts:signInWithPassword",_n(t,e))}async function l0(t,e){return Tn(t,"POST","/v1/accounts:sendOobCode",_n(t,e))}async function _W(t,e){return l0(t,e)}async function TW(t,e){return l0(t,e)}async function EW(t,e){return l0(t,e)}async function wW(t,e){return l0(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bW(t,e){return la(t,"POST","/v1/accounts:signInWithEmailLink",_n(t,e))}async function SW(t,e){return la(t,"POST","/v1/accounts:signInWithEmailLink",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends Md{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new sm(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new sm(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ul(e,n,"signInWithPassword",vW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return bW(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ul(e,r,"signUpPassword",gW,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return SW(e,{idToken:n,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t,e){return la(t,"POST","/v1/accounts:signInWithIdp",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW="http://localhost";class ns extends Md{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ns(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=n;if(!r||!i)return null;const s=new ns(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,js(e,n)}buildRequest(){const e={requestUri:AW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e){return Tn(t,"POST","/v1/accounts:sendVerificationCode",_n(t,e))}async function xW(t,e){return la(t,"POST","/v1/accounts:signInWithPhoneNumber",_n(t,e))}async function CW(t,e){const n=await la(t,"POST","/v1/accounts:signInWithPhoneNumber",_n(t,e));if(n.temporaryProof)throw xp(t,"account-exists-with-different-credential",n);return n}const IW={USER_NOT_FOUND:"user-not-found"};async function RW(t,e){const n={...e,operation:"REAUTH"};return la(t,"POST","/v1/accounts:signInWithPhoneNumber",_n(t,n),IW)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends Md{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Bu({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Bu({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return xW(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return CW(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return RW(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!n&&!i&&!o?null:new Bu({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NW(t){const e=Pf(Ap(t)).link,n=e?Pf(Ap(e)).deep_link_id:null,r=Pf(Ap(t)).deep_link_id;return(r?Pf(Ap(r)).link:null)||r||n||e||t}class u0{constructor(e){const n=Pf(Ap(e)),r=n.apiKey??null,i=n.oobCode??null,o=PW(n.mode??null);_e(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=NW(e);try{return new u0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.providerId=Rl.PROVIDER_ID}static credential(e,n){return sm._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=u0.parseLink(n);return _e(r,"argument-error"),sm._fromEmailAndCode(e,r.code,r.tenantId)}}Rl.PROVIDER_ID="password";Rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends ua{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Lf extends Dd{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return _e("providerId"in n&&"signInMethod"in n,"argument-error"),ns._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return _e(e.idToken||e.accessToken,"argument-error"),ns._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Lf.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Lf.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:l}=e;if(!r&&!i&&!n&&!o||!l)return null;try{return new Lf(l)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Dd{constructor(){super("facebook.com")}static credential(e){return ns._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qo.credential(e.oauthAccessToken)}catch{return null}}}qo.FACEBOOK_SIGN_IN_METHOD="facebook.com";qo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends Dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ns._fromParams({providerId:$o.PROVIDER_ID,signInMethod:$o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $o.credentialFromTaggedObject(e)}static credentialFromError(e){return $o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $o.credential(n,r)}catch{return null}}}$o.GOOGLE_SIGN_IN_METHOD="google.com";$o.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo extends Dd{constructor(){super("github.com")}static credential(e){return ns._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zo.credential(e.oauthAccessToken)}catch{return null}}}zo.GITHUB_SIGN_IN_METHOD="github.com";zo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MW="http://localhost";class Yf extends Md{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,js(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=n;return!r||!i||!o||r!==i?null:new Yf(r,o)}static _create(e,n){return new Yf(e,n)}buildRequest(){return{requestUri:MW,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DW="saml.";class jv extends ua{constructor(e){_e(e.startsWith(DW),"argument-error"),super(e)}static credentialFromResult(e){return jv.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return jv.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Yf.fromJSON(e);return _e(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Yf._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends Dd{constructor(){super("twitter.com")}static credential(e,n){return ns._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ho.credential(n,r)}catch{return null}}}Ho.TWITTER_SIGN_IN_METHOD="twitter.com";Ho.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PF(t,e){return la(t,"POST","/v1/accounts:signUp",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await mo._fromIdTokenResponse(e,r,i),s=cD(r);return new Zi({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=cD(r);return new Zi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function cD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kW(t){var i;if(Qt(t.app))return Promise.reject(nr(t));const e=dn(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new Zi({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await PF(e,{returnSecureToken:!0}),r=await Zi._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv extends Rr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Kv(e,n,r,i)}}function NF(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Kv._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OW(t,e){const n=Ne(t);await c0(!0,n,e);const{providerUserInfo:r}=await LK(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=MF(r||[]);return n.providerData=n.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function nC(t,e,n=!1){const r=await ea(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zi._forOperation(t,"link",r)}async function c0(t,e,n){await om(e);const r=MF(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";_e(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t,e,n=!1){const{auth:r}=t;if(Qt(r.app))return Promise.reject(nr(r));const i="reauthenticate";try{const o=await ea(t,NF(r,i,e,t),n);_e(o.idToken,r,"internal-error");const s=a0(o.idToken);_e(s,r,"internal-error");const{sub:l}=s;return _e(t.uid===l,r,"user-mismatch"),Zi._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&rr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kF(t,e,n=!1){if(Qt(t.app))return Promise.reject(nr(t));const r="signIn",i=await NF(t,r,e),o=await Zi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function f0(t,e){return kF(dn(t),e)}async function OF(t,e){const n=Ne(t);return await c0(!1,n,e.providerId),nC(n,e)}async function LF(t,e){return DF(Ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LW(t,e){return la(t,"POST","/v1/accounts:signInWithCustomToken",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VW(t,e){if(Qt(t.app))return Promise.reject(nr(t));const n=dn(t),r=await LW(n,{token:e,returnSecureToken:!0}),i=await Zi._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?rC._fromServerResponse(e,n):"totpInfo"in n?iC._fromServerResponse(e,n):rr(e,"internal-error")}}class rC extends $m{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new rC(n)}}class iC extends $m{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new iC(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t,e,n){var r;_e(((r=n.url)==null?void 0:r.length)>0,t,"invalid-continue-uri"),_e(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),_e(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_e(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(_e(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(t){const e=dn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UW(t,e,n){const r=dn(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&d0(r,i,n),await ul(r,i,"getOobCode",TW,"EMAIL_PASSWORD_PROVIDER")}async function FW(t,e,n){await RF(Ne(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oC(t),r})}async function BW(t,e){await yW(Ne(t),{oobCode:e})}async function VF(t,e){const n=Ne(t),r=await RF(n,{oobCode:e}),i=r.requestType;switch(_e(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_e(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_e(r.mfaInfo,n,"internal-error");default:_e(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=$m._fromServerResponse(dn(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function qW(t,e){const{data:n}=await VF(Ne(t),e);return n.email}async function $W(t,e,n){if(Qt(t.app))return Promise.reject(nr(t));const r=dn(t),s=await ul(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PF,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&oC(t),c}),l=await Zi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(l.user),l}function UF(t,e,n){return Qt(t.app)?Promise.reject(nr(t)):f0(Ne(t),Rl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zW(t,e,n){const r=dn(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,l){_e(l.handleCodeInApp,r,"argument-error"),l&&d0(r,s,l)}o(i,n),await ul(r,i,"getOobCode",EW,"EMAIL_PASSWORD_PROVIDER")}function HW(t,e){const n=u0.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function GW(t,e,n){if(Qt(t.app))return Promise.reject(nr(t));const r=Ne(t),i=Rl.credentialWithLink(e,n||im());return _e(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),f0(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jW(t,e){return Tn(t,"POST","/v1/accounts:createAuthUri",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KW(t,e){const n=Zx()?im():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await jW(Ne(t),r);return i||[]}async function WW(t,e){const n=Ne(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&d0(n.auth,i,e);const{email:o}=await _W(n.auth,i);o!==t.email&&await t.reload()}async function YW(t,e,n){const r=Ne(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&d0(r.auth,o,n);const{email:s}=await wW(r.auth,o);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JW(t,e){return Tn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QW(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ne(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await ea(r,JW(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function XW(t,e){const n=Ne(t);return Qt(n.auth.app)?Promise.reject(nr(n.auth)):BF(n,e,null)}function FF(t,e){return BF(Ne(t),null,e)}async function BF(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await ea(t,mW(r,o));await t._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZW(t){var i,o;if(!t)return null;const{providerId:e}=t,n=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},r=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(t!=null&&t.idToken)){const s=(o=(i=a0(t.idToken))==null?void 0:i.firebase)==null?void 0:o.sign_in_provider;if(s){const l=s!=="anonymous"&&s!=="custom"?s:null;return new Vf(r,l)}}if(!e)return null;switch(e){case"facebook.com":return new eY(r,n);case"github.com":return new tY(r,n);case"google.com":return new nY(r,n);case"twitter.com":return new rY(r,n,t.screenName||null);case"custom":case"anonymous":return new Vf(r,null);default:return new Vf(r,e,n)}}class Vf{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class qF extends Vf{constructor(e,n,r,i){super(e,n,r),this.username=i}}class eY extends Vf{constructor(e,n){super(e,"facebook.com",n)}}class tY extends qF{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class nY extends Vf{constructor(e,n){super(e,"google.com",n)}}class rY extends qF{constructor(e,n,r){super(e,"twitter.com",n,r)}}function iY(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:ZW(n)}function oY(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function sY(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function aY(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function lY(t){return Ne(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Mu("enroll",e,n)}static _fromMfaPendingCredential(e){return new Mu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if((n=e.multiFactorSession)!=null&&n.pendingCredential)return Mu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((r=e.multiFactorSession)!=null&&r.idToken)return Mu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=dn(e),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(l=>$m._fromServerResponse(r,l));_e(i.mfaPendingCredential,r,"internal-error");const s=Mu._fromMfaPendingCredential(i.mfaPendingCredential);return new sC(s,o,async l=>{const c=await l._process(r,s);delete i.mfaInfo,delete i.mfaPendingCredential;const f={...i,idToken:c.idToken,refreshToken:c.refreshToken};switch(n.operationType){case"signIn":const h=await Zi._fromIdTokenResponse(r,n.operationType,f);return await r._updateCurrentUser(h.user),h;case"reauthenticate":return _e(n.user,r,"internal-error"),Zi._forOperation(n.user,n.operationType,f);default:rr(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function uY(t,e){var i;const n=Ne(t),r=e;return _e(e.customData.operationType,n,"argument-error"),_e((i=r.customData._serverResponse)==null?void 0:i.mfaPendingCredential,n,"argument-error"),sC._fromError(n,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e){return Tn(t,"POST","/v2/accounts/mfaEnrollment:start",_n(t,e))}function cY(t,e){return Tn(t,"POST","/v2/accounts/mfaEnrollment:finalize",_n(t,e))}function fY(t,e){return Tn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",_n(t,e))}class aC{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>$m._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new aC(e)}async getSession(){return Mu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),o=await ea(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ea(this.user,fY(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Fw=new WeakMap;function dY(t){const e=Ne(t);return Fw.has(e)||Fw.set(e,aC._fromUser(e)),Fw.get(e)}const Wv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wv,"1"),this.storage.removeItem(Wv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hY=1e3,pY=10;class zF extends $F{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bF(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);jK()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pY):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zF.type="LOCAL";const h0=zF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF extends $F{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}HF.type="SESSION";const yl=HF;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new p0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(s).map(async f=>f(n.origin,o)),c=await mY(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}p0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((l,c)=>{const f=zm("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(v.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function yY(t){Mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function vY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _Y(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function TY(){return lC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF="firebaseLocalStorageDb",EY=1,Yv="firebaseLocalStorage",jF="fbase_key";class Hm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function m0(t,e){return t.transaction([Yv],e?"readwrite":"readonly").objectStore(Yv)}function wY(){const t=indexedDB.deleteDatabase(GF);return new Hm(t).toPromise()}function GS(){const t=indexedDB.open(GF,EY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yv,{keyPath:jF})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yv)?e(r):(r.close(),await wY(),e(await GS()))})})}async function dD(t,e,n){const r=m0(t,!0).put({[jF]:e,value:n});return new Hm(r).toPromise()}async function bY(t,e){const n=m0(t,!1).get(e),r=await new Hm(n).toPromise();return r===void 0?null:r.value}function hD(t,e){const n=m0(t,!0).delete(e);return new Hm(n).toPromise()}const SY=800,AY=3;class KF{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await GS(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>AY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=p0._getInstance(TY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await vY(),!this.activeServiceWorker)return;this.sender=new gY(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_Y()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await GS();return await dD(e,Wv,"1"),await hD(e,Wv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dD(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>bY(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hD(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=m0(i,!1).getAll();return new Hm(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KF.type="LOCAL";const Jf=KF;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t,e){return Tn(t,"POST","/v2/accounts/mfaSignIn:start",_n(t,e))}function xY(t,e){return Tn(t,"POST","/v2/accounts/mfaSignIn:finalize",_n(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=AF("rcb"),CY=new Um(3e4,6e4);class IY{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Mn().grecaptcha)!=null&&e.render)}load(e,n=""){return _e(RY(n),e,"argument-error"),this.shouldResolveImmediately(n)&&nD(Mn().grecaptcha)?Promise.resolve(Mn().grecaptcha):new Promise((r,i)=>{const o=Mn().setTimeout(()=>{i($n(e,"network-request-failed"))},CY.get());Mn()[Bw]=()=>{Mn().clearTimeout(o),delete Mn()[Bw];const l=Mn().grecaptcha;if(!l||!nD(l)){i($n(e,"internal-error"));return}const c=l.render;l.render=(f,h)=>{const g=c(f,h);return this.counter++,g},this.hostLanguage=n,r(l)};const s=`${ZK()}?${Rd({onload:Bw,render:"explicit",hl:n})}`;tC(s).catch(()=>{clearTimeout(o),i($n(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Mn().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function RY(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class PY{async load(e){return new iW(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="recaptcha",NY={theme:"light",type:"image"};let MY=class{constructor(e,n,r={...NY}){this.parameters=r,this.type=Up,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dn(e),this.isInvisible=this.parameters.size==="invisible",_e(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;_e(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new PY:new IY,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){_e(!this.parameters.sitekey,this.auth,"argument-error"),_e(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_e(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Mn()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){_e(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){_e(Zx()&&!lC(),this.auth,"internal-error"),await DY(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await kK(this.auth);_e(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return _e(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function DY(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Bu._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function kY(t,e,n){if(Qt(t.app))return Promise.reject(nr(t));const r=dn(t),i=await g0(r,e,Ne(n));return new uC(i,o=>f0(r,o))}async function OY(t,e,n){const r=Ne(t);await c0(!1,r,"phone");const i=await g0(r.auth,e,Ne(n));return new uC(i,o=>OF(r,o))}async function LY(t,e,n){const r=Ne(t);if(Qt(r.auth.app))return Promise.reject(nr(r.auth));const i=await g0(r.auth,e,Ne(n));return new uC(i,o=>LF(r,o))}async function g0(t,e,n){var r;if(!t._getRecaptchaConfig())try{await cW(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i){_e(o.type==="enroll",t,"internal-error");const s={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ul(t,s,"mfaSmsEnrollment",async(h,g)=>{if(g.phoneEnrollmentInfo.captchaResponse===Vp){_e((n==null?void 0:n.type)===Up,h,"argument-error");const v=await qw(h,g,n);return fD(h,v)}return fD(h,g)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{_e(o.type==="signin",t,"internal-error");const s=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;_e(s,t,"missing-multi-factor-info");const l={mfaPendingCredential:o.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ul(t,l,"mfaSmsSignIn",async(g,v)=>{if(v.phoneSignInInfo.captchaResponse===Vp){_e((n==null?void 0:n.type)===Up,g,"argument-error");const E=await qw(g,v,n);return pD(g,E)}return pD(g,v)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ul(t,o,"sendVerificationCode",async(f,h)=>{if(h.captchaResponse===Vp){_e((n==null?void 0:n.type)===Up,f,"argument-error");const g=await qw(f,h,n);return uD(f,g)}return uD(f,h)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).sessionInfo}}finally{n==null||n._reset()}}async function VY(t,e){const n=Ne(t);if(Qt(n.auth.app))return Promise.reject(nr(n.auth));await nC(n,e)}async function qw(t,e,n){_e(n.type===Up,t,"argument-error");const r=await n.verify();_e(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const o=i.phoneEnrollmentInfo.phoneNumber,s=i.phoneEnrollmentInfo.captchaResponse,l=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:s,clientType:l,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const o=i.phoneSignInInfo.captchaResponse,s=i.phoneSignInInfo.clientType,l=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:s,recaptchaVersion:l}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku=class wv{constructor(e){this.providerId=wv.PROVIDER_ID,this.auth=dn(e)}verifyPhoneNumber(e,n){return g0(this.auth,e,Ne(n))}static credential(e,n){return Bu._fromVerification(e,n)}static credentialFromResult(e){const n=e;return wv.credentialFromTaggedObject(n)}static credentialFromError(e){return wv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Bu._fromTokenResponse(n,r):null}};Ku.PROVIDER_ID="phone";Ku.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t,e){return e?Ei(e):(_e(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC extends Md{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function UY(t){return kF(t.auth,new cC(t),t.bypassAuthState)}function FY(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),DF(n,new cC(t),t.bypassAuthState)}async function BY(t){const{auth:e,user:n}=t;return _e(n,e,"internal-error"),nC(n,new cC(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:l}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UY;case"linkViaPopup":case"linkViaRedirect":return BY;case"reauthViaPopup":case"reauthViaRedirect":return FY;default:rr(this.auth,"internal-error")}}resolve(e){_o(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_o(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qY=new Um(2e3,1e4);async function $Y(t,e,n){if(Qt(t.app))return Promise.reject($n(t,"operation-not-supported-in-this-environment"));const r=dn(t);Nd(t,e,ua);const i=dc(r,n);return new qs(r,"signInViaPopup",e,i).executeNotNull()}async function zY(t,e,n){const r=Ne(t);if(Qt(r.auth.app))return Promise.reject($n(r.auth,"operation-not-supported-in-this-environment"));Nd(r.auth,e,ua);const i=dc(r.auth,n);return new qs(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function HY(t,e,n){const r=Ne(t);Nd(r.auth,e,ua);const i=dc(r.auth,n);return new qs(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class qs extends WF{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){_o(this.filter.length===1,"Popup operations only handle one event");const e=zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qY.get())};e()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GY="pendingRedirect",Fp=new Map;class jY extends WF{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fp.get(this.auth._key());if(!e){try{const r=await KY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fp.set(this.auth._key(),e)}return this.bypassAuthState||Fp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KY(t,e){const n=JF(e),r=YF(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function fC(t,e){return YF(t)._set(JF(e),"true")}function WY(){Fp.clear()}function dC(t,e){Fp.set(t._key(),e)}function YF(t){return Ei(t._redirectPersistence)}function JF(t){return Fu(GY,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YY(t,e,n){return JY(t,e,n)}async function JY(t,e,n){if(Qt(t.app))return Promise.reject(nr(t));const r=dn(t);Nd(t,e,ua),await r._initializationPromise;const i=dc(r,n);return await fC(i,r),i._openRedirect(r,e,"signInViaRedirect")}function QY(t,e,n){return XY(t,e,n)}async function XY(t,e,n){const r=Ne(t);if(Nd(r.auth,e,ua),Qt(r.auth.app))return Promise.reject(nr(r.auth));await r.auth._initializationPromise;const i=dc(r.auth,n);await fC(i,r.auth);const o=await QF(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function ZY(t,e,n){return eJ(t,e,n)}async function eJ(t,e,n){const r=Ne(t);Nd(r.auth,e,ua),await r.auth._initializationPromise;const i=dc(r.auth,n);await c0(!1,r,e.providerId),await fC(i,r.auth);const o=await QF(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function tJ(t,e){return await dn(t)._initializationPromise,y0(t,e,!1)}async function y0(t,e,n=!1){if(Qt(t.app))return Promise.reject(nr(t));const r=dn(t),i=dc(r,e),s=await new jY(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function QF(t){const e=zm(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nJ=600*1e3;class XF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rJ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ZF(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError($n(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(mD(e))}saveEventToCache(e){this.cachedEventUids.add(mD(e)),this.lastProcessedEventTime=Date.now()}}function mD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ZF({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rJ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZF(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eB(t,e={}){return Tn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oJ=/^https?/;async function sJ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eB(t);for(const n of e)try{if(aJ(n))return}catch{}rr(t,"unauthorized-domain")}function aJ(t){const e=im(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!oJ.test(n))return!1;if(iJ.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lJ=new Um(3e4,6e4);function gD(){const t=Mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uJ(t){return new Promise((e,n)=>{var i,o,s;function r(){gD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gD(),n($n(t,"network-request-failed"))},timeout:lJ.get()})}if((o=(i=Mn().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((s=Mn().gapi)!=null&&s.load)r();else{const l=AF("iframefcb");return Mn()[l]=()=>{gapi.load?r():n($n(t,"network-request-failed"))},tC(`${tW()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw bv=null,e})}let bv=null;function cJ(t){return bv=bv||uJ(t),bv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ=new Um(5e3,15e3),dJ="__/auth/iframe",hJ="emulator/auth/iframe",pJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gJ(t){const e=t.config;_e(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?eC(e,hJ):`https://${t.config.authDomain}/${dJ}`,r={apiKey:e.apiKey,appName:t.name,v:aa},i=mJ.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Rd(r).slice(1)}`}async function yJ(t){const e=await cJ(t),n=Mn().gapi;return _e(n,t,"internal-error"),e.open({where:document.body,url:gJ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pJ,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=$n(t,"network-request-failed"),l=Mn().setTimeout(()=>{o(s)},fJ.get());function c(){Mn().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_J=500,TJ=600,EJ="_blank",wJ="http://localhost";class yD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bJ(t,e,n,r=_J,i=TJ){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...vJ,width:r.toString(),height:i.toString(),top:o,left:s},f=fn().toLowerCase();n&&(l=_F(f)?EJ:n),yF(f)&&(e=e||wJ,c.scrollbars="yes");const h=Object.entries(c).reduce((v,[E,b])=>`${v}${E}=${b},`,"");if(GK(f)&&l!=="_self")return SJ(e||"",l),new yD(null);const g=window.open(e||"",l,h);_e(g,t,"popup-blocked");try{g.focus()}catch{}return new yD(g)}function SJ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJ="__/auth/handler",xJ="emulator/auth/handler",CJ=encodeURIComponent("fac");async function jS(t,e,n,r,i,o){_e(t.config.authDomain,t,"auth-domain-config-required"),_e(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:aa,eventId:i};if(e instanceof ua){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Zj(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,g]of Object.entries(o||{}))s[h]=g}if(e instanceof Dd){const h=e.getScopes().filter(g=>g!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),f=c?`#${CJ}=${encodeURIComponent(c)}`:"";return`${IJ(t)}?${Rd(l).slice(1)}${f}`}function IJ({config:t}){return t.emulator?eC(t,xJ):`https://${t.authDomain}/${AJ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="webStorageSupport";class RJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yl,this._completeRedirectFn=y0,this._overrideRedirectResult=dC}async _openPopup(e,n,r,i){var s;_o((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await jS(e,n,r,im(),i);return bJ(e,o,zm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await jS(e,n,r,im(),i);return yY(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(_o(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await yJ(e),r=new XF(e);return n.register("authEvent",i=>(_e(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($w,{type:$w},i=>{var s;const o=(s=i==null?void 0:i[0])==null?void 0:s[$w];o!==void 0&&n(!!o),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sJ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bF()||vF()||Bm()}}const tB=RJ;class PJ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Ko("unexpected MultiFactorSessionType")}}}class hC extends PJ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new hC(e)}_finalizeEnroll(e,n,r){return cY(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return xY(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class nB{constructor(){}static assertion(e){return hC._fromCredential(e)}}nB.FACTOR_ID="phone";var vD="@firebase/auth",_D="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DJ(t){Zs(new Xi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=r.options;_e(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SF(t)},f=new QK(r,i,o,c);return dW(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zs(new Xi("auth-internal",e=>{const n=dn(e.getProvider("auth").getImmediate());return(r=>new NJ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(vD,_D,MJ(t)),Ai(vD,_D,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kJ=300,OJ=$4("authIdTokenMaxAge")||kJ;let TD=null;const LJ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OJ)return;const i=n==null?void 0:n.token;TD!==i&&(TD=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function VJ(t=s0()){const e=Pd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fW(t,{popupRedirectResolver:tB,persistence:[Jf,h0,yl]}),r=$4("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=LJ(o.toString());sY(n,s,()=>s(n.currentUser)),oY(n,l=>s(l))}}const i=B4("auth");return i&&CF(n,`http://${i}`),n}function UJ(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}XK({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=$n("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",UJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DJ("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FJ=2e3;async function BJ(t,e,n){const{BuildInfo:r}=Wu();_o(e.sessionId,"AuthEvent did not contain a session ID");const i=await GJ(e.sessionId),o={};return Bm()?o.ibi=r.packageName:Fm()?o.apn=r.packageName:rr(t,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=i,jS(t,n,e.type,void 0,e.eventId??void 0,o)}async function qJ(t){const{BuildInfo:e}=Wu(),n={};Bm()?n.iosBundleId=e.packageName:Fm()?n.androidPackageName=e.packageName:rr(t,"operation-not-supported-in-this-environment"),await eB(t,n)}function $J(t){const{cordova:e}=Wu();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,HK()?"_blank":"_system","location=yes"),n(i)})})}async function zJ(t,e,n){const{cordova:r}=Wu();let i=()=>{};try{await new Promise((o,s)=>{let l=null;function c(){var v;o();const g=(v=r.plugins.browsertab)==null?void 0:v.close;typeof g=="function"&&g(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function f(){l||(l=window.setTimeout(()=>{s($n(t,"redirect-cancelled-by-user"))},FJ))}function h(){(document==null?void 0:document.visibilityState)==="visible"&&f()}e.addPassiveListener(c),document.addEventListener("resume",f,!1),Fm()&&document.addEventListener("visibilitychange",h,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",f,!1),document.removeEventListener("visibilitychange",h,!1),l&&window.clearTimeout(l)}})}finally{i()}}function HJ(t){var n,r,i,o,s,l,c,f,h,g;const e=Wu();_e(typeof((n=e==null?void 0:e.universalLinks)==null?void 0:n.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_e(typeof((r=e==null?void 0:e.BuildInfo)==null?void 0:r.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_e(typeof((s=(o=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:o.browsertab)==null?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_e(typeof((f=(c=(l=e==null?void 0:e.cordova)==null?void 0:l.plugins)==null?void 0:c.browsertab)==null?void 0:f.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_e(typeof((g=(h=e==null?void 0:e.cordova)==null?void 0:h.InAppBrowser)==null?void 0:g.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function GJ(t){const e=jJ(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function jJ(t){if(_o(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KJ=20;class WJ extends XF{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function YJ(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:XJ(),postBody:null,tenantId:t.tenantId,error:$n(t,"no-auth-event")}}function JJ(t,e){return KS()._set(WS(t),e)}async function ED(t){const e=await KS()._get(WS(t));return e&&await KS()._remove(WS(t)),e}function QJ(t,e){var r,i;const n=eQ(e);if(n.includes("/__/auth/callback")){const o=Sv(n),s=o.firebaseError?ZJ(decodeURIComponent(o.firebaseError)):null,l=(i=(r=s==null?void 0:s.code)==null?void 0:r.split("auth/"))==null?void 0:i[1],c=l?$n(l):null;return c?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:n,postBody:null}}return null}function XJ(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<KJ;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function KS(){return Ei(h0)}function WS(t){return Fu("authEvent",t.config.apiKey,t.name)}function ZJ(t){try{return JSON.parse(t)}catch{return null}}function eQ(t){const e=Sv(t),n=e.link?decodeURIComponent(e.link):void 0,r=Sv(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Sv(i).link||i||r||n||t}function Sv(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Pf(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tQ=500;class nQ{constructor(){this._redirectPersistence=yl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=y0,this._overrideRedirectResult=dC}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new WJ(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){rr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){HJ(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),WY(),await this._originValidation(e);const s=YJ(e,r,i);await JJ(e,s);const l=await BJ(e,s,n),c=await $J(l);return zJ(e,o,c)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qJ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:o}=Wu(),s=setTimeout(async()=>{await ED(e),n.onEvent(wD())},tQ),l=async h=>{clearTimeout(s);const g=await ED(e);let v=null;g&&(h!=null&&h.url)&&(v=QJ(g,h.url)),n.onEvent(v||wD())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,l);const c=i,f=`${o.packageName.toLowerCase()}://`;Wu().handleOpenURL=async h=>{if(h.toLowerCase().startsWith(f)&&l({url:h}),typeof c=="function")try{c(h)}catch(g){console.error(g)}}}}const rQ=nQ;function wD(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:$n("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iQ(t,e){dn(t)._logFramework(e)}var oQ="@firebase/auth-compat",sQ="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aQ=1e3;function Bp(){var t;return((t=self==null?void 0:self.location)==null?void 0:t.protocol)||null}function lQ(){return Bp()==="http:"||Bp()==="https:"}function rB(t=fn()){return!!((Bp()==="file:"||Bp()==="ionic:"||Bp()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function uQ(){return Gx()||i0()}function cQ(){return j4()&&(document==null?void 0:document.documentMode)===11}function fQ(t=fn()){return/Edge\/\d+/.test(t)}function dQ(t=fn()){return cQ()||fQ(t)}function iB(){try{const t=self.localStorage,e=zm();if(t)return t.setItem(e,"1"),t.removeItem(e),dQ()?tm():!0}catch{return pC()&&tm()}return!1}function pC(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zw(){return(lQ()||G4()||rB())&&!uQ()&&iB()&&!pC()}function oB(){return rB()&&typeof document<"u"}async function hQ(){return oB()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},aQ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function pQ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i={LOCAL:"local",NONE:"none",SESSION:"session"},lp=_e,sB="persistence";function mQ(t,e){if(lp(Object.values(_i).includes(e),t,"invalid-persistence-type"),Gx()){lp(e!==_i.SESSION,t,"unsupported-persistence-type");return}if(i0()){lp(e===_i.NONE,t,"unsupported-persistence-type");return}if(pC()){lp(e===_i.NONE||e===_i.LOCAL&&tm(),t,"unsupported-persistence-type");return}lp(e===_i.NONE||iB(),t,"unsupported-persistence-type")}async function YS(t){await t._initializationPromise;const e=aB(),n=Fu(sB,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistenceType())}function gQ(t,e){const n=aB();if(!n)return[];const r=Fu(sB,t,e);switch(n.getItem(r)){case _i.NONE:return[Wf];case _i.LOCAL:return[Jf,yl];case _i.SESSION:return[yl];default:return[]}}function aB(){var t;try{return((t=pQ())==null?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yQ=_e;class ol{constructor(){this.browserResolver=Ei(tB),this.cordovaResolver=Ei(rQ),this.underlyingResolver=null,this._redirectPersistence=yl,this._completeRedirectFn=y0,this._overrideRedirectResult=dC}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return oB()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yQ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await hQ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(t){return t.unwrap()}function vQ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Q(t){return uB(t)}function TQ(t,e){var r;const n=(r=e.customData)==null?void 0:r._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new EQ(t,uY(t,e))}else if(n){const i=uB(e),o=e;i&&(o.credential=i,o.tenantId=n.tenantId||void 0,o.email=n.email||void 0,o.phoneNumber=n.phoneNumber||void 0)}}function uB(t){const{_tokenResponse:e}=t instanceof Rr?t.customData:t;if(!e)return null;if(!(t instanceof Rr)&&"temporaryProof"in e&&"phoneNumber"in e)return Ku.credentialFromResult(t);const n=e.providerId;if(!n||n===sp.PASSWORD)return null;let r;switch(n){case sp.GOOGLE:r=$o;break;case sp.FACEBOOK:r=qo;break;case sp.GITHUB:r=zo;break;case sp.TWITTER:r=Ho;break;default:const{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:s,pendingToken:l,nonce:c}=e;return!o&&!s&&!i&&!l?null:l?n.startsWith("saml.")?Yf._create(n,l):ns._fromParams({providerId:n,signInMethod:n,pendingToken:l,idToken:i,accessToken:o}):new Lf(n).credential({idToken:i,accessToken:o,rawNonce:c})}return t instanceof Rr?r.credentialFromError(t):r.credentialFromResult(t)}function Xr(t,e){return e.catch(n=>{throw n instanceof Rr&&TQ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:_Q(n),additionalUserInfo:iY(n),user:v0.getOrCreate(i)}})}async function JS(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Xr(t,n.confirm(r))}}class EQ{constructor(e,n){this.resolver=n,this.auth=vQ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Xr(lB(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v0=class Cp{constructor(e){this._delegate=e,this.multiFactor=dY(e)}static getOrCreate(e){return Cp.USER_MAP.has(e)||Cp.USER_MAP.set(e,new Cp(e)),Cp.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Xr(this.auth,OF(this._delegate,e))}async linkWithPhoneNumber(e,n){return JS(this.auth,OY(this._delegate,e,n))}async linkWithPopup(e){return Xr(this.auth,HY(this._delegate,e,ol))}async linkWithRedirect(e){return await YS(dn(this.auth)),ZY(this._delegate,e,ol)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Xr(this.auth,LF(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return JS(this.auth,LY(this._delegate,e,n))}reauthenticateWithPopup(e){return Xr(this.auth,zY(this._delegate,e,ol))}async reauthenticateWithRedirect(e){return await YS(dn(this.auth)),QY(this._delegate,e,ol)}sendEmailVerification(e){return WW(this._delegate,e)}async unlink(e){return await OW(this._delegate,e),this}updateEmail(e){return XW(this._delegate,e)}updatePassword(e){return FF(this._delegate,e)}updatePhoneNumber(e){return VY(this._delegate,e)}updateProfile(e){return QW(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return YW(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};v0.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=_e;class QS{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;up(r,"invalid-api-key",{appName:e.name}),up(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?ol:void 0;this._delegate=n.initialize({options:{persistence:wQ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(SK),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?v0.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){CF(this._delegate,e,n)}applyActionCode(e){return BW(this._delegate,e)}checkActionCode(e){return VF(this._delegate,e)}confirmPasswordReset(e,n){return FW(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Xr(this._delegate,$W(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return KW(this._delegate,e)}isSignInWithEmailLink(e){return HW(this._delegate,e)}async getRedirectResult(){up(zw(),this._delegate,"operation-not-supported-in-this-environment");const e=await tJ(this._delegate,ol);return e?Xr(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){iQ(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:o,complete:s}=bD(e,n,r);return this._delegate.onAuthStateChanged(i,o,s)}onIdTokenChanged(e,n,r){const{next:i,error:o,complete:s}=bD(e,n,r);return this._delegate.onIdTokenChanged(i,o,s)}sendSignInLinkToEmail(e,n){return zW(this._delegate,e,n)}sendPasswordResetEmail(e,n){return UW(this._delegate,e,n||void 0)}async setPersistence(e){mQ(this._delegate,e);let n;switch(e){case _i.SESSION:n=yl;break;case _i.LOCAL:n=await Ei(Jf)._isAvailable()?Jf:h0;break;case _i.NONE:n=Wf;break;default:return rr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Xr(this._delegate,kW(this._delegate))}signInWithCredential(e){return Xr(this._delegate,f0(this._delegate,e))}signInWithCustomToken(e){return Xr(this._delegate,VW(this._delegate,e))}signInWithEmailAndPassword(e,n){return Xr(this._delegate,UF(this._delegate,e,n))}signInWithEmailLink(e,n){return Xr(this._delegate,GW(this._delegate,e,n))}signInWithPhoneNumber(e,n){return JS(this._delegate,kY(this._delegate,e,n))}async signInWithPopup(e){return up(zw(),this._delegate,"operation-not-supported-in-this-environment"),Xr(this._delegate,$Y(this._delegate,e,ol))}async signInWithRedirect(e){return up(zw(),this._delegate,"operation-not-supported-in-this-environment"),await YS(this._delegate),YY(this._delegate,e,ol)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return qW(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}QS.Persistence=_i;function bD(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:s=>i(s&&v0.getOrCreate(s)),error:e,complete:n}}function wQ(t,e){const n=gQ(t,e);if(typeof self<"u"&&!n.includes(Jf)&&n.push(Jf),typeof window<"u")for(const r of[h0,yl])n.includes(r)||n.push(r);return n.includes(Wf)||n.push(Wf),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{static credential(e,n){return Ku.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new Ku(lB(fc.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}mC.PHONE_SIGN_IN_METHOD=Ku.PHONE_SIGN_IN_METHOD;mC.PROVIDER_ID=Ku.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQ=_e;class SQ{constructor(e,n,r=fc.app()){var i;bQ((i=r.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new MY(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ="auth-compat";function xQ(t){t.INTERNAL.registerComponent(new Xi(AQ,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new QS(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:pf.EMAIL_SIGNIN,PASSWORD_RESET:pf.PASSWORD_RESET,RECOVER_EMAIL:pf.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:pf.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:pf.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:pf.VERIFY_EMAIL}},EmailAuthProvider:Rl,FacebookAuthProvider:qo,GithubAuthProvider:zo,GoogleAuthProvider:$o,OAuthProvider:Lf,SAMLAuthProvider:jv,PhoneAuthProvider:mC,PhoneMultiFactorGenerator:nB,RecaptchaVerifier:SQ,TwitterAuthProvider:Ho,Auth:QS,AuthCredential:Md,Error:Rr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(oQ,sQ)}xQ(fc);var SD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cl,cB;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,L){function O(){}O.prototype=L.prototype,M.D=L.prototype,M.prototype=new O,M.prototype.constructor=M,M.C=function(F,U,z){for(var G=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)G[Ce-2]=arguments[Ce];return L.prototype[U].apply(F,G)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,L,O){O||(O=0);var F=Array(16);if(typeof L=="string")for(var U=0;16>U;++U)F[U]=L.charCodeAt(O++)|L.charCodeAt(O++)<<8|L.charCodeAt(O++)<<16|L.charCodeAt(O++)<<24;else for(U=0;16>U;++U)F[U]=L[O++]|L[O++]<<8|L[O++]<<16|L[O++]<<24;L=M.g[0],O=M.g[1],U=M.g[2];var z=M.g[3],G=L+(z^O&(U^z))+F[0]+3614090360&4294967295;L=O+(G<<7&4294967295|G>>>25),G=z+(U^L&(O^U))+F[1]+3905402710&4294967295,z=L+(G<<12&4294967295|G>>>20),G=U+(O^z&(L^O))+F[2]+606105819&4294967295,U=z+(G<<17&4294967295|G>>>15),G=O+(L^U&(z^L))+F[3]+3250441966&4294967295,O=U+(G<<22&4294967295|G>>>10),G=L+(z^O&(U^z))+F[4]+4118548399&4294967295,L=O+(G<<7&4294967295|G>>>25),G=z+(U^L&(O^U))+F[5]+1200080426&4294967295,z=L+(G<<12&4294967295|G>>>20),G=U+(O^z&(L^O))+F[6]+2821735955&4294967295,U=z+(G<<17&4294967295|G>>>15),G=O+(L^U&(z^L))+F[7]+4249261313&4294967295,O=U+(G<<22&4294967295|G>>>10),G=L+(z^O&(U^z))+F[8]+1770035416&4294967295,L=O+(G<<7&4294967295|G>>>25),G=z+(U^L&(O^U))+F[9]+2336552879&4294967295,z=L+(G<<12&4294967295|G>>>20),G=U+(O^z&(L^O))+F[10]+4294925233&4294967295,U=z+(G<<17&4294967295|G>>>15),G=O+(L^U&(z^L))+F[11]+2304563134&4294967295,O=U+(G<<22&4294967295|G>>>10),G=L+(z^O&(U^z))+F[12]+1804603682&4294967295,L=O+(G<<7&4294967295|G>>>25),G=z+(U^L&(O^U))+F[13]+4254626195&4294967295,z=L+(G<<12&4294967295|G>>>20),G=U+(O^z&(L^O))+F[14]+2792965006&4294967295,U=z+(G<<17&4294967295|G>>>15),G=O+(L^U&(z^L))+F[15]+1236535329&4294967295,O=U+(G<<22&4294967295|G>>>10),G=L+(U^z&(O^U))+F[1]+4129170786&4294967295,L=O+(G<<5&4294967295|G>>>27),G=z+(O^U&(L^O))+F[6]+3225465664&4294967295,z=L+(G<<9&4294967295|G>>>23),G=U+(L^O&(z^L))+F[11]+643717713&4294967295,U=z+(G<<14&4294967295|G>>>18),G=O+(z^L&(U^z))+F[0]+3921069994&4294967295,O=U+(G<<20&4294967295|G>>>12),G=L+(U^z&(O^U))+F[5]+3593408605&4294967295,L=O+(G<<5&4294967295|G>>>27),G=z+(O^U&(L^O))+F[10]+38016083&4294967295,z=L+(G<<9&4294967295|G>>>23),G=U+(L^O&(z^L))+F[15]+3634488961&4294967295,U=z+(G<<14&4294967295|G>>>18),G=O+(z^L&(U^z))+F[4]+3889429448&4294967295,O=U+(G<<20&4294967295|G>>>12),G=L+(U^z&(O^U))+F[9]+568446438&4294967295,L=O+(G<<5&4294967295|G>>>27),G=z+(O^U&(L^O))+F[14]+3275163606&4294967295,z=L+(G<<9&4294967295|G>>>23),G=U+(L^O&(z^L))+F[3]+4107603335&4294967295,U=z+(G<<14&4294967295|G>>>18),G=O+(z^L&(U^z))+F[8]+1163531501&4294967295,O=U+(G<<20&4294967295|G>>>12),G=L+(U^z&(O^U))+F[13]+2850285829&4294967295,L=O+(G<<5&4294967295|G>>>27),G=z+(O^U&(L^O))+F[2]+4243563512&4294967295,z=L+(G<<9&4294967295|G>>>23),G=U+(L^O&(z^L))+F[7]+1735328473&4294967295,U=z+(G<<14&4294967295|G>>>18),G=O+(z^L&(U^z))+F[12]+2368359562&4294967295,O=U+(G<<20&4294967295|G>>>12),G=L+(O^U^z)+F[5]+4294588738&4294967295,L=O+(G<<4&4294967295|G>>>28),G=z+(L^O^U)+F[8]+2272392833&4294967295,z=L+(G<<11&4294967295|G>>>21),G=U+(z^L^O)+F[11]+1839030562&4294967295,U=z+(G<<16&4294967295|G>>>16),G=O+(U^z^L)+F[14]+4259657740&4294967295,O=U+(G<<23&4294967295|G>>>9),G=L+(O^U^z)+F[1]+2763975236&4294967295,L=O+(G<<4&4294967295|G>>>28),G=z+(L^O^U)+F[4]+1272893353&4294967295,z=L+(G<<11&4294967295|G>>>21),G=U+(z^L^O)+F[7]+4139469664&4294967295,U=z+(G<<16&4294967295|G>>>16),G=O+(U^z^L)+F[10]+3200236656&4294967295,O=U+(G<<23&4294967295|G>>>9),G=L+(O^U^z)+F[13]+681279174&4294967295,L=O+(G<<4&4294967295|G>>>28),G=z+(L^O^U)+F[0]+3936430074&4294967295,z=L+(G<<11&4294967295|G>>>21),G=U+(z^L^O)+F[3]+3572445317&4294967295,U=z+(G<<16&4294967295|G>>>16),G=O+(U^z^L)+F[6]+76029189&4294967295,O=U+(G<<23&4294967295|G>>>9),G=L+(O^U^z)+F[9]+3654602809&4294967295,L=O+(G<<4&4294967295|G>>>28),G=z+(L^O^U)+F[12]+3873151461&4294967295,z=L+(G<<11&4294967295|G>>>21),G=U+(z^L^O)+F[15]+530742520&4294967295,U=z+(G<<16&4294967295|G>>>16),G=O+(U^z^L)+F[2]+3299628645&4294967295,O=U+(G<<23&4294967295|G>>>9),G=L+(U^(O|~z))+F[0]+4096336452&4294967295,L=O+(G<<6&4294967295|G>>>26),G=z+(O^(L|~U))+F[7]+1126891415&4294967295,z=L+(G<<10&4294967295|G>>>22),G=U+(L^(z|~O))+F[14]+2878612391&4294967295,U=z+(G<<15&4294967295|G>>>17),G=O+(z^(U|~L))+F[5]+4237533241&4294967295,O=U+(G<<21&4294967295|G>>>11),G=L+(U^(O|~z))+F[12]+1700485571&4294967295,L=O+(G<<6&4294967295|G>>>26),G=z+(O^(L|~U))+F[3]+2399980690&4294967295,z=L+(G<<10&4294967295|G>>>22),G=U+(L^(z|~O))+F[10]+4293915773&4294967295,U=z+(G<<15&4294967295|G>>>17),G=O+(z^(U|~L))+F[1]+2240044497&4294967295,O=U+(G<<21&4294967295|G>>>11),G=L+(U^(O|~z))+F[8]+1873313359&4294967295,L=O+(G<<6&4294967295|G>>>26),G=z+(O^(L|~U))+F[15]+4264355552&4294967295,z=L+(G<<10&4294967295|G>>>22),G=U+(L^(z|~O))+F[6]+2734768916&4294967295,U=z+(G<<15&4294967295|G>>>17),G=O+(z^(U|~L))+F[13]+1309151649&4294967295,O=U+(G<<21&4294967295|G>>>11),G=L+(U^(O|~z))+F[4]+4149444226&4294967295,L=O+(G<<6&4294967295|G>>>26),G=z+(O^(L|~U))+F[11]+3174756917&4294967295,z=L+(G<<10&4294967295|G>>>22),G=U+(L^(z|~O))+F[2]+718787259&4294967295,U=z+(G<<15&4294967295|G>>>17),G=O+(z^(U|~L))+F[9]+3951481745&4294967295,M.g[0]=M.g[0]+L&4294967295,M.g[1]=M.g[1]+(U+(G<<21&4294967295|G>>>11))&4294967295,M.g[2]=M.g[2]+U&4294967295,M.g[3]=M.g[3]+z&4294967295}r.prototype.u=function(M,L){L===void 0&&(L=M.length);for(var O=L-this.blockSize,F=this.B,U=this.h,z=0;z<L;){if(U==0)for(;z<=O;)i(this,M,z),z+=this.blockSize;if(typeof M=="string"){for(;z<L;)if(F[U++]=M.charCodeAt(z++),U==this.blockSize){i(this,F),U=0;break}}else for(;z<L;)if(F[U++]=M[z++],U==this.blockSize){i(this,F),U=0;break}}this.h=U,this.o+=L},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var L=1;L<M.length-8;++L)M[L]=0;var O=8*this.o;for(L=M.length-8;L<M.length;++L)M[L]=O&255,O/=256;for(this.u(M),M=Array(16),L=O=0;4>L;++L)for(var F=0;32>F;F+=8)M[O++]=this.g[L]>>>F&255;return M};function o(M,L){var O=l;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=L(M)}function s(M,L){this.h=L;for(var O=[],F=!0,U=M.length-1;0<=U;U--){var z=M[U]|0;F&&z==L||(O[U]=z,F=!1)}this.g=O}var l={};function c(M){return-128<=M&&128>M?o(M,function(L){return new s([L|0],0>L?-1:0)}):new s([M|0],0>M?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return g;if(0>M)return A(f(-M));for(var L=[],O=1,F=0;M>=O;F++)L[F]=M/O|0,O*=4294967296;return new s(L,0)}function h(M,L){if(M.length==0)throw Error("number format error: empty string");if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(M.charAt(0)=="-")return A(h(M.substring(1),L));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=f(Math.pow(L,8)),F=g,U=0;U<M.length;U+=8){var z=Math.min(8,M.length-U),G=parseInt(M.substring(U,U+z),L);8>z?(z=f(Math.pow(L,z)),F=F.j(z).add(f(G))):(F=F.j(O),F=F.add(f(G)))}return F}var g=c(0),v=c(1),E=c(16777216);t=s.prototype,t.m=function(){if(S(this))return-A(this).m();for(var M=0,L=1,O=0;O<this.g.length;O++){var F=this.i(O);M+=(0<=F?F:4294967296+F)*L,L*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(b(this))return"0";if(S(this))return"-"+A(this).toString(M);for(var L=f(Math.pow(M,6)),O=this,F="";;){var U=q(O,L).g;O=I(O,U.j(L));var z=((0<O.g.length?O.g[0]:O.h)>>>0).toString(M);if(O=U,b(O))return z+F;for(;6>z.length;)z="0"+z;F=z+F}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function b(M){if(M.h!=0)return!1;for(var L=0;L<M.g.length;L++)if(M.g[L]!=0)return!1;return!0}function S(M){return M.h==-1}t.l=function(M){return M=I(this,M),S(M)?-1:b(M)?0:1};function A(M){for(var L=M.g.length,O=[],F=0;F<L;F++)O[F]=~M.g[F];return new s(O,~M.h).add(v)}t.abs=function(){return S(this)?A(this):this},t.add=function(M){for(var L=Math.max(this.g.length,M.g.length),O=[],F=0,U=0;U<=L;U++){var z=F+(this.i(U)&65535)+(M.i(U)&65535),G=(z>>>16)+(this.i(U)>>>16)+(M.i(U)>>>16);F=G>>>16,z&=65535,G&=65535,O[U]=G<<16|z}return new s(O,O[O.length-1]&-2147483648?-1:0)};function I(M,L){return M.add(A(L))}t.j=function(M){if(b(this)||b(M))return g;if(S(this))return S(M)?A(this).j(A(M)):A(A(this).j(M));if(S(M))return A(this.j(A(M)));if(0>this.l(E)&&0>M.l(E))return f(this.m()*M.m());for(var L=this.g.length+M.g.length,O=[],F=0;F<2*L;F++)O[F]=0;for(F=0;F<this.g.length;F++)for(var U=0;U<M.g.length;U++){var z=this.i(F)>>>16,G=this.i(F)&65535,Ce=M.i(U)>>>16,be=M.i(U)&65535;O[2*F+2*U]+=G*be,D(O,2*F+2*U),O[2*F+2*U+1]+=z*be,D(O,2*F+2*U+1),O[2*F+2*U+1]+=G*Ce,D(O,2*F+2*U+1),O[2*F+2*U+2]+=z*Ce,D(O,2*F+2*U+2)}for(F=0;F<L;F++)O[F]=O[2*F+1]<<16|O[2*F];for(F=L;F<2*L;F++)O[F]=0;return new s(O,0)};function D(M,L){for(;(M[L]&65535)!=M[L];)M[L+1]+=M[L]>>>16,M[L]&=65535,L++}function k(M,L){this.g=M,this.h=L}function q(M,L){if(b(L))throw Error("division by zero");if(b(M))return new k(g,g);if(S(M))return L=q(A(M),L),new k(A(L.g),A(L.h));if(S(L))return L=q(M,A(L)),new k(A(L.g),L.h);if(30<M.g.length){if(S(M)||S(L))throw Error("slowDivide_ only works with positive integers.");for(var O=v,F=L;0>=F.l(M);)O=$(O),F=$(F);var U=H(O,1),z=H(F,1);for(F=H(F,2),O=H(O,2);!b(F);){var G=z.add(F);0>=G.l(M)&&(U=U.add(O),z=G),F=H(F,1),O=H(O,1)}return L=I(M,U.j(L)),new k(U,L)}for(U=g;0<=M.l(L);){for(O=Math.max(1,Math.floor(M.m()/L.m())),F=Math.ceil(Math.log(O)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),z=f(O),G=z.j(L);S(G)||0<G.l(M);)O-=F,z=f(O),G=z.j(L);b(z)&&(z=v),U=U.add(z),M=I(M,G)}return new k(U,M)}t.A=function(M){return q(this,M).h},t.and=function(M){for(var L=Math.max(this.g.length,M.g.length),O=[],F=0;F<L;F++)O[F]=this.i(F)&M.i(F);return new s(O,this.h&M.h)},t.or=function(M){for(var L=Math.max(this.g.length,M.g.length),O=[],F=0;F<L;F++)O[F]=this.i(F)|M.i(F);return new s(O,this.h|M.h)},t.xor=function(M){for(var L=Math.max(this.g.length,M.g.length),O=[],F=0;F<L;F++)O[F]=this.i(F)^M.i(F);return new s(O,this.h^M.h)};function $(M){for(var L=M.g.length+1,O=[],F=0;F<L;F++)O[F]=M.i(F)<<1|M.i(F-1)>>>31;return new s(O,M.h)}function H(M,L){var O=L>>5;L%=32;for(var F=M.g.length-O,U=[],z=0;z<F;z++)U[z]=0<L?M.i(z+O)>>>L|M.i(z+O+1)<<32-L:M.i(z+O);return new s(U,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cB=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,cl=s}).apply(typeof SD<"u"?SD:typeof self<"u"?self:typeof window<"u"?window:{});var Hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fB,Ip,dB,Av,XS,hB,pB,mB;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,x,P){return _==Array.prototype||_==Object.prototype||(_[x]=P.value),_};function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hy=="object"&&Hy];for(var x=0;x<_.length;++x){var P=_[x];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function i(_,x){if(x)e:{var P=r;_=_.split(".");for(var B=0;B<_.length-1;B++){var Q=_[B];if(!(Q in P))break e;P=P[Q]}_=_[_.length-1],B=P[_],x=x(B),x!=B&&x!=null&&e(P,_,{configurable:!0,writable:!0,value:x})}}function o(_,x){_ instanceof String&&(_+="");var P=0,B=!1,Q={next:function(){if(!B&&P<_.length){var oe=P++;return{value:x(oe,_[oe]),done:!1}}return B=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}i("Array.prototype.values",function(_){return _||function(){return o(this,function(x,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function c(_){var x=typeof _;return x=x!="object"?x:_?Array.isArray(_)?"array":x:"null",x=="array"||x=="object"&&typeof _.length=="number"}function f(_){var x=typeof _;return x=="object"&&_!=null||x=="function"}function h(_,x,P){return _.call.apply(_.bind,arguments)}function g(_,x,P){if(!_)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,B),_.apply(x,Q)}}return function(){return _.apply(x,arguments)}}function v(_,x,P){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:g,v.apply(null,arguments)}function E(_,x){var P=Array.prototype.slice.call(arguments,1);return function(){var B=P.slice();return B.push.apply(B,arguments),_.apply(this,B)}}function b(_,x){function P(){}P.prototype=x.prototype,_.aa=x.prototype,_.prototype=new P,_.prototype.constructor=_,_.Qb=function(B,Q,oe){for(var Ae=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Ae[ut-2]=arguments[ut];return x.prototype[Q].apply(B,Ae)}}function S(_){const x=_.length;if(0<x){const P=Array(x);for(let B=0;B<x;B++)P[B]=_[B];return P}return[]}function A(_,x){for(let P=1;P<arguments.length;P++){const B=arguments[P];if(c(B)){const Q=_.length||0,oe=B.length||0;_.length=Q+oe;for(let Ae=0;Ae<oe;Ae++)_[Q+Ae]=B[Ae]}else _.push(B)}}class I{constructor(x,P){this.i=x,this.j=P,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function D(_){return/^[\s\xa0]*$/.test(_)}function k(){var _=l.navigator;return _&&(_=_.userAgent)?_:""}function q(_){return q[" "](_),_}q[" "]=function(){};var $=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function H(_,x,P){for(const B in _)x.call(P,_[B],B,_)}function M(_,x){for(const P in _)x.call(void 0,_[P],P,_)}function L(_){const x={};for(const P in _)x[P]=_[P];return x}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(_,x){let P,B;for(let Q=1;Q<arguments.length;Q++){B=arguments[Q];for(P in B)_[P]=B[P];for(let oe=0;oe<O.length;oe++)P=O[oe],Object.prototype.hasOwnProperty.call(B,P)&&(_[P]=B[P])}}function U(_){var x=1;_=_.split(":");const P=[];for(;0<x&&_.length;)P.push(_.shift()),x--;return _.length&&P.push(_.join(":")),P}function z(_){l.setTimeout(()=>{throw _},0)}function G(){var _=Ve;let x=null;return _.g&&(x=_.g,_.g=_.g.next,_.g||(_.h=null),x.next=null),x}class Ce{constructor(){this.h=this.g=null}add(x,P){const B=be.get();B.set(x,P),this.h?this.h.next=B:this.g=B,this.h=B}}var be=new I(()=>new ee,_=>_.reset());class ee{constructor(){this.next=this.g=this.h=null}set(x,P){this.h=x,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let le,Se=!1,Ve=new Ce,K=()=>{const _=l.Promise.resolve(void 0);le=()=>{_.then(de)}};var de=()=>{for(var _;_=G();){try{_.h.call(_.g)}catch(P){z(P)}var x=be;x.j(_),100>x.h&&(x.h++,_.next=x.g,x.g=_)}Se=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(_,x){this.type=_,this.g=this.target=x,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Le=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var _=!1,x=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const P=()=>{};l.addEventListener("test",P,x),l.removeEventListener("test",P,x)}catch{}return _})();function Oe(_,x){if(Te.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var P=this.type=_.type,B=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=x,x=_.relatedTarget){if($){e:{try{q(x.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(x=null)}}else P=="mouseover"?x=_.fromElement:P=="mouseout"&&(x=_.toElement);this.relatedTarget=x,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:qe[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&Oe.aa.h.call(this)}}b(Oe,Te);var qe={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Pt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function Ee(_,x,P,B,Q){this.listener=_,this.proxy=null,this.src=x,this.type=P,this.capture=!!B,this.ha=Q,this.key=++ht,this.da=this.fa=!1}function je(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Ye(_){this.src=_,this.g={},this.h=0}Ye.prototype.add=function(_,x,P,B,Q){var oe=_.toString();_=this.g[oe],_||(_=this.g[oe]=[],this.h++);var Ae=Lt(_,x,B,Q);return-1<Ae?(x=_[Ae],P||(x.fa=!1)):(x=new Ee(x,this.src,oe,!!B,Q),x.fa=P,_.push(x)),x};function me(_,x){var P=x.type;if(P in _.g){var B=_.g[P],Q=Array.prototype.indexOf.call(B,x,void 0),oe;(oe=0<=Q)&&Array.prototype.splice.call(B,Q,1),oe&&(je(x),_.g[P].length==0&&(delete _.g[P],_.h--))}}function Lt(_,x,P,B){for(var Q=0;Q<_.length;++Q){var oe=_[Q];if(!oe.da&&oe.listener==x&&oe.capture==!!P&&oe.ha==B)return Q}return-1}var st="closure_lm_"+(1e6*Math.random()|0),En={};function Cn(_,x,P,B,Q){if(Array.isArray(x)){for(var oe=0;oe<x.length;oe++)Cn(_,x[oe],P,B,Q);return null}return P=bc(P),_&&_[Pt]?_.K(x,P,f(B)?!!B.capture:!1,Q):pn(_,x,P,!1,B,Q)}function pn(_,x,P,B,Q,oe){if(!x)throw Error("Invalid event type");var Ae=f(Q)?!!Q.capture:!!Q,ut=wa(_);if(ut||(_[st]=ut=new Ye(_)),P=ut.add(x,P,B,Ae,oe),P.proxy)return P;if(B=Ta(),P.proxy=B,B.src=_,B.listener=P,_.addEventListener)Le||(Q=Ae),Q===void 0&&(Q=!1),_.addEventListener(x.toString(),B,Q);else if(_.attachEvent)_.attachEvent(Ao(x.toString()),B);else if(_.addListener&&_.removeListener)_.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Ta(){function _(P){return x.call(_.src,_.listener,P)}const x=ih;return _}function Ea(_,x,P,B,Q){if(Array.isArray(x))for(var oe=0;oe<x.length;oe++)Ea(_,x[oe],P,B,Q);else B=f(B)?!!B.capture:!!B,P=bc(P),_&&_[Pt]?(_=_.i,x=String(x).toString(),x in _.g&&(oe=_.g[x],P=Lt(oe,P,B,Q),-1<P&&(je(oe[P]),Array.prototype.splice.call(oe,P,1),oe.length==0&&(delete _.g[x],_.h--)))):_&&(_=wa(_))&&(x=_.g[x.toString()],_=-1,x&&(_=Lt(x,P,B,Q)),(P=-1<_?x[_]:null)&&cs(P))}function cs(_){if(typeof _!="number"&&_&&!_.da){var x=_.src;if(x&&x[Pt])me(x.i,_);else{var P=_.type,B=_.proxy;x.removeEventListener?x.removeEventListener(P,B,_.capture):x.detachEvent?x.detachEvent(Ao(P),B):x.addListener&&x.removeListener&&x.removeListener(B),(P=wa(x))?(me(P,_),P.h==0&&(P.src=null,x[st]=null)):je(_)}}}function Ao(_){return _ in En?En[_]:En[_]="on"+_}function ih(_,x){if(_.da)_=!0;else{x=new Oe(x,this);var P=_.listener,B=_.ha||_.src;_.fa&&cs(_),_=P.call(B,x)}return _}function wa(_){return _=_[st],_ instanceof Ye?_:null}var $l="__closure_events_fn_"+(1e9*Math.random()>>>0);function bc(_){return typeof _=="function"?_:(_[$l]||(_[$l]=function(x){return _.handleEvent(x)}),_[$l])}function en(){ue.call(this),this.i=new Ye(this),this.M=this,this.F=null}b(en,ue),en.prototype[Pt]=!0,en.prototype.removeEventListener=function(_,x,P,B){Ea(this,_,x,P,B)};function mt(_,x){var P,B=_.F;if(B)for(P=[];B;B=B.F)P.push(B);if(_=_.M,B=x.type||x,typeof x=="string")x=new Te(x,_);else if(x instanceof Te)x.target=x.target||_;else{var Q=x;x=new Te(B,_),F(x,Q)}if(Q=!0,P)for(var oe=P.length-1;0<=oe;oe--){var Ae=x.g=P[oe];Q=Nr(Ae,B,!0,x)&&Q}if(Ae=x.g=_,Q=Nr(Ae,B,!0,x)&&Q,Q=Nr(Ae,B,!1,x)&&Q,P)for(oe=0;oe<P.length;oe++)Ae=x.g=P[oe],Q=Nr(Ae,B,!1,x)&&Q}en.prototype.N=function(){if(en.aa.N.call(this),this.i){var _=this.i,x;for(x in _.g){for(var P=_.g[x],B=0;B<P.length;B++)je(P[B]);delete _.g[x],_.h--}}this.F=null},en.prototype.K=function(_,x,P,B){return this.i.add(String(_),x,!1,P,B)},en.prototype.L=function(_,x,P,B){return this.i.add(String(_),x,!0,P,B)};function Nr(_,x,P,B){if(x=_.i.g[String(x)],!x)return!0;x=x.concat();for(var Q=!0,oe=0;oe<x.length;++oe){var Ae=x[oe];if(Ae&&!Ae.da&&Ae.capture==P){var ut=Ae.listener,Vn=Ae.ha||Ae.src;Ae.fa&&me(_.i,Ae),Q=ut.call(Vn,B)!==!1&&Q}}return Q&&!B.defaultPrevented}function Ln(_,x,P){if(typeof _=="function")P&&(_=v(_,P));else if(_&&typeof _.handleEvent=="function")_=v(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:l.setTimeout(_,x||0)}function ba(_){_.g=Ln(()=>{_.g=null,_.i&&(_.i=!1,ba(_))},_.l);const x=_.h;_.h=null,_.m.apply(null,x)}class Sc extends ue{constructor(x,P){super(),this.m=x,this.l=P,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:ba(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fs(_){ue.call(this),this.h=_,this.g={}}b(fs,ue);var ds=[];function hs(_){H(_.g,function(x,P){this.g.hasOwnProperty(P)&&cs(x)},_),_.g={}}fs.prototype.N=function(){fs.aa.N.call(this),hs(this)},fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ii=l.JSON.stringify,Sa=l.JSON.parse,ps=class{stringify(_){return l.JSON.stringify(_,void 0)}parse(_){return l.JSON.parse(_,void 0)}};function zl(){}zl.prototype.h=null;function $t(_){return _.h||(_.h=_.i())}function ms(){}var jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oi(){Te.call(this,"d")}b(oi,Te);function Aa(){Te.call(this,"c")}b(Aa,Te);var si={},xa=null;function io(){return xa=xa||new en}si.La="serverreachability";function gs(_){Te.call(this,si.La,_)}b(gs,Te);function Y(_){const x=io();mt(x,new gs(x))}si.STAT_EVENT="statevent";function ae(_,x){Te.call(this,si.STAT_EVENT,_),this.stat=x}b(ae,Te);function we(_){const x=io();mt(x,new ae(x,_))}si.Ma="timingevent";function ye(_,x){Te.call(this,si.Ma,_),this.size=x}b(ye,Te);function ve(_,x){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){_()},x)}function Xe(){this.g=!0}Xe.prototype.xa=function(){this.g=!1};function gt(_,x,P,B,Q,oe){_.info(function(){if(_.g)if(oe)for(var Ae="",ut=oe.split("&"),Vn=0;Vn<ut.length;Vn++){var ct=ut[Vn].split("=");if(1<ct.length){var Wn=ct[0];ct=ct[1];var Un=Wn.split("_");Ae=2<=Un.length&&Un[1]=="type"?Ae+(Wn+"="+ct+"&"):Ae+(Wn+"=redacted&")}}else Ae=null;else Ae=oe;return"XMLHTTP REQ ("+B+") [attempt "+Q+"]: "+x+`
`+P+`
`+Ae})}function Vt(_,x,P,B,Q,oe,Ae){_.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+Q+"]: "+x+`
`+P+`
`+oe+" "+Ae})}function Kt(_,x,P,B){_.info(function(){return"XMLHTTP TEXT ("+x+"): "+at(_,P)+(B?" "+B:"")})}function Tt(_,x){_.info(function(){return"TIMEOUT: "+x})}Xe.prototype.info=function(){};function at(_,x){if(!_.g)return x;if(!x)return null;try{var P=JSON.parse(x);if(P){for(_=0;_<P.length;_++)if(Array.isArray(P[_])){var B=P[_];if(!(2>B.length)){var Q=B[1];if(Array.isArray(Q)&&!(1>Q.length)){var oe=Q[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var Ae=1;Ae<Q.length;Ae++)Q[Ae]=""}}}}return ii(P)}catch{return x}}var et={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ln={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ut;function jn(){}b(jn,zl),jn.prototype.g=function(){return new XMLHttpRequest},jn.prototype.i=function(){return{}},Ut=new jn;function un(_,x,P,B){this.j=_,this.i=x,this.l=P,this.R=B||1,this.U=new fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ft}function Ft(){this.i=null,this.g="",this.h=!1}var Hl={},Ac={};function oo(_,x,P){_.L=1,_.v=Yl(ai(x)),_.m=P,_.P=!0,ys(_,null)}function ys(_,x){_.F=Date.now(),Gl(_),_.A=ai(_.v);var P=_.A,B=_.R;Array.isArray(B)||(B=[String(B)]),ch(P.i,"t",B),_.C=0,P=_.j.J,_.h=new Ft,_.g=Ug(_.j,P?x:null,!_.m),0<_.O&&(_.M=new Sc(v(_.Y,_,_.g),_.O)),x=_.U,P=_.g,B=_.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(ds[0]=Q.toString()),Q=ds);for(var oe=0;oe<Q.length;oe++){var Ae=Cn(P,Q[oe],B||x.handleEvent,!1,x.h||x);if(!Ae)break;x.g[Ae.key]=Ae}x=_.H?L(_.H):{},_.m?(_.u||(_.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,x)):(_.u="GET",_.g.ea(_.A,_.u,null,x)),Y(),gt(_.i,_.u,_.A,_.l,_.R,_.m)}un.prototype.ca=function(_){_=_.target;const x=this.M;x&&ki(_)==3?x.j():this.Y(_)},un.prototype.Y=function(_){try{if(_==this.g)e:{const Un=ki(this.g);var x=this.g.Ba();const As=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||Pg(this.g)))){this.J||Un!=4||x==7||(x==8||0>=As?Y(3):Y(2)),Ca(this);var P=this.g.Z();this.X=P;t:if(bg(this)){var B=Pg(this.g);_="";var Q=B.length,oe=ki(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ur(this),xo(this);var Ae="";break t}this.h.i=new l.TextDecoder}for(x=0;x<Q;x++)this.h.h=!0,_+=this.h.i.decode(B[x],{stream:!(oe&&x==Q-1)});B.length=0,this.h.g+=_,this.C=0,Ae=this.h.g}else Ae=this.g.oa();if(this.o=P==200,Vt(this.i,this.u,this.A,this.l,this.R,Un,P),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,Vn=this.g;if((ut=Vn.g?Vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(ut)){var ct=ut;break t}}ct=null}if(P=ct)Kt(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jl(this,P);else{this.o=!1,this.s=3,we(12),ur(this),xo(this);break e}}if(this.P){P=!0;let cr;for(;!this.J&&this.C<Ae.length;)if(cr=Sg(this,Ae),cr==Ac){Un==4&&(this.s=4,we(14),P=!1),Kt(this.i,this.l,null,"[Incomplete Response]");break}else if(cr==Hl){this.s=4,we(15),Kt(this.i,this.l,Ae,"[Invalid Chunk]"),P=!1;break}else Kt(this.i,this.l,cr,null),jl(this,cr);if(bg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||Ae.length!=0||this.h.h||(this.s=1,we(16),P=!1),this.o=this.o&&P,!P)Kt(this.i,this.l,Ae,"[Invalid Chunked Response]"),ur(this),xo(this);else if(0<Ae.length&&!this.W){this.W=!0;var Wn=this.j;Wn.g==this&&Wn.ba&&!Wn.M&&(Wn.j.info("Great, no buffering proxy detected. Bytes received: "+Ae.length),ru(Wn),Wn.M=!0,we(11))}}else Kt(this.i,this.l,Ae,null),jl(this,Ae);Un==4&&ur(this),this.o&&!this.J&&(Un==4?Og(this.j,this):(this.o=!1,Gl(this)))}else MT(this.g),P==400&&0<Ae.indexOf("Unknown SID")?(this.s=3,we(12)):(this.s=0,we(13)),ur(this),xo(this)}}}catch{}finally{}};function bg(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function Sg(_,x){var P=_.C,B=x.indexOf(`
`,P);return B==-1?Ac:(P=Number(x.substring(P,B)),isNaN(P)?Hl:(B+=1,B+P>x.length?Ac:(x=x.slice(B,B+P),_.C=B+P,x)))}un.prototype.cancel=function(){this.J=!0,ur(this)};function Gl(_){_.S=Date.now()+_.I,Ag(_,_.I)}function Ag(_,x){if(_.B!=null)throw Error("WatchDog timer not null");_.B=ve(v(_.ba,_),x)}function Ca(_){_.B&&(l.clearTimeout(_.B),_.B=null)}un.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(Tt(this.i,this.A),this.L!=2&&(Y(),we(17)),ur(this),this.s=2,xo(this)):Ag(this,this.S-_)};function xo(_){_.j.G==0||_.J||Og(_.j,_)}function ur(_){Ca(_);var x=_.M;x&&typeof x.ma=="function"&&x.ma(),_.M=null,hs(_.U),_.g&&(x=_.g,_.g=null,x.abort(),x.ma())}function jl(_,x){try{var P=_.j;if(P.G!=0&&(P.g==_||oh(P.h,_))){if(!_.K&&oh(P.h,_)&&P.G==3){try{var B=P.Da.g.parse(x)}catch{B=null}if(Array.isArray(B)&&B.length==3){var Q=B;if(Q[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<_.F)Vc(P),Oc(P);else break e;mh(P),we(18)}}else P.za=Q[1],0<P.za-P.T&&37500>Q[2]&&P.F&&P.v==0&&!P.C&&(P.C=ve(v(P.Za,P),6e3));if(1>=Cc(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else Ss(P,11)}else if((_.K||P.g==_)&&Vc(P),!D(x))for(Q=P.Da.g.parse(x),x=0;x<Q.length;x++){let ct=Q[x];if(P.T=ct[0],ct=ct[1],P.G==2)if(ct[0]=="c"){P.K=ct[1],P.ia=ct[2];const Wn=ct[3];Wn!=null&&(P.la=Wn,P.j.info("VER="+P.la));const Un=ct[4];Un!=null&&(P.Aa=Un,P.j.info("SVER="+P.Aa));const As=ct[5];As!=null&&typeof As=="number"&&0<As&&(B=1.5*As,P.L=B,P.j.info("backChannelRequestTimeoutMs_="+B)),B=P;const cr=_.g;if(cr){const Do=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Do){var oe=B.h;oe.g||Do.indexOf("spdy")==-1&&Do.indexOf("quic")==-1&&Do.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(Ic(oe,oe.h),oe.h=null))}if(B.D){const yh=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;yh&&(B.ya=yh,Nt(B.I,B.D,yh))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-_.F,P.j.info("Handshake RTT: "+P.R+"ms")),B=P;var Ae=_;if(B.qa=Vg(B,B.J?B.ia:null,B.W),Ae.K){Mr(B.h,Ae);var ut=Ae,Vn=B.L;Vn&&(ut.I=Vn),ut.B&&(Ca(ut),Gl(ut)),B.g=Ae}else Dg(B);0<P.i.length&&Lc(P)}else ct[0]!="stop"&&ct[0]!="close"||Ss(P,7);else P.G==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Ss(P,7):hh(P):ct[0]!="noop"&&P.l&&P.l.ta(ct),P.v=0)}}Y(4)}catch{}}var xg=class{constructor(_,x){this.g=_,this.map=x}};function vs(_){this.l=_||10,l.PerformanceNavigationTiming?(_=l.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xc(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Cc(_){return _.h?1:_.g?_.g.size:0}function oh(_,x){return _.h?_.h==x:_.g?_.g.has(x):!1}function Ic(_,x){_.g?_.g.add(x):_.h=x}function Mr(_,x){_.h&&_.h==x?_.h=null:_.g&&_.g.has(x)&&_.g.delete(x)}vs.prototype.cancel=function(){if(this.i=sh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function sh(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let x=_.i;for(const P of _.g.values())x=x.concat(P.D);return x}return S(_.i)}function IT(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(c(_)){for(var x=[],P=_.length,B=0;B<P;B++)x.push(_[B]);return x}x=[],P=0;for(B in _)x[P++]=_[B];return x}function Rc(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(c(_)||typeof _=="string"){var x=[];_=_.length;for(var P=0;P<_;P++)x.push(P);return x}x=[],P=0;for(const B in _)x[P++]=B;return x}}}function ah(_,x){if(_.forEach&&typeof _.forEach=="function")_.forEach(x,void 0);else if(c(_)||typeof _=="string")Array.prototype.forEach.call(_,x,void 0);else for(var P=Rc(_),B=IT(_),Q=B.length,oe=0;oe<Q;oe++)x.call(void 0,B[oe],P&&P[oe],_)}var Kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function RT(_,x){if(_){_=_.split("&");for(var P=0;P<_.length;P++){var B=_[P].indexOf("="),Q=null;if(0<=B){var oe=_[P].substring(0,B);Q=_[P].substring(B+1)}else oe=_[P];x(oe,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function In(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof In){this.h=_.h,Wl(this,_.j),this.o=_.o,this.g=_.g,Ia(this,_.s),this.l=_.l;var x=_.i,P=new Ts;P.i=x.i,x.g&&(P.g=new Map(x.g),P.h=x.h),_s(this,P),this.m=_.m}else _&&(x=String(_).match(Kl))?(this.h=!1,Wl(this,x[1]||"",!0),this.o=Ni(x[2]||""),this.g=Ni(x[3]||"",!0),Ia(this,x[4]),this.l=Ni(x[5]||"",!0),_s(this,x[6]||"",!0),this.m=Ni(x[7]||"")):(this.h=!1,this.i=new Ts(null,this.h))}In.prototype.toString=function(){var _=[],x=this.j;x&&_.push(Jl(x,lh,!0),":");var P=this.g;return(P||x=="file")&&(_.push("//"),(x=this.o)&&_.push(Jl(x,lh,!0),"@"),_.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&_.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&_.push("/"),_.push(Jl(P,P.charAt(0)=="/"?PT:uh,!0))),(P=this.i.toString())&&_.push("?",P),(P=this.m)&&_.push("#",Jl(P,Pc)),_.join("")};function ai(_){return new In(_)}function Wl(_,x,P){_.j=P?Ni(x,!0):x,_.j&&(_.j=_.j.replace(/:$/,""))}function Ia(_,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);_.s=x}else _.s=null}function _s(_,x,P){x instanceof Ts?(_.i=x,Ig(_.i,_.h)):(P||(x=Jl(x,NT)),_.i=new Ts(x,_.h))}function Nt(_,x,P){_.i.set(x,P)}function Yl(_){return Nt(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function Ni(_,x){return _?x?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Jl(_,x,P){return typeof _=="string"?(_=encodeURI(_).replace(x,Cg),P&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Cg(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var lh=/[#\/\?@]/g,uh=/[#\?:]/g,PT=/[#\?]/g,NT=/[#\?@]/g,Pc=/#/g;function Ts(_,x){this.h=this.g=null,this.i=_||null,this.j=!!x}function Mi(_){_.g||(_.g=new Map,_.h=0,_.i&&RT(_.i,function(x,P){_.add(decodeURIComponent(x.replace(/\+/g," ")),P)}))}t=Ts.prototype,t.add=function(_,x){Mi(this),this.i=null,_=Co(this,_);var P=this.g.get(_);return P||this.g.set(_,P=[]),P.push(x),this.h+=1,this};function Es(_,x){Mi(_),x=Co(_,x),_.g.has(x)&&(_.i=null,_.h-=_.g.get(x).length,_.g.delete(x))}function ws(_,x){return Mi(_),x=Co(_,x),_.g.has(x)}t.forEach=function(_,x){Mi(this),this.g.forEach(function(P,B){P.forEach(function(Q){_.call(x,Q,B,this)},this)},this)},t.na=function(){Mi(this);const _=Array.from(this.g.values()),x=Array.from(this.g.keys()),P=[];for(let B=0;B<x.length;B++){const Q=_[B];for(let oe=0;oe<Q.length;oe++)P.push(x[B])}return P},t.V=function(_){Mi(this);let x=[];if(typeof _=="string")ws(this,_)&&(x=x.concat(this.g.get(Co(this,_))));else{_=Array.from(this.g.values());for(let P=0;P<_.length;P++)x=x.concat(_[P])}return x},t.set=function(_,x){return Mi(this),this.i=null,_=Co(this,_),ws(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[x]),this.h+=1,this},t.get=function(_,x){return _?(_=this.V(_),0<_.length?String(_[0]):x):x};function ch(_,x,P){Es(_,x),0<P.length&&(_.i=null,_.g.set(Co(_,x),S(P)),_.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],x=Array.from(this.g.keys());for(var P=0;P<x.length;P++){var B=x[P];const oe=encodeURIComponent(String(B)),Ae=this.V(B);for(B=0;B<Ae.length;B++){var Q=oe;Ae[B]!==""&&(Q+="="+encodeURIComponent(String(Ae[B]))),_.push(Q)}}return this.i=_.join("&")};function Co(_,x){return x=String(x),_.j&&(x=x.toLowerCase()),x}function Ig(_,x){x&&!_.j&&(Mi(_),_.i=null,_.g.forEach(function(P,B){var Q=B.toLowerCase();B!=Q&&(Es(this,B),ch(this,Q,P))},_)),_.j=x}function Ql(_,x){const P=new Xe;if(l.Image){const B=new Image;B.onload=E(Di,P,"TestLoadImage: loaded",!0,x,B),B.onerror=E(Di,P,"TestLoadImage: error",!1,x,B),B.onabort=E(Di,P,"TestLoadImage: abort",!1,x,B),B.ontimeout=E(Di,P,"TestLoadImage: timeout",!1,x,B),l.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=_}else x(!1)}function so(_,x){const P=new Xe,B=new AbortController,Q=setTimeout(()=>{B.abort(),Di(P,"TestPingServer: timeout",!1,x)},1e4);fetch(_,{signal:B.signal}).then(oe=>{clearTimeout(Q),oe.ok?Di(P,"TestPingServer: ok",!0,x):Di(P,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(Q),Di(P,"TestPingServer: error",!1,x)})}function Di(_,x,P,B,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),B(P)}catch{}}function Xl(){this.g=new ps}function Io(_,x,P){const B=P||"";try{ah(_,function(Q,oe){let Ae=Q;f(Q)&&(Ae=ii(Q)),x.push(B+oe+"="+encodeURIComponent(Ae))})}catch(Q){throw x.push(B+"type="+encodeURIComponent("_badmap")),Q}}function Ra(_){this.l=_.Ub||null,this.j=_.eb||!1}b(Ra,zl),Ra.prototype.g=function(){return new bs(this.l,this.j)},Ra.prototype.i=(function(_){return function(){return _}})({});function bs(_,x){en.call(this),this.D=_,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(bs,en),t=bs.prototype,t.open=function(_,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=x,this.readyState=1,Po(this)},t.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(x.body=_),(this.D||l).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ro(this)),this.readyState=0},t.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Po(this)),this.g&&(this.readyState=3,Po(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fh(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function fh(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}t.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var x=_.value?_.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!_.done}))&&(this.response=this.responseText+=x)}_.done?Ro(this):Po(this),this.readyState==3&&fh(this)}},t.Ra=function(_){this.g&&(this.response=this.responseText=_,Ro(this))},t.Qa=function(_){this.g&&(this.response=_,Ro(this))},t.ga=function(){this.g&&Ro(this)};function Ro(_){_.readyState=4,_.l=null,_.j=null,_.v=null,Po(_)}t.setRequestHeader=function(_,x){this.u.append(_,x)},t.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],x=this.h.entries();for(var P=x.next();!P.done;)P=P.value,_.push(P[0]+": "+P[1]),P=x.next();return _.join(`\r
`)};function Po(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function dh(_){let x="";return H(_,function(P,B){x+=B,x+=":",x+=P,x+=`\r
`}),x}function Kn(_,x,P){e:{for(B in P){var B=!1;break e}B=!0}B||(P=dh(P),typeof _=="string"?P!=null&&encodeURIComponent(String(P)):Nt(_,x,P))}function wt(_){en.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(wt,en);var Nc=/^https?$/i,Zl=["POST","PUT"];t=wt.prototype,t.Ha=function(_){this.J=_},t.ea=function(_,x,P,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);x=x?x.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ut.g(),this.v=this.o?$t(this.o):$t(Ut),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(x,String(_),!0),this.B=!1}catch(oe){Rg(this,oe);return}if(_=P||"",P=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var Q in B)P.set(Q,B[Q]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const oe of B.keys())P.set(oe,B.get(oe));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(P.keys()).find(oe=>oe.toLowerCase()=="content-type"),Q=l.FormData&&_ instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Zl,x,void 0))||B||Q||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Ae]of P)this.g.setRequestHeader(oe,Ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eu(this),this.u=!0,this.g.send(_),this.u=!1}catch(oe){Rg(this,oe)}};function Rg(_,x){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=x,_.m=5,Mc(_),No(_)}function Mc(_){_.A||(_.A=!0,mt(_,"complete"),mt(_,"error"))}t.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,mt(this,"complete"),mt(this,"abort"),No(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),No(this,!0)),wt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Dc(this):this.bb())},t.bb=function(){Dc(this)};function Dc(_){if(_.h&&typeof s<"u"&&(!_.v[1]||ki(_)!=4||_.Z()!=2)){if(_.u&&ki(_)==4)Ln(_.Ea,0,_);else if(mt(_,"readystatechange"),ki(_)==4){_.h=!1;try{const Ae=_.Z();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var P;if(!(P=x)){var B;if(B=Ae===0){var Q=String(_.D).match(Kl)[1]||null;!Q&&l.self&&l.self.location&&(Q=l.self.location.protocol.slice(0,-1)),B=!Nc.test(Q?Q.toLowerCase():"")}P=B}if(P)mt(_,"complete"),mt(_,"success");else{_.m=6;try{var oe=2<ki(_)?_.g.statusText:""}catch{oe=""}_.l=oe+" ["+_.Z()+"]",Mc(_)}}finally{No(_)}}}}function No(_,x){if(_.g){eu(_);const P=_.g,B=_.v[0]?()=>{}:null;_.g=null,_.v=null,x||mt(_,"ready");try{P.onreadystatechange=B}catch{}}}function eu(_){_.I&&(l.clearTimeout(_.I),_.I=null)}t.isActive=function(){return!!this.g};function ki(_){return _.g?_.g.readyState:0}t.Z=function(){try{return 2<ki(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(_){if(this.g){var x=this.g.responseText;return _&&x.indexOf(_)==0&&(x=x.substring(_.length)),Sa(x)}};function Pg(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function MT(_){const x={};_=(_.g&&2<=ki(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<_.length;B++){if(D(_[B]))continue;var P=U(_[B]);const Q=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const oe=x[Q]||[];x[Q]=oe,oe.push(P)}M(x,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tu(_,x,P){return P&&P.internalChannelParams&&P.internalChannelParams[_]||x}function kc(_){this.Aa=0,this.i=[],this.j=new Xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tu("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tu("baseRetryDelayMs",5e3,_),this.cb=tu("retryDelaySeedMs",1e4,_),this.Wa=tu("forwardChannelMaxRetries",2,_),this.wa=tu("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new vs(_&&_.concurrentRequestLimit),this.Da=new Xl,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=kc.prototype,t.la=8,t.G=1,t.connect=function(_,x,P,B){we(0),this.W=_,this.H=x||{},P&&B!==void 0&&(this.H.OSID=P,this.H.OAID=B),this.F=this.X,this.I=Vg(this,null,this.W),Lc(this)};function hh(_){if(Ng(_),_.G==3){var x=_.U++,P=ai(_.I);if(Nt(P,"SID",_.K),Nt(P,"RID",x),Nt(P,"TYPE","terminate"),nu(_,P),x=new un(_,_.j,x),x.L=2,x.v=Yl(ai(P)),P=!1,l.navigator&&l.navigator.sendBeacon)try{P=l.navigator.sendBeacon(x.v.toString(),"")}catch{}!P&&l.Image&&(new Image().src=x.v,P=!0),P||(x.g=Ug(x.j,null),x.g.ea(x.v)),x.F=Date.now(),Gl(x)}Lg(_)}function Oc(_){_.g&&(ru(_),_.g.cancel(),_.g=null)}function Ng(_){Oc(_),_.u&&(l.clearTimeout(_.u),_.u=null),Vc(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&l.clearTimeout(_.s),_.s=null)}function Lc(_){if(!xc(_.h)&&!_.s){_.s=!0;var x=_.Ga;le||K(),Se||(le(),Se=!0),Ve.add(x,_),_.B=0}}function DT(_,x){return Cc(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=x.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=ve(v(_.Ga,_,x),gh(_,_.B)),_.B++,!0)}t.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const Q=new un(this,this.j,_);let oe=this.o;if(this.S&&(oe?(oe=L(oe),F(oe,this.S)):oe=this.S),this.m!==null||this.O||(Q.H=oe,oe=null),this.P)e:{for(var x=0,P=0;P<this.i.length;P++){t:{var B=this.i[P];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(x+=B,4096<x){x=P;break e}if(x===4096||P===this.i.length-1){x=P+1;break e}}x=1e3}else x=1e3;x=Mg(this,Q,x),P=ai(this.I),Nt(P,"RID",_),Nt(P,"CVER",22),this.D&&Nt(P,"X-HTTP-Session-Id",this.D),nu(this,P),oe&&(this.O?x="headers="+encodeURIComponent(String(dh(oe)))+"&"+x:this.m&&Kn(P,this.m,oe)),Ic(this.h,Q),this.Ua&&Nt(P,"TYPE","init"),this.P?(Nt(P,"$req",x),Nt(P,"SID","null"),Q.T=!0,oo(Q,P,null)):oo(Q,P,x),this.G=2}}else this.G==3&&(_?ph(this,_):this.i.length==0||xc(this.h)||ph(this))};function ph(_,x){var P;x?P=x.l:P=_.U++;const B=ai(_.I);Nt(B,"SID",_.K),Nt(B,"RID",P),Nt(B,"AID",_.T),nu(_,B),_.m&&_.o&&Kn(B,_.m,_.o),P=new un(_,_.j,P,_.B+1),_.m===null&&(P.H=_.o),x&&(_.i=x.D.concat(_.i)),x=Mg(_,P,1e3),P.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),Ic(_.h,P),oo(P,B,x)}function nu(_,x){_.H&&H(_.H,function(P,B){Nt(x,B,P)}),_.l&&ah({},function(P,B){Nt(x,B,P)})}function Mg(_,x,P){P=Math.min(_.i.length,P);var B=_.l?v(_.l.Na,_.l,_):null;e:{var Q=_.i;let oe=-1;for(;;){const Ae=["count="+P];oe==-1?0<P?(oe=Q[0].g,Ae.push("ofs="+oe)):oe=0:Ae.push("ofs="+oe);let ut=!0;for(let Vn=0;Vn<P;Vn++){let ct=Q[Vn].g;const Wn=Q[Vn].map;if(ct-=oe,0>ct)oe=Math.max(0,Q[Vn].g-100),ut=!1;else try{Io(Wn,Ae,"req"+ct+"_")}catch{B&&B(Wn)}}if(ut){B=Ae.join("&");break e}}}return _=_.i.splice(0,P),x.D=_,B}function Dg(_){if(!_.g&&!_.u){_.Y=1;var x=_.Fa;le||K(),Se||(le(),Se=!0),Ve.add(x,_),_.v=0}}function mh(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=ve(v(_.Fa,_),gh(_,_.v)),_.v++,!0)}t.Fa=function(){if(this.u=null,kg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=ve(v(this.ab,this),_)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,we(10),Oc(this),kg(this))};function ru(_){_.A!=null&&(l.clearTimeout(_.A),_.A=null)}function kg(_){_.g=new un(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var x=ai(_.qa);Nt(x,"RID","rpc"),Nt(x,"SID",_.K),Nt(x,"AID",_.T),Nt(x,"CI",_.F?"0":"1"),!_.F&&_.ja&&Nt(x,"TO",_.ja),Nt(x,"TYPE","xmlhttp"),nu(_,x),_.m&&_.o&&Kn(x,_.m,_.o),_.L&&(_.g.I=_.L);var P=_.g;_=_.ia,P.L=1,P.v=Yl(ai(x)),P.m=null,P.P=!0,ys(P,_)}t.Za=function(){this.C!=null&&(this.C=null,Oc(this),mh(this),we(19))};function Vc(_){_.C!=null&&(l.clearTimeout(_.C),_.C=null)}function Og(_,x){var P=null;if(_.g==x){Vc(_),ru(_),_.g=null;var B=2}else if(oh(_.h,x))P=x.D,Mr(_.h,x),B=1;else return;if(_.G!=0){if(x.o)if(B==1){P=x.m?x.m.length:0,x=Date.now()-x.F;var Q=_.B;B=io(),mt(B,new ye(B,P)),Lc(_)}else Dg(_);else if(Q=x.s,Q==3||Q==0&&0<x.X||!(B==1&&DT(_,x)||B==2&&mh(_)))switch(P&&0<P.length&&(x=_.h,x.i=x.i.concat(P)),Q){case 1:Ss(_,5);break;case 4:Ss(_,10);break;case 3:Ss(_,6);break;default:Ss(_,2)}}}function gh(_,x){let P=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(P*=2),P*x}function Ss(_,x){if(_.j.info("Error code "+x),x==2){var P=v(_.fb,_),B=_.Xa;const Q=!B;B=new In(B||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Wl(B,"https"),Yl(B),Q?Ql(B.toString(),P):so(B.toString(),P)}else we(2);_.G=0,_.l&&_.l.sa(x),Lg(_),Ng(_)}t.fb=function(_){_?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function Lg(_){if(_.G=0,_.ka=[],_.l){const x=sh(_.h);(x.length!=0||_.i.length!=0)&&(A(_.ka,x),A(_.ka,_.i),_.h.i.length=0,S(_.i),_.i.length=0),_.l.ra()}}function Vg(_,x,P){var B=P instanceof In?ai(P):new In(P);if(B.g!="")x&&(B.g=x+"."+B.g),Ia(B,B.s);else{var Q=l.location;B=Q.protocol,x=x?x+"."+Q.hostname:Q.hostname,Q=+Q.port;var oe=new In(null);B&&Wl(oe,B),x&&(oe.g=x),Q&&Ia(oe,Q),P&&(oe.l=P),B=oe}return P=_.D,x=_.ya,P&&x&&Nt(B,P,x),Nt(B,"VER",_.la),nu(_,B),B}function Ug(_,x,P){if(x&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=_.Ca&&!_.pa?new wt(new Ra({eb:P})):new wt(_.pa),x.Ha(_.J),x}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fg(){}t=Fg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Uc(){}Uc.prototype.g=function(_,x){return new Dr(_,x)};function Dr(_,x){en.call(this),this.g=new kc(x),this.l=_,this.h=x&&x.messageUrlParams||null,_=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(_?_["X-WebChannel-Content-Type"]=x.messageContentType:_={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(_?_["X-WebChannel-Client-Profile"]=x.va:_={"X-WebChannel-Client-Profile":x.va}),this.g.S=_,(_=x&&x.Sb)&&!D(_)&&(this.g.m=_),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!D(x)&&(this.g.D=x,_=this.h,_!==null&&x in _&&(_=this.h,x in _&&delete _[x])),this.j=new Mo(this)}b(Dr,en),Dr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dr.prototype.close=function(){hh(this.g)},Dr.prototype.o=function(_){var x=this.g;if(typeof _=="string"){var P={};P.__data__=_,_=P}else this.u&&(P={},P.__data__=ii(_),_=P);x.i.push(new xg(x.Ya++,_)),x.G==3&&Lc(x)},Dr.prototype.N=function(){this.g.l=null,delete this.j,hh(this.g),delete this.g,Dr.aa.N.call(this)};function Bg(_){oi.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var x=_.__sm__;if(x){e:{for(const P in x){_=P;break e}_=void 0}(this.i=_)&&(_=this.i,x=x!==null&&_ in x?x[_]:void 0),this.data=x}else this.data=_}b(Bg,oi);function qg(){Aa.call(this),this.status=1}b(qg,Aa);function Mo(_){this.g=_}b(Mo,Fg),Mo.prototype.ua=function(){mt(this.g,"a")},Mo.prototype.ta=function(_){mt(this.g,new Bg(_))},Mo.prototype.sa=function(_){mt(this.g,new qg)},Mo.prototype.ra=function(){mt(this.g,"b")},Uc.prototype.createWebChannel=Uc.prototype.g,Dr.prototype.send=Dr.prototype.o,Dr.prototype.open=Dr.prototype.m,Dr.prototype.close=Dr.prototype.close,mB=function(){return new Uc},pB=function(){return io()},hB=si,XS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},et.NO_ERROR=0,et.TIMEOUT=8,et.HTTP_ERROR=6,Av=et,ln.COMPLETE="complete",dB=ln,ms.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",en.prototype.listen=en.prototype.K,Ip=ms,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,fB=wt}).apply(typeof Hy<"u"?Hy:typeof self<"u"?self:typeof window<"u"?window:{});const AD="@firebase/firestore",xD="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}er.UNAUTHENTICATED=new er(null),er.GOOGLE_CREDENTIALS=new er("google-credentials-uid"),er.FIRST_PARTY=new er("first-party-uid"),er.MOCK_USER=new er("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new o0("@firebase/firestore");function Sf(){return vl.logLevel}function CQ(t){vl.setLogLevel(t)}function ge(t,...e){if(vl.logLevel<=it.DEBUG){const n=e.map(gC);vl.debug(`Firestore (${kd}): ${t}`,...n)}}function An(t,...e){if(vl.logLevel<=it.ERROR){const n=e.map(gC);vl.error(`Firestore (${kd}): ${t}`,...n)}}function rs(t,...e){if(vl.logLevel<=it.WARN){const n=e.map(gC);vl.warn(`Firestore (${kd}): ${t}`,...n)}}function gC(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,gB(t,r,n)}function gB(t,e,n){let r=`FIRESTORE (${kd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw An(r),new Error(r)}function ke(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||gB(e,i,r)}function IQ(t,e){t||Re(57014,e)}function Ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(er.UNAUTHENTICATED)))}shutdown(){}}class PQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class NQ{constructor(e){this.t=e,this.currentUser=er.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _r,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},l=c=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _r)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string",31837,{l:r}),new yB(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new er(e)}}class MQ{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=er.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DQ{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new MQ(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(er.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class CD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kQ{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ke(this.o===void 0,3512);const r=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new CD(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new CD(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=OQ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Ke(t,e){return t<e?-1:t>e?1:0}function ZS(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return Hw(i)===Hw(o)?Ke(i,o):Hw(i)?1:-1}return Ke(t.length,e.length)}const LQ=55296,VQ=57343;function Hw(t){const e=t.charCodeAt(0);return e>=LQ&&e<=VQ}function Qf(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function vB(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="__name__";class Fo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Fo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fo?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Fo.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Ke(e.length,n.length)}static compareSegments(e,n){const r=Fo.isNumericId(e),i=Fo.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Fo.extractNumericId(e).compare(Fo.extractNumericId(n)):ZS(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cl.fromString(e.substring(4,e.length-2))}}class ot extends Fo{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const UQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Fo{construct(e,n,r){return new rn(e,n,r)}static isValidIdentifier(e){return UQ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ID}static keyField(){return new rn([ID])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new pe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new pe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new pe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(ot.fromString(e))}static fromName(e){return new xe(ot.fromString(e).popFirst(5))}static empty(){return new xe(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t,e,n){if(!n)throw new pe(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _B(t,e,n,r){if(e===!0&&r===!0)throw new pe(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RD(t){if(!xe.isDocumentKey(t))throw new pe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PD(t){if(xe.isDocumentKey(t))throw new pe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TB(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function pt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_0(t);throw new pe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function EB(t,e){if(e<=0)throw new pe(ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Gm(t,e){if(!TB(t))throw new pe(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new pe(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=-62135596800,MD=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*MD);return new bt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ND)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/MD}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gm(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ND;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:Dn("string",bt._jsonSchemaVersion),seconds:Dn("number"),nanoseconds:Dn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new bt(0,0))}static max(){return new Ue(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=-1;class Jv{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function eA(t){return t.fields.find((e=>e.kind===2))}function wu(t){return t.fields.filter((e=>e.kind!==2))}Jv.UNKNOWN_ID=-1;class xv{constructor(e,n){this.fieldPath=e,this.kind=n}}class am{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new am(0,Ci.min())}}function wB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ue.fromTimestamp(r===1e9?new bt(n+1,0):new bt(n,r));return new Ci(i,xe.empty(),e)}function bB(t){return new Ci(t.readTime,t.key,Xf)}class Ci{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ci(Ue.min(),xe.empty(),Xf)}static max(){return new Ci(Ue.max(),xe.empty(),Xf)}}function _C(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==SB)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):X.reject(n)}static resolve(e){return new X(((n,r)=>{n(e)}))}static reject(e){return new X(((n,r)=>{r(e)}))}static waitFor(e){return new X(((n,r)=>{let i=0,o=0,s=!1;e.forEach((l=>{++i,l.next((()=>{++o,s&&o===i&&n()}),(c=>r(c)))})),s=!0,o===i&&n()}))}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next((i=>i?X.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,o)=>{r.push(n.call(this,i,o))})),this.waitFor(r)}static mapArray(e,n){return new X(((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let c=0;c<o;c++){const f=c;n(e[f]).next((h=>{s[f]=h,++l,l===o&&r(s)}),(h=>i(h)))}}))}static doWhile(e,n){return new X(((r,i)=>{const o=()=>{e()===!0?n().next((()=>{o()}),i):r()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="SimpleDb";class T0{static open(e,n,r,i){try{return new T0(n,e.transaction(i,r))}catch(o){throw new qp(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new _r,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new qp(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=TC(r.target.error);this.S.reject(new qp(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ge(yi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new BQ(n)}}class Qo{static delete(e){return ge(yi,"Removing database:",e),Cu(qx().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!tm())return!1;if(Qo.F())return!0;const e=fn(),n=Qo.M(e),r=0<n&&n<10,i=xB(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Qo.M(fn())===12.2&&An("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ge(yi,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;n(s)},i.onblocked=()=>{r(new qp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?r(new pe(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new pe(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new qp(e,s))},i.onupgradeneeded=o=>{ge(yi,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.N.k(s,i.transaction,o.oldVersion,this.version).next((()=>{ge(yi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const o=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const l=T0.open(this.db,e,o?"readonly":"readwrite",r),c=i(l).next((f=>(l.C(),f))).catch((f=>(l.abort(f),X.reject(f)))).toPromise();return c.catch((()=>{})),await l.D,c}catch(l){const c=l,f=c.name!=="FirebaseError"&&s<3;if(ge(yi,"Transaction failed with error:",c.message,"Retrying:",f),this.close(),!f)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function xB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class FQ{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Cu(this.U.delete())}}class qp extends pe{constructor(e,n){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Nl(t){return t.name==="IndexedDbTransactionError"}class BQ{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ge(yi,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ge(yi,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cu(r)}add(e){return ge(yi,"ADD",this.store.name,e,e),Cu(this.store.add(e))}get(e){return Cu(this.store.get(e)).next((n=>(n===void 0&&(n=null),ge(yi,"GET",this.store.name,e,n),n)))}delete(e){return ge(yi,"DELETE",this.store.name,e),Cu(this.store.delete(e))}count(){return ge(yi,"COUNT",this.store.name),Cu(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new X(((s,l)=>{o.onerror=c=>{l(c.target.error)},o.onsuccess=c=>{s(c.target.result)}}))}{const o=this.cursor(r),s=[];return this.H(o,((l,c)=>{s.push(c)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new X(((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){ge(yi,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((o,s,l)=>l.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new X(((r,i)=>{n.onerror=o=>{const s=TC(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next((l=>{l?s.continue():r()})):r()}}))}H(e,n){const r=[];return new X(((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const l=s.target.result;if(!l)return void i();const c=new FQ(l),f=n(l.primaryKey,l.value,c);if(f instanceof X){const h=f.catch((g=>(c.done(),X.reject(g))));r.push(h)}c.isDone?i():c.G===null?l.continue():l.continue(c.G)}})).next((()=>X.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Cu(t){return new X(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=TC(r.target.error);n(i)}}))}let DD=!1;function TC(t){const e=Qo.M(fn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DD||(DD=!0,setTimeout((()=>{throw r}),0)),r}}return t}const $p="IndexBackfiller";class qQ{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ge($p,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();ge($p,`Documents written: ${n}`)}catch(n){Nl(n)?ge($p,"Ignoring IndexedDB error during index backfill: ",n):await Pl(n)}await this.re(6e4)}))}}class $Q{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,o=!0;return X.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return ge($p,`Processing collection: ${s}`),this.oe(e,s,i).next((l=>{i-=l,r.add(s)}));o=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,o))).next((l=>(ge($p,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,o)=>{const s=bB(o);_C(s,r)>0&&(r=s)})),new Ci(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=-1;function jm(t){return t==null}function lm(t){return t===0&&1/t==-1/0}function CB(t){return typeof t=="number"&&Number.isInteger(t)&&!lm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="";function Pr(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kD(e)),e=zQ(t.get(n),e);return kD(e)}function zQ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case Qv:n+="";break;default:n+=o}}return n}function kD(t){return t+Qv+""}function Wo(t){const e=t.length;if(ke(e>=2,64408,{path:t}),e===2)return ke(t.charAt(0)===Qv&&t.charAt(1)==="",56145,{path:t}),ot.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf(Qv,o);switch((s<0||s>n)&&Re(50515,{path:t}),t.charAt(s+1)){case"":const l=t.substring(o,s);let c;i.length===0?c=l:(i+=l,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Re(61167,{path:t})}o=s+2}return new ot(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu="remoteDocuments",Km="owner",mf="owner",um="mutationQueues",HQ="userId",co="mutations",OD="batchId",Du="userMutationsIndex",LD=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t,e){return[t,Pr(e)]}function IB(t,e,n){return[t,Pr(e),n]}const GQ={},Zf="documentMutations",Xv="remoteDocumentsV14",jQ=["prefixPath","collectionGroup","readTime","documentId"],Iv="documentKeyIndex",KQ=["prefixPath","collectionGroup","documentId"],RB="collectionGroupIndex",WQ=["collectionGroup","readTime","prefixPath","documentId"],cm="remoteDocumentGlobal",tA="remoteDocumentGlobalKey",ed="targets",PB="queryTargetsIndex",YQ=["canonicalId","targetId"],td="targetDocuments",JQ=["targetId","path"],EC="documentTargetsIndex",QQ=["path","targetId"],Zv="targetGlobalKey",qu="targetGlobal",fm="collectionParents",XQ=["collectionId","parent"],nd="clientMetadata",ZQ="clientId",E0="bundles",eX="bundleId",w0="namedQueries",tX="name",wC="indexConfiguration",nX="indexId",nA="collectionGroupIndex",rX="collectionGroup",zp="indexState",iX=["indexId","uid"],NB="sequenceNumberIndex",oX=["uid","sequenceNumber"],Hp="indexEntries",sX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MB="documentKeyIndex",aX=["indexId","uid","orderedDocumentKey"],b0="documentOverlays",lX=["userId","collectionPath","documentId"],rA="collectionPathOverlayIndex",uX=["userId","collectionPath","largestBatchId"],DB="collectionGroupOverlayIndex",cX=["userId","collectionGroup","largestBatchId"],bC="globals",fX="name",kB=[um,co,Zf,bu,ed,Km,qu,td,nd,cm,fm,E0,w0],dX=[...kB,b0],OB=[um,co,Zf,Xv,ed,Km,qu,td,nd,cm,fm,E0,w0,b0],LB=OB,SC=[...LB,wC,zp,Hp],hX=SC,VB=[...SC,bC],pX=VB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA extends AB{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function zn(t,e){const n=Ie(t);return Qo.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ml(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function UB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.comparator=e,this.root=n||mr.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gy(this.root,e,this.comparator,!0)}}class Gy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mr{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??mr.RED,this.left=i??mr.EMPTY,this.right=o??mr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new mr(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return mr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new UD(this.data.getIterator())}getIteratorFrom(e){return new UD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class UD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gf(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new ei([])}unionWith(e){let n=new It(rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qf(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mX(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new FB("Invalid base64 string: "+o):o}})(e);return new yn(n)}static fromUint8Array(e){const n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const gX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ta(t){if(ke(!!t,39018),typeof t=="string"){let e=0;const n=gX.exec(t);if(ke(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nn(t.seconds),nanos:nn(t.nanos)}}function nn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function na(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BB="server_timestamp",qB="__type__",$B="__previous_value__",zB="__local_write_time__";function S0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[qB])==null?void 0:r.stringValue)===BB}function A0(t){const e=t.mapValue.fields[$B];return S0(e)?A0(e):e}function dm(t){const e=ta(t.mapValue.fields[zB].timestampValue);return new bt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yX{constructor(e,n,r,i,o,s,l,c,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=h}}const e_="(default)";class _l{constructor(e,n){this.projectId=e,this.database=n||e_}static empty(){return new _l("","")}get isDefaultDatabase(){return this.database===e_}isEqual(e){return e instanceof _l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="__type__",HB="__max__",sl={mapValue:{fields:{__type__:{stringValue:HB}}}},xC="__vector__",rd="value",Rv={nullValue:"NULL_VALUE"};function Tl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?S0(t)?4:GB(t)?9007199254740991:x0(t)?10:11:Re(28295,{value:t})}function is(t,e){if(t===e)return!0;const n=Tl(t);if(n!==Tl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dm(t).isEqual(dm(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ta(i.timestampValue),l=ta(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return na(i.bytesValue).isEqual(na(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return nn(i.geoPointValue.latitude)===nn(o.geoPointValue.latitude)&&nn(i.geoPointValue.longitude)===nn(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return nn(i.integerValue)===nn(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=nn(i.doubleValue),l=nn(o.doubleValue);return s===l?lm(s)===lm(l):isNaN(s)&&isNaN(l)}return!1})(t,e);case 9:return Qf(t.arrayValue.values||[],e.arrayValue.values||[],is);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(VD(s)!==VD(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!is(s[c],l[c])))return!1;return!0})(t,e);default:return Re(52216,{left:t})}}function hm(t,e){return(t.values||[]).find((n=>is(n,e)))!==void 0}function El(t,e){if(t===e)return 0;const n=Tl(t),r=Tl(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return(function(o,s){const l=nn(o.integerValue||o.doubleValue),c=nn(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return FD(t.timestampValue,e.timestampValue);case 4:return FD(dm(t),dm(e));case 5:return ZS(t.stringValue,e.stringValue);case 6:return(function(o,s){const l=na(o),c=na(s);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){const l=o.split("/"),c=s.split("/");for(let f=0;f<l.length&&f<c.length;f++){const h=Ke(l[f],c[f]);if(h!==0)return h}return Ke(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){const l=Ke(nn(o.latitude),nn(s.latitude));return l!==0?l:Ke(nn(o.longitude),nn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return BD(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var v,E,b,S;const l=o.fields||{},c=s.fields||{},f=(v=l[rd])==null?void 0:v.arrayValue,h=(E=c[rd])==null?void 0:E.arrayValue,g=Ke(((b=f==null?void 0:f.values)==null?void 0:b.length)||0,((S=h==null?void 0:h.values)==null?void 0:S.length)||0);return g!==0?g:BD(f,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===sl.mapValue&&s===sl.mapValue)return 0;if(o===sl.mapValue)return 1;if(s===sl.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),f=s.fields||{},h=Object.keys(f);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){const v=ZS(c[g],h[g]);if(v!==0)return v;const E=El(l[c[g]],f[h[g]]);if(E!==0)return E}return Ke(c.length,h.length)})(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function FD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=ta(t),r=ta(e),i=Ke(n.seconds,r.seconds);return i!==0?i:Ke(n.nanos,r.nanos)}function BD(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=El(n[i],r[i]);if(o)return o}return Ke(n.length,r.length)}function id(t){return oA(t)}function oA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=ta(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return na(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return xe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=oA(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${oA(n.fields[s])}`;return i+"}"})(t.mapValue):Re(61005,{value:t})}function Pv(t){switch(Tl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=A0(t);return e?16+Pv(e):16;case 5:return 2*t.stringValue.length;case 6:return na(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Pv(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Ml(r.fields,((o,s)=>{i+=o.length+Pv(s)})),i})(t.mapValue);default:throw Re(13486,{value:t})}}function Yu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sA(t){return!!t&&"integerValue"in t}function pm(t){return!!t&&"arrayValue"in t}function qD(t){return!!t&&"nullValue"in t}function $D(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nv(t){return!!t&&"mapValue"in t}function x0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[AC])==null?void 0:r.stringValue)===xC}function Gp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ml(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Gp(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gp(t.arrayValue.values[n]);return e}return{...t}}function GB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HB}const jB={mapValue:{fields:{[AC]:{stringValue:xC},[rd]:{arrayValue:{}}}}};function vX(t){return"nullValue"in t?Rv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Yu(_l.empty(),xe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?x0(t)?jB:{mapValue:{}}:Re(35942,{value:t})}function _X(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Yu(_l.empty(),xe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?jB:"mapValue"in t?x0(t)?{mapValue:{}}:sl:Re(61959,{value:t})}function zD(t,e){const n=El(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function HD(t,e){const n=El(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.value=e}static empty(){return new yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gp(n)}setAll(e){let n=rn.emptyPath(),r={},i=[];e.forEach(((s,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Gp(s):i.push(l.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Nv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Nv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ml(n,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new yr(Gp(this.value))}}function KB(t){const e=[];return Ml(t.fields,((n,r)=>{const i=new rn([n]);if(Nv(r)){const o=KB(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new ei(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Jt(e,0,Ue.min(),Ue.min(),Ue.min(),yr.empty(),0)}static newFoundDocument(e,n,r,i){return new Jt(e,1,n,Ue.min(),r,i,0)}static newNoDocument(e,n){return new Jt(e,2,n,Ue.min(),Ue.min(),yr.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,Ue.min(),Ue.min(),yr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.position=e,this.inclusive=n}}function GD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=xe.comparator(xe.fromName(s.referenceValue),n.key):r=El(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function jD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!is(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n="asc"){this.field=e,this.dir=n}}function TX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{}class lt extends WB{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new EX(e,n,r):n==="array-contains"?new SX(e,r):n==="in"?new eq(e,r):n==="not-in"?new AX(e,r):n==="array-contains-any"?new xX(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wX(e,r):new bX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(El(n,this.value)):n!==null&&Tl(this.value)===Tl(n)&&this.matchesComparison(El(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ct extends WB{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ct(e,n)}matches(e){return od(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function od(t){return t.op==="and"}function aA(t){return t.op==="or"}function CC(t){return YB(t)&&od(t)}function YB(t){for(const e of t.filters)if(e instanceof Ct)return!1;return!0}function lA(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+id(t.value);if(CC(t))return t.filters.map((e=>lA(e))).join(",");{const e=t.filters.map((n=>lA(n))).join(",");return`${t.op}(${e})`}}function JB(t,e){return t instanceof lt?(function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&is(r.value,i.value)})(t,e):t instanceof Ct?(function(r,i){return i instanceof Ct&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,s,l)=>o&&JB(s,i.filters[l])),!0):!1})(t,e):void Re(19439)}function QB(t,e){const n=t.filters.concat(e);return Ct.create(n,t.op)}function XB(t){return t instanceof lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${id(n.value)}`})(t):t instanceof Ct?(function(n){return n.op.toString()+" {"+n.getFilters().map(XB).join(" ,")+"}"})(t):"Filter"}class EX extends lt{constructor(e,n,r){super(e,n,r),this.key=xe.fromName(r.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class wX extends lt{constructor(e,n){super(e,"in",n),this.keys=ZB("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class bX extends lt{constructor(e,n){super(e,"not-in",n),this.keys=ZB("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function ZB(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>xe.fromName(r.referenceValue)))}class SX extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pm(n)&&hm(n.arrayValue,this.value)}}class eq extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hm(this.value.arrayValue,n)}}class AX extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(hm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hm(this.value.arrayValue,n)}}class xX extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>hm(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.Te=null}}function uA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new CX(t,e,n,r,i,o,s)}function Ju(t){const e=Ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>lA(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),jm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>id(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>id(r))).join(",")),e.Te=n}return e.Te}function Wm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!TX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JB(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jD(t.startAt,e.startAt)&&jD(t.endAt,e.endAt)}function t_(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function n_(t,e){return t.filters.filter((n=>n instanceof lt&&n.field.isEqual(e)))}function KD(t,e,n){let r=Rv,i=!0;for(const o of n_(t,e)){let s=Rv,l=!0;switch(o.op){case"<":case"<=":s=vX(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,l=!1;break;case"!=":case"not-in":s=Rv}zD({value:r,inclusive:i},{value:s,inclusive:l})<0&&(r=s,i=l)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];zD({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function WD(t,e,n){let r=sl,i=!0;for(const o of n_(t,e)){let s=sl,l=!0;switch(o.op){case">=":case">":s=_X(o.value),l=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,l=!1;break;case"!=":case"not-in":s=sl}HD({value:r,inclusive:i},{value:s,inclusive:l})>0&&(r=s,i=l)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];HD({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tq(t,e,n,r,i,o,s,l){return new ca(t,e,n,r,i,o,s,l)}function Od(t){return new ca(t)}function YD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function IC(t){return t.collectionGroup!==null}function Uf(t){const e=Ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new It(rn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new mm(o,r))})),n.has(rn.keyField().canonicalString())||e.Ie.push(new mm(rn.keyField(),r))}return e.Ie}function zr(t){const e=Ie(t);return e.Ee||(e.Ee=IX(e,Uf(t))),e.Ee}function IX(t,e){if(t.limitType==="F")return uA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new mm(i.field,o)}));const n=t.endAt?new wl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wl(t.startAt.position,t.startAt.inclusive):null;return uA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cA(t,e){const n=t.filters.concat([e]);return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function r_(t,e,n){return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ym(t,e){return Wm(zr(t),zr(e))&&t.limitType===e.limitType}function nq(t){return`${Ju(zr(t))}|lt:${t.limitType}`}function Af(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>XB(i))).join(", ")}]`),jm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>id(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>id(i))).join(",")),`Target(${r})`})(zr(t))}; limitType=${t.limitType})`}function Jm(t,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):xe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(const o of Uf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,l,c){const f=GD(s,l,c);return s.inclusive?f<=0:f<0})(r.startAt,Uf(r),i)||r.endAt&&!(function(s,l,c){const f=GD(s,l,c);return s.inclusive?f>=0:f>0})(r.endAt,Uf(r),i))})(t,e)}function rq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iq(t){return(e,n)=>{let r=!1;for(const i of Uf(t)){const o=RX(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function RX(t,e,n){const r=t.field.isKeyField()?xe.comparator(e.key,n.key):(function(o,s,l){const c=s.data.field(o),f=l.data.field(o);return c!==null&&f!==null?El(c,f):Re(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ml(this.inner,((n,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return UB(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PX=new jt(xe.comparator);function ti(){return PX}const oq=new jt(xe.comparator);function Rp(...t){let e=oq;for(const n of t)e=e.insert(n.key,n);return e}function sq(t){let e=oq;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Yo(){return jp()}function aq(){return jp()}function jp(){return new fa((t=>t.toString()),((t,e)=>t.isEqual(e)))}const NX=new jt(xe.comparator),MX=new It(xe.comparator);function Je(...t){let e=MX;for(const n of t)e=e.add(n);return e}const DX=new It(Ke);function RC(){return DX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lm(e)?"-0":e}}function lq(t){return{integerValue:""+t}}function uq(t,e){return CB(e)?lq(e):PC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this._=void 0}}function kX(t,e,n){return t instanceof sd?(function(i,o){const s={fields:{[qB]:{stringValue:BB},[zB]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&S0(o)&&(o=A0(o)),o&&(s.fields[$B]=o),{mapValue:s}})(n,e):t instanceof Qu?fq(t,e):t instanceof Xu?dq(t,e):(function(i,o){const s=cq(i,o),l=JD(s)+JD(i.Ae);return sA(s)&&sA(i.Ae)?lq(l):PC(i.serializer,l)})(t,e)}function OX(t,e,n){return t instanceof Qu?fq(t,e):t instanceof Xu?dq(t,e):n}function cq(t,e){return t instanceof ad?(function(r){return sA(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class sd extends C0{}class Qu extends C0{constructor(e){super(),this.elements=e}}function fq(t,e){const n=hq(e);for(const r of t.elements)n.some((i=>is(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Xu extends C0{constructor(e){super(),this.elements=e}}function dq(t,e){let n=hq(e);for(const r of t.elements)n=n.filter((i=>!is(i,r)));return{arrayValue:{values:n}}}class ad extends C0{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function JD(t){return nn(t.integerValue||t.doubleValue)}function hq(t){return pm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.field=e,this.transform=n}}function LX(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Qu&&i instanceof Qu||r instanceof Xu&&i instanceof Xu?Qf(r.elements,i.elements,is):r instanceof ad&&i instanceof ad?is(r.Ae,i.Ae):r instanceof sd&&i instanceof sd})(t.transform,e.transform)}class VX{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class I0{}function pq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vd(t.key,on.none()):new Ld(t.key,t.data,on.none());{const n=t.data,r=yr.empty();let i=new It(rn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new da(t.key,r,new ei(i.toArray()),on.none())}}function UX(t,e,n){t instanceof Ld?(function(i,o,s){const l=i.value.clone(),c=XD(i.fieldTransforms,o,s.transformResults);l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(t,e,n):t instanceof da?(function(i,o,s){if(!Mv(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=XD(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(mq(i)),c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Kp(t,e,n,r){return t instanceof Ld?(function(o,s,l,c){if(!Mv(o.precondition,s))return l;const f=o.value.clone(),h=ZD(o.fieldTransforms,c,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof da?(function(o,s,l,c){if(!Mv(o.precondition,s))return l;const f=ZD(o.fieldTransforms,c,s),h=s.data;return h.setAll(mq(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(o,s,l){return Mv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(t,e,n)}function FX(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=cq(r.transform,i||null);o!=null&&(n===null&&(n=yr.empty()),n.set(r.field,o))}return n||null}function QD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qf(r,i,((o,s)=>LX(o,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ld extends I0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class da extends I0{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function mq(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function XD(t,e,n){const r=new Map;ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,OX(s,l,n[i]))}return r}function ZD(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,kX(o,s,e))}return r}class Vd extends I0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NC extends I0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&UX(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Kp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Kp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=aq();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const c=pq(s,l);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&Qf(this.mutations,e.mutations,((n,r)=>QD(n,r)))&&Qf(this.baseMutations,e.baseMutations,((n,r)=>QD(n,r)))}}class DC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return NX})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new DC(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BX{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn,dt;function gq(t){switch(t){case ie.OK:return Re(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function yq(t){if(t===void 0)return An("GRPC error has no .code"),ie.UNKNOWN;switch(t){case Nn.OK:return ie.OK;case Nn.CANCELLED:return ie.CANCELLED;case Nn.UNKNOWN:return ie.UNKNOWN;case Nn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Nn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Nn.INTERNAL:return ie.INTERNAL;case Nn.UNAVAILABLE:return ie.UNAVAILABLE;case Nn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Nn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Nn.NOT_FOUND:return ie.NOT_FOUND;case Nn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Nn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Nn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Nn.ABORTED:return ie.ABORTED;case Nn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Nn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Nn.DATA_LOSS:return ie.DATA_LOSS;default:return Re(39323,{code:t})}}(dt=Nn||(Nn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qX=new cl([4294967295,4294967295],0);function ek(t){const e=vq().encode(t),n=new cB;return n.update(e),new Uint8Array(n.digest())}function tk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new cl([n,r],0),new cl([i,o],0)]}class OC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pp(`Invalid padding: ${n}`);if(r<0)throw new Pp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pp(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=cl.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(cl.fromNumber(r)));return i.compare(qX)===1&&(i=new cl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ek(e),[r,i]=tk(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new OC(o,i,n);return r.forEach((l=>s.insert(l))),s}insert(e){if(this.ge===0)return;const n=ek(e),[r,i]=tk(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Zm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xm(Ue.min(),i,new jt(Ke),ti(),Je())}}class Zm{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zm(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class _q{constructor(e,n){this.targetId=e,this.Ce=n}}class Tq{constructor(e,n,r=yn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class nk{constructor(){this.ve=0,this.Fe=rk(),this.Me=yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),r=Je();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Re(38017,{changeType:o})}})),new Zm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=rk()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $X{constructor(e){this.Ge=e,this.ze=new Map,this.je=ti(),this.Je=jy(),this.He=jy(),this.Ye=new jt(Ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(t_(o))if(r===0){const s=new xe(o.path);this.et(n,s,Jt.newNoDocument(s,Ue.min()))}else ke(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const l=this.ut(e),c=l?this.ct(l,e,s):1;if(c!==0){this.it(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=na(r).toUint8Array()}catch(c){if(c instanceof FB)return rs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new OC(s,i,o)}catch(c){return rs(c instanceof Pp?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((o=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(n,o,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((o,s)=>{const l=this.ot(s);if(l){if(o.current&&t_(l.target)){const c=new xe(l.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Jt.newNoDocument(c,e))}o.Be&&(n.set(s,o.ke()),o.qe())}}));let r=Je();this.He.forEach(((o,s)=>{let l=!0;s.forEachWhile((c=>{const f=this.ot(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new Xm(e,n,this.Ye,this.je,r);return this.je=ti(),this.Je=jy(),this.He=jy(),this.Ye=new jt(Ke),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new nk,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new It(Ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new It(Ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nk),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function jy(){return new jt(xe.comparator)}function rk(){return new jt(xe.comparator)}const zX={asc:"ASCENDING",desc:"DESCENDING"},HX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GX={and:"AND",or:"OR"};class jX{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fA(t,e){return t.useProto3Json||jm(e)?e:{value:e}}function ld(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Eq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KX(t,e){return ld(t,e.toTimestamp())}function xn(t){return ke(!!t,49232),Ue.fromTimestamp((function(n){const r=ta(n);return new bt(r.seconds,r.nanos)})(t))}function LC(t,e){return dA(t,e).canonicalString()}function dA(t,e){const n=(function(i){return new ot(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function wq(t){const e=ot.fromString(t);return ke(Mq(e),10190,{key:e.toString()}),e}function gm(t,e){return LC(t.databaseId,e.path)}function Xo(t,e){const n=wq(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(Aq(n))}function bq(t,e){return LC(t.databaseId,e)}function Sq(t){const e=wq(t);return e.length===4?ot.emptyPath():Aq(e)}function hA(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Aq(t){return ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ik(t,e,n){return{name:gm(t,e),fields:n.value.mapValue.fields}}function xq(t,e,n){const r=Xo(t,e.name),i=xn(e.updateTime),o=e.createTime?xn(e.createTime):Ue.min(),s=new yr({mapValue:{fields:e.fields}}),l=Jt.newFoundDocument(r,i,o,s);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function WX(t,e){return"found"in e?(function(r,i){ke(!!i.found,43571),i.found.name,i.found.updateTime;const o=Xo(r,i.found.name),s=xn(i.found.updateTime),l=i.found.createTime?xn(i.found.createTime):Ue.min(),c=new yr({mapValue:{fields:i.found.fields}});return Jt.newFoundDocument(o,s,l,c)})(t,e):"missing"in e?(function(r,i){ke(!!i.missing,3894),ke(!!i.readTime,22933);const o=Xo(r,i.missing),s=xn(i.readTime);return Jt.newNoDocument(o,s)})(t,e):Re(7234,{result:e})}function YX(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Re(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,h){return f.useProto3Json?(ke(h===void 0||typeof h=="string",58123),yn.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),yn.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(f){const h=f.code===void 0?ie.UNKNOWN:yq(f.code);return new pe(h,f.message||"")})(s);n=new Tq(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xo(t,r.document.name),o=xn(r.document.updateTime),s=r.document.createTime?xn(r.document.createTime):Ue.min(),l=new yr({mapValue:{fields:r.document.fields}}),c=Jt.newFoundDocument(i,o,s,l),f=r.targetIds||[],h=r.removedTargetIds||[];n=new Dv(f,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xo(t,r.document),o=r.readTime?xn(r.readTime):Ue.min(),s=Jt.newNoDocument(i,o),l=r.removedTargetIds||[];n=new Dv([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xo(t,r.document),o=r.removedTargetIds||[];n=new Dv([],o,i,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new BX(i,o),l=r.targetId;n=new _q(l,s)}}return n}function ym(t,e){let n;if(e instanceof Ld)n={update:ik(t,e.key,e.value)};else if(e instanceof Vd)n={delete:gm(t,e.key)};else if(e instanceof da)n={update:ik(t,e.key,e.data),updateMask:tZ(e.fieldMask)};else{if(!(e instanceof NC))return Re(16599,{Vt:e.type});n={verify:gm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,s){const l=s.transform;if(l instanceof sd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ad)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw Re(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:KX(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Re(27497)})(t,e.precondition)),n}function pA(t,e){const n=e.currentDocument?(function(o){return o.updateTime!==void 0?on.updateTime(xn(o.updateTime)):o.exists!==void 0?on.exists(o.exists):on.none()})(e.currentDocument):on.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,l){let c=null;if("setToServerValue"in l)ke(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new sd;else if("appendMissingElements"in l){const h=l.appendMissingElements.values||[];c=new Qu(h)}else if("removeAllFromArray"in l){const h=l.removeAllFromArray.values||[];c=new Xu(h)}else"increment"in l?c=new ad(s,l.increment):Re(16584,{proto:l});const f=rn.fromServerFormat(l.fieldPath);return new Qm(f,c)})(t,i))):[];if(e.update){e.update.name;const i=Xo(t,e.update.name),o=new yr({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const f=c.fieldPaths||[];return new ei(f.map((h=>rn.fromServerFormat(h))))})(e.updateMask);return new da(i,o,s,n,r)}return new Ld(i,o,n,r)}if(e.delete){const i=Xo(t,e.delete);return new Vd(i,n)}if(e.verify){const i=Xo(t,e.verify);return new NC(i,n)}return Re(1463,{proto:e})}function JX(t,e){return t&&t.length>0?(ke(e!==void 0,14353),t.map((n=>(function(i,o){let s=i.updateTime?xn(i.updateTime):xn(o);return s.isEqual(Ue.min())&&(s=xn(o)),new VX(s,i.transformResults||[])})(n,e)))):[]}function Cq(t,e){return{documents:[bq(t,e.path)]}}function Iq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bq(t,i);const o=(function(f){if(f.length!==0)return Nq(Ct.create(f,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const s=(function(f){if(f.length!==0)return f.map((h=>(function(v){return{field:xf(v.field),direction:XX(v.dir)}})(h)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=fA(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:i}}function Rq(t){let e=Sq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ke(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(g){const v=Pq(g);return v instanceof Ct&&CC(v)?v.getFilters():[v]})(n.where));let s=[];n.orderBy&&(s=(function(g){return g.map((v=>(function(b){return new mm(Cf(b.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v)))})(n.orderBy));let l=null;n.limit&&(l=(function(g){let v;return v=typeof g=="object"?g.value:g,jm(v)?null:v})(n.limit));let c=null;n.startAt&&(c=(function(g){const v=!!g.before,E=g.values||[];return new wl(E,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(g){const v=!g.before,E=g.values||[];return new wl(E,v)})(n.endAt)),tq(e,i,s,o,l,"F",c,f)}function QX(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Pq(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cf(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Cf(n.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Cf(n.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Cf(n.unaryFilter.field);return lt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return lt.create(Cf(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ct.create(n.compositeFilter.filters.map((r=>Pq(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(n.compositeFilter.op))})(t):Re(30097,{filter:t})}function XX(t){return zX[t]}function ZX(t){return HX[t]}function eZ(t){return GX[t]}function xf(t){return{fieldPath:t.canonicalString()}}function Cf(t){return rn.fromServerFormat(t.fieldPath)}function Nq(t){return t instanceof lt?(function(n){if(n.op==="=="){if($D(n.value))return{unaryFilter:{field:xf(n.field),op:"IS_NAN"}};if(qD(n.value))return{unaryFilter:{field:xf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($D(n.value))return{unaryFilter:{field:xf(n.field),op:"IS_NOT_NAN"}};if(qD(n.value))return{unaryFilter:{field:xf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xf(n.field),op:ZX(n.op),value:n.value}}})(t):t instanceof Ct?(function(n){const r=n.getFilters().map((i=>Nq(i)));return r.length===1?r[0]:{compositeFilter:{op:eZ(n.op),filters:r}}})(t):Re(54877,{filter:t})}function tZ(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Mq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n,r,i,o=Ue.min(),s=Ue.min(),l=yn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e){this.yt=e}}function nZ(t,e){let n;if(e.document)n=xq(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=xe.fromSegments(e.noDocument.path),i=ec(e.noDocument.readTime);n=Jt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Re(56709);{const r=xe.fromSegments(e.unknownDocument.path),i=ec(e.unknownDocument.version);n=Jt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const o=new bt(i[0],i[1]);return Ue.fromTimestamp(o)})(e.readTime)),n}function ok(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:i_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,s){return{name:gm(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ld(o,s.version.toTimestamp()),createTime:ld(o,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Zu(e.version)};else{if(!e.isUnknownDocument())return Re(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:Zu(e.version)}}return r}function i_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ec(t){const e=new bt(t.seconds,t.nanoseconds);return Ue.fromTimestamp(e)}function Iu(t,e){const n=(e.baseMutations||[]).map((o=>pA(t.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const l=e.mutations[o+1];s.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>pA(t.yt,o))),i=bt.fromMillis(e.localWriteTimeMs);return new MC(e.batchId,i,n,r)}function Np(t){const e=ec(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ec(t.lastLimboFreeSnapshotVersion):Ue.min();let r;return r=(function(o){return o.documents!==void 0})(t.query)?(function(o){const s=o.documents.length;return ke(s===1,1966,{count:s}),zr(Od(Sq(o.documents[0])))})(t.query):(function(o){return zr(Rq(o))})(t.query),new $s(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yn.fromBase64String(t.resumeToken))}function kq(t,e){const n=Zu(e.snapshotVersion),r=Zu(e.lastLimboFreeSnapshotVersion);let i;i=t_(e.target)?Cq(t.yt,e.target):Iq(t.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ju(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function VC(t){const e=Rq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?r_(e,e.limit,"L"):e}function Gw(t,e){return new kC(e.largestBatchId,pA(t.yt,e.overlayMutation))}function sk(t,e){const n=e.path.lastSegment();return[t,Pr(e.path.popLast()),n]}function ak(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Zu(r.readTime),documentKey:Pr(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{getBundleMetadata(e,n){return lk(e).get(n).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:ec(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,n){return lk(e).put((function(i){return{bundleId:i.id,createTime:Zu(xn(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return uk(e).get(n).next((r=>{if(r)return(function(o){return{name:o.name,query:VC(o.bundledQuery),readTime:ec(o.readTime)}})(r)}))}saveNamedQuery(e,n){return uk(e).put((function(i){return{name:i.name,readTime:Zu(xn(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function lk(t){return zn(t,E0)}function uk(t){return zn(t,w0)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new R0(e,r)}getOverlay(e,n){return cp(e).get(sk(this.userId,n)).next((r=>r?Gw(this.serializer,r):null))}getOverlays(e,n){const r=Yo();return X.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((o,s)=>{const l=new kC(n,s);i.push(this.St(e,l))})),X.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(Pr(s.getCollectionPath()))));const o=[];return i.forEach((s=>{const l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(cp(e).Z(rA,l))})),X.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Yo(),o=Pr(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return cp(e).J(rA,s).next((l=>{for(const c of l){const f=Gw(this.serializer,c);i.set(f.getKey(),f)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const o=Yo();let s;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return cp(e).ee({index:DB,range:l},((c,f,h)=>{const g=Gw(this.serializer,f);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()})).next((()=>o))}St(e,n){return cp(e).put((function(i,o,s){const[l,c,f]=sk(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ym(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function cp(t){return zn(t,b0)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{bt(e){return zn(e,bC)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?yn.fromUint8Array(r):yn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(nn(e.integerValue));else if("doubleValue"in e){const r=nn(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),lm(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=ta(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(na(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?GB(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):x0(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Re(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var s,l;const r=e.fields||{};this.Ft(n,53);const i=rd,o=((l=(s=r[i].arrayValue)==null?void 0:s.values)==null?void 0:l.length)||0;this.Ft(n,15),n.Mt(nn(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),xe.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ru.Kt=new Ru;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=255;function oZ(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function ck(t){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const s=oZ(255&r[o]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class sZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=ck(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=ck(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(yf),this.sn(255)}_n(){this.an(yf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===yf?(this.sn(yf),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===yf?(this.an(yf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class aZ{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class lZ{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class fp{constructor(){this.cn=new sZ,this.ln=new aZ(this.cn),this.hn=new lZ(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Pu(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:kv(this.En),directionalValue:kv(this.dn),orderedDocumentKey:kv(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Xa(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=fk(t.En,e.En),n!==0?n:(n=fk(t.dn,e.dn),n!==0?n:xe.comparator(t.In,e.In)))}function fk(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function kv(t){return W4()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function dk(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class hk{constructor(e){this.mn=new It(((n,r)=>rn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(ke(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=eA(e);if(n!==void 0&&!this.wn(n))return!1;const r=wu(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!i.has(l.field.canonicalString())){const c=r[o];if(!this.Sn(l,c)||!this.bn(this.fn[s++],c))return!1}++o}for(;o<r.length;++o){const l=r[o];if(s>=this.fn.length||!this.bn(this.fn[s++],l))return!1}return!0}Dn(){if(this.pn)return null;let e=new It(rn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new xv(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new xv(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new xv(r.field,r.dir==="asc"?0:1)));return new Jv(Jv.UNKNOWN_ID,this.collectionId,n,am.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oq(t){var n,r;if(ke(t instanceof lt||t instanceof Ct,20012),t instanceof lt){if(t instanceof eq){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((o=>lt.create(t.field,"==",o))))||[];return Ct.create(i,"or")}return t}const e=t.filters.map((i=>Oq(i)));return Ct.create(e,t.op)}function uZ(t){if(t.getFilters().length===0)return[];const e=yA(Oq(t));return ke(Lq(e),7391),mA(e)||gA(e)?[e]:e.getFilters()}function mA(t){return t instanceof lt}function gA(t){return t instanceof Ct&&CC(t)}function Lq(t){return mA(t)||gA(t)||(function(n){if(n instanceof Ct&&aA(n)){for(const r of n.getFilters())if(!mA(r)&&!gA(r))return!1;return!0}return!1})(t)}function yA(t){if(ke(t instanceof lt||t instanceof Ct,34018),t instanceof lt)return t;if(t.filters.length===1)return yA(t.filters[0]);const e=t.filters.map((r=>yA(r)));let n=Ct.create(e,t.op);return n=o_(n),Lq(n)?n:(ke(n instanceof Ct,64498),ke(od(n),40251),ke(n.filters.length>1,57927),n.filters.reduce(((r,i)=>UC(r,i))))}function UC(t,e){let n;return ke(t instanceof lt||t instanceof Ct,38388),ke(e instanceof lt||e instanceof Ct,25473),n=t instanceof lt?e instanceof lt?(function(i,o){return Ct.create([i,o],"and")})(t,e):pk(t,e):e instanceof lt?pk(e,t):(function(i,o){if(ke(i.filters.length>0&&o.filters.length>0,48005),od(i)&&od(o))return QB(i,o.getFilters());const s=aA(i)?i:o,l=aA(i)?o:i,c=s.filters.map((f=>UC(f,l)));return Ct.create(c,"or")})(t,e),o_(n)}function pk(t,e){if(od(e))return QB(e,t.getFilters());{const n=e.filters.map((r=>UC(t,r)));return Ct.create(n,"or")}}function o_(t){if(ke(t instanceof lt||t instanceof Ct,11850),t instanceof lt)return t;const e=t.getFilters();if(e.length===1)return o_(e[0]);if(YB(t))return t;const n=e.map((i=>o_(i))),r=[];return n.forEach((i=>{i instanceof lt?r.push(i):i instanceof Ct&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Ct.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(){this.Cn=new FC}addToCollectionParentIndex(e,n){return this.Cn.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Ci.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class FC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new It(ot.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new It(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="IndexedDbIndexManager",Ky=new Uint8Array(0);class fZ{constructor(e,n){this.databaseId=n,this.vn=new FC,this.Fn=new fa((r=>Ju(r)),((r,i)=>Wm(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const o={collectionId:r,parent:Pr(i)};return gk(e).put(o)}return X.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[vB(n),""],!1,!0);return gk(e).J(i).next((o=>{for(const s of o){if(s.collectionId!==n)break;r.push(Wo(s.parent))}return r}))}addFieldIndex(e,n){const r=dp(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const o=r.add(i);if(n.indexState){const s=_f(e);return o.next((l=>{s.put(ak(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return o.next()}deleteFieldIndex(e,n){const r=dp(e),i=_f(e),o=vf(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=dp(e),r=vf(e),i=_f(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return X.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new hk(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,n){const r=vf(e);let i=!0;const o=new Map;return X.forEach(this.Mn(n),(s=>this.xn(e,s).next((l=>{i&&(i=!!l),o.set(s,l)})))).next((()=>{if(i){let s=Je();const l=[];return X.forEach(o,((c,f)=>{ge(mk,`Using index ${(function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map((q=>`${q.fieldPath}:${q.kind}`)).join(",")}`})(c)} to execute ${Ju(n)}`);const h=(function(k,q){const $=eA(q);if($===void 0)return null;for(const H of n_(k,$.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null})(f,c),g=(function(k,q){const $=new Map;for(const H of wu(q))for(const M of n_(k,H.fieldPath))switch(M.op){case"==":case"in":$.set(H.fieldPath.canonicalString(),M.value);break;case"not-in":case"!=":return $.set(H.fieldPath.canonicalString(),M.value),Array.from($.values())}return null})(f,c),v=(function(k,q){const $=[];let H=!0;for(const M of wu(q)){const L=M.kind===0?KD(k,M.fieldPath,k.startAt):WD(k,M.fieldPath,k.startAt);$.push(L.value),H&&(H=L.inclusive)}return new wl($,H)})(f,c),E=(function(k,q){const $=[];let H=!0;for(const M of wu(q)){const L=M.kind===0?WD(k,M.fieldPath,k.endAt):KD(k,M.fieldPath,k.endAt);$.push(L.value),H&&(H=L.inclusive)}return new wl($,H)})(f,c),b=this.On(c,f,v),S=this.On(c,f,E),A=this.Nn(c,f,g),I=this.Bn(c.indexId,h,b,v.inclusive,S,E.inclusive,A);return X.forEach(I,(D=>r.Y(D,n.limit).next((k=>{k.forEach((q=>{const $=xe.fromSegments(q.documentKey);s.has($)||(s=s.add($),l.push($))}))}))))})).next((()=>l))}return X.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=uZ(Ct.create(e.filters,"and")).map((r=>uA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,o,s,l){const c=(n!=null?n.length:1)*Math.max(r.length,o.length),f=c/(n!=null?n.length:1),h=[];for(let g=0;g<c;++g){const v=n?this.Ln(n[g/f]):Ky,E=this.kn(e,v,r[g%f],i),b=this.qn(e,v,o[g%f],s),S=l.map((A=>this.kn(e,v,A,!0)));h.push(...this.createRange(E,b,S))}return h}kn(e,n,r,i){const o=new Pu(e,xe.empty(),n,r);return i?o:o.An()}qn(e,n,r,i){const o=new Pu(e,xe.empty(),n,r);return i?o.An():o}xn(e,n){const r=new hk(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let s=null;for(const l of o)r.yn(l)&&(!s||l.fields.length>s.fields.length)&&(s=l);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return X.forEach(i,(o=>this.xn(e,o).next((s=>{s?r!==0&&s.fields.length<(function(c){let f=new It(rn.comparator),h=!1;for(const g of c.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?h=!0:f=f.add(v.field));for(const g of c.orderBy)g.field.isKeyField()||(f=f.add(g.field));return f.size+(h?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new fp;for(const i of wu(e)){const o=n.data.field(i.fieldPath);if(o==null)return null;const s=r.Pn(i.kind);Ru.Kt.Dt(o,s)}return r.un()}Ln(e){const n=new fp;return Ru.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new fp;return Ru.Kt.Dt(Yu(this.databaseId,n),r.Pn((function(o){const s=wu(o);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new fp);let o=0;for(const s of wu(e)){const l=r[o++];for(const c of i)if(this.Un(n,s.fieldPath)&&pm(l))i=this.Kn(i,s,l);else{const f=c.Pn(s.kind);Ru.Kt.Dt(l,f)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const l of i){const c=new fp;c.seed(l.un()),Ru.Kt.Dt(s,c.Pn(n.kind)),o.push(c)}return o}Un(e,n){return!!e.filters.find((r=>r instanceof lt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=dp(e),i=_f(e);return(n?r.J(nA,IDBKeyRange.bound(n,n)):r.J()).next((o=>{const s=[];return X.forEach(o,(l=>i.get([l.indexId,this.uid]).next((c=>{s.push((function(h,g){const v=g?new am(g.sequenceNumber,new Ci(ec(g.readTime),new xe(Wo(g.documentKey)),g.largestBatchId)):am.empty(),E=h.fields.map((([b,S])=>new xv(rn.fromServerFormat(b),S)));return new Jv(h.indexId,h.collectionGroup,E,v)})(l,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Ke(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=dp(e),o=_f(e);return this.Gn(e).next((s=>i.J(nA,IDBKeyRange.bound(n,n)).next((l=>X.forEach(l,(c=>o.put(ak(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return X.forEach(n,((i,o)=>{const s=r.get(i.collectionGroup);return(s?X.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(r.set(i.collectionGroup,l),X.forEach(l,(c=>this.zn(e,i,c).next((f=>{const h=this.jn(o,c);return f.isEqual(h)?X.resolve():this.Jn(e,o,c,f,h)})))))))}))}Hn(e,n,r,i){return vf(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return vf(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=vf(e);let o=new It(Xa);return i.ee({index:MB,range:IDBKeyRange.only([r.indexId,this.uid,kv(this.$n(r,n))])},((s,l)=>{o=o.add(new Pu(r.indexId,n,dk(l.arrayValue),dk(l.directionalValue)))})).next((()=>o))}jn(e,n){let r=new It(Xa);const i=this.Qn(n,e);if(i==null)return r;const o=eA(n);if(o!=null){const s=e.data.field(o.fieldPath);if(pm(s))for(const l of s.arrayValue.values||[])r=r.add(new Pu(n.indexId,e.key,this.Ln(l),i))}else r=r.add(new Pu(n.indexId,e.key,Ky,i));return r}Jn(e,n,r,i,o){ge(mk,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,f,h,g,v){const E=c.getIterator(),b=f.getIterator();let S=gf(E),A=gf(b);for(;S||A;){let I=!1,D=!1;if(S&&A){const k=h(S,A);k<0?D=!0:k>0&&(I=!0)}else S!=null?D=!0:I=!0;I?(g(A),A=gf(b)):D?(v(S),S=gf(E)):(S=gf(E),A=gf(b))}})(i,o,Xa,(l=>{s.push(this.Hn(e,n,r,l))}),(l=>{s.push(this.Yn(e,n,r,l))})),X.waitFor(s)}Gn(e){let n=1;return _f(e).ee({index:NB,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,l)=>Xa(s,l))).filter(((s,l,c)=>!l||Xa(s,c[l-1])!==0));const i=[];i.push(e);for(const s of r){const l=Xa(s,e),c=Xa(s,n);if(l===0)i[0]=e.An();else if(l>0&&c<0)i.push(s),i.push(s.An());else if(c>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const l=i[s].Vn(this.uid,Ky,xe.empty()),c=i[s+1].Vn(this.uid,Ky,xe.empty());o.push(IDBKeyRange.bound(l,c))}return o}Zn(e,n){return Xa(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(yk)}getMinOffset(e,n){return X.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Re(44426))))).next(yk)}}function gk(t){return zn(t,fm)}function vf(t){return zn(t,Hp)}function dp(t){return zn(t,wC)}function _f(t){return zn(t,zp)}function yk(t){ke(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;_C(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ci(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vq=41943040;class Ar{static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uq(t,e,n){const r=t.store(co),i=t.store(Zf),o=[],s=IDBKeyRange.only(n.batchId);let l=0;const c=r.ee({range:s},((h,g,v)=>(l++,v.delete())));o.push(c.next((()=>{ke(l===1,47070,{batchId:n.batchId})})));const f=[];for(const h of n.mutations){const g=IB(e,h.key.path,n.batchId);o.push(i.delete(g)),f.push(h.key)}return X.waitFor(o).next((()=>f))}function s_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Re(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(Vq,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);class P0{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){ke(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new P0(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).ee({index:Du,range:r},((i,o,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const o=If(e),s=Za(e);return s.add({}).next((l=>{ke(typeof l=="number",49019);const c=new MC(l,n,r,i),f=(function(E,b,S){const A=S.baseMutations.map((D=>ym(E.yt,D))),I=S.mutations.map((D=>ym(E.yt,D)));return{userId:b,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:A,mutations:I}})(this.serializer,this.userId,c),h=[];let g=new It(((v,E)=>Ke(v.canonicalString(),E.canonicalString())));for(const v of i){const E=IB(this.userId,v.key.path,l);g=g.add(v.key.path.popLast()),h.push(s.put(f)),h.push(o.put(E,GQ))}return g.forEach((v=>{h.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[l]=c.keys()})),X.waitFor(h).next((()=>c))}))}lookupMutationBatch(e,n){return Za(e).get(n).next((r=>r?(ke(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Iu(this.serializer,r)):null))}er(e,n){return this.Xn[n]?X.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Za(e).ee({index:Du,range:i},((s,l,c)=>{l.userId===this.userId&&(ke(l.batchId>=r,47524,{tr:r}),o=Iu(this.serializer,l)),c.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=fl;return Za(e).ee({index:Du,range:n,reverse:!0},((i,o,s)=>{r=o.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,fl],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).J(Du,n).next((r=>r.map((i=>Iu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Cv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return If(e).ee({range:i},((s,l,c)=>{const[f,h,g]=s,v=Wo(h);if(f===this.userId&&n.path.isEqual(v))return Za(e).get(g).next((E=>{if(!E)throw Re(61480,{nr:s,batchId:g});ke(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:g}),o.push(Iu(this.serializer,E))}));c.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ke);const i=[];return n.forEach((o=>{const s=Cv(this.userId,o.path),l=IDBKeyRange.lowerBound(s),c=If(e).ee({range:l},((f,h,g)=>{const[v,E,b]=f,S=Wo(E);v===this.userId&&o.path.isEqual(S)?r=r.add(b):g.done()}));i.push(c)})),X.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=Cv(this.userId,r),s=IDBKeyRange.lowerBound(o);let l=new It(Ke);return If(e).ee({range:s},((c,f,h)=>{const[g,v,E]=c,b=Wo(v);g===this.userId&&r.isPrefixOf(b)?b.length===i&&(l=l.add(E)):h.done()})).next((()=>this.rr(e,l)))}rr(e,n){const r=[],i=[];return n.forEach((o=>{i.push(Za(e).get(o).next((s=>{if(s===null)throw Re(35274,{batchId:o});ke(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:o}),r.push(Iu(this.serializer,s))})))})),X.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return Uq(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),X.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return X.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return If(e).ee({range:r},((o,s,l)=>{if(o[0]===this.userId){const c=Wo(o[1]);i.push(c)}else l.done()})).next((()=>{ke(i.length===0,56720,{sr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,n){return Fq(e,this.userId,n)}_r(e){return Bq(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:fl,lastStreamToken:""}))}}function Fq(t,e,n){const r=Cv(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return If(t).ee({range:o,X:!0},((l,c,f)=>{const[h,g,v]=l;h===e&&g===i&&(s=!0),f.done()})).next((()=>s))}function Za(t){return zn(t,co)}function If(t){return zn(t,Zf)}function Bq(t){return zn(t,um)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tc(0)}static cr(){return new tc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new tc(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Ue.fromTimestamp(new bt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Tf(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(ke(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const o=[];return Tf(e).ee(((s,l)=>{const c=Np(l);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))})).next((()=>X.waitFor(o))).next((()=>i))}forEachTarget(e,n){return Tf(e).ee(((r,i)=>{const o=Np(i);n(o)}))}lr(e){return _k(e).get(Zv).next((n=>(ke(n!==null,2888),n)))}hr(e,n){return _k(e).put(Zv,n)}Pr(e,n){return Tf(e).put(kq(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Ju(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Tf(e).ee({range:i,index:PB},((s,l,c)=>{const f=Np(l);Wm(n,f.target)&&(o=f,c.done())})).next((()=>o))}addMatchingKeys(e,n,r){const i=[],o=rl(e);return n.forEach((s=>{const l=Pr(s.path);i.push(o.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,s))})),X.waitFor(i)}removeMatchingKeys(e,n,r){const i=rl(e);return X.forEach(n,(o=>{const s=Pr(o.path);return X.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,n){const r=rl(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=rl(e);let o=Je();return i.ee({range:r,X:!0},((s,l,c)=>{const f=Wo(s[1]),h=new xe(f);o=o.add(h)})).next((()=>o))}containsKey(e,n){const r=Pr(n.path),i=IDBKeyRange.bound([r],[vB(r)],!1,!0);let o=0;return rl(e).ee({index:EC,X:!0,range:i},(([s,l],c,f)=>{s!==0&&(o++,f.done())})).next((()=>o>0))}At(e,n){return Tf(e).get(n).next((r=>r?Np(r):null))}}function Tf(t){return zn(t,ed)}function _k(t){return zn(t,qu)}function rl(t){return zn(t,td)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="LruGarbageCollector",hZ=1048576;function Ek([t,e],[n,r]){const i=Ke(t,n);return i===0?Ke(e,r):i}class pZ{constructor(e){this.Ir=e,this.buffer=new It(Ek),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Ek(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qq{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(Tk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nl(n)?ge(Tk,"Ignoring IndexedDB error during garbage collection: ",n):await Pl(n)}await this.Vr(3e5)}))}}class mZ{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return X.resolve(Zr.ce);const r=new pZ(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(vk)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vk):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,l,c,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,l=Date.now(),this.removeTargets(e,r,n)))).next((g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(f=Date.now(),Sf()<=it.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(f-c)+`ms
Total Duration: ${f-h}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g}))))}}function $q(t,e){return new mZ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(e,n){this.db=e,this.garbageCollector=$q(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return Wy(e,r)}removeReference(e,n,r){return Wy(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Wy(e,n)}br(e,n){return(function(i,o){let s=!1;return Bq(i).te((l=>Fq(i,l,o).next((c=>(c&&(s=!0),X.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,((s,l)=>{if(l<=n){const c=this.br(e,s).next((f=>{if(!f)return o++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Ue.min()),rl(e).delete((function(g){return[0,Pr(g.path)]})(s)))))}));i.push(c)}})).next((()=>X.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Wy(e,n)}Sr(e,n){const r=rl(e);let i,o=Zr.ce;return r.ee({index:EC},(([s,l],{path:c,sequenceNumber:f})=>{s===0?(o!==Zr.ce&&n(new xe(Wo(i)),o),o=f,i=c):o=Zr.ce})).next((()=>{o!==Zr.ce&&n(new xe(Wo(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wy(t,e){return rl(t).put((function(r,i){return{targetId:0,path:Pr(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(){this.changes=new fa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return _u(e).put(r)}removeEntry(e,n,r){return _u(e).delete((function(o,s){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],i_(s),l[l.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Jt.newInvalidDocument(n);return _u(e).ee({index:Iv,range:IDBKeyRange.only(hp(n))},((i,o)=>{r=this.Cr(n,o)})).next((()=>r))}vr(e,n){let r={size:0,document:Jt.newInvalidDocument(n)};return _u(e).ee({index:Iv,range:IDBKeyRange.only(hp(n))},((i,o)=>{r={document:this.Cr(n,o),size:s_(o)}})).next((()=>r))}getEntries(e,n){let r=ti();return this.Fr(e,n,((i,o)=>{const s=this.Cr(i,o);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=ti(),i=new jt(xe.comparator);return this.Fr(e,n,((o,s)=>{const l=this.Cr(o,s);r=r.insert(o,l),i=i.insert(o,s_(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return X.resolve();let i=new It(Sk);n.forEach((c=>i=i.add(c)));const o=IDBKeyRange.bound(hp(i.first()),hp(i.last())),s=i.getIterator();let l=s.getNext();return _u(e).ee({index:Iv,range:o},((c,f,h)=>{const g=xe.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;l&&Sk(l,g)<0;)r(l,null),l=s.getNext();l&&l.isEqual(g)&&(r(l,f),l=s.hasNext()?s.getNext():null),l?h.j(hp(l)):h.done()})).next((()=>{for(;l;)r(l,null),l=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,l=[s.popLast().toArray(),s.lastSegment(),i_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _u(e).J(IDBKeyRange.bound(l,c,!0)).next((f=>{o==null||o.incrementDocumentReadCount(f.length);let h=ti();for(const g of f){const v=this.Cr(xe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Jm(n,v)||i.has(v.key))&&(h=h.insert(v.key,v))}return h}))}getAllFromCollectionGroup(e,n,r,i){let o=ti();const s=bk(n,r),l=bk(n,Ci.max());return _u(e).ee({index:RB,range:IDBKeyRange.bound(s,l,!0)},((c,f,h)=>{const g=this.Cr(xe.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(g.key,g),o.size===i&&h.done()})).next((()=>o))}newChangeBuffer(e){return new vZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return wk(e).get(tA).next((n=>(ke(!!n,20021),n)))}Dr(e,n){return wk(e).put(tA,n)}Cr(e,n){if(n){const r=nZ(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Ue.min())))return r}return Jt.newInvalidDocument(e)}}function Hq(t){return new yZ(t)}class vZ extends zq{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new fa((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new It(((o,s)=>Ke(o.canonicalString(),s.canonicalString())));return this.changes.forEach(((o,s)=>{const l=this.Br.get(o);if(n.push(this.Nr.removeEntry(e,o,l.readTime)),s.isValidDocument()){const c=ok(this.Nr.serializer,s);i=i.add(o.path.popLast());const f=s_(c);r+=f-l.size,n.push(this.Nr.addEntry(e,o,c))}else if(r-=l.size,this.trackRemovals){const c=ok(this.Nr.serializer,s.convertToNoDocument(Ue.min()));n.push(this.Nr.addEntry(e,o,c))}})),i.forEach((o=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),n.push(this.Nr.updateMetadata(e,r)),X.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((o,s)=>{this.Br.set(o,{size:s,readTime:r.get(o).readTime})})),r)))}}function wk(t){return zn(t,cm)}function _u(t){return zn(t,Xv)}function hp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bk(t,e){const n=e.documentKey.path.toArray();return[t,i_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Sk(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Ke(n[o],r[o]),i)return i;return i=Ke(n.length,r.length),i||(i=Ke(n[n.length-2],r[r.length-2]),i||Ke(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Kp(r.mutation,i,ei.empty(),bt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Je()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Je()){const i=Yo();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((o=>{let s=Rp();return o.forEach(((l,c)=>{s=s.insert(l,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=Yo();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Je())))}populateOverlays(e,n,r){const i=[];return r.forEach((o=>{n.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,l)=>{n.set(s,l)}))}))}computeViews(e,n,r,i){let o=ti();const s=jp(),l=(function(){return jp()})();return n.forEach(((c,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof da)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),Kp(h.mutation,f,h.mutation.getFieldMask(),bt.now())):s.set(f.key,ei.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((f,h)=>s.set(f,h))),n.forEach(((f,h)=>l.set(f,new _Z(h,s.get(f)??null)))),l)))}recalculateAndSaveOverlays(e,n){const r=jp();let i=new jt(((s,l)=>s-l)),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const l of s)l.keys().forEach((c=>{const f=n.get(c);if(f===null)return;let h=r.get(c)||ei.empty();h=l.applyToLocalView(f,h),r.set(c,h);const g=(i.get(l.batchId)||Je()).add(c);i=i.insert(l.batchId,g)}))})).next((()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,h=c.value,g=aq();h.forEach((v=>{if(!o.has(v)){const E=pq(n.get(v),r.get(v));E!==null&&g.set(v,E),o=o.add(v)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,g))}return X.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return xe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):IC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):X.resolve(Yo());let l=Xf,c=o;return s.next((f=>X.forEach(f,((h,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),o.get(h)?X.resolve():this.remoteDocumentCache.getEntry(e,h).next((v=>{c=c.insert(h,v)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,c,f,Je()))).next((h=>({batchId:l,changes:sq(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next((r=>{let i=Rp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Rp();return this.indexManager.getCollectionParents(e,o).next((l=>X.forEach(l,(c=>{const f=(function(g,v){return new ca(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((h=>{h.forEach(((g,v)=>{s=s.insert(g,v)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i)))).next((s=>{o.forEach(((c,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,Jt.newInvalidDocument(h)))}));let l=Rp();return s.forEach(((c,f)=>{const h=o.get(c);h!==void 0&&Kp(h.mutation,f,ei.empty(),bt.now()),Jm(n,f)&&(l=l.insert(c,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return X.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:xn(i.createTime)}})(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:VC(i.bundledQuery),readTime:xn(i.readTime)}})(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(){this.overlays=new jt(xe.comparator),this.qr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yo();return X.forEach(n,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,o)=>{this.St(e,n,o)})),X.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const i=Yo(),o=n.length+1,s=new xe(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return X.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new jt(((f,h)=>f-h));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=Yo(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const l=Yo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,h)=>l.set(f,h))),!(l.size()>=i)););return X.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new kC(n,r));let o=this.qr.get(n);o===void 0&&(o=Je(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wZ{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.Qr=new It(Xn.$r),this.Ur=new It(Xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Xn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Xn(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new xe(new ot([])),r=new Xn(n,e),i=new Xn(n,e+1),o=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new xe(new ot([])),r=new Xn(n,e),i=new Xn(n,e+1);let o=Je();return this.Ur.forEachInRange([r,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const n=new Xn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return xe.comparator(e.key,n.key)||Ke(e.Yr,n.Yr)}static Kr(e,n){return Ke(e.Yr,n.Yr)||xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new It(Xn.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new MC(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new Xn(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return X.resolve(s)}lookupMutationBatch(e,n){return X.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return X.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?fl:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xn(n,0),i=new Xn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(s=>{const l=this.Xr(s.Yr);o.push(l)})),X.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ke);return n.forEach((i=>{const o=new Xn(i,0),s=new Xn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(l=>{r=r.add(l.Yr)}))})),X.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;xe.isDocumentKey(o)||(o=o.child(""));const s=new Xn(new xe(o),0);let l=new It(Ke);return this.Zr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(c.Yr)),!0)}),s),X.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return X.forEach(n.mutations,(i=>{const o=new Xn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Xn(n,0),i=this.Zr.firstAfterOrEqual(r);return X.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(e){this.ri=e,this.docs=(function(){return new jt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=ti();return n.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Jt.newInvalidDocument(i))})),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ti();const s=n.path,l=new xe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:h}}=c.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||_C(bB(h),r)<=0||(i.has(h.key)||Jm(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return X.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Re(9500)}ii(e,n){return X.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new AZ(this)}getSize(e){return X.resolve(this.size)}}class AZ extends zq{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),X.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xZ{constructor(e){this.persistence=e,this.si=new fa((n=>Ju(n)),Wm),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new BC,this.targetCount=0,this.ai=tc.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),X.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Pr(n),X.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach(((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),X.waitFor(o).next((()=>i))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),X.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),X.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Zr(0),this.li=!1,this.li=!0,this.hi=new wZ,this.referenceDelegate=e(this),this.Pi=new xZ(this),this.indexManager=new cZ,this.remoteDocumentCache=(function(i){return new SZ(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Dq(n),this.Ii=new TZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new bZ(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ge("MemoryPersistence","Starting transaction:",e);const i=new CZ(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,n){return X.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class CZ extends AB{constructor(e){super(),this.currentSequenceNumber=e}}class N0{constructor(e){this.persistence=e,this.Ri=new BC,this.Vi=null}static mi(e){return new N0(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),X.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(r=>{const i=xe.fromPath(r);return this.gi(e,i).next((o=>{o||n.removeEntry(i,Ue.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return X.or([()=>X.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class a_{constructor(e,n){this.persistence=e,this.pi=new fa((r=>Pr(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=$q(this,n)}static mi(e,n){return new a_(e,n)}Ei(){}di(e){return X.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return X.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?X.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((l=>{l||(r++,o.removeEntry(s,Ue.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pv(e.data.value)),n}br(e,n,r){return X.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return X.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZ{constructor(e){this.serializer=e}k(e,n,r,i){const o=new T0("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(Km)})(e),(function(c){c.createObjectStore(um,{keyPath:HQ}),c.createObjectStore(co,{keyPath:OD,autoIncrement:!0}).createIndex(Du,LD,{unique:!0}),c.createObjectStore(Zf)})(e),Ak(e),(function(c){c.createObjectStore(bu)})(e));let s=X.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(td),c.deleteObjectStore(ed),c.deleteObjectStore(qu)})(e),Ak(e)),s=s.next((()=>(function(c){const f=c.store(qu),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ue.min().toTimestamp(),targetCount:0};return f.put(Zv,h)})(o)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,f){return f.store(co).J().next((g=>{c.deleteObjectStore(co),c.createObjectStore(co,{keyPath:OD,autoIncrement:!0}).createIndex(Du,LD,{unique:!0});const v=f.store(co),E=g.map((b=>v.put(b)));return X.waitFor(E)}))})(e,o)))),s=s.next((()=>{(function(c){c.createObjectStore(nd,{keyPath:ZQ})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(o)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore(cm)})(e),this.wi(o))))),r<7&&i>=7&&(s=s.next((()=>this.Si(o)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,o)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(o)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(E0,{keyPath:eX})})(e),(function(c){c.createObjectStore(w0,{keyPath:tX})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const f=c.createObjectStore(b0,{keyPath:lX});f.createIndex(rA,uX,{unique:!1}),f.createIndex(DB,cX,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const f=c.createObjectStore(Xv,{keyPath:jQ});f.createIndex(Iv,KQ),f.createIndex(RB,WQ)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(bu)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,o)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(wC,{keyPath:nX,autoIncrement:!0}).createIndex(nA,rX,{unique:!1}),c.createObjectStore(zp,{keyPath:iX}).createIndex(NB,oX,{unique:!1}),c.createObjectStore(Hp,{keyPath:sX}).createIndex(MB,aX,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(zp).clear()})).next((()=>{n.objectStore(Hp).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(bC,{keyPath:fX})})(e)}))),r<18&&i>=18&&W4()&&(s=s.next((()=>{n.objectStore(zp).clear()})).next((()=>{n.objectStore(Hp).clear()}))),s}wi(e){let n=0;return e.store(bu).ee(((r,i)=>{n+=s_(i)})).next((()=>{const r={byteSize:n};return e.store(cm).put(tA,r)}))}yi(e){const n=e.store(um),r=e.store(co);return n.J().next((i=>X.forEach(i,(o=>{const s=IDBKeyRange.bound([o.userId,fl],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Du,s).next((l=>X.forEach(l,(c=>{ke(c.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const f=Iu(this.serializer,c);return Uq(e,o.userId,f).next((()=>{}))}))))}))))}Si(e){const n=e.store(td),r=e.store(bu);return e.store(qu).get(Zv).next((i=>{const o=[];return r.ee(((s,l)=>{const c=new ot(s),f=(function(g){return[0,Pr(g)]})(c);o.push(n.get(f).next((h=>h?X.resolve():(g=>n.put({targetId:0,path:Pr(g),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>X.waitFor(o)))}))}bi(e,n){e.createObjectStore(fm,{keyPath:XQ});const r=n.store(fm),i=new FC,o=s=>{if(i.add(s)){const l=s.lastSegment(),c=s.popLast();return r.put({collectionId:l,parent:Pr(c)})}};return n.store(bu).ee({X:!0},((s,l)=>{const c=new ot(s);return o(c.popLast())})).next((()=>n.store(Zf).ee({X:!0},(([s,l,c],f)=>{const h=Wo(l);return o(h.popLast())}))))}Di(e){const n=e.store(ed);return n.ee(((r,i)=>{const o=Np(i),s=kq(this.serializer,o);return n.put(s)}))}Ci(e,n){const r=n.store(bu),i=[];return r.ee(((o,s)=>{const l=n.store(Xv),c=(function(g){return g.document?new xe(ot.fromString(g.document.name).popFirst(5)):g.noDocument?xe.fromSegments(g.noDocument.path):g.unknownDocument?xe.fromSegments(g.unknownDocument.path):Re(36783)})(s).path.toArray(),f={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(l.put(f))})).next((()=>X.waitFor(i)))}Fi(e,n){const r=n.store(co),i=Hq(this.serializer),o=new qC(N0.mi,this.serializer.yt);return r.J().next((s=>{const l=new Map;return s.forEach((c=>{let f=l.get(c.userId)??Je();Iu(this.serializer,c).keys().forEach((h=>f=f.add(h))),l.set(c.userId,f)})),X.forEach(l,((c,f)=>{const h=new er(f),g=R0.wt(this.serializer,h),v=o.getIndexManager(h),E=P0.wt(h,this.serializer,v,o.referenceDelegate);return new Gq(i,E,g,v).recalculateAndSaveOverlaysForDocumentKeys(new iA(n,Zr.ce),c).next()}))}))}}function Ak(t){t.createObjectStore(td,{keyPath:JQ}).createIndex(EC,QQ,{unique:!0}),t.createObjectStore(ed,{keyPath:"targetId"}).createIndex(PB,YQ,{unique:!0}),t.createObjectStore(qu)}const el="IndexedDbPersistence",jw=18e5,Kw=5e3,Ww="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jq="main";class $C{constructor(e,n,r,i,o,s,l,c,f,h,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=o,this.window=s,this.document=l,this.xi=f,this.Oi=h,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!$C.v())throw new pe(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gZ(this,i),this.$i=n+jq,this.serializer=new Dq(c),this.Ui=new Qo(this.$i,this.Ni,new IZ(this.serializer)),this.hi=new iZ,this.Pi=new dZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Hq(this.serializer),this.Ii=new rZ,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&An(el,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pe(ie.FAILED_PRECONDITION,Ww);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Zr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Yy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Nl(e))return ge(el,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ge(el,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return pp(e).get(mf).next((n=>X.resolve(this.es(n))))}ts(e){return Yy(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,jw)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=zn(n,nd);return r.J().next((i=>{const o=this.ss(i,jw),s=i.filter((l=>o.indexOf(l)===-1));return X.forEach(s,(l=>r.delete(l.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?X.resolve(!0):pp(e).get(mf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Kw)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new pe(ie.FAILED_PRECONDITION,Ww);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yy(e).J().next((r=>this.ss(r,Kw).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(o||s&&l)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&ge(el,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Km,nd],(e=>{const n=new iA(e,Zr.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Yy(e).J().next((n=>this.ss(n,jw).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return P0.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fZ(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return R0.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ge(el,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",o=(function(c){return c===18?pX:c===17?VB:c===16?hX:c===15?SC:c===14?LB:c===13?OB:c===12?dX:c===11?kB:void Re(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,o,(l=>(s=new iA(l,this.ci?this.ci.next():Zr.ce),n==="readwrite-primary"?this.Hi(s).next((c=>!!c||this.Yi(s))).next((c=>{if(!c)throw An(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new pe(ie.FAILED_PRECONDITION,SB);return r(s)})).next((c=>this.Xi(s).next((()=>c)))):this.Is(s).next((()=>r(s)))))).then((l=>(s.raiseOnCommittedEvent(),l)))}Is(e){return pp(e).get(mf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Kw)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new pe(ie.FAILED_PRECONDITION,Ww)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pp(e).put(mf,n)}static v(){return Qo.v()}Zi(e){const n=pp(e);return n.get(mf).next((r=>this.es(r)?(ge(el,"Releasing primary lease."),n.delete(mf)):X.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(An(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;K4()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return ge(el,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return An(el,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){An("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pp(t){return zn(t,Km)}function Yy(t){return zn(t,nd)}function zC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Je(),i=Je();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new HC(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return K4()?8:xB(fn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,n,i,r).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new RZ;return this.Ss(e,n,s).next((l=>{if(o.result=l,this.Vs)return this.bs(e,n,s,l.size)}))})).next((()=>o.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Sf()<=it.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Af(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Sf()<=it.DEBUG&&ge("QueryEngine","Query:",Af(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Sf()<=it.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Af(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(n))):X.resolve())}ys(e,n){if(YD(n))return X.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=r_(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const s=Je(...o);return this.ps.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,r).next((c=>{const f=this.Ds(n,l);return this.Cs(n,f,s,c.readTime)?this.ys(e,r_(n,null,"F")):this.vs(e,f,n,c)}))))})))))}ws(e,n,r,i){return YD(n)||i.isEqual(Ue.min())?X.resolve(null):this.ps.getDocuments(e,r).next((o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?X.resolve(null):(Sf()<=it.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Af(n)),this.vs(e,s,n,wB(i,Xf)).next((l=>l)))}))}Ds(e,n){let r=new It(iq(e));return n.forEach(((i,o)=>{Jm(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Sf()<=it.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Af(n)),this.ps.getDocumentsMatchingQuery(e,n,Ci.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(n.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="LocalStore",PZ=3e8;class NZ{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new jt(Ke),this.xs=new fa((o=>Ju(o)),Wm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gq(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Wq(t,e,n,r){return new NZ(t,e,n,r)}async function Yq(t,e){const n=Ie(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const s=[],l=[];let c=Je();for(const f of i){s.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}for(const f of o){l.push(f.batchId);for(const h of f.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((f=>({Ls:f,removedBatchIds:s,addedBatchIds:l})))}))}))}function MZ(t,e){const n=Ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,f,h){const g=f.batch,v=g.keys();let E=X.resolve();return v.forEach((b=>{E=E.next((()=>h.getEntry(c,b))).next((S=>{const A=f.docVersions.get(b);ke(A!==null,48541),S.version.compareTo(A)<0&&(g.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),h.addEntry(S)))}))})),E.next((()=>l.mutationQueue.removeMutationBatch(c,g)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=Je();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function Jq(t){const e=Ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function DZ(t,e){const n=Ie(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach(((h,g)=>{const v=i.get(g);if(!v)return;l.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(o,h.addedDocuments,g))));let E=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(yn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),(function(S,A,I){return S.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=PZ?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0})(v,E,h)&&l.push(n.Pi.updateTargetData(o,E))}));let c=ti(),f=Je();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))})),l.push(Qq(o,s,e.documentUpdates).next((h=>{c=h.ks,f=h.qs}))),!r.isEqual(Ue.min())){const h=n.Pi.getLastRemoteSnapshotVersion(o).next((g=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));l.push(h)}return X.waitFor(l).next((()=>s.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,c,f))).next((()=>c))})).then((o=>(n.Ms=i,o)))}function Qq(t,e,n){let r=Je(),i=Je();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let s=ti();return n.forEach(((l,c)=>{const f=o.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ue.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):ge(GC,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function kZ(t,e){const n=Ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=fl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function ud(t,e){const n=Ie(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((o=>o?(i=o,X.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new $s(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function cd(t,e,n){const r=Ie(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Nl(s))throw s;ge(GC,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function l_(t,e,n){const r=Ie(t);let i=Ue.min(),o=Je();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,f,h){const g=Ie(c),v=g.xs.get(h);return v!==void 0?X.resolve(g.Ms.get(v)):g.Pi.getTargetData(f,h)})(r,s,zr(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,l.targetId).next((c=>{o=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Ue.min(),n?o:Je()))).next((l=>(e6(r,rq(e),l),{documents:l,Qs:o})))))}function Xq(t,e){const n=Ie(t),r=Ie(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(o=>r.At(o,e).next((s=>s?s.target:null))))}function Zq(t,e){const n=Ie(t),r=n.Os.get(e)||Ue.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,wB(r,Xf),Number.MAX_SAFE_INTEGER))).then((i=>(e6(n,e,i),i)))}function e6(t,e,n){let r=t.Os.get(e)||Ue.min();n.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.Os.set(e,r)}async function OZ(t,e,n,r){const i=Ie(t);let o=Je(),s=ti();for(const f of n){const h=e.$s(f.metadata.name);f.document&&(o=o.add(h));const g=e.Us(f);g.setReadTime(e.Ks(f.metadata.readTime)),s=s.insert(h,g)}const l=i.Ns.newChangeBuffer({trackRemovals:!0}),c=await ud(i,(function(h){return zr(Od(ot.fromString(`__bundle__/docs/${h}`)))})(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(f=>Qq(f,l,s).next((h=>(l.apply(f),h))).next((h=>i.Pi.removeMatchingKeysForTargetId(f,c.targetId).next((()=>i.Pi.addMatchingKeys(f,o,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(f,h.ks,h.qs))).next((()=>h.ks))))))}async function LZ(t,e,n=Je()){const r=await ud(t,zr(VC(e.bundledQuery))),i=Ie(t);return i.persistence.runTransaction("Save named query","readwrite",(o=>{const s=xn(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ii.saveNamedQuery(o,e);const l=r.withResumeToken(yn.EMPTY_BYTE_STRING,s);return i.Ms=i.Ms.insert(l.targetId,l),i.Pi.updateTargetData(o,l).next((()=>i.Pi.removeMatchingKeysForTargetId(o,r.targetId))).next((()=>i.Pi.addMatchingKeys(o,n,r.targetId))).next((()=>i.Ii.saveNamedQuery(o,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6="firestore_clients";function xk(t,e){return`${t6}_${t}_${e}`}const n6="firestore_mutations";function Ck(t,e,n){let r=`${n6}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const r6="firestore_targets";function Yw(t,e){return`${r6}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="SharedClientState";class u_{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new pe(i.error.code,i.error.message))),s?new u_(e,n,i.state,o):(An(Bo,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wp{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new pe(r.error.code,r.error.message))),o?new Wp(e,r.state,i):(An(Bo,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class c_{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=RC();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=CB(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new c_(e,o):(An(Bo,`Failed to parse client data for instance '${e}': ${n}`),null)}}class jC{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new jC(n.clientId,n.onlineState):(An(Bo,`Failed to parse online state: ${e}`),null)}}class vA{constructor(){this.activeTargetIds=RC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jw{constructor(e,n,r,i,o){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new jt(Ke),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.eo=xk(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new vA),this.ro=new RegExp(`^${t6}_${s}_([^_]*)$`),this.io=new RegExp(`^${n6}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${r6}_${s}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(xk(this.persistenceKey,r));if(i){const o=c_.Ws(r,i);o&&(this.Zs=this.Zs.insert(o.clientId,o))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Yw(this.persistenceKey,e));if(i){const o=Wp.Ws(e,i);o&&(r=o.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yw(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ge(Bo,"READ",e,n),n}setItem(e,n){ge(Bo,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ge(Bo,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ge(Bo,"EVENT",n.key,n.newValue),n.key===this.eo)return void An("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(o){let s=Zr.ce;if(o!=null)try{const l=JSON.parse(o);ke(typeof l=="number",30636,{So:o}),s=l}catch(l){An(Bo,"Failed to read sequence number from WebStorage",l)}return s})(n.newValue);r!==Zr.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new u_(this.currentUser,e,n,r),o=Ck(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Gs())}Po(e){const n=Ck(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Yw(this.persistenceKey,e),o=new Wp(e,n,r);this.setItem(i,o.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return c_.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return u_.Ws(new er(o),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Wp.Ws(i,n)}uo(e){return jC.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ge(Bo,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),o=this.lo(r),s=[],l=[];return o.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{o.has(c)||l.push(c)})),this.syncEngine.Fo(s,l).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=RC();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class i6{constructor(){this.Mo=new vA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VZ{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik="ConnectivityMonitor";class Rk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(Ik,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(Ik,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jy=null;function _A(){return Jy===null?Jy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jy++,"0x"+Jy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="RestConnection",UZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FZ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===e_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=_A(),l=this.zo(e,n.toUriEncodedString());ge(Qw,`Sending RPC '${e}' ${s}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:f}=new URL(l),h=Il(f);return this.Jo(e,l,c,r,h).then((g=>(ge(Qw,`Received RPC '${e}' ${s}: `,g),g)),(g=>{throw rs(Qw,`RPC '${e}' ${s} failed with error: `,g,"url: ",l,"request:",r),g}))}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,n){const r=UZ[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BZ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="WebChannelConnection";class qZ extends FZ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=_A();return new Promise(((l,c)=>{const f=new fB;f.setWithCredentials(!0),f.listenOnce(dB.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Av.NO_ERROR:const g=f.getResponseJson();ge(br,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),l(g);break;case Av.TIMEOUT:ge(br,`RPC '${e}' ${s} timed out`),c(new pe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Av.HTTP_ERROR:const v=f.getStatus();if(ge(br,`RPC '${e}' ${s} failed with status:`,v,"response text:",f.getResponseText()),v>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E==null?void 0:E.error;if(b&&b.status&&b.message){const S=(function(I){const D=I.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(D)>=0?D:ie.UNKNOWN})(b.status);c(new pe(S,b.message))}else c(new pe(ie.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new pe(ie.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ge(br,`RPC '${e}' ${s} completed.`)}}));const h=JSON.stringify(i);ge(br,`RPC '${e}' ${s} sending request:`,i),f.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=_A(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=mB(),l=pB(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");ge(br,`Creating RPC '${e}' stream ${i}: ${h}`,c);const g=s.createWebChannel(h,c);this.I_(g);let v=!1,E=!1;const b=new BZ({Yo:A=>{E?ge(br,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(v||(ge(br,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),ge(br,`RPC '${e}' stream ${i} sending:`,A),g.send(A))},Zo:()=>g.close()}),S=(A,I,D)=>{A.listen(I,(k=>{try{D(k)}catch(q){setTimeout((()=>{throw q}),0)}}))};return S(g,Ip.EventType.OPEN,(()=>{E||(ge(br,`RPC '${e}' stream ${i} transport opened.`),b.o_())})),S(g,Ip.EventType.CLOSE,(()=>{E||(E=!0,ge(br,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(g))})),S(g,Ip.EventType.ERROR,(A=>{E||(E=!0,rs(br,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),b.a_(new pe(ie.UNAVAILABLE,"The operation could not be completed")))})),S(g,Ip.EventType.MESSAGE,(A=>{var I;if(!E){const D=A.data[0];ke(!!D,16349);const k=D,q=(k==null?void 0:k.error)||((I=k[0])==null?void 0:I.error);if(q){ge(br,`RPC '${e}' stream ${i} received error:`,q);const $=q.status;let H=(function(O){const F=Nn[O];if(F!==void 0)return yq(F)})($),M=q.message;H===void 0&&(H=ie.INTERNAL,M="Unknown error status: "+$+" with message "+q.message),E=!0,b.a_(new pe(H,M)),g.close()}else ge(br,`RPC '${e}' stream ${i} received:`,D),b.u_(D)}})),S(l,hB.STAT_EVENT,(A=>{A.stat===XS.PROXY?ge(br,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===XS.NOPROXY&&ge(br,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{b.__()}),0),b}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(){return typeof window<"u"?window:null}function Ov(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t){return new jX(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="PersistentStream";class s6{constructor(e,n,r,i,o,s,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new pe(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(Pk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(Pk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $Z extends s6{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=YX(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ue.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ue.min():s.readTime?xn(s.readTime):Ue.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=hA(this.serializer),n.addTarget=(function(o,s){let l;const c=s.target;if(l=t_(c)?{documents:Cq(o,c)}:{query:Iq(o,c).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=Eq(o,s.resumeToken);const f=fA(o,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(Ue.min())>0){l.readTime=ld(o,s.snapshotVersion.toTimestamp());const f=fA(o,s.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);const r=QX(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=hA(this.serializer),n.removeTarget=e,this.q_(n)}}class zZ extends s6{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=JX(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=hA(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>ym(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZ{}class GZ extends HZ{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,dA(n,r),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(ie.UNKNOWN,o.toString())}))}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Ho(e,dA(n,r),i,s,l,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(ie.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class jZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(An(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc="RemoteStore";class KZ{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Dl(this)&&(ge(nc,"Restarting streams for network reachability change."),await(async function(c){const f=Ie(c);f.Ea.add(4),await Ud(f),f.Ra.set("Unknown"),f.Ea.delete(4),await tg(f)})(this))}))})),this.Ra=new jZ(r,i)}}async function tg(t){if(Dl(t))for(const e of t.da)await e(!0)}async function Ud(t){for(const e of t.da)await e(!1)}function M0(t,e){const n=Ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),JC(n)?YC(n):Bd(n).O_()&&WC(n,e))}function fd(t,e){const n=Ie(t),r=Bd(n);n.Ia.delete(e),r.O_()&&a6(n,e),n.Ia.size===0&&(r.O_()?r.L_():Dl(n)&&n.Ra.set("Unknown"))}function WC(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bd(t).Y_(e)}function a6(t,e){t.Va.Ue(e),Bd(t).Z_(e)}function YC(t){t.Va=new $X({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Bd(t).start(),t.Ra.ua()}function JC(t){return Dl(t)&&!Bd(t).x_()&&t.Ia.size>0}function Dl(t){return Ie(t).Ea.size===0}function l6(t){t.Va=void 0}async function WZ(t){t.Ra.set("Online")}async function YZ(t){t.Ia.forEach(((e,n)=>{WC(t,e)}))}async function JZ(t,e){l6(t),JC(t)?(t.Ra.ha(e),YC(t)):t.Ra.set("Unknown")}async function QZ(t,e,n){if(t.Ra.set("Online"),e instanceof Tq&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const l of o.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ia.delete(l),i.Va.removeTarget(l))})(t,e)}catch(r){ge(nc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await f_(t,r)}else if(e instanceof Dv?t.Va.Ze(e):e instanceof _q?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ue.min()))try{const r=await Jq(t.localStore);n.compareTo(r)>=0&&await(function(o,s){const l=o.Va.Tt(s);return l.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ia.get(f);h&&o.Ia.set(f,h.withResumeToken(c.resumeToken,s))}})),l.targetMismatches.forEach(((c,f)=>{const h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(yn.EMPTY_BYTE_STRING,h.snapshotVersion)),a6(o,c);const g=new $s(h.target,c,f,h.sequenceNumber);WC(o,g)})),o.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){ge(nc,"Failed to raise snapshot:",r),await f_(t,r)}}async function f_(t,e,n){if(!Nl(e))throw e;t.Ea.add(1),await Ud(t),t.Ra.set("Offline"),n||(n=()=>Jq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ge(nc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await tg(t)}))}function u6(t,e){return e().catch((n=>f_(t,n,e)))}async function Fd(t){const e=Ie(t),n=bl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fl;for(;XZ(e);)try{const i=await kZ(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,ZZ(e,i)}catch(i){await f_(e,i)}c6(e)&&f6(e)}function XZ(t){return Dl(t)&&t.Ta.length<10}function ZZ(t,e){t.Ta.push(e);const n=bl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function c6(t){return Dl(t)&&!bl(t).x_()&&t.Ta.length>0}function f6(t){bl(t).start()}async function eee(t){bl(t).ra()}async function tee(t){const e=bl(t);for(const n of t.Ta)e.ea(n.mutations)}async function nee(t,e,n){const r=t.Ta.shift(),i=DC.from(r,e,n);await u6(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Fd(t)}async function ree(t,e){e&&bl(t).X_&&await(async function(r,i){if((function(s){return gq(s)&&s!==ie.ABORTED})(i.code)){const o=r.Ta.shift();bl(r).B_(),await u6(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Fd(r)}})(t,e),c6(t)&&f6(t)}async function Nk(t,e){const n=Ie(t);n.asyncQueue.verifyOperationInProgress(),ge(nc,"RemoteStore received new credentials");const r=Dl(n);n.Ea.add(3),await Ud(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await tg(n)}async function TA(t,e){const n=Ie(t);e?(n.Ea.delete(2),await tg(n)):e||(n.Ea.add(2),await Ud(n),n.Ra.set("Unknown"))}function Bd(t){return t.ma||(t.ma=(function(n,r,i){const o=Ie(n);return o.sa(),new $Z(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:WZ.bind(null,t),t_:YZ.bind(null,t),r_:JZ.bind(null,t),H_:QZ.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),JC(t)?YC(t):t.Ra.set("Unknown")):(await t.ma.stop(),l6(t))}))),t.ma}function bl(t){return t.fa||(t.fa=(function(n,r,i){const o=Ie(n);return o.sa(),new zZ(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:eee.bind(null,t),r_:ree.bind(null,t),ta:tee.bind(null,t),na:nee.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Fd(t)):(await t.fa.stop(),t.Ta.length>0&&(ge(nc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new QC(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qd(t,e){if(An("AsyncQueue",`${e}: ${t}`),Nl(t))return new pe(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{static emptySet(e){return new Ff(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||xe.comparator(n.key,r.key):(n,r)=>xe.comparator(n.key,r.key),this.keyedMap=Rp(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ff)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ff;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this.ga=new jt(xe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class dd{constructor(e,n,r,i,o,s,l,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach((l=>{s.push({type:0,doc:l})})),new dd(e,n,Ff.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ym(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iee{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class oee{constructor(){this.queries=Dk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ie(n),o=i.queries;i.queries=Dk(),o.forEach(((s,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new pe(ie.ABORTED,"Firestore shutting down"))}}function Dk(){return new fa((t=>nq(t)),Ym)}async function XC(t,e){const n=Ie(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new iee,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=qd(s,`Initialization of query '${Af(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&eI(n)}async function ZC(t,e){const n=Ie(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function see(t,e){const n=Ie(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.Sa)l.Fa(i)&&(r=!0);s.wa=i}}r&&eI(n)}function aee(t,e,n){const r=Ie(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function eI(t){t.Ca.forEach((e=>{e.next()}))}var EA,kk;(kk=EA||(EA={})).Ma="default",kk.Cache="cache";class tI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new dd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==EA.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lee{constructor(e,n){this.Qa=e,this.byteLength=n}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.serializer=e}$s(e){return Xo(this.serializer,e)}Us(e){return e.metadata.exists?xq(this.serializer,e.document,!1):Jt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return xn(e)}}class uee{constructor(e,n){this.Ua=e,this.serializer=n,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=d6(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++n;const r=ot.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,{...this.progress}):null}za(e){const n=new Map,r=new Ok(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.$s(i.metadata.name);for(const s of i.metadata.queries){const l=(n.get(s)||Je()).add(o);n.set(s,l)}}return n}async ja(e){const n=await OZ(e,new Ok(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const i of this.Ka)await LZ(e,i,r.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:n}}}function d6(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.key=e}}class p6{constructor(e){this.key=e}}class m6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=iq(e),this.tu=new Ff(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Mk,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,g)=>{const v=i.get(h),E=Jm(this.query,g)?g:null,b=!!v&&this.mutatedKeys.has(v.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;v&&E?v.data.isEqual(E.data)?b!==S&&(r.track({type:3,doc:E}),A=!0):this.su(v,E)||(r.track({type:2,doc:E}),A=!0,(c&&this.eu(E,c)>0||f&&this.eu(E,f)<0)&&(l=!0)):!v&&E?(r.track({type:0,doc:E}),A=!0):v&&!E&&(r.track({type:1,doc:v}),A=!0,(c||f)&&(l=!0)),A&&(E?(s=s.add(E),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:l,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((h,g)=>(function(E,b){const S=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:A})}};return S(E)-S(b)})(h.type,g.type)||this.eu(h.doc,g.doc))),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,f=c!==this.Za;return this.Za=c,s.length!==0||f?{snapshot:new dd(this.query,e.tu,o,s,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new p6(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new h6(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return dd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kl="SyncEngine";class cee{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fee{constructor(e){this.key=e,this.hu=!1}}class dee{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new fa((l=>nq(l)),Ym),this.Iu=new Map,this.Eu=new Set,this.du=new jt(xe.comparator),this.Au=new Map,this.Ru=new BC,this.Vu={},this.mu=new Map,this.fu=tc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hee(t,e,n=!0){const r=D0(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await g6(r,e,n,!0),i}async function pee(t,e){const n=D0(t);await g6(n,e,!0,!1)}async function g6(t,e,n,r){const i=await ud(t.localStore,zr(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await nI(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&M0(t.remoteStore,i),l}async function nI(t,e,n,r,i){t.pu=(g,v,E)=>(async function(S,A,I,D){let k=A.view.ru(I);k.Cs&&(k=await l_(S.localStore,A.query,!1).then((({documents:M})=>A.view.ru(M,k))));const q=D&&D.targetChanges.get(A.targetId),$=D&&D.targetMismatches.get(A.targetId)!=null,H=A.view.applyChanges(k,S.isPrimaryClient,q,$);return wA(S,A.targetId,H.au),H.snapshot})(t,g,v,E);const o=await l_(t.localStore,e,!0),s=new m6(e,o.Qs),l=s.ru(o.documents),c=Zm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=s.applyChanges(l,t.isPrimaryClient,c);wA(t,n,f.au);const h=new cee(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function mee(t,e,n){const r=Ie(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((s=>!Ym(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await cd(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&fd(r.remoteStore,i.targetId),hd(r,i.targetId)})).catch(Pl)):(hd(r,i.targetId),await cd(r.localStore,i.targetId,!0))}async function gee(t,e){const n=Ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),fd(n.remoteStore,r.targetId))}async function yee(t,e,n){const r=sI(t);try{const i=await(function(s,l){const c=Ie(s),f=bt.now(),h=l.reduce(((E,b)=>E.add(b.key)),Je());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let b=ti(),S=Je();return c.Ns.getEntries(E,h).next((A=>{b=A,b.forEach(((I,D)=>{D.isValidDocument()||(S=S.add(I))}))})).next((()=>c.localDocuments.getOverlayedDocuments(E,b))).next((A=>{g=A;const I=[];for(const D of l){const k=FX(D,g.get(D.key).overlayedDocument);k!=null&&I.push(new da(D.key,k,KB(k.value.mapValue),on.exists(!0)))}return c.mutationQueue.addMutationBatch(E,f,I,l)})).next((A=>{v=A;const I=A.applyToLocalDocumentSet(g,S);return c.documentOverlayCache.saveOverlays(E,A.batchId,I)}))})).then((()=>({batchId:v.batchId,changes:sq(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,l,c){let f=s.Vu[s.currentUser.toKey()];f||(f=new jt(Ke)),f=f.insert(l,c),s.Vu[s.currentUser.toKey()]=f})(r,i.batchId,n),await ha(r,i.changes),await Fd(r.remoteStore)}catch(i){const o=qd(i,"Failed to persist write");n.reject(o)}}async function y6(t,e){const n=Ie(t);try{const r=await DZ(n.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=n.Au.get(o);s&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ke(s.hu,14607):i.removedDocuments.size>0&&(ke(s.hu,42227),s.hu=!1))})),await ha(n,r,e)}catch(r){await Pl(r)}}function Lk(t,e,n){const r=Ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((o,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(s,l){const c=Ie(s);c.onlineState=l;let f=!1;c.queries.forEach(((h,g)=>{for(const v of g.Sa)v.va(l)&&(f=!0)})),f&&eI(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vee(t,e,n){const r=Ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new jt(xe.comparator);s=s.insert(o,Jt.newNoDocument(o,Ue.min()));const l=Je().add(o),c=new Xm(Ue.min(),new Map,new jt(Ke),s,l);await y6(r,c),r.du=r.du.remove(o),r.Au.delete(e),oI(r)}else await cd(r.localStore,e,!1).then((()=>hd(r,e,n))).catch(Pl)}async function _ee(t,e){const n=Ie(t),r=e.batch.batchId;try{const i=await MZ(n.localStore,e);iI(n,r,null),rI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ha(n,i)}catch(i){await Pl(i)}}async function Tee(t,e,n){const r=Ie(t);try{const i=await(function(s,l){const c=Ie(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let h;return c.mutationQueue.lookupMutationBatch(f,l).next((g=>(ke(g!==null,37113),h=g.keys(),c.mutationQueue.removeMutationBatch(f,g)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,h,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h))).next((()=>c.localDocuments.getDocuments(f,h)))}))})(r.localStore,e);iI(r,e,n),rI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ha(r,i)}catch(i){await Pl(i)}}async function Eee(t,e){const n=Ie(t);Dl(n.remoteStore)||ge(kl,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(s){const l=Ie(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(c=>l.mutationQueue.getHighestUnacknowledgedBatchId(c)))})(n.localStore);if(r===fl)return void e.resolve();const i=n.mu.get(r)||[];i.push(e),n.mu.set(r,i)}catch(r){const i=qd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function rI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function iI(t,e,n){const r=Ie(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function hd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||v6(t,r)}))}function v6(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(fd(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),oI(t))}function wA(t,e,n){for(const r of n)r instanceof h6?(t.Ru.addReference(r.key,e),wee(t,r)):r instanceof p6?(ge(kl,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||v6(t,r.key)):Re(19791,{wu:r})}function wee(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ge(kl,"New document in limbo: "+n),t.Eu.add(r),oI(t))}function oI(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new xe(ot.fromString(e)),r=t.fu.next();t.Au.set(r,new fee(n)),t.du=t.du.insert(n,r),M0(t.remoteStore,new $s(zr(Od(n.path)),r,"TargetPurposeLimboResolution",Zr.ce))}}async function ha(t,e,n){const r=Ie(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{s.push(r.pu(c,e,n).then((f=>{var h;if((f||n)&&r.isPrimaryClient){const g=f?!f.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(f){i.push(f);const g=HC.As(c.targetId,f);o.push(g)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,f){const h=Ie(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>X.forEach(f,(v=>X.forEach(v.Es,(E=>h.persistence.referenceDelegate.addReference(g,v.targetId,E))).next((()=>X.forEach(v.ds,(E=>h.persistence.referenceDelegate.removeReference(g,v.targetId,E)))))))))}catch(g){if(!Nl(g))throw g;ge(GC,"Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const E=h.Ms.get(v),b=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(v,S)}}})(r.localStore,o))}async function bee(t,e){const n=Ie(t);if(!n.currentUser.isEqual(e)){ge(kl,"User change. New user:",e.toKey());const r=await Yq(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach((l=>{l.forEach((c=>{c.reject(new pe(ie.CANCELLED,s))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ha(n,r.Ls)}}function See(t,e){const n=Ie(t),r=n.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let i=Je();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const l=n.Tu.get(s);i=i.unionWith(l.view.nu)}return i}}async function Aee(t,e){const n=Ie(t),r=await l_(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&wA(n,e.targetId,i.au),i}async function xee(t,e){const n=Ie(t);return Zq(n.localStore,e).then((r=>ha(n,r)))}async function Cee(t,e,n,r){const i=Ie(t),o=await(function(l,c){const f=Ie(l),h=Ie(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(g=>h.er(g,c).next((v=>v?f.localDocuments.getDocuments(g,v):X.resolve(null)))))})(i.localStore,e);o!==null?(n==="pending"?await Fd(i.remoteStore):n==="acknowledged"||n==="rejected"?(iI(i,e,r||null),rI(i,e),(function(l,c){Ie(Ie(l).mutationQueue).ir(c)})(i.localStore,e)):Re(6720,"Unknown batchState",{Su:n}),await ha(i,o)):ge(kl,"Cannot apply mutation batch with id: "+e)}async function Iee(t,e){const n=Ie(t);if(D0(n),sI(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Vk(n,r.toArray());n.gu=!0,await TA(n.remoteStore,!0);for(const o of i)M0(n.remoteStore,o)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(hd(n,s),cd(n.localStore,s,!0)))),fd(n.remoteStore,s)})),await i,await Vk(n,r),(function(s){const l=Ie(s);l.Au.forEach(((c,f)=>{fd(l.remoteStore,f)})),l.Ru.Jr(),l.Au=new Map,l.du=new jt(xe.comparator)})(n),n.gu=!1,await TA(n.remoteStore,!1)}}async function Vk(t,e,n){const r=Ie(t),i=[],o=[];for(const s of e){let l;const c=r.Iu.get(s);if(c&&c.length!==0){l=await ud(r.localStore,zr(c[0]));for(const f of c){const h=r.Tu.get(f),g=await Aee(r,h);g.snapshot&&o.push(g.snapshot)}}else{const f=await Xq(r.localStore,s);l=await ud(r.localStore,f),await nI(r,_6(f),s,!1,l.resumeToken)}i.push(l)}return r.Pu.H_(o),i}function _6(t){return tq(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ree(t){return(function(n){return Ie(Ie(n).persistence).Ts()})(Ie(t).localStore)}async function Pee(t,e,n,r){const i=Ie(t);if(i.gu)return void ge(kl,"Ignoring unexpected query state notification.");const o=i.Iu.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=await Zq(i.localStore,rq(o[0])),l=Xm.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yn.EMPTY_BYTE_STRING);await ha(i,s,l);break}case"rejected":await cd(i.localStore,e,!0),hd(i,e,r);break;default:Re(64155,n)}}async function Nee(t,e,n){const r=D0(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ge(kl,"Adding an already active target "+i);continue}const o=await Xq(r.localStore,i),s=await ud(r.localStore,o);await nI(r,_6(o),s.targetId,!1,s.resumeToken),M0(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await cd(r.localStore,i,!1).then((()=>{fd(r.remoteStore,i),hd(r,i)})).catch(Pl)}}function D0(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=See.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vee.bind(null,e),e.Pu.H_=see.bind(null,e.eventManager),e.Pu.yu=aee.bind(null,e.eventManager),e}function sI(t){const e=Ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_ee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tee.bind(null,e),e}function Mee(t,e,n){const r=Ie(t);(async function(o,s,l){try{const c=await s.getMetadata();if(await(function(E,b){const S=Ie(E),A=xn(b.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",(I=>S.Ii.getBundleMetadata(I,b.id))).then((I=>!!I&&I.createTime.compareTo(A)>=0))})(o.localStore,c))return await s.close(),l._completeWith((function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}})(c)),Promise.resolve(new Set);l._updateProgress(d6(c));const f=new uee(c,s.serializer);let h=await s.bu();for(;h;){const v=await f.Ga(h);v&&l._updateProgress(v),h=await s.bu()}const g=await f.ja(o.localStore);return await ha(o,g.Ha,void 0),await(function(E,b){const S=Ie(E);return S.persistence.runTransaction("Save bundle","readwrite",(A=>S.Ii.saveBundleMetadata(A,b)))})(o.localStore,c),l._completeWith(g.progress),Promise.resolve(g.Ja)}catch(c){return rs(kl,`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}})(r,e,n).then((i=>{r.sharedClientState.notifyBundleLoaded(i)}))}class vm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Wq(this.persistence,new Kq,e.initialUser,this.serializer)}Cu(e){return new qC(N0.mi,this.serializer)}Du(e){return new i6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vm.provider={build:()=>new vm};class Dee extends vm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ke(this.persistence.referenceDelegate instanceof a_,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qq(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new qC((r=>a_.mi(r,n)),this.serializer)}}class T6 extends vm{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await sI(this.xu.syncEngine),await Fd(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Wq(this.persistence,new Kq,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new qq(r,e.asyncQueue,n)}Mu(e,n){const r=new $Q(n,this.persistence);return new qQ(e.asyncQueue,r)}Cu(e){const n=zC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new $C(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,o6(),Ov(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new i6}}class kee extends T6{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Jw&&(this.sharedClientState.syncEngine={Co:Cee.bind(null,n),vo:Pee.bind(null,n),Fo:Nee.bind(null,n),Ts:Ree.bind(null,n),Do:xee.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await Iee(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=o6();if(!Jw.v(n))throw new pe(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class _m{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bee.bind(null,this.syncEngine),await TA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oee})()}createDatastore(e){const n=eg(e.databaseInfo.databaseId),r=(function(o){return new qZ(o)})(e.databaseInfo);return(function(o,s,l,c){return new GZ(o,s,l,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,o,s,l){return new KZ(r,i,o,s,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>Lk(this.syncEngine,n,0)),(function(){return Rk.v()?new Rk:new VZ})())}createSyncEngine(e,n){return(function(i,o,s,l,c,f,h){const g=new dee(i,o,s,l,c,f);return h&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const o=Ie(i);ge(nc,"RemoteStore shutting down."),o.Ea.add(5),await Ud(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}_m.provider={build:()=>new _m};function Uk(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oee{constructor(e,n){this.Bu=e,this.serializer=n,this.metadata=new _r,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const n=this.Lu.decode(e),r=Number(n);isNaN(r)&&this.Qu(`length string (${n}) is not valid number`);const i=await this.$u(r);return new lee(JSON.parse(i),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const n=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new pe(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,o){const s=Ie(i),l={documents:o.map((g=>gm(s.serializer,g)))},c=await s.Ho("BatchGetDocuments",s.serializer.databaseId,ot.emptyPath(),l,o.length),f=new Map;c.forEach((g=>{const v=WX(s.serializer,g);f.set(v.key.toString(),v)}));const h=[];return o.forEach((g=>{const v=f.get(g.toString());ke(!!v,55234,{key:g}),h.push(v)})),h})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=xe.fromPath(r);this.mutations.push(new NC(i,this.precondition(i)))})),await(async function(r,i){const o=Ie(r),s={writes:i.map((l=>ym(o.serializer,l)))};await o.Go("Commit",o.serializer.databaseId,ot.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Re(50498,{Gu:e.constructor.name});n=Ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new pe(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ue.min())?on.exists(!1):on.updateTime(n):on.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ue.min()))throw new pe(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return on.updateTime(n)}return on.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vee{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new KC(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Lee(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!jm(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!gq(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="FirestoreClient";class Uee{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=er.UNAUTHENTICATED,this.clientId=yC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async s=>{ge(Sl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(ge(Sl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qd(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Xw(t,e){t.asyncQueue.verifyOperationInProgress(),ge(Sl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Yq(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Fk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aI(t);ge(Sl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Nk(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>Nk(e.remoteStore,i))),t._onlineComponents=e}async function aI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(Sl,"Using user provided OfflineComponentProvider");try{await Xw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;rs("Error using user provided cache. Falling back to memory cache: "+n),await Xw(t,new vm)}}else ge(Sl,"Using default OfflineComponentProvider"),await Xw(t,new Dee(void 0));return t._offlineComponents}async function O0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(Sl,"Using user provided OnlineComponentProvider"),await Fk(t,t._uninitializedComponentsProvider._online)):(ge(Sl,"Using default OnlineComponentProvider"),await Fk(t,new _m))),t._onlineComponents}function E6(t){return aI(t).then((e=>e.persistence))}function lI(t){return aI(t).then((e=>e.localStore))}function w6(t){return O0(t).then((e=>e.remoteStore))}function uI(t){return O0(t).then((e=>e.syncEngine))}function Fee(t){return O0(t).then((e=>e.datastore))}async function pd(t){const e=await O0(t),n=e.eventManager;return n.onListen=hee.bind(null,e.syncEngine),n.onUnlisten=mee.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pee.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gee.bind(null,e.syncEngine),n}function Bee(t){return t.asyncQueue.enqueue((async()=>{const e=await E6(t),n=await w6(t);return e.setNetworkEnabled(!0),(function(i){const o=Ie(i);return o.Ea.delete(0),tg(o)})(n)}))}function qee(t){return t.asyncQueue.enqueue((async()=>{const e=await E6(t),n=await w6(t);return e.setNetworkEnabled(!1),(async function(i){const o=Ie(i);o.Ea.add(0),await Ud(o),o.Ra.set("Offline")})(n)}))}function $ee(t,e){const n=new _r;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const l=await(function(f,h){const g=Ie(f);return g.persistence.runTransaction("read document","readonly",(v=>g.localDocuments.getDocument(v,h)))})(i,o);l.isFoundDocument()?s.resolve(l):l.isNoDocument()?s.resolve(null):s.reject(new pe(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=qd(l,`Failed to get document '${o} from cache`);s.reject(c)}})(await lI(t),e,n))),n.promise}function b6(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,l,c,f){const h=new k0({next:v=>{h.Nu(),s.enqueueAndForget((()=>ZC(o,g)));const E=v.docs.has(l);!E&&v.fromCache?f.reject(new pe(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&c&&c.source==="server"?f.reject(new pe(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new tI(Od(l.path),h,{includeMetadataChanges:!0,qa:!0});return XC(o,g)})(await pd(t),t.asyncQueue,e,n,r))),r.promise}function zee(t,e){const n=new _r;return t.asyncQueue.enqueueAndForget((async()=>(async function(i,o,s){try{const l=await l_(i,o,!0),c=new m6(o,l.Qs),f=c.ru(l.documents),h=c.applyChanges(f,!1);s.resolve(h.snapshot)}catch(l){const c=qd(l,`Failed to execute query '${o} against cache`);s.reject(c)}})(await lI(t),e,n))),n.promise}function S6(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget((async()=>(function(o,s,l,c,f){const h=new k0({next:v=>{h.Nu(),s.enqueueAndForget((()=>ZC(o,g))),v.fromCache&&c.source==="server"?f.reject(new pe(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new tI(l,h,{includeMetadataChanges:!0,qa:!0});return XC(o,g)})(await pd(t),t.asyncQueue,e,n,r))),r.promise}function Hee(t,e){const n=new k0(e);return t.asyncQueue.enqueueAndForget((async()=>(function(i,o){Ie(i).Ca.add(o),o.next()})(await pd(t),n))),()=>{n.Nu(),t.asyncQueue.enqueueAndForget((async()=>(function(i,o){Ie(i).Ca.delete(o)})(await pd(t),n)))}}function Gee(t,e,n,r){const i=(function(s,l){let c;return c=typeof s=="string"?vq().encode(s):s,(function(h,g){return new Oee(h,g)})((function(h,g){if(h instanceof Uint8Array)return Uk(h,g);if(h instanceof ArrayBuffer)return Uk(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(c),l)})(n,eg(e));t.asyncQueue.enqueueAndForget((async()=>{Mee(await uI(t),i,r)}))}function jee(t,e){return t.asyncQueue.enqueue((async()=>(function(r,i){const o=Ie(r);return o.persistence.runTransaction("Get named query","readonly",(s=>o.Ii.getNamedQuery(s,i)))})(await lI(t),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6="firestore.googleapis.com",qk=!0;class $k{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x6,this.ssl=qk}else this.host=e.host,this.ssl=e.ssl??qk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Vq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hZ)throw new pe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_B("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=A6(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ng{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $k({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $k(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new RQ;switch(r.type){case"firstParty":return new DQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Bk.get(n);r&&(ge("ComponentProvider","Removing Datastore"),Bk.delete(n),r.terminate())})(this),Promise.resolve()}}function C6(t,e,n,r={}){var f;t=pt(t,ng);const i=Il(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(zx(`https://${l}`),Hx("Firestore",!0)),o.host!==x6&&o.host!==l&&rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:l,ssl:i,emulatorOptions:r};if(!Qs(c,s)&&(t._setSettings(c),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=er.MOCK_USER;else{h=z4(r.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new pe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new er(v)}t._authCredentials=new PQ(new yB(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gr=class I6{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new I6(this.firestore,e,this._query)}},Gt=class Mp{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mp(this.firestore,e,this._key)}toJSON(){return{type:Mp._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Gm(n,Mp._jsonSchema))return new Mp(e,r||null,new xe(ot.fromString(n.referencePath)))}};Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:Dn("string",Gt._jsonSchemaVersion),referencePath:Dn("string")};let dl=class R6 extends Gr{constructor(e,n,r){super(e,n,Od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new xe(e))}withConverter(e){return new R6(this.firestore,e,this._path)}};function Go(t,e,...n){if(t=Ne(t),vC("collection","path",e),t instanceof ng){const r=ot.fromString(e,...n);return PD(r),new dl(t,null,r)}{if(!(t instanceof Gt||t instanceof dl))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return PD(r),new dl(t.firestore,null,r)}}function Kee(t,e){if(t=pt(t,ng),vC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new pe(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Gr(t,null,(function(r){return new ca(ot.emptyPath(),r)})(e))}function go(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=yC.newId()),vC("doc","path",e),t instanceof ng){const r=ot.fromString(e,...n);return RD(r),new Gt(t,null,new xe(r))}{if(!(t instanceof Gt||t instanceof dl))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ot.fromString(e,...n));return RD(r),new Gt(t.firestore,t instanceof dl?t.converter:null,new xe(r))}}function P6(t,e){return t=Ne(t),e=Ne(e),(t instanceof Gt||t instanceof dl)&&(e instanceof Gt||e instanceof dl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function N6(t,e){return t=Ne(t),e=Ne(e),t instanceof Gr&&e instanceof Gr&&t.firestore===e.firestore&&Ym(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="AsyncQueue";class Hk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KC(this,"async_queue_retry"),this._c=()=>{const r=Ov();r&&ge(zk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ov();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ov();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new _r;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nl(e))throw e;ge(zk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,An("INTERNAL UNHANDLED ERROR: ",Gk(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=QC.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Re(47125,{Pc:Gk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Gk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}class Wee{constructor(){this._progressObserver={},this._taskCompletionResolver=new _r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yee=-1;let vn=class extends ng{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Hk,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hk(e),this._firestoreClient=void 0,await e}}};function Jee(t,e){const n=typeof t=="object"?t:s0(),r=typeof t=="string"?t:e_,i=Pd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=q4("firestore");o&&C6(i,...o)}return i}function Tr(t){if(t._terminated)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||M6(t),t._firestoreClient}function M6(t){var r,i,o;const e=t._freezeSettings(),n=(function(l,c,f,h){return new yX(l,c,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,A6(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Uee(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}})(t._componentsProvider))}function Qee(t,e){rs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return D6(t,_m.provider,{build:r=>new T6(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Xee(t){rs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();D6(t,_m.provider,{build:n=>new kee(n,e.cacheSizeBytes)})}function D6(t,e,n){if((t=pt(t,vn))._firestoreClient||t._terminated)throw new pe(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new pe(ie.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},M6(t)}function Zee(t){if(t._initialized&&!t._terminated)throw new pe(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _r;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Qo.v())return Promise.resolve();const i=r+jq;await Qo.delete(i)})(zC(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function ete(t){return(function(n){const r=new _r;return n.asyncQueue.enqueueAndForget((async()=>Eee(await uI(n),r))),r.promise})(Tr(t=pt(t,vn)))}function tte(t){return Bee(Tr(t=pt(t,vn)))}function nte(t){return qee(Tr(t=pt(t,vn)))}function rte(t,e){const n=Tr(t=pt(t,vn)),r=new Wee;return Gee(n,t._databaseId,e,r),r}function ite(t,e){return jee(Tr(t=pt(t,vn)),e).then((n=>n?new Gr(t,null,n.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xr(yn.fromBase64String(e))}catch(n){throw new pe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xr(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gm(e,xr._jsonSchema))return xr.fromBase64String(e.bytes)}}xr._jsonSchemaVersion="firestore/bytes/1.0",xr._jsonSchema={type:Dn("string",xr._jsonSchemaVersion),bytes:Dn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Al=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yo._jsonSchemaVersion}}static fromJSON(e){if(Gm(e,yo._jsonSchema))return new yo(e.latitude,e.longitude)}}yo._jsonSchemaVersion="firestore/geoPoint/1.0",yo._jsonSchema={type:Dn("string",yo._jsonSchemaVersion),latitude:Dn("number"),longitude:Dn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gm(e,Zo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Zo(e.vectorValues);throw new pe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zo._jsonSchemaVersion="firestore/vectorValue/1.0",Zo._jsonSchema={type:Dn("string",Zo._jsonSchemaVersion),vectorValues:Dn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ote=/^__.*__$/;class ste{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new da(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ld(e,this.data,n,this.fieldTransforms)}}class k6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new da(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function O6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class L0{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new L0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return d_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(O6(this.Ac)&&ote.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ate{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||eg(e)}Cc(e,n,r,i=!1){return new L0({Ac:e,methodName:n,Dc:r,path:rn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pc(t){const e=t._freezeSettings(),n=eg(t._databaseId);return new ate(t._databaseId,!!e.ignoreUndefinedProperties,n)}function V0(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);gI("Data must be an object, but it was:",s,r);const l=U6(r,s);let c,f;if(o.merge)c=new ei(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const g of o.mergeFields){const v=SA(e,g,n);if(!s.contains(v))throw new pe(ie.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);B6(h,v)||h.push(v)}c=new ei(h),f=s.fieldTransforms.filter((g=>c.covers(g.field)))}else c=null,f=s.fieldTransforms;return new ste(new yr(l),c,f)}class rg extends hc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rg}}function L6(t,e,n){return new L0({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cI extends hc{_toFieldTransform(e){return new Qm(e.path,new sd)}isEqual(e){return e instanceof cI}}class fI extends hc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=L6(this,e,!0),r=this.vc.map((o=>mc(o,n))),i=new Qu(r);return new Qm(e.path,i)}isEqual(e){return e instanceof fI&&Qs(this.vc,e.vc)}}class dI extends hc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=L6(this,e,!0),r=this.vc.map((o=>mc(o,n))),i=new Xu(r);return new Qm(e.path,i)}isEqual(e){return e instanceof dI&&Qs(this.vc,e.vc)}}class hI extends hc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new ad(e.serializer,uq(e.serializer,this.Fc));return new Qm(e.path,n)}isEqual(e){return e instanceof hI&&this.Fc===e.Fc}}function pI(t,e,n,r){const i=t.Cc(1,e,n);gI("Data must be an object, but it was:",i,r);const o=[],s=yr.empty();Ml(r,((c,f)=>{const h=yI(e,c,n);f=Ne(f);const g=i.yc(h);if(f instanceof rg)o.push(h);else{const v=mc(f,g);v!=null&&(o.push(h),s.set(h,v))}}));const l=new ei(o);return new k6(s,l,i.fieldTransforms)}function mI(t,e,n,r,i,o){const s=t.Cc(1,e,n),l=[SA(e,r,n)],c=[i];if(o.length%2!=0)throw new pe(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<o.length;v+=2)l.push(SA(e,o[v])),c.push(o[v+1]);const f=[],h=yr.empty();for(let v=l.length-1;v>=0;--v)if(!B6(f,l[v])){const E=l[v];let b=c[v];b=Ne(b);const S=s.yc(E);if(b instanceof rg)f.push(E);else{const A=mc(b,S);A!=null&&(f.push(E),h.set(E,A))}}const g=new ei(f);return new k6(h,g,s.fieldTransforms)}function V6(t,e,n,r=!1){return mc(n,t.Cc(r?4:3,e))}function mc(t,e){if(F6(t=Ne(t)))return gI("Unsupported field value:",e,t),U6(t,e);if(t instanceof hc)return(function(r,i){if(!O6(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let s=0;for(const l of r){let c=mc(l,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=bt.fromDate(r);return{timestampValue:ld(i.serializer,o)}}if(r instanceof bt){const o=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ld(i.serializer,o)}}if(r instanceof yo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xr)return{bytesValue:Eq(i.serializer,r._byteString)};if(r instanceof Gt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:LC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zo)return(function(s,l){return{mapValue:{fields:{[AC]:{stringValue:xC},[rd]:{arrayValue:{values:s.toArray().map((f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return PC(l.serializer,f)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${_0(r)}`)})(t,e)}function U6(t,e){const n={};return UB(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ml(t,((r,i)=>{const o=mc(i,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function F6(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof bt||t instanceof yo||t instanceof xr||t instanceof Gt||t instanceof hc||t instanceof Zo)}function gI(t,e,n){if(!F6(n)||!TB(n)){const r=_0(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function SA(t,e,n){if((e=Ne(e))instanceof Al)return e._internalPath;if(typeof e=="string")return yI(t,e);throw d_("Field path arguments must be of type string or ",t,!1,void 0,n)}const lte=new RegExp("[~\\*/\\[\\]]");function yI(t,e,n){if(e.search(lte)>=0)throw d_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Al(...e.split("."))._internalPath}catch{throw d_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function d_(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new pe(ie.INVALID_ARGUMENT,l+t+c)}function B6(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ute(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(U0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ute extends Tm{data(){return super.data()}}function U0(t,e){return typeof e=="string"?yI(t,e):e instanceof Al?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vI{}class ig extends vI{}function Gi(t,e,...n){let r=[];e instanceof vI&&r.push(e),r=r.concat(n),(function(o){const s=o.filter((c=>c instanceof _I)).length,l=o.filter((c=>c instanceof F0)).length;if(s>1||s>0&&l>0)throw new pe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class F0 extends ig{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new F0(e,n,r)}_apply(e){const n=this._parse(e);return z6(e._query,n),new Gr(e.firestore,e.converter,cA(e._query,n))}_parse(e){const n=pc(e.firestore);return(function(o,s,l,c,f,h,g){let v;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Kk(g,h);const b=[];for(const S of g)b.push(jk(c,o,S));v={arrayValue:{values:b}}}else v=jk(c,o,g)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Kk(g,h),v=V6(l,s,g,h==="in"||h==="not-in");return lt.create(f,h,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cte(t,e,n){const r=e,i=U0("where",t);return F0._create(i,r,n)}class _I extends vI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new _I(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ct.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i;const l=o.getFlattenedFilters();for(const c of l)z6(s,c),s=cA(s,c)})(e._query,n),new Gr(e.firestore,e.converter,cA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class TI extends ig{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new TI(e,n)}_apply(e){const n=(function(i,o,s){if(i.startAt!==null)throw new pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new pe(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mm(o,s)})(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,(function(i,o){const s=i.explicitOrderBy.concat([o]);return new ca(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function h_(t,e="asc"){const n=e,r=U0("orderBy",t);return TI._create(r,n)}class B0 extends ig{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new B0(e,n,r)}_apply(e){return new Gr(e.firestore,e.converter,r_(e._query,this._limit,this._limitType))}}function fte(t){return EB("limit",t),B0._create("limit",t,"F")}function dte(t){return EB("limitToLast",t),B0._create("limitToLast",t,"L")}class q0 extends ig{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new q0(e,n,r)}_apply(e){const n=$6(e,this.type,this._docOrFields,this._inclusive);return new Gr(e.firestore,e.converter,(function(i,o){return new ca(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,n))}}function hte(...t){return q0._create("startAt",t,!0)}function pte(...t){return q0._create("startAfter",t,!1)}class $0 extends ig{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new $0(e,n,r)}_apply(e){const n=$6(e,this.type,this._docOrFields,this._inclusive);return new Gr(e.firestore,e.converter,(function(i,o){return new ca(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)})(e._query,n))}}function mte(...t){return $0._create("endBefore",t,!1)}function gte(...t){return $0._create("endAt",t,!0)}function $6(t,e,n,r){if(n[0]=Ne(n[0]),n[0]instanceof Tm)return(function(o,s,l,c,f){if(!c)throw new pe(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const g of Uf(o))if(g.field.isKeyField())h.push(Yu(s,c.key));else{const v=c.data.field(g.field);if(S0(v))throw new pe(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const E=g.field.canonicalString();throw new pe(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(v)}return new wl(h,f)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=pc(t.firestore);return(function(s,l,c,f,h,g){const v=s.explicitOrderBy;if(h.length>v.length)throw new pe(ie.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let b=0;b<h.length;b++){const S=h[b];if(v[b].field.isKeyField()){if(typeof S!="string")throw new pe(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof S}`);if(!IC(s)&&S.indexOf("/")!==-1)throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${S}' contains a slash.`);const A=s.path.child(ot.fromString(S));if(!xe.isDocumentKey(A))throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const I=new xe(A);E.push(Yu(l,I))}else{const A=V6(c,f,S);E.push(A)}}return new wl(E,g)})(t._query,t.firestore._databaseId,i,e,n,r)}}function jk(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new pe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IC(e)&&n.indexOf("/")!==-1)throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!xe.isDocumentKey(r))throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yu(t,new xe(r))}if(n instanceof Gt)return Yu(t,n._key);throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_0(n)}.`)}function Kk(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function z6(t,e){const n=(function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EI{convertValue(e,n="none"){switch(Tl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ml(e,((i,o)=>{r[i]=this.convertValue(o,n)})),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[rd].arrayValue)==null?void 0:i.values)==null?void 0:o.map((s=>nn(s.doubleValue)));return new Zo(n)}convertGeoPoint(e){return new yo(nn(e.latitude),nn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=A0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(dm(e));default:return null}}convertTimestamp(e){const n=ta(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);ke(Mq(r),9688,{name:e});const i=new _l(r.get(1),r.get(3)),o=new xe(r.popFirst(5));return i.isEqual(n)||An(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class yte extends EI{constructor(e){super(),this.firestore=e}convertBytes(e){return new xr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}class ku{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Yi=class H6 extends Tm{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(U0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=H6._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Yi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yi._jsonSchema={type:Dn("string",Yi._jsonSchemaVersion),bundleSource:Dn("string","DocumentSnapshot"),bundleName:Dn("string"),bundle:Dn("string")};let Yp=class extends Yi{data(e={}){return super.data(e)}},vo=class G6{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ku(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Yp(this._firestore,this._userDataWriter,r.key,r,new ku(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((l=>{const c=new Yp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ku(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>o||l.type!==3)).map((l=>{const c=new Yp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ku(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),h=s.indexOf(l.doc.key)),{type:vte(l.type),doc:c,oldIndex:f,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=G6._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yC.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function vte(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}function j6(t,e){return t instanceof Yi&&e instanceof Yi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof vo&&e instanceof vo&&t._firestore===e._firestore&&N6(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t){t=pt(t,Gt);const e=pt(t.firestore,vn);return b6(Tr(e),t._key).then((n=>SI(e,t,n)))}vo._jsonSchemaVersion="firestore/querySnapshot/1.0",vo._jsonSchema={type:Dn("string",vo._jsonSchemaVersion),bundleSource:Dn("string","QuerySnapshot"),bundleName:Dn("string"),bundle:Dn("string")};class gc extends EI{constructor(e){super(),this.firestore=e}convertBytes(e){return new xr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function _te(t){t=pt(t,Gt);const e=pt(t.firestore,vn),n=Tr(e),r=new gc(e);return $ee(n,t._key).then((i=>new Yi(e,r,t._key,i,new ku(i!==null&&i.hasLocalMutations,!0),t.converter)))}function Tte(t){t=pt(t,Gt);const e=pt(t.firestore,vn);return b6(Tr(e),t._key,{source:"server"}).then((n=>SI(e,t,n)))}function bI(t){t=pt(t,Gr);const e=pt(t.firestore,vn),n=Tr(e),r=new gc(e);return q6(t._query),S6(n,t._query).then((i=>new vo(e,r,t,i)))}function Ete(t){t=pt(t,Gr);const e=pt(t.firestore,vn),n=Tr(e),r=new gc(e);return zee(n,t._query).then((i=>new vo(e,r,t,i)))}function wte(t){t=pt(t,Gr);const e=pt(t.firestore,vn),n=Tr(e),r=new gc(e);return S6(n,t._query,{source:"server"}).then((i=>new vo(e,r,t,i)))}function Wk(t,e,n){t=pt(t,Gt);const r=pt(t.firestore,vn),i=z0(t.converter,e,n);return $d(r,[V0(pc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,on.none())])}function Em(t,e,n,...r){t=pt(t,Gt);const i=pt(t.firestore,vn),o=pc(i);let s;return s=typeof(e=Ne(e))=="string"||e instanceof Al?mI(o,"updateDoc",t._key,e,n,r):pI(o,"updateDoc",t._key,e),$d(i,[s.toMutation(t._key,on.exists(!0))])}function AA(t){return $d(pt(t.firestore,vn),[new Vd(t._key,on.none())])}function wm(t,e){const n=pt(t.firestore,vn),r=go(t),i=z0(t.converter,e);return $d(n,[V0(pc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then((()=>r))}function bm(t,...e){var c,f,h;t=Ne(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||bA(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(bA(e[r])){const g=e[r];e[r]=(c=g.next)==null?void 0:c.bind(g),e[r+1]=(f=g.error)==null?void 0:f.bind(g),e[r+2]=(h=g.complete)==null?void 0:h.bind(g)}let o,s,l;if(t instanceof Gt)s=pt(t.firestore,vn),l=Od(t._key.path),o={next:g=>{e[r]&&e[r](SI(s,t,g))},error:e[r+1],complete:e[r+2]};else{const g=pt(t,Gr);s=pt(g.firestore,vn),l=g._query;const v=new gc(s);o={next:E=>{e[r]&&e[r](new vo(s,v,g,E))},error:e[r+1],complete:e[r+2]},q6(t._query)}return(function(v,E,b,S){const A=new k0(S),I=new tI(E,A,b);return v.asyncQueue.enqueueAndForget((async()=>XC(await pd(v),I))),()=>{A.Nu(),v.asyncQueue.enqueueAndForget((async()=>ZC(await pd(v),I)))}})(Tr(s),l,i,o)}function bte(t,e){return Hee(Tr(t=pt(t,vn)),bA(e)?e:{next:e})}function $d(t,e){return(function(r,i){const o=new _r;return r.asyncQueue.enqueueAndForget((async()=>yee(await uI(r),i,o))),o.promise})(Tr(t),e)}function SI(t,e,n){const r=n.docs.get(e._key),i=new gc(t);return new Yi(t,i,e._key,r,new ku(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ste={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K6=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pc(e)}set(e,n,r){this._verifyNotCommitted();const i=al(e,this._firestore),o=z0(i.converter,n,r),s=V0(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,on.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=al(e,this._firestore);let s;return s=typeof(n=Ne(n))=="string"||n instanceof Al?mI(this._dataReader,"WriteBatch.update",o._key,n,r,i):pI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=al(e,this._firestore);return this._mutations=this._mutations.concat(new Vd(n._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function al(t,e){if((t=Ne(t)).firestore!==e)throw new pe(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ate{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=pc(e)}get(e){const n=al(e,this._firestore),r=new yte(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Re(24041);const o=i[0];if(o.isFoundDocument())return new Tm(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new Tm(this._firestore,r,n._key,null,n.converter);throw Re(18433,{doc:o})}))}set(e,n,r){const i=al(e,this._firestore),o=z0(i.converter,n,r),s=V0(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){const o=al(e,this._firestore);let s;return s=typeof(n=Ne(n))=="string"||n instanceof Al?mI(this._dataReader,"Transaction.update",o._key,n,r,i):pI(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){const n=al(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xte=class extends Ate{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=al(e,this._firestore),r=new gc(this._firestore);return super.get(e).then((i=>new Yi(this._firestore,r,n._key,i._document,new ku(!1,!1),n.converter)))}};function Cte(t,e,n){t=pt(t,vn);const r={...Ste,...n};return(function(o){if(o.maxAttempts<1)throw new pe(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,l){const c=new _r;return o.asyncQueue.enqueueAndForget((async()=>{const f=await Fee(o);new Vee(o.asyncQueue,f,l,s,c).ju()})),c.promise})(Tr(t),(i=>e(new xte(t,i))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ite(){return new rg("deleteField")}function hl(){return new cI("serverTimestamp")}function Rte(...t){return new fI("arrayUnion",t)}function Pte(...t){return new dI("arrayRemove",t)}function W6(t){return new hI("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nte(t){return Tr(t=pt(t,vn)),new K6(t,(e=>$d(t,e)))}(function(e,n=!0){(function(i){kd=i})(aa),Zs(new Xi("firestore",((r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new vn(new NQ(r.getProvider("auth-internal")),new kQ(s,r.getProvider("app-check-internal")),(function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new pe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _l(f.options.projectId,h)})(s,i),s);return o={useFetchStreams:n,...o},l._setSettings(o),l}),"PUBLIC").setMultipleInstances(!0)),Ai(AD,xD,e),Ai(AD,xD,"esm2020")})();const Mte="@firebase/firestore-compat",Dte="0.4.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new pe("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(){if(typeof Uint8Array>"u")throw new pe("unimplemented","Uint8Arrays are not available in this environment.")}function Jk(){if(!mX())throw new pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Y6=class xA{constructor(e){this._delegate=e}static fromBase64String(e){return Jk(),new xA(xr.fromBase64String(e))}static fromUint8Array(e){return Yk(),new xA(xr.fromUint8Array(e))}toBase64(){return Jk(),this._delegate.toBase64()}toUint8Array(){return Yk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(t){return kte(t,["next","error","complete"])}function kte(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ote{enableIndexedDbPersistence(e,n){return Qee(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Xee(e._delegate)}clearIndexedDbPersistence(e){return Zee(e._delegate)}}class J6{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _l||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&rs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...n,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){C6(this._delegate,e,n,r)}enableNetwork(){return tte(this._delegate)}disableNetwork(){return nte(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_B("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ete(this._delegate)}onSnapshotsInSync(e){return bte(this._delegate,e)}get app(){if(!this._appCompat)throw new pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new md(this,Go(this._delegate,e))}catch(n){throw Ur(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ki(this,go(this._delegate,e))}catch(n){throw Ur(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Lr(this,Kee(this._delegate,e))}catch(n){throw Ur(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Cte(this._delegate,n=>e(new Q6(this,n)))}batch(){return Tr(this._delegate),new X6(new K6(this._delegate,e=>$d(this._delegate,e)))}loadBundle(e){return rte(this._delegate,e)}namedQuery(e){return ite(this._delegate,e).then(n=>n?new Lr(this,n):null)}}class H0 extends EI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Y6(new xr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ki.forKey(n,this.firestore,null)}}function Lte(t){CQ(t)}class Q6{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new H0(e)}get(e){const n=Ou(e);return this._delegate.get(n).then(r=>new Sm(this._firestore,new Yi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ou(e);return r?(AI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Ou(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Ou(e);return this._delegate.delete(n),this}}class X6{constructor(e){this._delegate=e}set(e,n,r){const i=Ou(e);return r?(AI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=Ou(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=Ou(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class rc{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Yp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Am(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=rc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new rc(e,new H0(e),n),i.set(n,o)),o}}rc.INSTANCES=new WeakMap;class Ki{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new H0(e)}static forPath(e,n,r){if(e.length%2!==0)throw new pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ki(n,new Gt(n._delegate,r,new xe(e)))}static forKey(e,n,r){return new Ki(n,new Gt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new md(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new md(this.firestore,Go(this._delegate,e))}catch(n){throw Ur(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ne(e),e instanceof Gt?P6(this._delegate,e):!1}set(e,n){n=AI("DocumentReference.set",n);try{return n?Wk(this._delegate,e,n):Wk(this._delegate,e)}catch(r){throw Ur(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?Em(this._delegate,e):Em(this._delegate,e,n,...r)}catch(i){throw Ur(i,"updateDoc()","DocumentReference.update()")}}delete(){return AA(this._delegate)}onSnapshot(...e){const n=Z6(e),r=e3(e,i=>new Sm(this.firestore,new Yi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return bm(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=_te(this._delegate):(e==null?void 0:e.source)==="server"?n=Tte(this._delegate):n=wI(this._delegate),n.then(r=>new Sm(this.firestore,new Yi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ki(this.firestore,e?this._delegate.withConverter(rc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ur(t,e,n){return t.message=t.message.replace(e,n),t}function Z6(t){for(const e of t)if(typeof e=="object"&&!CA(e))return e;return{}}function e3(t,e){var r,i;let n;return CA(t[0])?n=t[0]:CA(t[1])?n=t[1]:typeof t[0]=="function"?n={next:t[0],error:t[1],complete:t[2]}:n={next:t[1],error:t[2],complete:t[3]},{next:o=>{n.next&&n.next(e(o))},error:(r=n.error)==null?void 0:r.bind(n),complete:(i=n.complete)==null?void 0:i.bind(n)}}class Sm{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ki(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return j6(this._delegate,e._delegate)}}class Am extends Sm{data(e){const n=this._delegate.data(e);return this._delegate._converter||IQ(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}}class Lr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new H0(e)}where(e,n,r){try{return new Lr(this.firestore,Gi(this._delegate,cte(e,n,r)))}catch(i){throw Ur(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Lr(this.firestore,Gi(this._delegate,h_(e,n)))}catch(r){throw Ur(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Lr(this.firestore,Gi(this._delegate,fte(e)))}catch(n){throw Ur(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Lr(this.firestore,Gi(this._delegate,dte(e)))}catch(n){throw Ur(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Lr(this.firestore,Gi(this._delegate,hte(...e)))}catch(n){throw Ur(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Lr(this.firestore,Gi(this._delegate,pte(...e)))}catch(n){throw Ur(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Lr(this.firestore,Gi(this._delegate,mte(...e)))}catch(n){throw Ur(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Lr(this.firestore,Gi(this._delegate,gte(...e)))}catch(n){throw Ur(n,"endAt()","Query.endAt()")}}isEqual(e){return N6(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Ete(this._delegate):(e==null?void 0:e.source)==="server"?n=wte(this._delegate):n=bI(this._delegate),n.then(r=>new IA(this.firestore,new vo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=Z6(e),r=e3(e,i=>new IA(this.firestore,new vo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return bm(this._delegate,n,r)}withConverter(e){return new Lr(this.firestore,e?this._delegate.withConverter(rc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Vte{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Am(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class IA{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Lr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Am(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Vte(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Am(this._firestore,r))})}isEqual(e){return j6(this._delegate,e._delegate)}}class md extends Lr{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ki(this.firestore,e):null}doc(e){try{return e===void 0?new Ki(this.firestore,go(this._delegate)):new Ki(this.firestore,go(this._delegate,e))}catch(n){throw Ur(n,"doc()","CollectionReference.doc()")}}add(e){return wm(this._delegate,e).then(n=>new Ki(this.firestore,n))}isEqual(e){return P6(this._delegate,e._delegate)}withConverter(e){return new md(this.firestore,e?this._delegate.withConverter(rc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ou(t){return pt(t,Gt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(...e){this._delegate=new Al(...e)}static documentId(){return new xI(rn.keyField().canonicalString())}isEqual(e){return e=Ne(e),e instanceof Al?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{static serverTimestamp(){const e=hl();return e._methodName="FieldValue.serverTimestamp",new Nu(e)}static delete(){const e=Ite();return e._methodName="FieldValue.delete",new Nu(e)}static arrayUnion(...e){const n=Rte(...e);return n._methodName="FieldValue.arrayUnion",new Nu(n)}static arrayRemove(...e){const n=Pte(...e);return n._methodName="FieldValue.arrayRemove",new Nu(n)}static increment(e){const n=W6(e);return n._methodName="FieldValue.increment",new Nu(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ute={Firestore:J6,GeoPoint:yo,Timestamp:bt,Blob:Y6,Transaction:Q6,WriteBatch:X6,DocumentReference:Ki,DocumentSnapshot:Sm,Query:Lr,QueryDocumentSnapshot:Am,QuerySnapshot:IA,CollectionReference:md,FieldPath:xI,FieldValue:Nu,setLogLevel:Lte,CACHE_SIZE_UNLIMITED:Yee};function Fte(t,e){t.INTERNAL.registerComponent(new Xi("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps({...Ute}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bte(t){Fte(t,(e,n)=>new J6(e,n,new Ote)),t.registerVersion(Mte,Dte)}Bte(fc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3="firebasestorage.googleapis.com",n3="storageBucket",qte=120*1e3,$te=600*1e3,zte=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn extends Rr{constructor(e,n,r=0){super(Zw(e),`Firebase Storage: ${n} (${Zw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zt||(Zt={}));function Zw(t){return"storage/"+t}function CI(){const t="An unknown error occurred, please check the error payload for server response.";return new hn(Zt.UNKNOWN,t)}function Hte(t){return new hn(Zt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Gte(t){return new hn(Zt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jte(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new hn(Zt.UNAUTHENTICATED,t)}function Kte(){return new hn(Zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Wte(t){return new hn(Zt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function r3(){return new hn(Zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function i3(){return new hn(Zt.CANCELED,"User canceled the upload/download.")}function Yte(t){return new hn(Zt.INVALID_URL,"Invalid URL '"+t+"'.")}function Jte(t){return new hn(Zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Qte(){return new hn(Zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+n3+"' property when initializing the app?")}function o3(){return new hn(Zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Xte(){return new hn(Zt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Zte(){return new hn(Zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ene(t){return new hn(Zt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bf(t){return new hn(Zt.INVALID_ARGUMENT,t)}function s3(){return new hn(Zt.APP_DELETED,"The Firebase app was deleted.")}function a3(t){return new hn(Zt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jp(t,e){return new hn(Zt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function mp(t){throw new hn(Zt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Cr.makeFromUrl(e,n)}catch{return new Cr(e,"")}if(r.path==="")return r;throw Jte(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const h="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",E=new RegExp(`^https?://${g}/${h}/b/${i}/o${v}`,"i"),b={bucket:1,path:3},S=n===t3?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",I=new RegExp(`^https?://${S}/${i}/${A}`,"i"),k=[{regex:l,indices:c,postModify:o},{regex:E,indices:b,postModify:f},{regex:I,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<k.length;q++){const $=k[q],H=$.regex.exec(e);if(H){const M=H[$.indices.bucket];let L=H[$.indices.path];L||(L=""),r=new Cr(M,L),$.postModify(r);break}}if(r==null)throw Yte(e);return r}}class tne{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nne(t,e,n){let r=1,i=null,o=null,s=!1,l=0;function c(){return l===2}let f=!1;function h(...A){f||(f=!0,e.apply(null,A))}function g(A){i=setTimeout(()=>{i=null,t(E,c())},A)}function v(){o&&clearTimeout(o)}function E(A,...I){if(f){v();return}if(A){v(),h.call(null,A,...I);return}if(c()||s){v(),h.call(null,A,...I);return}r<64&&(r*=2);let k;l===1?(l=2,k=0):k=(r+Math.random())*1e3,g(k)}let b=!1;function S(A){b||(b=!0,v(),!f&&(i!==null?(A||(l=2),clearTimeout(i),g(0)):A||(l=1)))}return g(0),o=setTimeout(()=>{s=!0,S(!0)},n),S}function rne(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ine(t){return t!==void 0}function one(t){return typeof t=="function"}function sne(t){return typeof t=="object"&&!Array.isArray(t)}function G0(t){return typeof t=="string"||t instanceof String}function Qk(t){return II()&&t instanceof Blob}function II(){return typeof Blob<"u"}function RA(t,e,n,r){if(r<e)throw Bf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Bf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function l3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var $u;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($u||($u={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ane{constructor(e,n,r,i,o,s,l,c,f,h,g,v=!0,E=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=h,this.connectionFactory_=g,this.retry=v,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,S)=>{this.resolve_=b,this.reject_=S,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Qy(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=l=>{const c=l.loaded,f=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const l=o.getErrorCode()===$u.NO_ERROR,c=o.getStatus();if(!l||u3(c,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===$u.ABORT;r(!1,new Qy(!1,null,h));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new Qy(f,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());ine(c)?o(c):o()}catch(c){s(c)}else if(l!==null){const c=CI();c.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,c)):s(c)}else if(i.canceled){const c=this.appDelete_?s3():i3();s(c)}else{const c=r3();s(c)}};this.canceled_?n(!1,new Qy(!1,null,!0)):this.backoffId_=nne(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qy{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function lne(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function une(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cne(t,e){e&&(t["X-Firebase-GMPID"]=e)}function fne(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function dne(t,e,n,r,i,o,s=!0,l=!1){const c=l3(t.urlParams),f=t.url+c,h=Object.assign({},t.headers);return cne(h,e),lne(h,n),une(h,o),fne(h,r),new ane(f,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pne(...t){const e=hne();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(II())return new Blob(t);throw new hn(Zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mne(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gne(t){if(typeof atob>"u")throw ene("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class eb{constructor(e,n){this.data=e,this.contentType=n||null}}function RI(t,e){switch(t){case wi.RAW:return new eb(c3(e));case wi.BASE64:case wi.BASE64URL:return new eb(f3(t,e));case wi.DATA_URL:return new eb(vne(e),_ne(e))}throw CI()}function c3(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function yne(t){let e;try{e=decodeURIComponent(t)}catch{throw Jp(wi.DATA_URL,"Malformed data URL.")}return c3(e)}function f3(t,e){switch(t){case wi.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Jp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wi.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Jp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gne(e)}catch(i){throw i.message.includes("polyfill")?i:Jp(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class d3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Jp(wi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Tne(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function vne(t){const e=new d3(t);return e.base64?f3(wi.BASE64,e.rest):yne(e.rest)}function _ne(t){return new d3(t).contentType}function Tne(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n){let r=0,i="";Qk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Qk(this.data_)){const r=this.data_,i=mne(r,e,n);return i===null?null:new jo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new jo(r,!0)}}static getBlob(...e){if(II()){const n=e.map(r=>r instanceof jo?r.data_:r);return new jo(pne.apply(null,n))}else{const n=e.map(s=>G0(s)?RI(wi.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let l=0;l<s.length;l++)i[o++]=s[l]}),new jo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){let e;try{e=JSON.parse(t)}catch{return null}return sne(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ene(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wne(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function h3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bne(t,e){return e}class Or{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||bne}}let Xy=null;function Sne(t){return!G0(t)||t.length<2?t:h3(t)}function og(){if(Xy)return Xy;const t=[];t.push(new Or("bucket")),t.push(new Or("generation")),t.push(new Or("metageneration")),t.push(new Or("name","fullPath",!0));function e(o,s){return Sne(s)}const n=new Or("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Or("size");return i.xform=r,t.push(i),t.push(new Or("timeCreated")),t.push(new Or("updated")),t.push(new Or("md5Hash",null,!0)),t.push(new Or("cacheControl",null,!0)),t.push(new Or("contentDisposition",null,!0)),t.push(new Or("contentEncoding",null,!0)),t.push(new Or("contentLanguage",null,!0)),t.push(new Or("contentType",null,!0)),t.push(new Or("metadata","customMetadata",!0)),Xy=t,Xy}function Ane(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Cr(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function xne(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return Ane(r,t),r}function p3(t,e,n){const r=PI(e);return r===null?null:xne(t,r,n)}function Cne(t,e,n,r){const i=PI(e);if(i===null||!G0(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(f=>{const h=t.bucket,g=t.fullPath,v="/b/"+s(h)+"/o/"+s(g),E=Ol(v,n,r),b=l3({alt:"media",token:f});return E+b})[0]}function NI(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="prefixes",Zk="items";function Ine(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Xk])for(const i of n[Xk]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new Cr(e,o));r.prefixes.push(s)}if(n[Zk])for(const i of n[Zk]){const o=t._makeStorageReference(new Cr(e,i.name));r.items.push(o)}return r}function Rne(t,e,n){const r=PI(n);return r===null?null:Ine(t,e,r)}class pa{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t){if(!t)throw CI()}function j0(t,e){function n(r,i){const o=p3(t,i,e);return es(o!==null),o}return n}function Pne(t,e){function n(r,i){const o=Rne(t,e,i);return es(o!==null),o}return n}function Nne(t,e){function n(r,i){const o=p3(t,i,e);return es(o!==null),Cne(o,i,t.host,t._protocol)}return n}function zd(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Kte():i=jte():n.getStatus()===402?i=Gte(t.bucket):n.getStatus()===403?i=Wte(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function K0(t){const e=zd(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=Hte(t.path)),o.serverResponse=i.serverResponse,o}return n}function m3(t,e,n){const r=e.fullServerUrl(),i=Ol(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,l=new pa(i,o,j0(t,n),s);return l.errorHandler=K0(e),l}function Mne(t,e,n,r,i){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=e.bucketOnlyServerUrl(),l=Ol(s,t.host,t._protocol),c="GET",f=t.maxOperationRetryTime,h=new pa(l,c,Pne(t,e.bucket),f);return h.urlParams=o,h.errorHandler=zd(e),h}function Dne(t,e,n){const r=e.fullServerUrl(),i=Ol(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,l=new pa(i,o,Nne(t,n),s);return l.errorHandler=K0(e),l}function kne(t,e,n,r){const i=e.fullServerUrl(),o=Ol(i,t.host,t._protocol),s="PATCH",l=NI(n,r),c={"Content-Type":"application/json; charset=utf-8"},f=t.maxOperationRetryTime,h=new pa(o,s,j0(t,r),f);return h.headers=c,h.body=l,h.errorHandler=K0(e),h}function One(t,e){const n=e.fullServerUrl(),r=Ol(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(c,f){}const l=new pa(r,i,s,o);return l.successCodes=[200,204],l.errorHandler=K0(e),l}function Lne(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function g3(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Lne(null,e)),r}function y3(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let k="";for(let q=0;q<2;q++)k=k+Math.random().toString().slice(2);return k}const c=l();s["Content-Type"]="multipart/related; boundary="+c;const f=g3(e,r,i),h=NI(f,n),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+c+"--",E=jo.getBlob(g,r,v);if(E===null)throw o3();const b={name:f.fullPath},S=Ol(o,t.host,t._protocol),A="POST",I=t.maxUploadRetryTime,D=new pa(S,A,j0(t,n),I);return D.urlParams=b,D.headers=s,D.body=E.uploadData(),D.errorHandler=zd(e),D}class p_{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function MI(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{es(!1)}return es(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Vne(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=g3(e,r,i),l={name:s.fullPath},c=Ol(o,t.host,t._protocol),f="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},g=NI(s,n),v=t.maxUploadRetryTime;function E(S){MI(S);let A;try{A=S.getResponseHeader("X-Goog-Upload-URL")}catch{es(!1)}return es(G0(A)),A}const b=new pa(c,f,E,v);return b.urlParams=l,b.headers=h,b.body=g,b.errorHandler=zd(e),b}function Une(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function o(f){const h=MI(f,["active","final"]);let g=null;try{g=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{es(!1)}g||es(!1);const v=Number(g);return es(!isNaN(v)),new p_(v,r.size(),h==="final")}const s="POST",l=t.maxUploadRetryTime,c=new pa(n,s,o,l);return c.headers=i,c.errorHandler=zd(e),c}const e2=256*1024;function Fne(t,e,n,r,i,o,s,l){const c=new p_(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw Xte();const f=c.total-c.current;let h=f;i>0&&(h=Math.min(h,i));const g=c.current,v=g+h;let E="";h===0?E="finalize":f===h?E="upload, finalize":E="upload";const b={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${c.current}`},S=r.slice(g,v);if(S===null)throw o3();function A(q,$){const H=MI(q,["active","final"]),M=c.current+h,L=r.size();let O;return H==="final"?O=j0(e,o)(q,$):O=null,new p_(M,L,H==="final",O)}const I="POST",D=e.maxUploadRetryTime,k=new pa(n,I,A,D);return k.headers=b,k.body=S.uploadData(),k.progressCallback=l||null,k.errorHandler=zd(t),k}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bne={STATE_CHANGED:"state_changed"},Fr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tb(t){switch(t){case"running":case"pausing":case"canceling":return Fr.RUNNING;case"paused":return Fr.PAUSED;case"success":return Fr.SUCCESS;case"canceled":return Fr.CANCELED;case"error":return Fr.ERROR;default:return Fr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qne{constructor(e,n,r){if(one(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class $ne{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$u.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$u.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$u.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw mp("cannot .send() more than once");if(Il(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class zne extends $ne{initXhr(){this.xhr_.responseType="text"}}function fo(){return new zne}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=og(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Zt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(u3(i.status,[]))if(o)i=r3();else{this.sleepTime=Math.max(this.sleepTime*2,zte),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Zt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Vne(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Une(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,fo,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=e2*this._chunkMultiplier,n=new p_(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=Fne(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(s,fo,i,o,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){e2*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=m3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,fo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=y3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fo,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=i3(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=tb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new qne(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(tb(this._state)){case Fr.SUCCESS:Ef(this._resolve.bind(null,this.snapshot))();break;case Fr.CANCELED:case Fr.ERROR:const n=this._reject;Ef(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(tb(this._state)){case Fr.RUNNING:case Fr.PAUSED:e.next&&Ef(e.next.bind(e,this.snapshot))();break;case Fr.SUCCESS:e.complete&&Ef(e.complete.bind(e))();break;case Fr.CANCELED:case Fr.ERROR:e.error&&Ef(e.error.bind(e,this._error))();break;default:e.error&&Ef(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this._service=e,n instanceof Cr?this._location=n:this._location=Cr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ic(e,n)}get root(){const e=new Cr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return h3(this._location.path)}get storage(){return this._service}get parent(){const e=Ene(this._location.path);if(e===null)return null;const n=new Cr(this._location.bucket,e);return new ic(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw a3(e)}}function Hne(t,e,n){t._throwIfRoot("uploadBytes");const r=y3(t.storage,t._location,og(),new jo(e,!0),n);return t.storage.makeRequestWithTokens(r,fo).then(i=>({metadata:i,ref:t}))}function Gne(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new v3(t,new jo(e),n)}function jne(t,e,n=wi.RAW,r){t._throwIfRoot("uploadString");const i=RI(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),Hne(t,i.data,o)}function Kne(t){const e={prefixes:[],items:[]};return _3(t,e).then(()=>e)}async function _3(t,e,n){const i=await T3(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await _3(t,e,i.nextPageToken)}function T3(t,e){e!=null&&typeof e.maxResults=="number"&&RA("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=Mne(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,fo)}function Wne(t){t._throwIfRoot("getMetadata");const e=m3(t.storage,t._location,og());return t.storage.makeRequestWithTokens(e,fo)}function Yne(t,e){t._throwIfRoot("updateMetadata");const n=kne(t.storage,t._location,e,og());return t.storage.makeRequestWithTokens(n,fo)}function Jne(t){t._throwIfRoot("getDownloadURL");const e=Dne(t.storage,t._location,og());return t.storage.makeRequestWithTokens(e,fo).then(n=>{if(n===null)throw Zte();return n})}function Qne(t){t._throwIfRoot("deleteObject");const e=One(t.storage,t._location);return t.storage.makeRequestWithTokens(e,fo)}function E3(t,e){const n=wne(t._location.path,e),r=new Cr(t._location.bucket,n);return new ic(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xne(t){return/^[A-Za-z]+:\/\//.test(t)}function Zne(t,e){return new ic(t,e)}function w3(t,e){if(t instanceof DI){const n=t;if(n._bucket==null)throw Qte();const r=new ic(n,n._bucket);return e!=null?w3(r,e):r}else return e!==void 0?E3(t,e):t}function ere(t,e){if(e&&Xne(e)){if(t instanceof DI)return Zne(t,e);throw Bf("To use ref(service, url), the first argument must be a Storage instance.")}else return w3(t,e)}function t2(t,e){const n=e==null?void 0:e[n3];return n==null?null:Cr.makeFromBucketSpec(n,t)}function tre(t,e,n,r={}){t.host=`${e}:${n}`;const i=Il(e);i&&(zx(`https://${t.host}/b`),Hx("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:z4(o,t.app.options.projectId))}class DI{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=t3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qte,this._maxUploadRetryTime=$te,this._requests=new Set,i!=null?this._bucket=Cr.makeFromBucketSpec(i,this._host):this._bucket=t2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Cr.makeFromBucketSpec(this._url,e):this._bucket=t2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){RA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){RA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ic(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new tne(s3());{const s=dne(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const n2="@firebase/storage",r2="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="storage";function nre(t,e,n,r){return t=Ne(t),jne(t,e,n,r)}function rre(t,e,n){return t=Ne(t),Gne(t,e,n)}function ire(t){return t=Ne(t),Wne(t)}function ore(t,e){return t=Ne(t),Yne(t,e)}function sre(t,e){return t=Ne(t),T3(t,e)}function are(t){return t=Ne(t),Kne(t)}function S3(t){return t=Ne(t),Jne(t)}function lre(t){return t=Ne(t),Qne(t)}function PA(t,e){return t=Ne(t),ere(t,e)}function ure(t,e){return E3(t,e)}function cre(t=s0(),e){t=Ne(t);const r=Pd(t,b3).getImmediate({identifier:e}),i=q4("storage");return i&&A3(r,...i),r}function A3(t,e,n,r={}){tre(t,e,n,r)}function fre(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new DI(n,r,i,e,aa)}function dre(){Zs(new Xi(b3,fre,"PUBLIC").setMultipleInstances(!0)),Ai(n2,r2,""),Ai(n2,r2,"esm2020")}dre();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Zy(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Zy(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new Zy(s,this,this._ref)):o={next:n.next?s=>n.next(new Zy(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class o2{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Ks(e,this._service))}get items(){return this._delegate.items.map(e=>new Ks(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=ure(this._delegate,e);return new Ks(n,this.storage)}get root(){return new Ks(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Ks(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new i2(rre(this._delegate,e,n),this)}putString(e,n=wi.RAW,r){this._throwIfRoot("putString");const i=RI(n,e),o={...r};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new i2(new v3(this._delegate,new jo(i.data,!0),o),this)}listAll(){return are(this._delegate).then(e=>new o2(e,this.storage))}list(e){return sre(this._delegate,e||void 0).then(n=>new o2(n,this.storage))}getMetadata(){return ire(this._delegate)}updateMetadata(e){return ore(this._delegate,e)}getDownloadURL(){return S3(this._delegate)}delete(){return this._throwIfRoot("delete"),lre(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw a3(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(s2(e))throw Bf("ref() expected a child path but got a URL, use refFromURL instead.");return new Ks(PA(this._delegate,e),this)}refFromURL(e){if(!s2(e))throw Bf("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Cr.makeFromUrl(e,this._delegate.host)}catch{throw Bf("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ks(PA(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){A3(this._delegate,e,n,r)}}function s2(t){return/^[A-Za-z]+:\/\//.test(t)}const hre="@firebase/storage-compat",pre="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mre="storage-compat";function gre(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new x3(n,r)}function yre(t){const e={TaskState:Fr,TaskEvent:Bne,StringFormat:wi,Storage:x3,Reference:Ks};t.INTERNAL.registerComponent(new Xi(mre,gre,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(hre,pre)}yre(fc);const vre={apiKey:"AIzaSyCZh_PwX7LZfXujZiHGH9T-8uA17hNQGBY",authDomain:"bkomhate-site.firebaseapp.com",projectId:"bkomhate-site",storageBucket:"bkomhate-site.firebasestorage.app",messagingSenderId:"37549082348",appId:"1:37549082348:web:cf0c6c4f504b40192887c9"},kI=fc.initializeApp(vre),Qp=VJ(kI),Vr=Jee(kI),_re=cre(kI),C3=R.createContext({currentUser:null,loading:!0}),Tre=()=>R.useContext(C3),Ere=({children:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState(!0);R.useEffect(()=>aY(Qp,l=>{n(l),i(!1)}),[]);const o={currentUser:e,loading:r};return C.jsx(C3.Provider,{value:o,children:t})};function I3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=I3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Xt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=I3(t))&&(r&&(r+=" "),r+=e);return r}var nb={},rb={},a2;function wre(){return a2||(a2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(rb)),rb}var ib={},l2;function R3(){return l2||(l2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(ib)),ib}var ob={},u2;function P3(){return u2||(u2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(ob)),ob}var sb={},c2;function OI(){return c2||(c2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],i=n.length;if(i===0)return r;let o=0,s="",l="",c=!1;for(n.charCodeAt(0)===46&&(r.push(""),o++);o<i;){const f=n[o];l?f==="\\"&&o+1<i?(o++,s+=n[o]):f===l?l="":s+=f:c?f==='"'||f==="'"?l=f:f==="]"?(c=!1,r.push(s),s=""):s+=f:f==="["?(c=!0,s&&(r.push(s),s="")):f==="."?s&&(r.push(s),s=""):s+=f,o++}return s&&r.push(s),r}t.toPath=e})(sb)),sb}var f2;function LI(){return f2||(f2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wre(),n=R3(),r=P3(),i=OI();function o(l,c,f){if(l==null)return f;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return f;const h=l[c];return h===void 0?n.isDeepKey(c)?o(l,i.toPath(c),f):f:h}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const h=l[c];return h===void 0?f:h}default:{if(Array.isArray(c))return s(l,c,f);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return f;const h=l[c];return h===void 0?f:h}}}function s(l,c,f){if(c.length===0)return f;let h=l;for(let g=0;g<c.length;g++){if(h==null||e.isUnsafeProperty(c[g]))return f;h=h[c[g]]}return h===void 0?f:h}t.get=o})(nb)),nb}var ab,d2;function bre(){return d2||(d2=1,ab=LI().get),ab}var Sre=bre();const gd=as(Sre);var lb={exports:{}},Ot={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2;function Are(){if(h2)return Ot;h2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),E=Symbol.for("react.client.reference");function b(S){if(typeof S=="object"&&S!==null){var A=S.$$typeof;switch(A){case t:switch(S=S.type,S){case n:case i:case r:case c:case f:case v:return S;default:switch(S=S&&S.$$typeof,S){case s:case l:case g:case h:return S;case o:return S;default:return A}}case e:return A}}}return Ot.ContextConsumer=o,Ot.ContextProvider=s,Ot.Element=t,Ot.ForwardRef=l,Ot.Fragment=n,Ot.Lazy=g,Ot.Memo=h,Ot.Portal=e,Ot.Profiler=i,Ot.StrictMode=r,Ot.Suspense=c,Ot.SuspenseList=f,Ot.isContextConsumer=function(S){return b(S)===o},Ot.isContextProvider=function(S){return b(S)===s},Ot.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},Ot.isForwardRef=function(S){return b(S)===l},Ot.isFragment=function(S){return b(S)===n},Ot.isLazy=function(S){return b(S)===g},Ot.isMemo=function(S){return b(S)===h},Ot.isPortal=function(S){return b(S)===e},Ot.isProfiler=function(S){return b(S)===i},Ot.isStrictMode=function(S){return b(S)===r},Ot.isSuspense=function(S){return b(S)===c},Ot.isSuspenseList=function(S){return b(S)===f},Ot.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===i||S===r||S===c||S===f||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===h||S.$$typeof===s||S.$$typeof===o||S.$$typeof===l||S.$$typeof===E||S.getModuleId!==void 0)},Ot.typeOf=b,Ot}var p2;function xre(){return p2||(p2=1,lb.exports=Are()),lb.exports}var Cre=xre(),bi=t=>t===0?0:t>0?1:-1,eo=t=>typeof t=="number"&&t!=+t,Lu=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,We=t=>(typeof t=="number"||t instanceof Number)&&!eo(t),os=t=>We(t)||typeof t=="string",Ire=0,xm=t=>{var e=++Ire;return"".concat(t||"").concat(e)},To=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(e)&&typeof e!="string")return r;var o;if(Lu(e)){if(n==null)return r;var s=e.indexOf("%");o=n*parseFloat(e.slice(0,s))/100}else o=+e;return eo(o)&&(o=r),i&&n!=null&&o>n&&(o=n),o},N3=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function Br(t,e,n){return We(t)&&We(e)?t+n*(e-t):e}function Rre(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):gd(r,e))===n)}var ir=t=>t===null||typeof t>"u",sg=t=>ir(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),Pre=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function VI(t){if(typeof t!="string")return!1;var e=Pre;return e.includes(t)}var Nre=["viewBox","children"],m2=["points","pathLength"],ub={svg:Nre,polygon:m2,polyline:m2},Mre=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(R.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{VI(i)&&(r[i]=(o=>n[i](n,o)))}),r},Dre=(t,e,n)=>r=>(t(e,n,r),null),UI=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var o=t[i];VI(i)&&typeof o=="function"&&(r||(r={}),r[i]=Dre(o,e,n))}),r},kre=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function M3(t){if(typeof t!="string")return!1;var e=kre;return e.includes(t)}function W0(t){var e=Object.entries(t).filter(n=>{var[r]=n;return M3(r)});return Object.fromEntries(e)}var g2=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",y2=null,cb=null,D3=t=>{if(t===y2&&Array.isArray(cb))return cb;var e=[];return R.Children.forEach(t,n=>{ir(n)||(Cre.isFragment(n)?e=e.concat(D3(n.props.children)):e.push(n))}),cb=e,y2=t,e};function Ore(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>g2(i)):r=[g2(e)],D3(t).forEach(i=>{var o=gd(i,"type.displayName")||gd(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}var Lre=(t,e,n,r)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var o=(i=r&&(ub==null?void 0:ub[r]))!==null&&i!==void 0?i:[],s=e.startsWith("data-"),l=typeof t!="function"&&(!!r&&o.includes(e)||M3(e)),c=!!n&&VI(e);return s||l||c},tr=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(R.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(o=>{var s;Lre((s=r)===null||s===void 0?void 0:s[o],o,e,n)&&(i[o]=r[o])}),i},Vre=["children","width","height","viewBox","className","style","title","desc"];function NA(){return NA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NA.apply(null,arguments)}function Ure(t,e){if(t==null)return{};var n,r,i=Fre(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Fre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var k3=R.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:o,className:s,style:l,title:c,desc:f}=t,h=Ure(t,Vre),g=o||{width:r,height:i,x:0,y:0},v=Xt("recharts-surface",s);return R.createElement("svg",NA({},tr(h,!0,"svg"),{className:v,width:r,height:i,style:l,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),R.createElement("title",null,c),R.createElement("desc",null,f),n)}),Bre=["children","className"];function MA(){return MA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MA.apply(null,arguments)}function qre(t,e){if(t==null)return{};var n,r,i=$re(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $re(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var xl=R.forwardRef((t,e)=>{var{children:n,className:r}=t,i=qre(t,Bre),o=Xt("recharts-layer",r);return R.createElement("g",MA({className:o},tr(i,!0),{ref:e}),n)}),zre=R.createContext(null);function Ht(t){return function(){return t}}const O3=Math.cos,m_=Math.sin,bo=Math.sqrt,g_=Math.PI,Y0=2*g_,DA=Math.PI,kA=2*DA,Su=1e-6,Hre=kA-Su;function L3(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Gre(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return L3;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class jre{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?L3:Gre(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,c=r-e,f=i-n,h=s-e,g=l-n,v=h*h+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(v>Su)if(!(Math.abs(g*c-f*h)>Su)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let E=r-s,b=i-l,S=c*c+f*f,A=E*E+b*b,I=Math.sqrt(S),D=Math.sqrt(v),k=o*Math.tan((DA-Math.acos((S+v-A)/(2*I*D)))/2),q=k/D,$=k/I;Math.abs(q-1)>Su&&this._append`L${e+q*h},${n+q*g}`,this._append`A${o},${o},0,0,${+(g*E>h*b)},${this._x1=e+$*c},${this._y1=n+$*f}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),f=e+l,h=n+c,g=1^s,v=s?i-o:o-i;this._x1===null?this._append`M${f},${h}`:(Math.abs(this._x1-f)>Su||Math.abs(this._y1-h)>Su)&&this._append`L${f},${h}`,r&&(v<0&&(v=v%kA+kA),v>Hre?this._append`A${r},${r},0,1,${g},${e-l},${n-c}A${r},${r},0,1,${g},${this._x1=f},${this._y1=h}`:v>Su&&this._append`A${r},${r},0,${+(v>=DA)},${g},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function FI(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new jre(e)}function BI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function V3(t){this._context=t}V3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function J0(t){return new V3(t)}function U3(t){return t[0]}function F3(t){return t[1]}function B3(t,e){var n=Ht(!0),r=null,i=J0,o=null,s=FI(l);t=typeof t=="function"?t:t===void 0?U3:Ht(t),e=typeof e=="function"?e:e===void 0?F3:Ht(e);function l(c){var f,h=(c=BI(c)).length,g,v=!1,E;for(r==null&&(o=i(E=s())),f=0;f<=h;++f)!(f<h&&n(g=c[f],f,c))===v&&((v=!v)?o.lineStart():o.lineEnd()),v&&o.point(+t(g,f,c),+e(g,f,c));if(E)return o=null,E+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ht(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ht(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ht(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),l):r},l}function ev(t,e,n){var r=null,i=Ht(!0),o=null,s=J0,l=null,c=FI(f);t=typeof t=="function"?t:t===void 0?U3:Ht(+t),e=typeof e=="function"?e:Ht(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?F3:Ht(+n);function f(g){var v,E,b,S=(g=BI(g)).length,A,I=!1,D,k=new Array(S),q=new Array(S);for(o==null&&(l=s(D=c())),v=0;v<=S;++v){if(!(v<S&&i(A=g[v],v,g))===I)if(I=!I)E=v,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=v-1;b>=E;--b)l.point(k[b],q[b]);l.lineEnd(),l.areaEnd()}I&&(k[v]=+t(A,v,g),q[v]=+e(A,v,g),l.point(r?+r(A,v,g):k[v],n?+n(A,v,g):q[v]))}if(D)return l=null,D+""||null}function h(){return B3().defined(i).curve(s).context(o)}return f.x=function(g){return arguments.length?(t=typeof g=="function"?g:Ht(+g),r=null,f):t},f.x0=function(g){return arguments.length?(t=typeof g=="function"?g:Ht(+g),f):t},f.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:Ht(+g),f):r},f.y=function(g){return arguments.length?(e=typeof g=="function"?g:Ht(+g),n=null,f):e},f.y0=function(g){return arguments.length?(e=typeof g=="function"?g:Ht(+g),f):e},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:Ht(+g),f):n},f.lineX0=f.lineY0=function(){return h().x(t).y(e)},f.lineY1=function(){return h().x(t).y(n)},f.lineX1=function(){return h().x(r).y(e)},f.defined=function(g){return arguments.length?(i=typeof g=="function"?g:Ht(!!g),f):i},f.curve=function(g){return arguments.length?(s=g,o!=null&&(l=s(o)),f):s},f.context=function(g){return arguments.length?(g==null?o=l=null:l=s(o=g),f):o},f}class q3{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Kre(t){return new q3(t,!0)}function Wre(t){return new q3(t,!1)}const qI={draw(t,e){const n=bo(e/g_);t.moveTo(n,0),t.arc(0,0,n,0,Y0)}},Yre={draw(t,e){const n=bo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},$3=bo(1/3),Jre=$3*2,Qre={draw(t,e){const n=bo(e/Jre),r=n*$3;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Xre={draw(t,e){const n=bo(e),r=-n/2;t.rect(r,r,n,n)}},Zre=.8908130915292852,z3=m_(g_/10)/m_(7*g_/10),eie=m_(Y0/10)*z3,tie=-O3(Y0/10)*z3,nie={draw(t,e){const n=bo(e*Zre),r=eie*n,i=tie*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const s=Y0*o/5,l=O3(s),c=m_(s);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},fb=bo(3),rie={draw(t,e){const n=-bo(e/(fb*3));t.moveTo(0,n*2),t.lineTo(-fb*n,-n),t.lineTo(fb*n,-n),t.closePath()}},$i=-.5,zi=bo(3)/2,OA=1/bo(12),iie=(OA/2+1)*3,oie={draw(t,e){const n=bo(e/iie),r=n/2,i=n*OA,o=r,s=n*OA+n,l=-o,c=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(l,c),t.lineTo($i*r-zi*i,zi*r+$i*i),t.lineTo($i*o-zi*s,zi*o+$i*s),t.lineTo($i*l-zi*c,zi*l+$i*c),t.lineTo($i*r+zi*i,$i*i-zi*r),t.lineTo($i*o+zi*s,$i*s-zi*o),t.lineTo($i*l+zi*c,$i*c-zi*l),t.closePath()}};function sie(t,e){let n=null,r=FI(i);t=typeof t=="function"?t:Ht(t||qI),e=typeof e=="function"?e:Ht(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Ht(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Ht(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function y_(){}function v_(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function H3(t){this._context=t}H3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:v_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:v_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function aie(t){return new H3(t)}function G3(t){this._context=t}G3.prototype={areaStart:y_,areaEnd:y_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:v_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lie(t){return new G3(t)}function j3(t){this._context=t}j3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:v_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function uie(t){return new j3(t)}function K3(t){this._context=t}K3.prototype={areaStart:y_,areaEnd:y_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function cie(t){return new K3(t)}function v2(t){return t<0?-1:1}function _2(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),l=(o*i+s*r)/(r+i);return(v2(o)+v2(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(l))||0}function T2(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function db(t,e,n){var r=t._x0,i=t._y0,o=t._x1,s=t._y1,l=(o-r)/3;t._context.bezierCurveTo(r+l,i+l*e,o-l,s-l*n,o,s)}function __(t){this._context=t}__.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:db(this,this._t0,T2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,db(this,T2(this,n=_2(this,t,e)),n);break;default:db(this,this._t0,n=_2(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function W3(t){this._context=new Y3(t)}(W3.prototype=Object.create(__.prototype)).point=function(t,e){__.prototype.point.call(this,e,t)};function Y3(t){this._context=t}Y3.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function fie(t){return new __(t)}function die(t){return new W3(t)}function J3(t){this._context=t}J3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=E2(t),i=E2(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function E2(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function hie(t){return new J3(t)}function Q0(t,e){this._context=t,this._t=e}Q0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function pie(t){return new Q0(t,.5)}function mie(t){return new Q0(t,0)}function gie(t){return new Q0(t,1)}function yd(t,e){if((s=t.length)>1)for(var n=1,r,i,o=t[e[0]],s,l=o.length;n<s;++n)for(i=o,o=t[e[n]],r=0;r<l;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function LA(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function yie(t,e){return t[e]}function vie(t){const e=[];return e.key=t,e}function _ie(){var t=Ht([]),e=LA,n=yd,r=yie;function i(o){var s=Array.from(t.apply(this,arguments),vie),l,c=s.length,f=-1,h;for(const g of o)for(l=0,++f;l<c;++l)(s[l][f]=[0,+r(g,s[l].key,f,o)]).data=g;for(l=0,h=BI(e(s));l<c;++l)s[h[l]].index=l;return n(s,h),s}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Ht(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Ht(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?LA:typeof o=="function"?o:Ht(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??yd,i):n},i}function Tie(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,s;i<o;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}yd(t,e)}}function Eie(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var s=0,l=0;s<i;++s)l+=t[s][n][1]||0;r[n][1]+=r[n][0]=-l/2}yd(t,e)}}function wie(t,e){if(!(!((s=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,s;r<o;++r){for(var l=0,c=0,f=0;l<s;++l){for(var h=t[e[l]],g=h[r][1]||0,v=h[r-1][1]||0,E=(g-v)/2,b=0;b<l;++b){var S=t[e[b]],A=S[r][1]||0,I=S[r-1][1]||0;E+=A-I}c+=g,f+=E*g}i[r-1][1]+=i[r-1][0]=n,c&&(n-=f/c)}i[r-1][1]+=i[r-1][0]=n,yd(t,e)}}var bie=["type","size","sizeType"];function VA(){return VA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VA.apply(null,arguments)}function w2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(n),!0).forEach(function(r){Sie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sie(t,e,n){return(e=Aie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aie(t){var e=xie(t,"string");return typeof e=="symbol"?e:e+""}function xie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cie(t,e){if(t==null)return{};var n,r,i=Iie(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Iie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Q3={symbolCircle:qI,symbolCross:Yre,symbolDiamond:Qre,symbolSquare:Xre,symbolStar:nie,symbolTriangle:rie,symbolWye:oie},Rie=Math.PI/180,Pie=t=>{var e="symbol".concat(sg(t));return Q3[e]||qI},Nie=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Rie;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Mie=(t,e)=>{Q3["symbol".concat(sg(t))]=e},X3=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Cie(t,bie),o=b2(b2({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var l=()=>{var v=Pie(s),E=sie().type(v).size(Nie(n,r,s));return E()},{className:c,cx:f,cy:h}=o,g=tr(o,!0);return f===+f&&h===+h&&n===+n?R.createElement("path",VA({},g,{className:Xt("recharts-symbols",c),transform:"translate(".concat(f,", ").concat(h,")"),d:l()})):null};X3.registerSymbol=Mie;var hb={},pb={},S2;function Die(){return S2||(S2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let o=0;o<n.length;o++){const s=n[o],l=r(s);i.has(l)||i.set(l,s)}return Array.from(i.values())}t.uniqBy=e})(pb)),pb}var mb={},A2;function Z3(){return A2||(A2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(mb)),mb}var gb={},yb={},vb={},x2;function kie(){return x2||(x2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(vb)),vb}var C2;function $I(){return C2||(C2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kie();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(yb)),yb}var _b={},I2;function Oie(){return I2||(I2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(_b)),_b}var R2;function Lie(){return R2||(R2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$I(),n=Oie();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(gb)),gb}var Tb={},Eb={},P2;function Vie(){return P2||(P2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LI();function n(r){return function(i){return e.get(i,r)}}t.property=n})(Eb)),Eb}var wb={},bb={},Sb={},Ab={},N2;function e5(){return N2||(N2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Ab)),Ab}var xb={},M2;function t5(){return M2||(M2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(xb)),xb}var Cb={},D2;function n5(){return D2||(D2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(Cb)),Cb}var k2;function Uie(){return k2||(k2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zI(),n=e5(),r=t5(),i=n5();function o(g,v,E){return typeof E!="function"?e.isMatch(g,v):s(g,v,function b(S,A,I,D,k,q){const $=E(S,A,I,D,k,q);return $!==void 0?!!$:s(S,A,b,q)},new Map)}function s(g,v,E,b){if(v===g)return!0;switch(typeof v){case"object":return l(g,v,E,b);case"function":return Object.keys(v).length>0?s(g,{...v},E,b):i.eq(g,v);default:return n.isObject(g)?typeof v=="string"?v==="":!0:i.eq(g,v)}}function l(g,v,E,b){if(v==null)return!0;if(Array.isArray(v))return f(g,v,E,b);if(v instanceof Map)return c(g,v,E,b);if(v instanceof Set)return h(g,v,E,b);const S=Object.keys(v);if(g==null)return S.length===0;if(S.length===0)return!0;if(b&&b.has(v))return b.get(v)===g;b&&b.set(v,g);try{for(let A=0;A<S.length;A++){const I=S[A];if(!r.isPrimitive(g)&&!(I in g)||v[I]===void 0&&g[I]!==void 0||v[I]===null&&g[I]!==null||!E(g[I],v[I],I,g,v,b))return!1}return!0}finally{b&&b.delete(v)}}function c(g,v,E,b){if(v.size===0)return!0;if(!(g instanceof Map))return!1;for(const[S,A]of v.entries()){const I=g.get(S);if(E(I,A,S,g,v,b)===!1)return!1}return!0}function f(g,v,E,b){if(v.length===0)return!0;if(!Array.isArray(g))return!1;const S=new Set;for(let A=0;A<v.length;A++){const I=v[A];let D=!1;for(let k=0;k<g.length;k++){if(S.has(k))continue;const q=g[k];let $=!1;if(E(q,I,A,g,v,b)&&($=!0),$){S.add(k),D=!0;break}}if(!D)return!1}return!0}function h(g,v,E,b){return v.size===0?!0:g instanceof Set?f([...g],[...v],E,b):!1}t.isMatchWith=o,t.isSetMatch=h})(Sb)),Sb}var O2;function zI(){return O2||(O2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Uie();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(bb)),bb}var Ib={},Rb={},Pb={},L2;function Fie(){return L2||(L2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Pb)),Pb}var Nb={},V2;function r5(){return V2||(V2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Nb)),Nb}var Mb={},U2;function i5(){return U2||(U2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",o="[object Arguments]",s="[object Symbol]",l="[object Date]",c="[object Map]",f="[object Set]",h="[object Array]",g="[object Function]",v="[object ArrayBuffer]",E="[object Object]",b="[object Error]",S="[object DataView]",A="[object Uint8Array]",I="[object Uint8ClampedArray]",D="[object Uint16Array]",k="[object Uint32Array]",q="[object BigUint64Array]",$="[object Int8Array]",H="[object Int16Array]",M="[object Int32Array]",L="[object BigInt64Array]",O="[object Float32Array]",F="[object Float64Array]";t.argumentsTag=o,t.arrayBufferTag=v,t.arrayTag=h,t.bigInt64ArrayTag=L,t.bigUint64ArrayTag=q,t.booleanTag=i,t.dataViewTag=S,t.dateTag=l,t.errorTag=b,t.float32ArrayTag=O,t.float64ArrayTag=F,t.functionTag=g,t.int16ArrayTag=H,t.int32ArrayTag=M,t.int8ArrayTag=$,t.mapTag=c,t.numberTag=r,t.objectTag=E,t.regexpTag=e,t.setTag=f,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=D,t.uint32ArrayTag=k,t.uint8ArrayTag=A,t.uint8ClampedArrayTag=I})(Mb)),Mb}var Db={},F2;function Bie(){return F2||(F2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Db)),Db}var B2;function o5(){return B2||(B2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Fie(),n=r5(),r=i5(),i=t5(),o=Bie();function s(h,g){return l(h,void 0,h,new Map,g)}function l(h,g,v,E=new Map,b=void 0){const S=b==null?void 0:b(h,g,v,E);if(S!==void 0)return S;if(i.isPrimitive(h))return h;if(E.has(h))return E.get(h);if(Array.isArray(h)){const A=new Array(h.length);E.set(h,A);for(let I=0;I<h.length;I++)A[I]=l(h[I],I,v,E,b);return Object.hasOwn(h,"index")&&(A.index=h.index),Object.hasOwn(h,"input")&&(A.input=h.input),A}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const A=new RegExp(h.source,h.flags);return A.lastIndex=h.lastIndex,A}if(h instanceof Map){const A=new Map;E.set(h,A);for(const[I,D]of h)A.set(I,l(D,I,v,E,b));return A}if(h instanceof Set){const A=new Set;E.set(h,A);for(const I of h)A.add(l(I,void 0,v,E,b));return A}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(o.isTypedArray(h)){const A=new(Object.getPrototypeOf(h)).constructor(h.length);E.set(h,A);for(let I=0;I<h.length;I++)A[I]=l(h[I],I,v,E,b);return A}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const A=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return E.set(h,A),c(A,h,v,E,b),A}if(typeof File<"u"&&h instanceof File){const A=new File([h],h.name,{type:h.type});return E.set(h,A),c(A,h,v,E,b),A}if(h instanceof Blob){const A=new Blob([h],{type:h.type});return E.set(h,A),c(A,h,v,E,b),A}if(h instanceof Error){const A=new h.constructor;return E.set(h,A),A.message=h.message,A.name=h.name,A.stack=h.stack,A.cause=h.cause,c(A,h,v,E,b),A}if(typeof h=="object"&&f(h)){const A=Object.create(Object.getPrototypeOf(h));return E.set(h,A),c(A,h,v,E,b),A}return h}function c(h,g,v=h,E,b){const S=[...Object.keys(g),...e.getSymbols(g)];for(let A=0;A<S.length;A++){const I=S[A],D=Object.getOwnPropertyDescriptor(h,I);(D==null||D.writable)&&(h[I]=l(g[I],I,v,E,b))}}function f(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=l,t.copyProperties=c})(Rb)),Rb}var q2;function qie(){return q2||(q2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=o5();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(Ib)),Ib}var $2;function $ie(){return $2||($2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zI(),n=qie();function r(i){return i=n.cloneDeep(i),o=>e.isMatch(o,i)}t.matches=r})(wb)),wb}var kb={},Ob={},Lb={},z2;function zie(){return z2||(z2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=o5(),n=i5();function r(i,o){return e.cloneDeepWith(i,(s,l,c,f)=>{const h=o==null?void 0:o(s,l,c,f);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(g,i),g}case n.argumentsTag:{const g={};return e.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}t.cloneDeepWith=r})(Lb)),Lb}var H2;function Hie(){return H2||(H2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zie();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Ob)),Ob}var Vb={},Ub={},G2;function s5(){return G2||(G2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(Ub)),Ub}var Fb={},j2;function Gie(){return j2||(j2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=r5();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(Fb)),Fb}var K2;function jie(){return K2||(K2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=R3(),n=s5(),r=Gie(),i=OI();function o(s,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(s==null?void 0:s[l])==null?c=i.toPath(l):c=[l],c.length===0)return!1;let f=s;for(let h=0;h<c.length;h++){const g=c[h];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||r.isArguments(f))&&n.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}t.has=o})(Vb)),Vb}var W2;function Kie(){return W2||(W2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zI(),n=P3(),r=Hie(),i=LI(),o=jie();function s(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=r.cloneDeep(c),function(f){const h=i.get(f,l);return h===void 0?o.has(f,l):c===void 0?h===void 0:e.isMatch(h,c)}}t.matchesProperty=s})(kb)),kb}var Y2;function Wie(){return Y2||(Y2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Z3(),n=Vie(),r=$ie(),i=Kie();function o(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=o})(Tb)),Tb}var J2;function Yie(){return J2||(J2=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Die(),n=Z3(),r=Lie(),i=Wie();function o(s,l=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(l)):[]}t.uniqBy=o})(hb)),hb}var Bb,Q2;function Jie(){return Q2||(Q2=1,Bb=Yie().uniqBy),Bb}var Qie=Jie();const X2=as(Qie);function Xie(t,e,n){return e===!0?X2(t,n):typeof e=="function"?X2(t,e):t}var qb={exports:{}},$b={},zb={exports:{}},Hb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z2;function Zie(){if(Z2)return Hb;Z2=1;var t=xd();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,o=t.useLayoutEffect,s=t.useDebugValue;function l(g,v){var E=v(),b=r({inst:{value:E,getSnapshot:v}}),S=b[0].inst,A=b[1];return o(function(){S.value=E,S.getSnapshot=v,c(S)&&A({inst:S})},[g,E,v]),i(function(){return c(S)&&A({inst:S}),g(function(){c(S)&&A({inst:S})})},[g]),s(E),E}function c(g){var v=g.getSnapshot;g=g.value;try{var E=v();return!n(g,E)}catch{return!0}}function f(g,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return Hb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,Hb}var eO;function eoe(){return eO||(eO=1,zb.exports=Zie()),zb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tO;function toe(){if(tO)return $b;tO=1;var t=xd(),e=eoe();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,o=t.useRef,s=t.useEffect,l=t.useMemo,c=t.useDebugValue;return $b.useSyncExternalStoreWithSelector=function(f,h,g,v,E){var b=o(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function I(H){if(!D){if(D=!0,k=H,H=v(H),E!==void 0&&S.hasValue){var M=S.value;if(E(M,H))return q=M}return q=H}if(M=q,r(k,H))return M;var L=v(H);return E!==void 0&&E(M,L)?(k=H,M):(k=H,q=L)}var D=!1,k,q,$=g===void 0?null:g;return[function(){return I(h())},$===null?void 0:function(){return I($())}]},[h,g,v,E]);var A=i(f,b[0],b[1]);return s(function(){S.hasValue=!0,S.value=A},[A]),c(A),A},$b}var nO;function noe(){return nO||(nO=1,qb.exports=toe()),qb.exports}var roe=noe(),HI=R.createContext(null),ioe=t=>t,or=()=>{var t=R.useContext(HI);return t?t.store.dispatch:ioe},Lv=()=>{},ooe=()=>Lv,soe=(t,e)=>t===e;function ze(t){var e=R.useContext(HI);return roe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:ooe,e?e.store.getState:Lv,e?e.store.getState:Lv,e?t:Lv,soe)}function aoe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function loe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function uoe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var rO=t=>Array.isArray(t)?t:[t];function coe(t){const e=Array.isArray(t[0])?t[0]:t;return uoe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function foe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var doe=class{constructor(t){this.value=t}deref(){return this.value}},hoe=typeof WeakRef<"u"?WeakRef:doe,poe=0,iO=1;function tv(){return{s:poe,v:void 0,o:null,p:null}}function a5(t,e={}){let n=tv();const{resultEqualityCheck:r}=e;let i,o=0;function s(){var g;let l=n;const{length:c}=arguments;for(let v=0,E=c;v<E;v++){const b=arguments[v];if(typeof b=="function"||typeof b=="object"&&b!==null){let S=l.o;S===null&&(l.o=S=new WeakMap);const A=S.get(b);A===void 0?(l=tv(),S.set(b,l)):l=A}else{let S=l.p;S===null&&(l.p=S=new Map);const A=S.get(b);A===void 0?(l=tv(),S.set(b,l)):l=A}}const f=l;let h;if(l.s===iO)h=l.v;else if(h=t.apply(null,arguments),o++,r){const v=((g=i==null?void 0:i.deref)==null?void 0:g.call(i))??i;v!=null&&r(v,h)&&(h=v,o!==0&&o--),i=typeof h=="object"&&h!==null||typeof h=="function"?new hoe(h):h}return f.s=iO,f.v=h,h}return s.clearCache=()=>{n=tv(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function moe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let o=0,s=0,l,c={},f=i.pop();typeof f=="object"&&(c=f,f=i.pop()),aoe(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const h={...n,...c},{memoize:g,memoizeOptions:v=[],argsMemoize:E=a5,argsMemoizeOptions:b=[]}=h,S=rO(v),A=rO(b),I=coe(i),D=g(function(){return o++,f.apply(null,arguments)},...S),k=E(function(){s++;const $=foe(I,arguments);return l=D.apply(null,$),l},...A);return Object.assign(k,{resultFunc:f,memoizedResultFunc:D,dependencies:I,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:g,argsMemoize:E})};return Object.assign(r,{withTypes:()=>r}),r}var se=moe(a5),goe=Object.assign((t,e=se)=>{loe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(o=>t[o]);return e(r,(...o)=>o.reduce((s,l,c)=>(s[n[c]]=l,s),{}))},{withTypes:()=>goe}),Gb={},jb={},Kb={},oO;function yoe(){return oO||(oO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,o)=>{if(r!==i){const s=e(r),l=e(i);if(s===l&&s===0){if(r<i)return o==="desc"?1:-1;if(r>i)return o==="desc"?-1:1}return o==="desc"?l-s:s-l}return 0};t.compareValues=n})(Kb)),Kb}var Wb={},Yb={},sO;function l5(){return sO||(sO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(Yb)),Yb}var aO;function voe(){return aO||(aO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l5(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(o,s){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||e.isSymbol(o)?!0:typeof o=="string"&&(r.test(o)||!n.test(o))||s!=null&&Object.hasOwn(s,o)}t.isKey=i})(Wb)),Wb}var lO;function _oe(){return lO||(lO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yoe(),n=voe(),r=OI();function i(o,s,l,c){if(o==null)return[];l=c?void 0:l,Array.isArray(o)||(o=Object.values(o)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(E=>String(E));const f=(E,b)=>{let S=E;for(let A=0;A<b.length&&S!=null;++A)S=S[b[A]];return S},h=(E,b)=>b==null||E==null?b:typeof E=="object"&&"key"in E?Object.hasOwn(b,E.key)?b[E.key]:f(b,E.path):typeof E=="function"?E(b):Array.isArray(E)?f(b,E):typeof b=="object"?b[E]:b,g=s.map(E=>(Array.isArray(E)&&E.length===1&&(E=E[0]),E==null||typeof E=="function"||Array.isArray(E)||n.isKey(E)?E:{key:E,path:r.toPath(E)}));return o.map(E=>({original:E,criteria:g.map(b=>h(b,E))})).slice().sort((E,b)=>{for(let S=0;S<g.length;S++){const A=e.compareValues(E.criteria[S],b.criteria[S],l[S]);if(A!==0)return A}return 0}).map(E=>E.original)}t.orderBy=i})(jb)),jb}var Jb={},uO;function Toe(){return uO||(uO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],o=Math.floor(r),s=(l,c)=>{for(let f=0;f<l.length;f++){const h=l[f];Array.isArray(h)&&c<o?s(h,c+1):i.push(h)}};return s(n,0),i}t.flatten=e})(Jb)),Jb}var Qb={},cO;function u5(){return cO||(cO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=s5(),n=$I(),r=e5(),i=n5();function o(s,l,c){return r.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?i.eq(c[l],s):!1}t.isIterateeCall=o})(Qb)),Qb}var fO;function Eoe(){return fO||(fO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_oe(),n=Toe(),r=u5();function i(o,...s){const l=s.length;return l>1&&r.isIterateeCall(o,s[0],s[1])?s=[]:l>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(o,n.flatten(s),["asc"])}t.sortBy=i})(Gb)),Gb}var Xb,dO;function woe(){return dO||(dO=1,Xb=Eoe().sortBy),Xb}var boe=woe();const X0=as(boe);var c5=t=>t.legend.settings,Soe=t=>t.legend.size,Aoe=t=>t.legend.payload;se([Aoe,c5],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?X0(r,n):r});var nv=1;function xoe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=R.useState({height:0,left:0,top:0,width:0}),r=R.useCallback(i=>{if(i!=null){var o=i.getBoundingClientRect(),s={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(s.height-e.height)>nv||Math.abs(s.left-e.left)>nv||Math.abs(s.top-e.top)>nv||Math.abs(s.width-e.width)>nv)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function pr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Coe=typeof Symbol=="function"&&Symbol.observable||"@@observable",hO=Coe,Zb=()=>Math.random().toString(36).substring(7).split("").join("."),Ioe={INIT:`@@redux/INIT${Zb()}`,REPLACE:`@@redux/REPLACE${Zb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Zb()}`},T_=Ioe;function GI(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function f5(t,e,n){if(typeof t!="function")throw new Error(pr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(pr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(pr(1));return n(f5)(t,e)}let r=t,i=e,o=new Map,s=o,l=0,c=!1;function f(){s===o&&(s=new Map,o.forEach((A,I)=>{s.set(I,A)}))}function h(){if(c)throw new Error(pr(3));return i}function g(A){if(typeof A!="function")throw new Error(pr(4));if(c)throw new Error(pr(5));let I=!0;f();const D=l++;return s.set(D,A),function(){if(I){if(c)throw new Error(pr(6));I=!1,f(),s.delete(D),o=null}}}function v(A){if(!GI(A))throw new Error(pr(7));if(typeof A.type>"u")throw new Error(pr(8));if(typeof A.type!="string")throw new Error(pr(17));if(c)throw new Error(pr(9));try{c=!0,i=r(i,A)}finally{c=!1}return(o=s).forEach(D=>{D()}),A}function E(A){if(typeof A!="function")throw new Error(pr(10));r=A,v({type:T_.REPLACE})}function b(){const A=g;return{subscribe(I){if(typeof I!="object"||I===null)throw new Error(pr(11));function D(){const q=I;q.next&&q.next(h())}return D(),{unsubscribe:A(D)}},[hO](){return this}}}return v({type:T_.INIT}),{dispatch:v,subscribe:g,getState:h,replaceReducer:E,[hO]:b}}function Roe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:T_.INIT})>"u")throw new Error(pr(12));if(typeof n(void 0,{type:T_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pr(13))})}function d5(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const s=e[o];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{Roe(n)}catch(o){i=o}return function(s={},l){if(i)throw i;let c=!1;const f={};for(let h=0;h<r.length;h++){const g=r[h],v=n[g],E=s[g],b=v(E,l);if(typeof b>"u")throw l&&l.type,new Error(pr(14));f[g]=b,c=c||b!==E}return c=c||r.length!==Object.keys(s).length,c?f:s}}function E_(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Poe(...t){return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(pr(15))};const s={getState:i.getState,dispatch:(c,...f)=>o(c,...f)},l=t.map(c=>c(s));return o=E_(...l)(i.dispatch),{...i,dispatch:o}}}function h5(t){return GI(t)&&"type"in t&&typeof t.type=="string"}var p5=Symbol.for("immer-nothing"),pO=Symbol.for("immer-draftable"),Ii=Symbol.for("immer-state");function ho(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var vd=Object.getPrototypeOf;function oc(t){return!!t&&!!t[Ii]}function ra(t){var e;return t?m5(t)||Array.isArray(t)||!!t[pO]||!!((e=t.constructor)!=null&&e[pO])||ag(t)||eT(t):!1}var Noe=Object.prototype.constructor.toString();function m5(t){if(!t||typeof t!="object")return!1;const e=vd(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Noe}function w_(t,e){Z0(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Z0(t){const e=t[Ii];return e?e.type_:Array.isArray(t)?1:ag(t)?2:eT(t)?3:0}function UA(t,e){return Z0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function g5(t,e,n){const r=Z0(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Moe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function ag(t){return t instanceof Map}function eT(t){return t instanceof Set}function Au(t){return t.copy_||t.base_}function FA(t,e){if(ag(t))return new Map(t);if(eT(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=m5(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ii];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],l=r[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(vd(t),r)}else{const r=vd(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function jI(t,e=!1){return tT(t)||oc(t)||!ra(t)||(Z0(t)>1&&Object.defineProperties(t,{set:{value:rv},add:{value:rv},clear:{value:rv},delete:{value:rv}}),Object.freeze(t),e&&Object.values(t).forEach(n=>jI(n,!0))),t}function rv(){ho(2)}function tT(t){return Object.isFrozen(t)}var Doe={};function sc(t){const e=Doe[t];return e||ho(0,t),e}var Cm;function y5(){return Cm}function koe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function mO(t,e){e&&(sc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function BA(t){qA(t),t.drafts_.forEach(Ooe),t.drafts_=null}function qA(t){t===Cm&&(Cm=t.parent_)}function gO(t){return Cm=koe(Cm,t)}function Ooe(t){const e=t[Ii];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function yO(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ii].modified_&&(BA(e),ho(4)),ra(t)&&(t=b_(e,t),e.parent_||S_(e,t)),e.patches_&&sc("Patches").generateReplacementPatches_(n[Ii].base_,t,e.patches_,e.inversePatches_)):t=b_(e,n,[]),BA(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==p5?t:void 0}function b_(t,e,n){if(tT(e))return e;const r=e[Ii];if(!r)return w_(e,(i,o)=>vO(t,r,e,i,o,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return S_(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),w_(o,(l,c)=>vO(t,r,i,l,c,n,s)),S_(t,i,!1),n&&t.patches_&&sc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function vO(t,e,n,r,i,o,s){if(oc(i)){const l=o&&e&&e.type_!==3&&!UA(e.assigned_,r)?o.concat(r):void 0,c=b_(t,i,l);if(g5(n,r,c),oc(c))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(ra(i)&&!tT(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;b_(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(ag(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&S_(t,i)}}function S_(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&jI(e,n)}function Loe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:y5(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=KI;n&&(i=[r],o=Im);const{revoke:s,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=s,l}var KI={get(t,e){if(e===Ii)return t;const n=Au(t);if(!UA(n,e))return Voe(t,n,e);const r=n[e];return t.finalized_||!ra(r)?r:r===eS(t.base_,e)?(tS(t),t.copy_[e]=zA(r,t)):r},has(t,e){return e in Au(t)},ownKeys(t){return Reflect.ownKeys(Au(t))},set(t,e,n){const r=v5(Au(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=eS(Au(t),e),o=i==null?void 0:i[Ii];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Moe(n,i)&&(n!==void 0||UA(t.base_,e)))return!0;tS(t),$A(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return eS(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,tS(t),$A(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Au(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ho(11)},getPrototypeOf(t){return vd(t.base_)},setPrototypeOf(){ho(12)}},Im={};w_(KI,(t,e)=>{Im[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Im.deleteProperty=function(t,e){return Im.set.call(this,t,e,void 0)};Im.set=function(t,e,n){return KI.set.call(this,t[0],e,n,t[0])};function eS(t,e){const n=t[Ii];return(n?Au(n):t)[e]}function Voe(t,e,n){var i;const r=v5(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function v5(t,e){if(!(e in t))return;let n=vd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=vd(n)}}function $A(t){t.modified_||(t.modified_=!0,t.parent_&&$A(t.parent_))}function tS(t){t.copy_||(t.copy_=FA(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Uoe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const s=this;return function(c=o,...f){return s.produce(c,h=>n.call(this,h,...f))}}typeof n!="function"&&ho(6),r!==void 0&&typeof r!="function"&&ho(7);let i;if(ra(e)){const o=gO(this),s=zA(e,void 0);let l=!0;try{i=n(s),l=!1}finally{l?BA(o):qA(o)}return mO(o,r),yO(i,o)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===p5&&(i=void 0),this.autoFreeze_&&jI(i,!0),r){const o=[],s=[];sc("Patches").generateReplacementPatches_(e,i,o,s),r(o,s)}return i}else ho(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let r,i;return[this.produce(e,n,(s,l)=>{r=s,i=l}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ra(t)||ho(8),oc(t)&&(t=Ws(t));const e=gO(this),n=zA(t,void 0);return n[Ii].isManual_=!0,qA(e),n}finishDraft(t,e){const n=t&&t[Ii];(!n||!n.isManual_)&&ho(9);const{scope_:r}=n;return mO(r,e),yO(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=sc("Patches").applyPatches_;return oc(t)?r(t,e):this.produce(t,i=>r(i,e))}};function zA(t,e){const n=ag(t)?sc("MapSet").proxyMap_(t,e):eT(t)?sc("MapSet").proxySet_(t,e):Loe(t,e);return(e?e.scope_:y5()).drafts_.push(n),n}function Ws(t){return oc(t)||ho(10,t),_5(t)}function _5(t){if(!ra(t)||tT(t))return t;const e=t[Ii];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=FA(t,e.scope_.immer_.useStrictShallowCopy_)}else n=FA(t,!0);return w_(n,(r,i)=>{g5(n,r,_5(i))}),e&&(e.finalized_=!1),n}var Foe=new Uoe,T5=Foe.produce;function E5(t){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,t):i(o)}var Boe=E5(),qoe=E5,$oe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?E_:E_.apply(null,arguments)};function to(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(xi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>h5(r)&&r.type===t,n}var w5=class Dp extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Dp.prototype)}static get[Symbol.species](){return Dp}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Dp(...e[0].concat(this)):new Dp(...e.concat(this))}};function _O(t){return ra(t)?T5(t,()=>{}):t}function iv(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function zoe(t){return typeof t=="boolean"}var Hoe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=e??{};let s=new w5;return n&&(zoe(n)?s.push(Boe):s.push(qoe(n.extraArgument))),s},Goe="RTK_autoBatch",TO=t=>e=>{setTimeout(e,t)},joe=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,o=!1,s=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:TO(10):t.type==="callback"?t.queueNotification:TO(t.timeout),f=()=>{s=!1,o&&(o=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const g=()=>i&&h(),v=r.subscribe(g);return l.add(h),()=>{v(),l.delete(h)}},dispatch(h){var g;try{return i=!((g=h==null?void 0:h.meta)!=null&&g[Goe]),o=!i,o&&(s||(s=!0,c(f))),r.dispatch(h)}finally{i=!0}}})},Koe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new w5(t);return r&&i.push(joe(typeof r=="object"?r:void 0)),i};function Woe(t){const e=Hoe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(GI(n))l=d5(n);else throw new Error(xi(1));let c;typeof r=="function"?c=r(e):c=e();let f=E_;i&&(f=$oe({trace:!1,...typeof i=="object"&&i}));const h=Poe(...c),g=Koe(h);let v=typeof s=="function"?s(g):g();const E=f(...v);return f5(l,o,E)}function b5(t){const e={},n=[];let r;const i={addCase(o,s){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(xi(28));if(l in e)throw new Error(xi(29));return e[l]=s,i},addAsyncThunk(o,s){return s.pending&&(e[o.pending.type]=s.pending),s.rejected&&(e[o.rejected.type]=s.rejected),s.fulfilled&&(e[o.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:o.settled,reducer:s.settled}),i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return t(i),[e,n,r]}function Yoe(t){return typeof t=="function"}function Joe(t,e){let[n,r,i]=b5(e),o;if(Yoe(t))o=()=>_O(t());else{const l=_O(t);o=()=>l}function s(l=o(),c){let f=[n[c.type],...r.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return f.filter(h=>!!h).length===0&&(f=[i]),f.reduce((h,g)=>{if(g)if(oc(h)){const E=g(h,c);return E===void 0?h:E}else{if(ra(h))return T5(h,v=>g(v,c));{const v=g(h,c);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},l)}return s.getInitialState=o,s}var Qoe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Xoe=(t=21)=>{let e="",n=t;for(;n--;)e+=Qoe[Math.random()*64|0];return e},Zoe=Symbol.for("rtk-slice-createasyncthunk");function ese(t,e){return`${t}/${e}`}function tse({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Zoe];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(xi(11));const l=(typeof i.reducers=="function"?i.reducers(rse()):i.reducers)||{},c=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(q,$){const H=typeof q=="string"?q:q.type;if(!H)throw new Error(xi(12));if(H in f.sliceCaseReducersByType)throw new Error(xi(13));return f.sliceCaseReducersByType[H]=$,h},addMatcher(q,$){return f.sliceMatchers.push({matcher:q,reducer:$}),h},exposeAction(q,$){return f.actionCreators[q]=$,h},exposeCaseReducer(q,$){return f.sliceCaseReducersByName[q]=$,h}};c.forEach(q=>{const $=l[q],H={reducerName:q,type:ese(o,q),createNotation:typeof i.reducers=="function"};ose($)?ase(H,$,h,e):ise(H,$,h)});function g(){const[q={},$=[],H=void 0]=typeof i.extraReducers=="function"?b5(i.extraReducers):[i.extraReducers],M={...q,...f.sliceCaseReducersByType};return Joe(i.initialState,L=>{for(let O in M)L.addCase(O,M[O]);for(let O of f.sliceMatchers)L.addMatcher(O.matcher,O.reducer);for(let O of $)L.addMatcher(O.matcher,O.reducer);H&&L.addDefaultCase(H)})}const v=q=>q,E=new Map,b=new WeakMap;let S;function A(q,$){return S||(S=g()),S(q,$)}function I(){return S||(S=g()),S.getInitialState()}function D(q,$=!1){function H(L){let O=L[q];return typeof O>"u"&&$&&(O=iv(b,H,I)),O}function M(L=v){const O=iv(E,$,()=>new WeakMap);return iv(O,L,()=>{const F={};for(const[U,z]of Object.entries(i.selectors??{}))F[U]=nse(z,L,()=>iv(b,L,I),$);return F})}return{reducerPath:q,getSelectors:M,get selectors(){return M(H)},selectSlice:H}}const k={name:o,reducer:A,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:I,...D(s),injectInto(q,{reducerPath:$,...H}={}){const M=$??s;return q.inject({reducerPath:M,reducer:A},H),{...k,...D(M,!0)}}};return k}}function nse(t,e,n,r){function i(o,...s){let l=e(o);return typeof l>"u"&&r&&(l=n()),t(l,...s)}return i.unwrapped=t,i}var Pi=tse();function rse(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function ise({type:t,reducerName:e,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!sse(r))throw new Error(xi(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,s?to(t,s):to(t))}function ose(t){return t._reducerDefinitionType==="asyncThunk"}function sse(t){return t._reducerDefinitionType==="reducerWithPrepare"}function ase({type:t,reducerName:e},n,r,i){if(!i)throw new Error(xi(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:c,settled:f,options:h}=n,g=i(t,o,h);r.exposeAction(e,g),s&&r.addCase(g.fulfilled,s),l&&r.addCase(g.pending,l),c&&r.addCase(g.rejected,c),f&&r.addMatcher(g.settled,f),r.exposeCaseReducer(e,{fulfilled:s||ov,pending:l||ov,rejected:c||ov,settled:f||ov})}function ov(){}var lse="task",S5="listener",A5="completed",WI="cancelled",use=`task-${WI}`,cse=`task-${A5}`,HA=`${S5}-${WI}`,fse=`${S5}-${A5}`,nT=class{constructor(t){Sw(this,"name","TaskAbortError");Sw(this,"message");this.code=t,this.message=`${lse} ${WI} (reason: ${t})`}},YI=(t,e)=>{if(typeof t!="function")throw new TypeError(xi(32))},A_=()=>{},x5=(t,e=A_)=>(t.catch(e),t),C5=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),zu=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Hu=t=>{if(t.aborted){const{reason:e}=t;throw new nT(e)}};function I5(t,e){let n=A_;return new Promise((r,i)=>{const o=()=>i(new nT(t.reason));if(t.aborted){o();return}n=C5(t,o),e.finally(()=>n()).then(r,i)}).finally(()=>{n=A_})}var dse=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof nT?"cancelled":"rejected",error:n}}finally{e==null||e()}},x_=t=>e=>x5(I5(t,e).then(n=>(Hu(t),n))),R5=t=>{const e=x_(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:qf}=Object,EO={},rT="listenerMiddleware",hse=(t,e)=>{const n=r=>C5(t,()=>zu(r,t.reason));return(r,i)=>{YI(r);const o=new AbortController;n(o);const s=dse(async()=>{Hu(t),Hu(o.signal);const l=await r({pause:x_(o.signal),delay:R5(o.signal),signal:o.signal});return Hu(o.signal),l},()=>zu(o,cse));return i!=null&&i.autoJoin&&e.push(s.catch(A_)),{result:x_(t)(s),cancel(){zu(o,use)}}}},pse=(t,e)=>{const n=async(r,i)=>{Hu(e);let o=()=>{};const l=[new Promise((c,f)=>{let h=t({predicate:r,effect:(g,v)=>{v.unsubscribe(),c([g,v.getState(),v.getOriginalState()])}});o=()=>{h(),f()}})];i!=null&&l.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await I5(e,Promise.race(l));return Hu(e),c}finally{o()}};return(r,i)=>x5(n(r,i))},P5=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:o}=t;if(e)i=to(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(xi(21));return YI(o),{predicate:i,type:e,effect:o}},N5=qf(t=>{const{type:e,predicate:n,effect:r}=P5(t);return{id:Xoe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(xi(22))}}},{withTypes:()=>N5}),wO=(t,e)=>{const{type:n,effect:r,predicate:i}=P5(e);return Array.from(t.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===i)&&o.effect===r)},GA=t=>{t.pending.forEach(e=>{zu(e,HA)})},mse=t=>()=>{t.forEach(GA),t.clear()},bO=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},M5=qf(to(`${rT}/add`),{withTypes:()=>M5}),gse=to(`${rT}/removeAll`),D5=qf(to(`${rT}/remove`),{withTypes:()=>D5}),yse=(...t)=>{console.error(`${rT}/error`,...t)},lg=(t={})=>{const e=new Map,{extra:n,onError:r=yse}=t;YI(r);const i=h=>(h.unsubscribe=()=>e.delete(h.id),e.set(h.id,h),g=>{h.unsubscribe(),g!=null&&g.cancelActive&&GA(h)}),o=h=>{const g=wO(e,h)??N5(h);return i(g)};qf(o,{withTypes:()=>o});const s=h=>{const g=wO(e,h);return g&&(g.unsubscribe(),h.cancelActive&&GA(g)),!!g};qf(s,{withTypes:()=>s});const l=async(h,g,v,E)=>{const b=new AbortController,S=pse(o,b.signal),A=[];try{h.pending.add(b),await Promise.resolve(h.effect(g,qf({},v,{getOriginalState:E,condition:(I,D)=>S(I,D).then(Boolean),take:S,delay:R5(b.signal),pause:x_(b.signal),extra:n,signal:b.signal,fork:hse(b.signal,A),unsubscribe:h.unsubscribe,subscribe:()=>{e.set(h.id,h)},cancelActiveListeners:()=>{h.pending.forEach((I,D,k)=>{I!==b&&(zu(I,HA),k.delete(I))})},cancel:()=>{zu(b,HA),h.pending.delete(b)},throwIfCancelled:()=>{Hu(b.signal)}})))}catch(I){I instanceof nT||bO(r,I,{raisedBy:"effect"})}finally{await Promise.all(A),zu(b,fse),h.pending.delete(b)}},c=mse(e);return{middleware:h=>g=>v=>{if(!h5(v))return g(v);if(M5.match(v))return o(v.payload);if(gse.match(v)){c();return}if(D5.match(v))return s(v.payload);let E=h.getState();const b=()=>{if(E===EO)throw new Error(xi(23));return E};let S;try{if(S=g(v),e.size>0){const A=h.getState(),I=Array.from(e.values());for(const D of I){let k=!1;try{k=D.predicate(v,A,E)}catch(q){k=!1,bO(r,q,{raisedBy:"predicate"})}k&&l(D,v,h,b)}}}finally{E=EO}return S},startListening:o,stopListening:s,clearListeners:c}};function xi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var vse={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},k5=Pi({name:"chartLayout",initialState:vse,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,o;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(o=e.payload.left)!==null&&o!==void 0?o:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:_se,setLayout:Tse,setChartSize:Ese,setScale:wse}=k5.actions,bse=k5.reducer;function SO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SO(Object(n),!0).forEach(function(r){Sse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sse(t,e,n){return(e=Ase(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ase(t){var e=xse(t,"string");return typeof e=="symbol"?e:e+""}function xse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C_=Math.PI/180,Cse=t=>t*180/Math.PI,vr=(t,e,n,r)=>({x:t+Math.cos(-C_*r)*n,y:e+Math.sin(-C_*r)*n}),Ise=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Rse=(t,e)=>{var{x:n,y:r}=t,{x:i,y:o}=e;return Math.sqrt((n-i)**2+(r-o)**2)},Pse=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:o}=e,s=Rse({x:n,y:r},{x:i,y:o});if(s<=0)return{radius:s,angle:0};var l=(n-i)/s,c=Math.acos(l);return r>o&&(c=2*Math.PI-c),{radius:s,angle:Cse(c),angleInRadian:c}},Nse=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:e-o*360,endAngle:n-o*360}},Mse=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),o=Math.floor(r/360),s=Math.min(i,o);return t+s*360},Dse=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:o}=Pse({x:n,y:r},e),{innerRadius:s,outerRadius:l}=e;if(i<s||i>l||i===0)return null;var{startAngle:c,endAngle:f}=Nse(e),h=o,g;if(c<=f){for(;h>f;)h-=360;for(;h<c;)h+=360;g=h>=c&&h<=f}else{for(;h>c;)h-=360;for(;h<f;)h+=360;g=h>=f&&h<=c}return g?AO(AO({},e),{},{radius:i,angle:Mse(h,e)}):null};function O5(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function xO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ji(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xO(Object(n),!0).forEach(function(r){kse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kse(t,e,n){return(e=Ose(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ose(t){var e=Lse(t,"string");return typeof e=="symbol"?e:e+""}function Lse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hr(t,e,n){return ir(t)||ir(e)?n:os(e)?gd(t,e,n):typeof e=="function"?e(t):n}var Vse=(t,e,n,r,i)=>{var o,s=-1,l=(o=e==null?void 0:e.length)!==null&&o!==void 0?o:0;if(l<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<l;c++){var f=c>0?n[c-1].coordinate:n[l-1].coordinate,h=n[c].coordinate,g=c>=l-1?n[0].coordinate:n[c+1].coordinate,v=void 0;if(bi(h-f)!==bi(g-h)){var E=[];if(bi(g-h)===bi(i[1]-i[0])){v=g;var b=h+i[1]-i[0];E[0]=Math.min(b,(b+f)/2),E[1]=Math.max(b,(b+f)/2)}else{v=f;var S=g+i[1]-i[0];E[0]=Math.min(h,(S+h)/2),E[1]=Math.max(h,(S+h)/2)}var A=[Math.min(h,(v+h)/2),Math.max(h,(v+h)/2)];if(t>A[0]&&t<=A[1]||t>=E[0]&&t<=E[1]){({index:s}=n[c]);break}}else{var I=Math.min(f,g),D=Math.max(f,g);if(t>(I+h)/2&&t<=(D+h)/2){({index:s}=n[c]);break}}}else if(e){for(var k=0;k<l;k++)if(k===0&&t<=(e[k].coordinate+e[k+1].coordinate)/2||k>0&&k<l-1&&t>(e[k].coordinate+e[k-1].coordinate)/2&&t<=(e[k].coordinate+e[k+1].coordinate)/2||k===l-1&&t>(e[k].coordinate+e[k-1].coordinate)/2){({index:s}=e[k]);break}}return s},Use=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:o,verticalAlign:s,layout:l}=e;if((l==="vertical"||l==="horizontal"&&s==="middle")&&o!=="center"&&We(t[o]))return ji(ji({},t),{},{[o]:t[o]+(r||0)});if((l==="horizontal"||l==="vertical"&&o==="center")&&s!=="middle"&&We(t[s]))return ji(ji({},t),{},{[s]:t[s]+(i||0)})}return t},yc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",CO=1e-4,Fse=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-CO,o=Math.max(r[0],r[1])+CO,s=t(e[0]),l=t(e[n-1]);(s<i||s>o||l<i||l>o)&&t.domain([e[0],e[n-1]])}},Bse=(t,e)=>{if(!e||e.length!==2||!We(e[0])||!We(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!We(t[0])||t[0]<n)&&(i[0]=n),(!We(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},qse=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0,s=0;s<e;++s){var l=eo(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=o,t[s][n][1]=o+l,o=t[s][n][1])}},$se=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,o=0;o<e;++o){var s=eo(t[o][n][1])?t[o][n][0]:t[o][n][1];s>=0?(t[o][n][0]=i,t[o][n][1]=i+s,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},zse={sign:qse,expand:Tie,none:yd,silhouette:Eie,wiggle:wie,positive:$se},Hse=(t,e,n)=>{var r=zse[n],i=_ie().keys(e).value((o,s)=>+Hr(o,s,0)).order(LA).offset(r);return i(t)};function Gse(t){return t==null?void 0:String(t)}var IO=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:o,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var l=Hr(o,e.dataKey,e.scale.domain()[s]);return ir(l)?null:e.scale(l)-i/2+r},jse=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},Kse=t=>{var e=t.flat(2).filter(We);return[Math.min(...e),Math.max(...e)]},Wse=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Yse=(t,e,n)=>{if(t!=null)return Wse(Object.keys(t).reduce((r,i)=>{var o=t[i],{stackedData:s}=o,l=s.reduce((c,f)=>{var h=O5(f,e,n),g=Kse(h);return[Math.min(c[0],g[0]),Math.max(c[1],g[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},RO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,JI=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=X0(e,h=>h.coordinate),o=1/0,s=1,l=i.length;s<l;s++){var c=i[s],f=i[s-1];o=Math.min((c.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function NO(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:o}=t;return ji(ji({},e),{},{dataKey:n,payload:r,value:i,name:o})}function L5(t,e){if(t)return String(t);if(typeof e=="string")return e}function Jse(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var o=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return o?{x:t,y:e}:null}return r?Dse({x:t,y:e},r):null}var Qse=(t,e,n,r)=>{var i=e.find(f=>f&&f.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,{radius:s}=r;return ji(ji(ji({},r),vr(r.cx,r.cy,s,o)),{},{angle:o,radius:s})}var l=i.coordinate,{angle:c}=r;return ji(ji(ji({},r),vr(r.cx,r.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},Xse=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,ma=t=>t.layout.width,ga=t=>t.layout.height,Zse=t=>t.layout.scale,V5=t=>t.layout.margin,iT=se(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),oT=se(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),eae="data-recharts-item-index",tae="data-recharts-item-data-key",ug=60;function MO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MO(Object(n),!0).forEach(function(r){nae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nae(t,e,n){return(e=rae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rae(t){var e=iae(t,"string");return typeof e=="symbol"?e:e+""}function iae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oae=t=>t.brush.height;function sae(t){var e=oT(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ug;return n+i}return n},0)}function aae(t){var e=oT(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ug;return n+i}return n},0)}function lae(t){var e=iT(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function uae(t){var e=iT(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var sr=se([ma,ga,V5,oae,sae,aae,lae,uae,c5,Soe],(t,e,n,r,i,o,s,l,c,f)=>{var h={left:(n.left||0)+i,right:(n.right||0)+o},g={top:(n.top||0)+s,bottom:(n.bottom||0)+l},v=sv(sv({},g),h),E=v.bottom;v.bottom+=r,v=Use(v,c,f);var b=t-v.left-v.right,S=e-v.top-v.bottom;return sv(sv({brushBottom:E},v),{},{width:Math.max(b,0),height:Math.max(S,0)})}),cae=se(sr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),QI=se(ma,ga,(t,e)=>({x:0,y:0,width:t,height:e})),fae=R.createContext(null),So=()=>R.useContext(fae)!=null,sT=t=>t.brush,aT=se([sT,sr,V5],(t,e,n)=>({height:t.height,x:We(t.x)?t.x:e.left,y:We(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:We(t.width)?t.width:e.width})),XI=()=>{var t,e=So(),n=ze(cae),r=ze(aT),i=(t=ze(sT))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},dae={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},hae=()=>{var t;return(t=ze(sr))!==null&&t!==void 0?t:dae},pae=()=>ze(ma),mae=()=>ze(ga),Rt=t=>t.layout.layoutType,ZI=()=>ze(Rt),gae={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},U5=Pi({name:"legend",initialState:gae,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=Ws(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:KIe,setLegendSettings:WIe,addLegendPayload:yae,removeLegendPayload:vae}=U5.actions,_ae=U5.reducer;function jA(){return jA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jA.apply(null,arguments)}function DO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DO(Object(n),!0).forEach(function(r){Tae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tae(t,e,n){return(e=Eae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eae(t){var e=wae(t,"string");return typeof e=="symbol"?e:e+""}function wae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bae(t){return Array.isArray(t)&&os(t[0])&&os(t[1])?t.join(" ~ "):t}var Sae=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:o,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:f,label:h,labelFormatter:g,accessibilityLayer:v=!1}=t,E=()=>{if(o&&o.length){var $={padding:0,margin:0},H=(l?X0(o,l):o).map((M,L)=>{if(M.type==="none")return null;var O=M.formatter||s||bae,{value:F,name:U}=M,z=F,G=U;if(O){var Ce=O(F,U,M,L,o);if(Array.isArray(Ce))[z,G]=Ce;else if(Ce!=null)z=Ce;else return null}var be=nS({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},r);return R.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:be},os(G)?R.createElement("span",{className:"recharts-tooltip-item-name"},G):null,os(G)?R.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,R.createElement("span",{className:"recharts-tooltip-item-value"},z),R.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return R.createElement("ul",{className:"recharts-tooltip-item-list",style:$},H)}return null},b=nS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),S=nS({margin:0},i),A=!ir(h),I=A?h:"",D=Xt("recharts-default-tooltip",c),k=Xt("recharts-tooltip-label",f);A&&g&&o!==void 0&&o!==null&&(I=g(h,o));var q=v?{role:"status","aria-live":"assertive"}:{};return R.createElement("div",jA({className:D,style:b},q),R.createElement("p",{className:k,style:S},R.isValidElement(I)?I:"".concat(I)),E())},gp="recharts-tooltip-wrapper",Aae={visibility:"hidden"};function xae(t){var{coordinate:e,translateX:n,translateY:r}=t;return Xt(gp,{["".concat(gp,"-right")]:We(n)&&e&&We(e.x)&&n>=e.x,["".concat(gp,"-left")]:We(n)&&e&&We(e.x)&&n<e.x,["".concat(gp,"-bottom")]:We(r)&&e&&We(e.y)&&r>=e.y,["".concat(gp,"-top")]:We(r)&&e&&We(e.y)&&r<e.y})}function kO(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:o,reverseDirection:s,tooltipDimension:l,viewBox:c,viewBoxDimension:f}=t;if(o&&We(o[r]))return o[r];var h=n[r]-l-(i>0?i:0),g=n[r]+i;if(e[r])return s[r]?h:g;var v=c[r];if(v==null)return 0;if(s[r]){var E=h,b=v;return E<b?Math.max(g,v):Math.max(h,v)}if(f==null)return 0;var S=g+l,A=v+f;return S>A?Math.max(h,v):Math.max(g,v)}function Cae(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Iae(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:o,tooltipBox:s,useTranslate3d:l,viewBox:c}=t,f,h,g;return s.height>0&&s.width>0&&n?(h=kO({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),g=kO({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),f=Cae({translateX:h,translateY:g,useTranslate3d:l})):f=Aae,{cssProperties:f,cssClasses:xae({translateX:h,translateY:g,coordinate:n})}}function OO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function av(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OO(Object(n),!0).forEach(function(r){KA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KA(t,e,n){return(e=Rae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rae(t){var e=Pae(t,"string");return typeof e=="symbol"?e:e+""}function Pae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Nae extends R.PureComponent{constructor(){super(...arguments),KA(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),KA(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:o,coordinate:s,hasPayload:l,isAnimationActive:c,offset:f,position:h,reverseDirection:g,useTranslate3d:v,viewBox:E,wrapperStyle:b,lastBoundingBox:S,innerRef:A,hasPortalFromProps:I}=this.props,{cssClasses:D,cssProperties:k}=Iae({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:f,position:h,reverseDirection:g,tooltipBox:{height:S.height,width:S.width},useTranslate3d:v,viewBox:E}),q=I?{}:av(av({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),$=av(av({},q),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},b);return R.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:D,style:$,ref:A},o)}}var Mae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),cg={isSsr:Mae()},F5=()=>ze(t=>t.rootProps.accessibilityLayer);function Ri(t){return Number.isFinite(t)}function I_(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function WA(){return WA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WA.apply(null,arguments)}function LO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LO(Object(n),!0).forEach(function(r){Dae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dae(t,e,n){return(e=kae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kae(t){var e=Oae(t,"string");return typeof e=="symbol"?e:e+""}function Oae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UO={curveBasisClosed:lie,curveBasisOpen:uie,curveBasis:aie,curveBumpX:Kre,curveBumpY:Wre,curveLinearClosed:cie,curveLinear:J0,curveMonotoneX:fie,curveMonotoneY:die,curveNatural:hie,curveStep:pie,curveStepAfter:gie,curveStepBefore:mie},lv=t=>Ri(t.x)&&Ri(t.y),yp=t=>t.x,vp=t=>t.y,Lae=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(sg(t));return(n==="curveMonotone"||n==="curveBump")&&e?UO["".concat(n).concat(e==="vertical"?"Y":"X")]:UO[n]||J0},Vae=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:o=!1}=t,s=Lae(e,i),l=o?n.filter(lv):n,c;if(Array.isArray(r)){var f=o?r.filter(g=>lv(g)):r,h=l.map((g,v)=>VO(VO({},g),{},{base:f[v]}));return i==="vertical"?c=ev().y(vp).x1(yp).x0(g=>g.base.x):c=ev().x(yp).y1(vp).y0(g=>g.base.y),c.defined(lv).curve(s),c(h)}return i==="vertical"&&We(r)?c=ev().y(vp).x1(yp).x0(r):We(r)?c=ev().x(yp).y1(vp).y0(r):c=B3().x(yp).y(vp),c.defined(lv).curve(s),c(l)},Uae=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var o=n&&n.length?Vae(t):r;return R.createElement("path",WA({},W0(t),Mre(t),{className:Xt("recharts-curve",e),d:o===null?void 0:o,ref:i}))},Fae=["x","y","top","left","width","height","className"];function YA(){return YA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YA.apply(null,arguments)}function FO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FO(Object(n),!0).forEach(function(r){qae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qae(t,e,n){return(e=$ae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ae(t){var e=zae(t,"string");return typeof e=="symbol"?e:e+""}function zae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hae(t,e){if(t==null)return{};var n,r,i=Gae(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Gae(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var jae=(t,e,n,r,i,o)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(o,",").concat(e,"h").concat(n),Kae=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:o=0,height:s=0,className:l}=t,c=Hae(t,Fae),f=Bae({x:e,y:n,top:r,left:i,width:o,height:s},c);return!We(e)||!We(n)||!We(o)||!We(s)||!We(r)||!We(i)?null:R.createElement("path",YA({},tr(f,!0),{className:Xt("recharts-cross",l),d:jae(e,n,o,s,r,i)}))};function Wae(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function BO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BO(Object(n),!0).forEach(function(r){Jae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jae(t,e,n){return(e=Qae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qae(t){var e=Xae(t,"string");return typeof e=="symbol"?e:e+""}function Xae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ll(t,e){var n=Yae({},t),r=e,i=Object.keys(e),o=i.reduce((s,l)=>(s[l]===void 0&&r[l]!==void 0&&(s[l]=r[l]),s),n);return o}function Zae(){}function qO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $O(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qO(Object(n),!0).forEach(function(r){ele(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ele(t,e,n){return(e=tle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tle(t){var e=nle(t,"string");return typeof e=="symbol"?e:e+""}function nle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rle=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),B5=(t,e,n)=>t.map(r=>"".concat(rle(r)," ").concat(e,"ms ").concat(n)).join(","),ile=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Rm=(t,e)=>Object.keys(e).reduce((n,r)=>$O($O({},n),{},{[r]:t(r,e[r])}),{});function zO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zO(Object(n),!0).forEach(function(r){ole(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ole(t,e,n){return(e=sle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sle(t){var e=ale(t,"string");return typeof e=="symbol"?e:e+""}function ale(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R_=(t,e,n)=>t+(e-t)*n,JA=t=>{var{from:e,to:n}=t;return e!==n},q5=(t,e,n)=>{var r=Rm((i,o)=>{if(JA(o)){var[s,l]=t(o.from,o.to,o.velocity);return gr(gr({},o),{},{from:s,velocity:l})}return o},e);return n<1?Rm((i,o)=>JA(o)?gr(gr({},o),{},{velocity:R_(o.velocity,r[i].velocity,n),from:R_(o.from,r[i].from,n)}):o,e):q5(t,r,n-1)};function lle(t,e,n,r,i,o){var s,l=r.reduce((v,E)=>gr(gr({},v),{},{[E]:{from:t[E],velocity:0,to:e[E]}}),{}),c=()=>Rm((v,E)=>E.from,l),f=()=>!Object.values(l).filter(JA).length,h=null,g=v=>{s||(s=v);var E=v-s,b=E/n.dt;l=q5(n,l,b),i(gr(gr(gr({},t),e),c())),s=v,f()||(h=o.setTimeout(g))};return()=>(h=o.setTimeout(g),()=>{h()})}function ule(t,e,n,r,i,o,s){var l=null,c=i.reduce((g,v)=>gr(gr({},g),{},{[v]:[t[v],e[v]]}),{}),f,h=g=>{f||(f=g);var v=(g-f)/r,E=Rm((S,A)=>R_(...A,n(v)),c);if(o(gr(gr(gr({},t),e),E)),v<1)l=s.setTimeout(h);else{var b=Rm((S,A)=>R_(...A,n(1)),c);o(gr(gr(gr({},t),e),b))}};return()=>(l=s.setTimeout(h),()=>{l()})}const cle=(t,e,n,r,i,o)=>{var s=ile(t,e);return n.isStepper===!0?lle(t,e,n,s,i,o):ule(t,e,n,r,s,i,o)};var P_=1e-4,$5=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],z5=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),HO=(t,e)=>n=>{var r=$5(t,e);return z5(r,n)},fle=(t,e)=>n=>{var r=$5(t,e),i=[...r.map((o,s)=>o*s).slice(1),0];return z5(i,n)},GO=function(){for(var e,n,r,i,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];if(s.length===1)switch(s[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var c=s[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([e,r,n,i]=c[1].split(")")[0].split(",").map(b=>parseFloat(b)))}}else s.length===4&&([e,r,n,i]=s);var f=HO(e,n),h=HO(r,i),g=fle(e,n),v=b=>b>1?1:b<0?0:b,E=b=>{for(var S=b>1?1:b,A=S,I=0;I<8;++I){var D=f(A)-S,k=g(A);if(Math.abs(D-S)<P_||k<P_)return h(A);A=v(A-D/k)}return h(A)};return E.isStepper=!1,E},dle=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,o=(s,l,c)=>{var f=-(s-l)*n,h=c*r,g=c+(f-h)*i/1e3,v=c*i/1e3+s;return Math.abs(v-l)<P_&&Math.abs(g)<P_?[l,0]:[v,g]};return o.isStepper=!0,o.dt=i,o},hle=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return GO(t);case"spring":return dle();default:if(t.split("(")[0]==="cubic-bezier")return GO(t)}return typeof t=="function"?t:null};function ple(t){var e,n=()=>null,r=!1,i=null,o=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var l=s,[c,...f]=l;if(typeof c=="number"){i=t.setTimeout(o.bind(null,f),c);return}o(c),i=t.setTimeout(o.bind(null,f));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),o(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class mle{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,o=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}}}function gle(){return ple(new mle)}var yle=R.createContext(gle);function vle(t,e){var n=R.useContext(yle);return R.useMemo(()=>e??n(t),[t,e,n])}var _le={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},jO={t:0},rS={t:1};function eR(t){var e=Ll(t,_le),{isActive:n,canBegin:r,duration:i,easing:o,begin:s,onAnimationEnd:l,onAnimationStart:c,children:f}=e,h=vle(e.animationId,e.animationManager),[g,v]=R.useState(n?jO:rS),E=R.useRef(null);return R.useEffect(()=>{n||v(rS)},[n]),R.useEffect(()=>{if(!n||!r)return Zae;var b=cle(jO,rS,hle(o),i,v,h.getTimeoutController()),S=()=>{E.current=b()};return h.start([c,s,S,i,l]),()=>{h.stop(),E.current&&E.current(),l()}},[n,r,i,o,s,c,l,h]),f(g.t)}function tR(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=R.useRef(xm(e)),r=R.useRef(t);return r.current!==t&&(n.current=xm(e),r.current=t),n.current}function KO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KO(Object(n),!0).forEach(function(r){Tle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tle(t,e,n){return(e=Ele(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ele(t){var e=wle(t,"string");return typeof e=="symbol"?e:e+""}function wle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N_(){return N_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N_.apply(null,arguments)}var YO=(t,e,n,r,i)=>{var o=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],g=0,v=4;g<v;g++)h[g]=i[g]>o?o:i[g];f="M".concat(t,",").concat(e+s*h[0]),h[0]>0&&(f+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(c,",").concat(t+l*h[0],",").concat(e)),f+="L ".concat(t+n-l*h[1],",").concat(e),h[1]>0&&(f+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(e+s*h[1])),f+="L ".concat(t+n,",").concat(e+r-s*h[2]),h[2]>0&&(f+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(c,`,
        `).concat(t+n-l*h[2],",").concat(e+r)),f+="L ".concat(t+l*h[3],",").concat(e+r),h[3]>0&&(f+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+r-s*h[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var E=Math.min(o,i);f="M ".concat(t,",").concat(e+s*E,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+l*E,",").concat(e,`
            L `).concat(t+n-l*E,",").concat(e,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+n,",").concat(e+s*E,`
            L `).concat(t+n,",").concat(e+r-s*E,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t+n-l*E,",").concat(e+r,`
            L `).concat(t+l*E,",").concat(e+r,`
            A `).concat(E,",").concat(E,",0,0,").concat(c,",").concat(t,",").concat(e+r-s*E," Z")}else f="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return f},ble={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},H5=t=>{var e=Ll(t,ble),n=R.useRef(null),[r,i]=R.useState(-1);R.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var Ce=n.current.getTotalLength();Ce&&i(Ce)}catch{}},[]);var{x:o,y:s,width:l,height:c,radius:f,className:h}=e,{animationEasing:g,animationDuration:v,animationBegin:E,isAnimationActive:b,isUpdateAnimationActive:S}=e,A=R.useRef(l),I=R.useRef(c),D=R.useRef(o),k=R.useRef(s),q=R.useMemo(()=>({x:o,y:s,width:l,height:c,radius:f}),[o,s,l,c,f]),$=tR(q,"rectangle-");if(o!==+o||s!==+s||l!==+l||c!==+c||l===0||c===0)return null;var H=Xt("recharts-rectangle",h);if(!S)return R.createElement("path",N_({},tr(e,!0),{className:H,d:YO(o,s,l,c,f)}));var M=A.current,L=I.current,O=D.current,F=k.current,U="0px ".concat(r===-1?1:r,"px"),z="".concat(r,"px 0px"),G=B5(["strokeDasharray"],v,typeof g=="string"?g:void 0);return R.createElement(eR,{animationId:$,key:$,canBegin:r>0,duration:v,easing:g,isActive:S,begin:E},Ce=>{var be=Br(M,l,Ce),ee=Br(L,c,Ce),le=Br(O,o,Ce),Se=Br(F,s,Ce);n.current&&(A.current=be,I.current=ee,D.current=le,k.current=Se);var Ve;return b?Ce>0?Ve={transition:G,strokeDasharray:z}:Ve={strokeDasharray:U}:Ve={strokeDasharray:z},R.createElement("path",N_({},tr(e,!0),{className:H,d:YO(le,Se,be,ee,f),ref:n,style:WO(WO({},Ve),e.style)}))})};function G5(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:o}=t,s=vr(e,n,r,i),l=vr(e,n,r,o);return{points:[s,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function QA(){return QA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QA.apply(null,arguments)}var Sle=(t,e)=>{var n=bi(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},uv=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:o,isExternal:s,cornerRadius:l,cornerIsExternal:c}=t,f=l*(s?1:-1)+r,h=Math.asin(l/f)/C_,g=c?i:i+o*h,v=vr(e,n,f,g),E=vr(e,n,r,g),b=c?i-o*h:i,S=vr(e,n,f*Math.cos(h*C_),b);return{center:v,circleTangency:E,lineTangency:S,theta:h}},j5=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:o,endAngle:s}=t,l=Sle(o,s),c=o+l,f=vr(e,n,i,o),h=vr(e,n,i,c),g="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var v=vr(e,n,r,o),E=vr(e,n,r,c);g+="L ".concat(E.x,",").concat(E.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(e,",").concat(n," Z");return g},Ale=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:f}=t,h=bi(f-c),{circleTangency:g,lineTangency:v,theta:E}=uv({cx:e,cy:n,radius:i,angle:c,sign:h,cornerRadius:o,cornerIsExternal:l}),{circleTangency:b,lineTangency:S,theta:A}=uv({cx:e,cy:n,radius:i,angle:f,sign:-h,cornerRadius:o,cornerIsExternal:l}),I=l?Math.abs(c-f):Math.abs(c-f)-E-A;if(I<0)return s?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):j5({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:f});var D="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(I>180),",").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
  `);if(r>0){var{circleTangency:k,lineTangency:q,theta:$}=uv({cx:e,cy:n,radius:r,angle:c,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),{circleTangency:H,lineTangency:M,theta:L}=uv({cx:e,cy:n,radius:r,angle:f,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),O=l?Math.abs(c-f):Math.abs(c-f)-$-L;if(O<0&&o===0)return"".concat(D,"L").concat(e,",").concat(n,"Z");D+="L".concat(M.x,",").concat(M.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(H.x,",").concat(H.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(O>180),",").concat(+(h>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(q.x,",").concat(q.y,"Z")}else D+="L".concat(e,",").concat(n,"Z");return D},xle={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},K5=t=>{var e=Ll(t,xle),{cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:h,className:g}=e;if(o<i||f===h)return null;var v=Xt("recharts-sector",g),E=o-i,b=To(s,E,0,!0),S;return b>0&&Math.abs(f-h)<360?S=Ale({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(b,E/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:f,endAngle:h}):S=j5({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:f,endAngle:h}),R.createElement("path",QA({},tr(e,!0),{className:v,d:S}))};function Cle(t,e,n){var r,i,o,s;if(t==="horizontal")r=e.x,o=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:l,cy:c,innerRadius:f,outerRadius:h,angle:g}=e,v=vr(l,c,f,g),E=vr(l,c,h,g);r=v.x,i=v.y,o=E.x,s=E.y}else return G5(e);return[{x:r,y:i},{x:o,y:s}]}var iS={},oS={},sS={},JO;function Ile(){return JO||(JO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=l5();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(sS)),sS}var QO;function Rle(){return QO||(QO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ile();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(oS)),oS}var XO;function Ple(){return XO||(XO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=u5(),n=Rle();function r(i,o,s){s&&typeof s!="number"&&e.isIterateeCall(i,o,s)&&(o=s=void 0),i=n.toFinite(i),o===void 0?(o=i,i=0):o=n.toFinite(o),s=s===void 0?i<o?1:-1:n.toFinite(s);const l=Math.max(Math.ceil((o-i)/(s||1)),0),c=new Array(l);for(let f=0;f<l;f++)c[f]=i,i+=s;return c}t.range=r})(iS)),iS}var aS,ZO;function Nle(){return ZO||(ZO=1,aS=Ple().range),aS}var Mle=Nle();const W5=as(Mle);function pl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Dle(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nR(t){let e,n,r;t.length!==2?(e=pl,n=(l,c)=>pl(t(l),c),r=(l,c)=>t(l)-c):(e=t===pl||t===Dle?t:kle,n=t,r=t);function i(l,c,f=0,h=l.length){if(f<h){if(e(c,c)!==0)return h;do{const g=f+h>>>1;n(l[g],c)<0?f=g+1:h=g}while(f<h)}return f}function o(l,c,f=0,h=l.length){if(f<h){if(e(c,c)!==0)return h;do{const g=f+h>>>1;n(l[g],c)<=0?f=g+1:h=g}while(f<h)}return f}function s(l,c,f=0,h=l.length){const g=i(l,c,f,h-1);return g>f&&r(l[g-1],c)>-r(l[g],c)?g-1:g}return{left:i,center:s,right:o}}function kle(){return 0}function Y5(t){return t===null?NaN:+t}function*Ole(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Lle=nR(pl),fg=Lle.right;nR(Y5).center;class eL extends Map{constructor(e,n=Fle){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(tL(this,e))}has(e){return super.has(tL(this,e))}set(e,n){return super.set(Vle(this,e),n)}delete(e){return super.delete(Ule(this,e))}}function tL({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Vle({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ule({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Fle(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ble(t=pl){if(t===pl)return J5;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function J5(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const qle=Math.sqrt(50),$le=Math.sqrt(10),zle=Math.sqrt(2);function M_(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=qle?10:o>=$le?5:o>=zle?2:1;let l,c,f;return i<0?(f=Math.pow(10,-i)/s,l=Math.round(t*f),c=Math.round(e*f),l/f<t&&++l,c/f>e&&--c,f=-f):(f=Math.pow(10,i)*s,l=Math.round(t/f),c=Math.round(e/f),l*f<t&&++l,c*f>e&&--c),c<l&&.5<=n&&n<2?M_(t,e,n*2):[l,c,f]}function XA(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?M_(e,t,n):M_(t,e,n);if(!(o>=i))return[];const l=o-i+1,c=new Array(l);if(r)if(s<0)for(let f=0;f<l;++f)c[f]=(o-f)/-s;else for(let f=0;f<l;++f)c[f]=(o-f)*s;else if(s<0)for(let f=0;f<l;++f)c[f]=(i+f)/-s;else for(let f=0;f<l;++f)c[f]=(i+f)*s;return c}function ZA(t,e,n){return e=+e,t=+t,n=+n,M_(t,e,n)[2]}function ex(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?ZA(e,t,n):ZA(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function nL(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function rL(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Q5(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?J5:Ble(i);r>n;){if(r-n>600){const c=r-n+1,f=e-n+1,h=Math.log(c),g=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*g*(c-g)/c)*(f-c/2<0?-1:1),E=Math.max(n,Math.floor(e-f*g/c+v)),b=Math.min(r,Math.floor(e+(c-f)*g/c+v));Q5(t,e,E,b,i)}const o=t[e];let s=n,l=r;for(_p(t,n,e),i(t[r],o)>0&&_p(t,n,r);s<l;){for(_p(t,s,l),++s,--l;i(t[s],o)<0;)++s;for(;i(t[l],o)>0;)--l}i(t[n],o)===0?_p(t,n,l):(++l,_p(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function _p(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Hle(t,e,n){if(t=Float64Array.from(Ole(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return rL(t);if(e>=1)return nL(t);var r,i=(r-1)*e,o=Math.floor(i),s=nL(Q5(t,o).subarray(0,o+1)),l=rL(t.subarray(o+1));return s+(l-s)*(i-o)}}function Gle(t,e,n=Y5){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),s=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return s+(l-s)*(i-o)}}function jle(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function ro(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ya(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const tx=Symbol("implicit");function rR(){var t=new eL,e=[],n=[],r=tx;function i(o){let s=t.get(o);if(s===void 0){if(r!==tx)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new eL;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return rR(e,n).unknown(r)},ro.apply(i,arguments),i}function iR(){var t=rR().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,l=!1,c=0,f=0,h=.5;delete t.unknown;function g(){var v=e().length,E=i<r,b=E?i:r,S=E?r:i;o=(S-b)/Math.max(1,v-c+f*2),l&&(o=Math.floor(o)),b+=(S-b-o*(v-c))*h,s=o*(1-c),l&&(b=Math.round(b),s=Math.round(s));var A=jle(v).map(function(I){return b+o*I});return n(E?A.reverse():A)}return t.domain=function(v){return arguments.length?(e(v),g()):e()},t.range=function(v){return arguments.length?([r,i]=v,r=+r,i=+i,g()):[r,i]},t.rangeRound=function(v){return[r,i]=v,r=+r,i=+i,l=!0,g()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(v){return arguments.length?(l=!!v,g()):l},t.padding=function(v){return arguments.length?(c=Math.min(1,f=+v),g()):c},t.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),g()):c},t.paddingOuter=function(v){return arguments.length?(f=+v,g()):f},t.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),g()):h},t.copy=function(){return iR(e(),[r,i]).round(l).paddingInner(c).paddingOuter(f).align(h)},ro.apply(g(),arguments)}function X5(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return X5(e())},t}function Kle(){return X5(iR.apply(null,arguments).paddingInner(1))}function oR(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Z5(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function dg(){}var Pm=.7,D_=1/Pm,$f="\\s*([+-]?\\d+)\\s*",Nm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ts="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wle=/^#([0-9a-f]{3,8})$/,Yle=new RegExp(`^rgb\\(${$f},${$f},${$f}\\)$`),Jle=new RegExp(`^rgb\\(${ts},${ts},${ts}\\)$`),Qle=new RegExp(`^rgba\\(${$f},${$f},${$f},${Nm}\\)$`),Xle=new RegExp(`^rgba\\(${ts},${ts},${ts},${Nm}\\)$`),Zle=new RegExp(`^hsl\\(${Nm},${ts},${ts}\\)$`),eue=new RegExp(`^hsla\\(${Nm},${ts},${ts},${Nm}\\)$`),iL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oR(dg,Mm,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:oL,formatHex:oL,formatHex8:tue,formatHsl:nue,formatRgb:sL,toString:sL});function oL(){return this.rgb().formatHex()}function tue(){return this.rgb().formatHex8()}function nue(){return e$(this).formatHsl()}function sL(){return this.rgb().formatRgb()}function Mm(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Wle.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?aL(e):n===3?new ni(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?cv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?cv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Yle.exec(t))?new ni(e[1],e[2],e[3],1):(e=Jle.exec(t))?new ni(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Qle.exec(t))?cv(e[1],e[2],e[3],e[4]):(e=Xle.exec(t))?cv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Zle.exec(t))?cL(e[1],e[2]/100,e[3]/100,1):(e=eue.exec(t))?cL(e[1],e[2]/100,e[3]/100,e[4]):iL.hasOwnProperty(t)?aL(iL[t]):t==="transparent"?new ni(NaN,NaN,NaN,0):null}function aL(t){return new ni(t>>16&255,t>>8&255,t&255,1)}function cv(t,e,n,r){return r<=0&&(t=e=n=NaN),new ni(t,e,n,r)}function rue(t){return t instanceof dg||(t=Mm(t)),t?(t=t.rgb(),new ni(t.r,t.g,t.b,t.opacity)):new ni}function nx(t,e,n,r){return arguments.length===1?rue(t):new ni(t,e,n,r??1)}function ni(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}oR(ni,nx,Z5(dg,{brighter(t){return t=t==null?D_:Math.pow(D_,t),new ni(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Pm:Math.pow(Pm,t),new ni(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ni(Gu(this.r),Gu(this.g),Gu(this.b),k_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lL,formatHex:lL,formatHex8:iue,formatRgb:uL,toString:uL}));function lL(){return`#${Vu(this.r)}${Vu(this.g)}${Vu(this.b)}`}function iue(){return`#${Vu(this.r)}${Vu(this.g)}${Vu(this.b)}${Vu((isNaN(this.opacity)?1:this.opacity)*255)}`}function uL(){const t=k_(this.opacity);return`${t===1?"rgb(":"rgba("}${Gu(this.r)}, ${Gu(this.g)}, ${Gu(this.b)}${t===1?")":`, ${t})`}`}function k_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Gu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vu(t){return t=Gu(t),(t<16?"0":"")+t.toString(16)}function cL(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new po(t,e,n,r)}function e$(t){if(t instanceof po)return new po(t.h,t.s,t.l,t.opacity);if(t instanceof dg||(t=Mm(t)),!t)return new po;if(t instanceof po)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,l=o-i,c=(o+i)/2;return l?(e===o?s=(n-r)/l+(n<r)*6:n===o?s=(r-e)/l+2:s=(e-n)/l+4,l/=c<.5?o+i:2-o-i,s*=60):l=c>0&&c<1?0:s,new po(s,l,c,t.opacity)}function oue(t,e,n,r){return arguments.length===1?e$(t):new po(t,e,n,r??1)}function po(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}oR(po,oue,Z5(dg,{brighter(t){return t=t==null?D_:Math.pow(D_,t),new po(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Pm:Math.pow(Pm,t),new po(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ni(lS(t>=240?t-240:t+120,i,r),lS(t,i,r),lS(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new po(fL(this.h),fv(this.s),fv(this.l),k_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=k_(this.opacity);return`${t===1?"hsl(":"hsla("}${fL(this.h)}, ${fv(this.s)*100}%, ${fv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function fL(t){return t=(t||0)%360,t<0?t+360:t}function fv(t){return Math.max(0,Math.min(1,t||0))}function lS(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const sR=t=>()=>t;function sue(t,e){return function(n){return t+n*e}}function aue(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function lue(t){return(t=+t)==1?t$:function(e,n){return n-e?aue(e,n,t):sR(isNaN(e)?n:e)}}function t$(t,e){var n=e-t;return n?sue(t,n):sR(isNaN(t)?e:t)}const dL=(function t(e){var n=lue(e);function r(i,o){var s=n((i=nx(i)).r,(o=nx(o)).r),l=n(i.g,o.g),c=n(i.b,o.b),f=t$(i.opacity,o.opacity);return function(h){return i.r=s(h),i.g=l(h),i.b=c(h),i.opacity=f(h),i+""}}return r.gamma=t,r})(1);function uue(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function cue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fue(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Hd(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(l){for(s=0;s<r;++s)o[s]=i[s](l);return o}}function due(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function O_(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function hue(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Hd(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var rx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uS=new RegExp(rx.source,"g");function pue(t){return function(){return t}}function mue(t){return function(e){return t(e)+""}}function gue(t,e){var n=rx.lastIndex=uS.lastIndex=0,r,i,o,s=-1,l=[],c=[];for(t=t+"",e=e+"";(r=rx.exec(t))&&(i=uS.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:O_(r,i)})),n=uS.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?c[0]?mue(c[0].x):pue(e):(e=c.length,function(f){for(var h=0,g;h<e;++h)l[(g=c[h]).i]=g.x(f);return l.join("")})}function Hd(t,e){var n=typeof e,r;return e==null||n==="boolean"?sR(e):(n==="number"?O_:n==="string"?(r=Mm(e))?(e=r,dL):gue:e instanceof Mm?dL:e instanceof Date?due:cue(e)?uue:Array.isArray(e)?fue:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?hue:O_)(t,e)}function aR(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function yue(t,e){e===void 0&&(e=t,t=Hd);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(s){var l=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[l](s-l)}}function vue(t){return function(){return t}}function L_(t){return+t}var hL=[0,1];function $r(t){return t}function ix(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:vue(isNaN(e)?NaN:.5)}function _ue(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Tue(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=ix(i,r),o=n(s,o)):(r=ix(r,i),o=n(o,s)),function(l){return o(r(l))}}function Eue(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=ix(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(l){var c=fg(t,l,1,r)-1;return o[c](i[c](l))}}function hg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lT(){var t=hL,e=hL,n=Hd,r,i,o,s=$r,l,c,f;function h(){var v=Math.min(t.length,e.length);return s!==$r&&(s=_ue(t[0],t[v-1])),l=v>2?Eue:Tue,c=f=null,g}function g(v){return v==null||isNaN(v=+v)?o:(c||(c=l(t.map(r),e,n)))(r(s(v)))}return g.invert=function(v){return s(i((f||(f=l(e,t.map(r),O_)))(v)))},g.domain=function(v){return arguments.length?(t=Array.from(v,L_),h()):t.slice()},g.range=function(v){return arguments.length?(e=Array.from(v),h()):e.slice()},g.rangeRound=function(v){return e=Array.from(v),n=aR,h()},g.clamp=function(v){return arguments.length?(s=v?!0:$r,h()):s!==$r},g.interpolate=function(v){return arguments.length?(n=v,h()):n},g.unknown=function(v){return arguments.length?(o=v,g):o},function(v,E){return r=v,i=E,h()}}function lR(){return lT()($r,$r)}function wue(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function V_(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function _d(t){return t=V_(Math.abs(t)),t?t[1]:NaN}function bue(t,e){return function(n,r){for(var i=n.length,o=[],s=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),o.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[s=(s+1)%t.length];return o.reverse().join(e)}}function Sue(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Aue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dm(t){if(!(e=Aue.exec(t)))throw new Error("invalid format: "+t);var e;return new uR({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Dm.prototype=uR.prototype;function uR(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}uR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xue(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var n$;function Cue(t,e){var n=V_(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(n$=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+V_(t,Math.max(0,e+o-1))[0]}function pL(t,e){var n=V_(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const mL={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:wue,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>pL(t*100,e),r:pL,s:Cue,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gL(t){return t}var yL=Array.prototype.map,vL=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Iue(t){var e=t.grouping===void 0||t.thousands===void 0?gL:bue(yL.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?gL:Sue(yL.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function f(g){g=Dm(g);var v=g.fill,E=g.align,b=g.sign,S=g.symbol,A=g.zero,I=g.width,D=g.comma,k=g.precision,q=g.trim,$=g.type;$==="n"?(D=!0,$="g"):mL[$]||(k===void 0&&(k=12),q=!0,$="g"),(A||v==="0"&&E==="=")&&(A=!0,v="0",E="=");var H=S==="$"?n:S==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",M=S==="$"?r:/[%p]/.test($)?s:"",L=mL[$],O=/[defgprs%]/.test($);k=k===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function F(U){var z=H,G=M,Ce,be,ee;if($==="c")G=L(U)+G,U="";else{U=+U;var le=U<0||1/U<0;if(U=isNaN(U)?c:L(Math.abs(U),k),q&&(U=xue(U)),le&&+U==0&&b!=="+"&&(le=!1),z=(le?b==="("?b:l:b==="-"||b==="("?"":b)+z,G=($==="s"?vL[8+n$/3]:"")+G+(le&&b==="("?")":""),O){for(Ce=-1,be=U.length;++Ce<be;)if(ee=U.charCodeAt(Ce),48>ee||ee>57){G=(ee===46?i+U.slice(Ce+1):U.slice(Ce))+G,U=U.slice(0,Ce);break}}}D&&!A&&(U=e(U,1/0));var Se=z.length+U.length+G.length,Ve=Se<I?new Array(I-Se+1).join(v):"";switch(D&&A&&(U=e(Ve+U,Ve.length?I-G.length:1/0),Ve=""),E){case"<":U=z+U+G+Ve;break;case"=":U=z+Ve+U+G;break;case"^":U=Ve.slice(0,Se=Ve.length>>1)+z+U+G+Ve.slice(Se);break;default:U=Ve+z+U+G;break}return o(U)}return F.toString=function(){return g+""},F}function h(g,v){var E=f((g=Dm(g),g.type="f",g)),b=Math.max(-8,Math.min(8,Math.floor(_d(v)/3)))*3,S=Math.pow(10,-b),A=vL[8+b/3];return function(I){return E(S*I)+A}}return{format:f,formatPrefix:h}}var dv,cR,r$;Rue({thousands:",",grouping:[3],currency:["$",""]});function Rue(t){return dv=Iue(t),cR=dv.format,r$=dv.formatPrefix,dv}function Pue(t){return Math.max(0,-_d(Math.abs(t)))}function Nue(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_d(e)/3)))*3-_d(Math.abs(t)))}function Mue(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,_d(e)-_d(t))+1}function i$(t,e,n,r){var i=ex(t,e,n),o;switch(r=Dm(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Nue(i,s))&&(r.precision=o),r$(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Mue(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Pue(i))&&(r.precision=o-(r.type==="%")*2);break}}return cR(r)}function Vl(t){var e=t.domain;return t.ticks=function(n){var r=e();return XA(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return i$(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],l=r[o],c,f,h=10;for(l<s&&(f=s,s=l,l=f,f=i,i=o,o=f);h-- >0;){if(f=ZA(s,l,n),f===c)return r[i]=s,r[o]=l,e(r);if(f>0)s=Math.floor(s/f)*f,l=Math.ceil(l/f)*f;else if(f<0)s=Math.ceil(s*f)/f,l=Math.floor(l*f)/f;else break;c=f}return t},t}function o$(){var t=lR();return t.copy=function(){return hg(t,o$())},ro.apply(t,arguments),Vl(t)}function s$(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,L_),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return s$(t).unknown(e)},t=arguments.length?Array.from(t,L_):[0,1],Vl(n)}function a$(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}function _L(t){return Math.log(t)}function TL(t){return Math.exp(t)}function Due(t){return-Math.log(-t)}function kue(t){return-Math.exp(-t)}function Oue(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Lue(t){return t===10?Oue:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Vue(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function EL(t){return(e,n)=>-t(-e,n)}function fR(t){const e=t(_L,TL),n=e.domain;let r=10,i,o;function s(){return i=Vue(r),o=Lue(r),n()[0]<0?(i=EL(i),o=EL(o),t(Due,kue)):t(_L,TL),e}return e.base=function(l){return arguments.length?(r=+l,s()):r},e.domain=function(l){return arguments.length?(n(l),s()):n()},e.ticks=l=>{const c=n();let f=c[0],h=c[c.length-1];const g=h<f;g&&([f,h]=[h,f]);let v=i(f),E=i(h),b,S;const A=l==null?10:+l;let I=[];if(!(r%1)&&E-v<A){if(v=Math.floor(v),E=Math.ceil(E),f>0){for(;v<=E;++v)for(b=1;b<r;++b)if(S=v<0?b/o(-v):b*o(v),!(S<f)){if(S>h)break;I.push(S)}}else for(;v<=E;++v)for(b=r-1;b>=1;--b)if(S=v>0?b/o(-v):b*o(v),!(S<f)){if(S>h)break;I.push(S)}I.length*2<A&&(I=XA(f,h,A))}else I=XA(v,E,Math.min(E-v,A)).map(o);return g?I.reverse():I},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Dm(c)).precision==null&&(c.trim=!0),c=cR(c)),l===1/0)return c;const f=Math.max(1,r*l/e.ticks().length);return h=>{let g=h/o(Math.round(i(h)));return g*r<r-.5&&(g*=r),g<=f?c(h):""}},e.nice=()=>n(a$(n(),{floor:l=>o(Math.floor(i(l))),ceil:l=>o(Math.ceil(i(l)))})),e}function l$(){const t=fR(lT()).domain([1,10]);return t.copy=()=>hg(t,l$()).base(t.base()),ro.apply(t,arguments),t}function wL(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function bL(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function dR(t){var e=1,n=t(wL(e),bL(e));return n.constant=function(r){return arguments.length?t(wL(e=+r),bL(e)):e},Vl(n)}function u$(){var t=dR(lT());return t.copy=function(){return hg(t,u$()).constant(t.constant())},ro.apply(t,arguments)}function SL(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Uue(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Fue(t){return t<0?-t*t:t*t}function hR(t){var e=t($r,$r),n=1;function r(){return n===1?t($r,$r):n===.5?t(Uue,Fue):t(SL(n),SL(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Vl(e)}function pR(){var t=hR(lT());return t.copy=function(){return hg(t,pR()).exponent(t.exponent())},ro.apply(t,arguments),t}function Bue(){return pR.apply(null,arguments).exponent(.5)}function AL(t){return Math.sign(t)*t*t}function que(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function c$(){var t=lR(),e=[0,1],n=!1,r;function i(o){var s=que(t(o));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(o){return t.invert(AL(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,L_)).map(AL)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return c$(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ro.apply(i,arguments),Vl(i)}function f$(){var t=[],e=[],n=[],r;function i(){var s=0,l=Math.max(1,e.length);for(n=new Array(l-1);++s<l;)n[s-1]=Gle(t,s/l);return o}function o(s){return s==null||isNaN(s=+s)?r:e[fg(n,s)]}return o.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let l of s)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(pl),i()},o.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return f$().domain(t).range(e).unknown(r)},ro.apply(o,arguments)}function d$(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function s(c){return c!=null&&c<=c?i[fg(r,c,0,n)]:o}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},s.invertExtent=function(c){var f=i.indexOf(c);return f<0?[NaN,NaN]:f<1?[t,r[0]]:f>=n?[r[n-1],e]:[r[f-1],r[f]]},s.unknown=function(c){return arguments.length&&(o=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return d$().domain([t,e]).range(i).unknown(o)},ro.apply(Vl(s),arguments)}function h$(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[fg(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var s=e.indexOf(o);return[t[s-1],t[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return h$().domain(t).range(e).unknown(n)},ro.apply(i,arguments)}const cS=new Date,fS=new Date;function Hn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),l=i.ceil(o);return o-s<l-o?s:l},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,l)=>{const c=[];if(o=i.ceil(o),l=l==null?1:Math.floor(l),!(o<s)||!(l>0))return c;let f;do c.push(f=new Date(+o)),e(o,l),t(o);while(f<o&&o<s);return c},i.filter=o=>Hn(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!o(s););else for(;--l>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(cS.setTime(+o),fS.setTime(+s),t(cS),t(fS),Math.floor(n(cS,fS))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const U_=Hn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);U_.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Hn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):U_);U_.range;const zs=1e3,Wi=zs*60,Hs=Wi*60,ia=Hs*24,mR=ia*7,xL=ia*30,dS=ia*365,Uu=Hn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*zs)},(t,e)=>(e-t)/zs,t=>t.getUTCSeconds());Uu.range;const gR=Hn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*zs)},(t,e)=>{t.setTime(+t+e*Wi)},(t,e)=>(e-t)/Wi,t=>t.getMinutes());gR.range;const yR=Hn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Wi)},(t,e)=>(e-t)/Wi,t=>t.getUTCMinutes());yR.range;const vR=Hn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*zs-t.getMinutes()*Wi)},(t,e)=>{t.setTime(+t+e*Hs)},(t,e)=>(e-t)/Hs,t=>t.getHours());vR.range;const _R=Hn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Hs)},(t,e)=>(e-t)/Hs,t=>t.getUTCHours());_R.range;const pg=Hn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Wi)/ia,t=>t.getDate()-1);pg.range;const uT=Hn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ia,t=>t.getUTCDate()-1);uT.range;const p$=Hn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ia,t=>Math.floor(t/ia));p$.range;function vc(t){return Hn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Wi)/mR)}const cT=vc(0),F_=vc(1),$ue=vc(2),zue=vc(3),Td=vc(4),Hue=vc(5),Gue=vc(6);cT.range;F_.range;$ue.range;zue.range;Td.range;Hue.range;Gue.range;function _c(t){return Hn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/mR)}const fT=_c(0),B_=_c(1),jue=_c(2),Kue=_c(3),Ed=_c(4),Wue=_c(5),Yue=_c(6);fT.range;B_.range;jue.range;Kue.range;Ed.range;Wue.range;Yue.range;const TR=Hn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());TR.range;const ER=Hn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ER.range;const oa=Hn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());oa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});oa.range;const sa=Hn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());sa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});sa.range;function m$(t,e,n,r,i,o){const s=[[Uu,1,zs],[Uu,5,5*zs],[Uu,15,15*zs],[Uu,30,30*zs],[o,1,Wi],[o,5,5*Wi],[o,15,15*Wi],[o,30,30*Wi],[i,1,Hs],[i,3,3*Hs],[i,6,6*Hs],[i,12,12*Hs],[r,1,ia],[r,2,2*ia],[n,1,mR],[e,1,xL],[e,3,3*xL],[t,1,dS]];function l(f,h,g){const v=h<f;v&&([f,h]=[h,f]);const E=g&&typeof g.range=="function"?g:c(f,h,g),b=E?E.range(f,+h+1):[];return v?b.reverse():b}function c(f,h,g){const v=Math.abs(h-f)/g,E=nR(([,,A])=>A).right(s,v);if(E===s.length)return t.every(ex(f/dS,h/dS,g));if(E===0)return U_.every(Math.max(ex(f,h,g),1));const[b,S]=s[v/s[E-1][2]<s[E][2]/v?E-1:E];return b.every(S)}return[l,c]}const[Jue,Que]=m$(sa,ER,fT,p$,_R,yR),[Xue,Zue]=m$(oa,TR,cT,pg,vR,gR);function hS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function pS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Tp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ece(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,l=t.months,c=t.shortMonths,f=Ep(i),h=wp(i),g=Ep(o),v=wp(o),E=Ep(s),b=wp(s),S=Ep(l),A=wp(l),I=Ep(c),D=wp(c),k={a:le,A:Se,b:Ve,B:K,c:null,d:ML,e:ML,f:bce,g:Dce,G:Oce,H:Tce,I:Ece,j:wce,L:g$,m:Sce,M:Ace,p:de,q:ue,Q:OL,s:LL,S:xce,u:Cce,U:Ice,V:Rce,w:Pce,W:Nce,x:null,X:null,y:Mce,Y:kce,Z:Lce,"%":kL},q={a:Te,A:Le,b:Oe,B:qe,c:null,d:DL,e:DL,f:Bce,g:Jce,G:Xce,H:Vce,I:Uce,j:Fce,L:v$,m:qce,M:$ce,p:Pt,q:ht,Q:OL,s:LL,S:zce,u:Hce,U:Gce,V:jce,w:Kce,W:Wce,x:null,X:null,y:Yce,Y:Qce,Z:Zce,"%":kL},$={a:F,A:U,b:z,B:G,c:Ce,d:PL,e:PL,f:gce,g:RL,G:IL,H:NL,I:NL,j:dce,L:mce,m:fce,M:hce,p:O,q:cce,Q:vce,s:_ce,S:pce,u:oce,U:sce,V:ace,w:ice,W:lce,x:be,X:ee,y:RL,Y:IL,Z:uce,"%":yce};k.x=H(n,k),k.X=H(r,k),k.c=H(e,k),q.x=H(n,q),q.X=H(r,q),q.c=H(e,q);function H(Ee,je){return function(Ye){var me=[],Lt=-1,st=0,En=Ee.length,Cn,pn,Ta;for(Ye instanceof Date||(Ye=new Date(+Ye));++Lt<En;)Ee.charCodeAt(Lt)===37&&(me.push(Ee.slice(st,Lt)),(pn=CL[Cn=Ee.charAt(++Lt)])!=null?Cn=Ee.charAt(++Lt):pn=Cn==="e"?" ":"0",(Ta=je[Cn])&&(Cn=Ta(Ye,pn)),me.push(Cn),st=Lt+1);return me.push(Ee.slice(st,Lt)),me.join("")}}function M(Ee,je){return function(Ye){var me=Tp(1900,void 0,1),Lt=L(me,Ee,Ye+="",0),st,En;if(Lt!=Ye.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(je&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(st=pS(Tp(me.y,0,1)),En=st.getUTCDay(),st=En>4||En===0?B_.ceil(st):B_(st),st=uT.offset(st,(me.V-1)*7),me.y=st.getUTCFullYear(),me.m=st.getUTCMonth(),me.d=st.getUTCDate()+(me.w+6)%7):(st=hS(Tp(me.y,0,1)),En=st.getDay(),st=En>4||En===0?F_.ceil(st):F_(st),st=pg.offset(st,(me.V-1)*7),me.y=st.getFullYear(),me.m=st.getMonth(),me.d=st.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),En="Z"in me?pS(Tp(me.y,0,1)).getUTCDay():hS(Tp(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(En+5)%7:me.w+me.U*7-(En+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,pS(me)):hS(me)}}function L(Ee,je,Ye,me){for(var Lt=0,st=je.length,En=Ye.length,Cn,pn;Lt<st;){if(me>=En)return-1;if(Cn=je.charCodeAt(Lt++),Cn===37){if(Cn=je.charAt(Lt++),pn=$[Cn in CL?je.charAt(Lt++):Cn],!pn||(me=pn(Ee,Ye,me))<0)return-1}else if(Cn!=Ye.charCodeAt(me++))return-1}return me}function O(Ee,je,Ye){var me=f.exec(je.slice(Ye));return me?(Ee.p=h.get(me[0].toLowerCase()),Ye+me[0].length):-1}function F(Ee,je,Ye){var me=E.exec(je.slice(Ye));return me?(Ee.w=b.get(me[0].toLowerCase()),Ye+me[0].length):-1}function U(Ee,je,Ye){var me=g.exec(je.slice(Ye));return me?(Ee.w=v.get(me[0].toLowerCase()),Ye+me[0].length):-1}function z(Ee,je,Ye){var me=I.exec(je.slice(Ye));return me?(Ee.m=D.get(me[0].toLowerCase()),Ye+me[0].length):-1}function G(Ee,je,Ye){var me=S.exec(je.slice(Ye));return me?(Ee.m=A.get(me[0].toLowerCase()),Ye+me[0].length):-1}function Ce(Ee,je,Ye){return L(Ee,e,je,Ye)}function be(Ee,je,Ye){return L(Ee,n,je,Ye)}function ee(Ee,je,Ye){return L(Ee,r,je,Ye)}function le(Ee){return s[Ee.getDay()]}function Se(Ee){return o[Ee.getDay()]}function Ve(Ee){return c[Ee.getMonth()]}function K(Ee){return l[Ee.getMonth()]}function de(Ee){return i[+(Ee.getHours()>=12)]}function ue(Ee){return 1+~~(Ee.getMonth()/3)}function Te(Ee){return s[Ee.getUTCDay()]}function Le(Ee){return o[Ee.getUTCDay()]}function Oe(Ee){return c[Ee.getUTCMonth()]}function qe(Ee){return l[Ee.getUTCMonth()]}function Pt(Ee){return i[+(Ee.getUTCHours()>=12)]}function ht(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var je=H(Ee+="",k);return je.toString=function(){return Ee},je},parse:function(Ee){var je=M(Ee+="",!1);return je.toString=function(){return Ee},je},utcFormat:function(Ee){var je=H(Ee+="",q);return je.toString=function(){return Ee},je},utcParse:function(Ee){var je=M(Ee+="",!0);return je.toString=function(){return Ee},je}}}var CL={"-":"",_:" ",0:"0"},ar=/^\s*\d+/,tce=/^%/,nce=/[\\^$*+?|[\]().{}]/g;function vt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function rce(t){return t.replace(nce,"\\$&")}function Ep(t){return new RegExp("^(?:"+t.map(rce).join("|")+")","i")}function wp(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function ice(t,e,n){var r=ar.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function oce(t,e,n){var r=ar.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function sce(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ace(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function lce(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function IL(t,e,n){var r=ar.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function RL(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function uce(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function cce(t,e,n){var r=ar.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function fce(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function PL(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function dce(t,e,n){var r=ar.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function NL(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function hce(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function pce(t,e,n){var r=ar.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function mce(t,e,n){var r=ar.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function gce(t,e,n){var r=ar.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function yce(t,e,n){var r=tce.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function vce(t,e,n){var r=ar.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function _ce(t,e,n){var r=ar.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ML(t,e){return vt(t.getDate(),e,2)}function Tce(t,e){return vt(t.getHours(),e,2)}function Ece(t,e){return vt(t.getHours()%12||12,e,2)}function wce(t,e){return vt(1+pg.count(oa(t),t),e,3)}function g$(t,e){return vt(t.getMilliseconds(),e,3)}function bce(t,e){return g$(t,e)+"000"}function Sce(t,e){return vt(t.getMonth()+1,e,2)}function Ace(t,e){return vt(t.getMinutes(),e,2)}function xce(t,e){return vt(t.getSeconds(),e,2)}function Cce(t){var e=t.getDay();return e===0?7:e}function Ice(t,e){return vt(cT.count(oa(t)-1,t),e,2)}function y$(t){var e=t.getDay();return e>=4||e===0?Td(t):Td.ceil(t)}function Rce(t,e){return t=y$(t),vt(Td.count(oa(t),t)+(oa(t).getDay()===4),e,2)}function Pce(t){return t.getDay()}function Nce(t,e){return vt(F_.count(oa(t)-1,t),e,2)}function Mce(t,e){return vt(t.getFullYear()%100,e,2)}function Dce(t,e){return t=y$(t),vt(t.getFullYear()%100,e,2)}function kce(t,e){return vt(t.getFullYear()%1e4,e,4)}function Oce(t,e){var n=t.getDay();return t=n>=4||n===0?Td(t):Td.ceil(t),vt(t.getFullYear()%1e4,e,4)}function Lce(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+vt(e/60|0,"0",2)+vt(e%60,"0",2)}function DL(t,e){return vt(t.getUTCDate(),e,2)}function Vce(t,e){return vt(t.getUTCHours(),e,2)}function Uce(t,e){return vt(t.getUTCHours()%12||12,e,2)}function Fce(t,e){return vt(1+uT.count(sa(t),t),e,3)}function v$(t,e){return vt(t.getUTCMilliseconds(),e,3)}function Bce(t,e){return v$(t,e)+"000"}function qce(t,e){return vt(t.getUTCMonth()+1,e,2)}function $ce(t,e){return vt(t.getUTCMinutes(),e,2)}function zce(t,e){return vt(t.getUTCSeconds(),e,2)}function Hce(t){var e=t.getUTCDay();return e===0?7:e}function Gce(t,e){return vt(fT.count(sa(t)-1,t),e,2)}function _$(t){var e=t.getUTCDay();return e>=4||e===0?Ed(t):Ed.ceil(t)}function jce(t,e){return t=_$(t),vt(Ed.count(sa(t),t)+(sa(t).getUTCDay()===4),e,2)}function Kce(t){return t.getUTCDay()}function Wce(t,e){return vt(B_.count(sa(t)-1,t),e,2)}function Yce(t,e){return vt(t.getUTCFullYear()%100,e,2)}function Jce(t,e){return t=_$(t),vt(t.getUTCFullYear()%100,e,2)}function Qce(t,e){return vt(t.getUTCFullYear()%1e4,e,4)}function Xce(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ed(t):Ed.ceil(t),vt(t.getUTCFullYear()%1e4,e,4)}function Zce(){return"+0000"}function kL(){return"%"}function OL(t){return+t}function LL(t){return Math.floor(+t/1e3)}var wf,T$,E$;efe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function efe(t){return wf=ece(t),T$=wf.format,wf.parse,E$=wf.utcFormat,wf.utcParse,wf}function tfe(t){return new Date(t)}function nfe(t){return t instanceof Date?+t:+new Date(+t)}function wR(t,e,n,r,i,o,s,l,c,f){var h=lR(),g=h.invert,v=h.domain,E=f(".%L"),b=f(":%S"),S=f("%I:%M"),A=f("%I %p"),I=f("%a %d"),D=f("%b %d"),k=f("%B"),q=f("%Y");function $(H){return(c(H)<H?E:l(H)<H?b:s(H)<H?S:o(H)<H?A:r(H)<H?i(H)<H?I:D:n(H)<H?k:q)(H)}return h.invert=function(H){return new Date(g(H))},h.domain=function(H){return arguments.length?v(Array.from(H,nfe)):v().map(tfe)},h.ticks=function(H){var M=v();return t(M[0],M[M.length-1],H??10)},h.tickFormat=function(H,M){return M==null?$:f(M)},h.nice=function(H){var M=v();return(!H||typeof H.range!="function")&&(H=e(M[0],M[M.length-1],H??10)),H?v(a$(M,H)):h},h.copy=function(){return hg(h,wR(t,e,n,r,i,o,s,l,c,f))},h}function rfe(){return ro.apply(wR(Xue,Zue,oa,TR,cT,pg,vR,gR,Uu,T$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ife(){return ro.apply(wR(Jue,Que,sa,ER,fT,uT,_R,yR,Uu,E$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function dT(){var t=0,e=1,n,r,i,o,s=$r,l=!1,c;function f(g){return g==null||isNaN(g=+g)?c:s(i===0?.5:(g=(o(g)-n)*i,l?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([t,e]=g,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),f):[t,e]},f.clamp=function(g){return arguments.length?(l=!!g,f):l},f.interpolator=function(g){return arguments.length?(s=g,f):s};function h(g){return function(v){var E,b;return arguments.length?([E,b]=v,s=g(E,b),f):[s(0),s(1)]}}return f.range=h(Hd),f.rangeRound=h(aR),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return o=g,n=g(t),r=g(e),i=n===r?0:1/(r-n),f}}function Ul(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function w$(){var t=Vl(dT()($r));return t.copy=function(){return Ul(t,w$())},ya.apply(t,arguments)}function b$(){var t=fR(dT()).domain([1,10]);return t.copy=function(){return Ul(t,b$()).base(t.base())},ya.apply(t,arguments)}function S$(){var t=dR(dT());return t.copy=function(){return Ul(t,S$()).constant(t.constant())},ya.apply(t,arguments)}function bR(){var t=hR(dT());return t.copy=function(){return Ul(t,bR()).exponent(t.exponent())},ya.apply(t,arguments)}function ofe(){return bR.apply(null,arguments).exponent(.5)}function A$(){var t=[],e=$r;function n(r){if(r!=null&&!isNaN(r=+r))return e((fg(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(pl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>Hle(t,o/r))},n.copy=function(){return A$(e).domain(t)},ya.apply(n,arguments)}function hT(){var t=0,e=.5,n=1,r=1,i,o,s,l,c,f=$r,h,g=!1,v;function E(S){return isNaN(S=+S)?v:(S=.5+((S=+h(S))-o)*(r*S<r*o?l:c),f(g?Math.max(0,Math.min(1,S)):S))}E.domain=function(S){return arguments.length?([t,e,n]=S,i=h(t=+t),o=h(e=+e),s=h(n=+n),l=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,E):[t,e,n]},E.clamp=function(S){return arguments.length?(g=!!S,E):g},E.interpolator=function(S){return arguments.length?(f=S,E):f};function b(S){return function(A){var I,D,k;return arguments.length?([I,D,k]=A,f=yue(S,[I,D,k]),E):[f(0),f(.5),f(1)]}}return E.range=b(Hd),E.rangeRound=b(aR),E.unknown=function(S){return arguments.length?(v=S,E):v},function(S){return h=S,i=S(t),o=S(e),s=S(n),l=i===o?0:.5/(o-i),c=o===s?0:.5/(s-o),r=o<i?-1:1,E}}function x$(){var t=Vl(hT()($r));return t.copy=function(){return Ul(t,x$())},ya.apply(t,arguments)}function C$(){var t=fR(hT()).domain([.1,1,10]);return t.copy=function(){return Ul(t,C$()).base(t.base())},ya.apply(t,arguments)}function I$(){var t=dR(hT());return t.copy=function(){return Ul(t,I$()).constant(t.constant())},ya.apply(t,arguments)}function SR(){var t=hR(hT());return t.copy=function(){return Ul(t,SR()).exponent(t.exponent())},ya.apply(t,arguments)}function sfe(){return SR.apply(null,arguments).exponent(.5)}const kp=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:iR,scaleDiverging:x$,scaleDivergingLog:C$,scaleDivergingPow:SR,scaleDivergingSqrt:sfe,scaleDivergingSymlog:I$,scaleIdentity:s$,scaleImplicit:tx,scaleLinear:o$,scaleLog:l$,scaleOrdinal:rR,scalePoint:Kle,scalePow:pR,scaleQuantile:f$,scaleQuantize:d$,scaleRadial:c$,scaleSequential:w$,scaleSequentialLog:b$,scaleSequentialPow:bR,scaleSequentialQuantile:A$,scaleSequentialSqrt:ofe,scaleSequentialSymlog:S$,scaleSqrt:Bue,scaleSymlog:u$,scaleThreshold:h$,scaleTime:rfe,scaleUtc:ife,tickFormat:i$},Symbol.toStringTag,{value:"Module"}));var Fl=t=>t.chartData,afe=se([Fl],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),AR=(t,e,n,r)=>r?afe(t):Fl(t);function wd(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Ri(e)&&Ri(n))return!0}return!1}function VL(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function lfe(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,o;if(Ri(n))i=n;else if(typeof n=="function")return;if(Ri(r))o=r;else if(typeof r=="function")return;var s=[i,o];if(wd(s))return s}}function ufe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(wd(r))return VL(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,o]=t,s,l;if(i==="auto")e!=null&&(s=Math.min(...e));else if(We(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&RO.test(i)){var c=RO.exec(i);if(c==null||e==null)s=void 0;else{var f=+c[1];s=e[0]-f}}else s=e==null?void 0:e[0];if(o==="auto")e!=null&&(l=Math.max(...e));else if(We(o))l=o;else if(typeof o=="function")try{e!=null&&(l=o(e==null?void 0:e[1]))}catch{}else if(typeof o=="string"&&PO.test(o)){var h=PO.exec(o);if(h==null||e==null)l=void 0;else{var g=+h[1];l=e[1]+g}}else l=e==null?void 0:e[1];var v=[s,l];if(wd(v))return e==null?v:VL(v,e,n)}}}var Gd=1e9,cfe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},CR,sn=!0,no="[DecimalError] ",ju=no+"Invalid argument: ",xR=no+"Exponent out of range: ",jd=Math.floor,xu=Math.pow,ffe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ti,Zn=1e7,Yt=7,R$=9007199254740991,q_=jd(R$/Yt),Pe={};Pe.absoluteValue=Pe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Pe.comparedTo=Pe.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};Pe.decimalPlaces=Pe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Yt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Pe.dividedBy=Pe.div=function(t){return Ys(this,new this.constructor(t))};Pe.dividedToIntegerBy=Pe.idiv=function(t){var e=this,n=e.constructor;return qt(Ys(e,new n(t),0,1),n.precision)};Pe.equals=Pe.eq=function(t){return!this.cmp(t)};Pe.exponent=function(){return kn(this)};Pe.greaterThan=Pe.gt=function(t){return this.cmp(t)>0};Pe.greaterThanOrEqualTo=Pe.gte=function(t){return this.cmp(t)>=0};Pe.isInteger=Pe.isint=function(){return this.e>this.d.length-2};Pe.isNegative=Pe.isneg=function(){return this.s<0};Pe.isPositive=Pe.ispos=function(){return this.s>0};Pe.isZero=function(){return this.s===0};Pe.lessThan=Pe.lt=function(t){return this.cmp(t)<0};Pe.lessThanOrEqualTo=Pe.lte=function(t){return this.cmp(t)<1};Pe.logarithm=Pe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ti))throw Error(no+"NaN");if(n.s<1)throw Error(no+(n.s?"NaN":"-Infinity"));return n.eq(Ti)?new r(0):(sn=!1,e=Ys(km(n,o),km(t,o),o),sn=!0,qt(e,i))};Pe.minus=Pe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?M$(e,t):P$(e,(t.s=-t.s,t))};Pe.modulo=Pe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(no+"NaN");return n.s?(sn=!1,e=Ys(n,t,0,1).times(t),sn=!0,n.minus(e)):qt(new r(n),i)};Pe.naturalExponential=Pe.exp=function(){return N$(this)};Pe.naturalLogarithm=Pe.ln=function(){return km(this)};Pe.negated=Pe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Pe.plus=Pe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?P$(e,t):M$(e,(t.s=-t.s,t))};Pe.precision=Pe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ju+t);if(e=kn(i)+1,r=i.d.length-1,n=r*Yt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Pe.squareRoot=Pe.sqrt=function(){var t,e,n,r,i,o,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(no+"NaN")}for(t=kn(l),sn=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Jo(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=jd((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(o=r,r=o.plus(Ys(l,o,s+2)).times(.5),Jo(o.d).slice(0,s)===(e=Jo(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(qt(o,n+1,0),o.times(o).eq(l)){r=o;break}}else if(e!="9999")break;s+=4}return sn=!0,qt(r,n)};Pe.times=Pe.mul=function(t){var e,n,r,i,o,s,l,c,f,h=this,g=h.constructor,v=h.d,E=(t=new g(t)).d;if(!h.s||!t.s)return new g(0);for(t.s*=h.s,n=h.e+t.e,c=v.length,f=E.length,c<f&&(o=v,v=E,E=o,s=c,c=f,f=s),o=[],s=c+f,r=s;r--;)o.push(0);for(r=f;--r>=0;){for(e=0,i=c+r;i>r;)l=o[i]+E[r]*v[i-r-1]+e,o[i--]=l%Zn|0,e=l/Zn|0;o[i]=(o[i]+e)%Zn|0}for(;!o[--s];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,sn?qt(t,g.precision):t};Pe.toDecimalPlaces=Pe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ss(t,0,Gd),e===void 0?e=r.rounding:ss(e,0,8),qt(n,t+kn(n)+1,e))};Pe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=ac(r,!0):(ss(t,0,Gd),e===void 0?e=i.rounding:ss(e,0,8),r=qt(new i(r),t+1,e),n=ac(r,!0,t+1)),n};Pe.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?ac(i):(ss(t,0,Gd),e===void 0?e=o.rounding:ss(e,0,8),r=qt(new o(i),t+kn(i)+1,e),n=ac(r.abs(),!1,t+kn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Pe.toInteger=Pe.toint=function(){var t=this,e=t.constructor;return qt(new e(t),kn(t)+1,e.rounding)};Pe.toNumber=function(){return+this};Pe.toPower=Pe.pow=function(t){var e,n,r,i,o,s,l=this,c=l.constructor,f=12,h=+(t=new c(t));if(!t.s)return new c(Ti);if(l=new c(l),!l.s){if(t.s<1)throw Error(no+"Infinity");return l}if(l.eq(Ti))return l;if(r=c.precision,t.eq(Ti))return qt(l,r);if(e=t.e,n=t.d.length-1,s=e>=n,o=l.s,s){if((n=h<0?-h:h)<=R$){for(i=new c(Ti),e=Math.ceil(r/Yt+4),sn=!1;n%2&&(i=i.times(l),FL(i.d,e)),n=jd(n/2),n!==0;)l=l.times(l),FL(l.d,e);return sn=!0,t.s<0?new c(Ti).div(i):qt(i,r)}}else if(o<0)throw Error(no+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,sn=!1,i=t.times(km(l,r+f)),sn=!0,i=N$(i),i.s=o,i};Pe.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=kn(i),r=ac(i,n<=o.toExpNeg||n>=o.toExpPos)):(ss(t,1,Gd),e===void 0?e=o.rounding:ss(e,0,8),i=qt(new o(i),t,e),n=kn(i),r=ac(i,t<=n||n<=o.toExpNeg,t)),r};Pe.toSignificantDigits=Pe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ss(t,1,Gd),e===void 0?e=r.rounding:ss(e,0,8)),qt(new r(n),t,e)};Pe.toString=Pe.valueOf=Pe.val=Pe.toJSON=Pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=kn(t),n=t.constructor;return ac(t,e<=n.toExpNeg||e>=n.toExpPos)};function P$(t,e){var n,r,i,o,s,l,c,f,h=t.constructor,g=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),sn?qt(e,g):e;if(c=t.d,f=e.d,s=t.e,i=e.e,c=c.slice(),o=s-i,o){for(o<0?(r=c,o=-o,l=f.length):(r=f,i=s,l=c.length),s=Math.ceil(g/Yt),l=s>l?s+1:l+1,o>l&&(o=l,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(l=c.length,o=f.length,l-o<0&&(o=l,r=f,f=c,c=r),n=0;o;)n=(c[--o]=c[o]+f[o]+n)/Zn|0,c[o]%=Zn;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,sn?qt(e,g):e}function ss(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ju+t)}function Jo(t){var e,n,r,i=t.length-1,o="",s=t[0];if(i>0){for(o+=s,e=1;e<i;e++)r=t[e]+"",n=Yt-r.length,n&&(o+=tl(n)),o+=r;s=t[e],r=s+"",n=Yt-r.length,n&&(o+=tl(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}var Ys=(function(){function t(r,i){var o,s=0,l=r.length;for(r=r.slice();l--;)o=r[l]*i+s,r[l]=o%Zn|0,s=o/Zn|0;return s&&r.unshift(s),r}function e(r,i,o,s){var l,c;if(o!=s)c=o>s?1:-1;else for(l=c=0;l<o;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,o){for(var s=0;o--;)r[o]-=s,s=r[o]<i[o]?1:0,r[o]=s*Zn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s){var l,c,f,h,g,v,E,b,S,A,I,D,k,q,$,H,M,L,O=r.constructor,F=r.s==i.s?1:-1,U=r.d,z=i.d;if(!r.s)return new O(r);if(!i.s)throw Error(no+"Division by zero");for(c=r.e-i.e,M=z.length,$=U.length,E=new O(F),b=E.d=[],f=0;z[f]==(U[f]||0);)++f;if(z[f]>(U[f]||0)&&--c,o==null?D=o=O.precision:s?D=o+(kn(r)-kn(i))+1:D=o,D<0)return new O(0);if(D=D/Yt+2|0,f=0,M==1)for(h=0,z=z[0],D++;(f<$||h)&&D--;f++)k=h*Zn+(U[f]||0),b[f]=k/z|0,h=k%z|0;else{for(h=Zn/(z[0]+1)|0,h>1&&(z=t(z,h),U=t(U,h),M=z.length,$=U.length),q=M,S=U.slice(0,M),A=S.length;A<M;)S[A++]=0;L=z.slice(),L.unshift(0),H=z[0],z[1]>=Zn/2&&++H;do h=0,l=e(z,S,M,A),l<0?(I=S[0],M!=A&&(I=I*Zn+(S[1]||0)),h=I/H|0,h>1?(h>=Zn&&(h=Zn-1),g=t(z,h),v=g.length,A=S.length,l=e(g,S,v,A),l==1&&(h--,n(g,M<v?L:z,v))):(h==0&&(l=h=1),g=z.slice()),v=g.length,v<A&&g.unshift(0),n(S,g,A),l==-1&&(A=S.length,l=e(z,S,M,A),l<1&&(h++,n(S,M<A?L:z,A))),A=S.length):l===0&&(h++,S=[0]),b[f++]=h,l&&S[0]?S[A++]=U[q]||0:(S=[U[q]],A=1);while((q++<$||S[0]!==void 0)&&D--)}return b[0]||b.shift(),E.e=c,qt(E,s?o+kn(E)+1:o)}})();function N$(t,e){var n,r,i,o,s,l,c=0,f=0,h=t.constructor,g=h.precision;if(kn(t)>16)throw Error(xR+kn(t));if(!t.s)return new h(Ti);for(sn=!1,l=g,s=new h(.03125);t.abs().gte(.1);)t=t.times(s),f+=5;for(r=Math.log(xu(2,f))/Math.LN10*2+5|0,l+=r,n=i=o=new h(Ti),h.precision=l;;){if(i=qt(i.times(t),l),n=n.times(++c),s=o.plus(Ys(i,n,l)),Jo(s.d).slice(0,l)===Jo(o.d).slice(0,l)){for(;f--;)o=qt(o.times(o),l);return h.precision=g,e==null?(sn=!0,qt(o,g)):o}o=s}}function kn(t){for(var e=t.e*Yt,n=t.d[0];n>=10;n/=10)e++;return e}function mS(t,e,n){if(e>t.LN10.sd())throw sn=!0,n&&(t.precision=n),Error(no+"LN10 precision limit exceeded");return qt(new t(t.LN10),e)}function tl(t){for(var e="";t--;)e+="0";return e}function km(t,e){var n,r,i,o,s,l,c,f,h,g=1,v=10,E=t,b=E.d,S=E.constructor,A=S.precision;if(E.s<1)throw Error(no+(E.s?"NaN":"-Infinity"));if(E.eq(Ti))return new S(0);if(e==null?(sn=!1,f=A):f=e,E.eq(10))return e==null&&(sn=!0),mS(S,f);if(f+=v,S.precision=f,n=Jo(b),r=n.charAt(0),o=kn(E),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)E=E.times(t),n=Jo(E.d),r=n.charAt(0),g++;o=kn(E),r>1?(E=new S("0."+n),o++):E=new S(r+"."+n.slice(1))}else return c=mS(S,f+2,A).times(o+""),E=km(new S(r+"."+n.slice(1)),f-v).plus(c),S.precision=A,e==null?(sn=!0,qt(E,A)):E;for(l=s=E=Ys(E.minus(Ti),E.plus(Ti),f),h=qt(E.times(E),f),i=3;;){if(s=qt(s.times(h),f),c=l.plus(Ys(s,new S(i),f)),Jo(c.d).slice(0,f)===Jo(l.d).slice(0,f))return l=l.times(2),o!==0&&(l=l.plus(mS(S,f+2,A).times(o+""))),l=Ys(l,new S(g),f),S.precision=A,e==null?(sn=!0,qt(l,A)):l;l=c,i+=2}}function UL(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=jd(n/Yt),t.d=[],r=(n+1)%Yt,n<0&&(r+=Yt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Yt;r<i;)t.d.push(+e.slice(r,r+=Yt));e=e.slice(r),r=Yt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),sn&&(t.e>q_||t.e<-q_))throw Error(xR+n)}else t.s=0,t.e=0,t.d=[0];return t}function qt(t,e,n){var r,i,o,s,l,c,f,h,g=t.d;for(s=1,o=g[0];o>=10;o/=10)s++;if(r=e-s,r<0)r+=Yt,i=e,f=g[h=0];else{if(h=Math.ceil((r+1)/Yt),o=g.length,h>=o)return t;for(f=o=g[h],s=1;o>=10;o/=10)s++;r%=Yt,i=r-Yt+s}if(n!==void 0&&(o=xu(10,s-i-1),l=f/o%10|0,c=e<0||g[h+1]!==void 0||f%o,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?f/xu(10,s-i):0:g[h-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return c?(o=kn(t),g.length=1,e=e-o-1,g[0]=xu(10,(Yt-e%Yt)%Yt),t.e=jd(-e/Yt)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(r==0?(g.length=h,o=1,h--):(g.length=h+1,o=xu(10,Yt-r),g[h]=i>0?(f/xu(10,s-i)%xu(10,i)|0)*o:0),c)for(;;)if(h==0){(g[0]+=o)==Zn&&(g[0]=1,++t.e);break}else{if(g[h]+=o,g[h]!=Zn)break;g[h--]=0,o=1}for(r=g.length;g[--r]===0;)g.pop();if(sn&&(t.e>q_||t.e<-q_))throw Error(xR+kn(t));return t}function M$(t,e){var n,r,i,o,s,l,c,f,h,g,v=t.constructor,E=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),sn?qt(e,E):e;if(c=t.d,g=e.d,r=e.e,f=t.e,c=c.slice(),s=f-r,s){for(h=s<0,h?(n=c,s=-s,l=g.length):(n=g,r=f,l=c.length),i=Math.max(Math.ceil(E/Yt),l)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=g.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(c[i]!=g[i]){h=c[i]<g[i];break}s=0}for(h&&(n=c,c=g,g=n,e.s=-e.s),l=c.length,i=g.length-l;i>0;--i)c[l++]=0;for(i=g.length;i>s;){if(c[--i]<g[i]){for(o=i;o&&c[--o]===0;)c[o]=Zn-1;--c[o],c[i]+=Zn}c[i]-=g[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,sn?qt(e,E):e):new v(0)}function ac(t,e,n){var r,i=kn(t),o=Jo(t.d),s=o.length;return e?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+tl(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+tl(-i-1)+o,n&&(r=n-s)>0&&(o+=tl(r))):i>=s?(o+=tl(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+tl(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=tl(r))),t.s<0?"-"+o:o}function FL(t,e){if(t.length>e)return t.length=e,!0}function D$(t){var e,n,r;function i(o){var s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,o instanceof i){s.s=o.s,s.e=o.e,s.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(ju+o);if(o>0)s.s=1;else if(o<0)o=-o,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(o===~~o&&o<1e7){s.e=0,s.d=[o];return}return UL(s,o.toString())}else if(typeof o!="string")throw Error(ju+o);if(o.charCodeAt(0)===45?(o=o.slice(1),s.s=-1):s.s=1,ffe.test(o))UL(s,o);else throw Error(ju+o)}if(i.prototype=Pe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=D$,i.config=i.set=dfe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function dfe(t){if(!t||typeof t!="object")throw Error(no+"Object expected");var e,n,r,i=["precision",1,Gd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(jd(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(ju+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ju+n+": "+r);return this}var CR=D$(cfe);Ti=new CR(1);const xt=CR;var hfe=t=>t,k$={},O$=t=>t===k$,BL=t=>function e(){return arguments.length===0||arguments.length===1&&O$(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},L$=(t,e)=>t===1?e:BL(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.filter(s=>s!==k$).length;return o>=t?e(...r):L$(t-o,BL(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var f=r.map(h=>O$(h)?l.shift():h);return e(...f,...l)}))}),pT=t=>L$(t.length,t),ox=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},pfe=pT((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),mfe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return hfe;var i=n.reverse(),o=i[0],s=i.slice(1);return function(){return s.reduce((l,c)=>c(l),o(...arguments))}},sx=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),V$=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e&&i.every((s,l)=>{var c;return s===((c=e)===null||c===void 0?void 0:c[l])})||(e=i,n=t(...i)),n}};function U$(t){var e;return t===0?e=1:e=Math.floor(new xt(t).abs().log(10).toNumber())+1,e}function F$(t,e,n){for(var r=new xt(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}pT((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});pT((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});pT((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var B$=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},q$=(t,e,n)=>{if(t.lte(0))return new xt(0);var r=U$(t.toNumber()),i=new xt(10).pow(r),o=t.div(i),s=r!==1?.05:.1,l=new xt(Math.ceil(o.div(s).toNumber())).add(n).mul(s),c=l.mul(i);return e?new xt(c.toNumber()):new xt(Math.ceil(c.toNumber()))},gfe=(t,e,n)=>{var r=new xt(1),i=new xt(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new xt(10).pow(U$(t)-1),i=new xt(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new xt(Math.floor(t)))}else t===0?i=new xt(Math.floor((e-1)/2)):n||(i=new xt(Math.floor(t)));var s=Math.floor((e-1)/2),l=mfe(pfe(c=>i.add(new xt(c-s).mul(r)).toNumber()),ox);return l(0,e)},$$=function(e,n,r,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new xt(0),tickMin:new xt(0),tickMax:new xt(0)};var s=q$(new xt(n).sub(e).div(r-1),i,o),l;e<=0&&n>=0?l=new xt(0):(l=new xt(e).add(n).div(2),l=l.sub(new xt(l).mod(s)));var c=Math.ceil(l.sub(e).div(s).toNumber()),f=Math.ceil(new xt(n).sub(l).div(s).toNumber()),h=c+f+1;return h>r?$$(e,n,r,i,o+1):(h<r&&(f=n>0?f+(r-h):f,c=n>0?c:c+(r-h)),{step:s,tickMin:l.sub(new xt(c).mul(s)),tickMax:l.add(new xt(f).mul(s))})};function yfe(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[s,l]=B$([e,n]);if(s===-1/0||l===1/0){var c=l===1/0?[s,...ox(0,r-1).map(()=>1/0)]:[...ox(0,r-1).map(()=>-1/0),l];return e>n?sx(c):c}if(s===l)return gfe(s,r,i);var{step:f,tickMin:h,tickMax:g}=$$(s,l,o,i,0),v=F$(h,g.add(new xt(.1).mul(f)),f);return e>n?sx(v):v}function vfe(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,s]=B$([n,r]);if(o===-1/0||s===1/0)return[n,r];if(o===s)return[o];var l=Math.max(e,2),c=q$(new xt(s).sub(o).div(l-1),i,0),f=[...F$(new xt(o),new xt(s),c),s];return i===!1&&(f=f.map(h=>Math.round(h))),n>r?sx(f):f}var _fe=V$(yfe),Tfe=V$(vfe),z$=t=>t.rootProps.maxBarSize,Efe=t=>t.rootProps.barGap,H$=t=>t.rootProps.barCategoryGap,wfe=t=>t.rootProps.barSize,mT=t=>t.rootProps.stackOffset,IR=t=>t.options.chartName,RR=t=>t.rootProps.syncId,G$=t=>t.rootProps.syncMethod,PR=t=>t.options.eventEmitter,Fs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},vi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},gT=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},bfe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Fs.angleAxisId,includeHidden:!1,name:void 0,reversed:Fs.reversed,scale:Fs.scale,tick:Fs.tick,tickCount:void 0,ticks:void 0,type:Fs.type,unit:void 0},Sfe={allowDataOverflow:vi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:vi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:vi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:vi.scale,tick:vi.tick,tickCount:vi.tickCount,ticks:void 0,type:vi.type,unit:void 0},Afe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Fs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fs.scale,tick:Fs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},xfe={allowDataOverflow:vi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:vi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:vi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:vi.scale,tick:vi.tick,tickCount:vi.tickCount,ticks:void 0,type:"category",unit:void 0},NR=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Afe:bfe,MR=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?xfe:Sfe,yT=t=>t.polarOptions,DR=se([ma,ga,sr],Ise),j$=se([yT,DR],(t,e)=>{if(t!=null)return To(t.innerRadius,e,0)}),K$=se([yT,DR],(t,e)=>{if(t!=null)return To(t.outerRadius,e,e*.8)}),Cfe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},W$=se([yT],Cfe);se([NR,W$],gT);var Y$=se([DR,j$,K$],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});se([MR,Y$],gT);var J$=se([Rt,yT,j$,K$,ma,ga],(t,e,n,r,i,o)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:l,startAngle:c,endAngle:f}=e;return{cx:To(s,i,i/2),cy:To(l,o,o/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:f,clockWise:!1}}}),On=(t,e)=>e,vT=(t,e,n)=>n;function kR(t){return t==null?void 0:t.id}var Gn=t=>{var e=Rt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Kd=t=>t.tooltip.settings.axisId,lr=t=>{var e=Gn(t),n=Kd(t);return mg(t,e,n)},Q$=se([lr],t=>t==null?void 0:t.dataKey);function X$(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:o}=n,s=new Map;return t.forEach(l=>{var c,f=(c=l.data)!==null&&c!==void 0?c:r;if(!(f==null||f.length===0)){var h=kR(l);f.forEach((g,v)=>{var E=o==null||i?v:String(Hr(g,o,null)),b=Hr(g,l.dataKey,0),S;s.has(E)?S=s.get(E):S={},Object.assign(S,{[h]:b}),s.set(E,S)})}}),Array.from(s.values())}function _T(t){return t.stackId!=null&&t.dataKey!=null}function qL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qL(Object(n),!0).forEach(function(r){Ife(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ife(t,e,n){return(e=Rfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rfe(t){var e=Pfe(t,"string");return typeof e=="symbol"?e:e+""}function Pfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ax=[0,"auto"],mi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Z$=(t,e)=>t.cartesianAxis.xAxis[e],Bl=(t,e)=>{var n=Z$(t,e);return n??mi},gi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ax,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ug},ez=(t,e)=>t.cartesianAxis.yAxis[e],ql=(t,e)=>{var n=ez(t,e);return n??gi},Nfe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},OR=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Nfe},ri=(t,e,n)=>{switch(e){case"xAxis":return Bl(t,n);case"yAxis":return ql(t,n);case"zAxis":return OR(t,n);case"angleAxis":return NR(t,n);case"radiusAxis":return MR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Mfe=(t,e,n)=>{switch(e){case"xAxis":return Bl(t,n);case"yAxis":return ql(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},mg=(t,e,n)=>{switch(e){case"xAxis":return Bl(t,n);case"yAxis":return ql(t,n);case"angleAxis":return NR(t,n);case"radiusAxis":return MR(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},tz=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function nz(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var LR=t=>t.graphicalItems.cartesianItems,Dfe=se([On,vT],nz),rz=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),gg=se([LR,ri,Dfe],rz),iz=se([gg],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(_T)),oz=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),sz=se([gg],oz),az=t=>t.map(e=>e.data).filter(Boolean).flat(1),kfe=se([gg],az),lz=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},VR=se([kfe,AR],lz),uz=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Hr(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Hr(i,r)}))):t.map(r=>({value:r})),TT=se([VR,ri,gg],uz);function cz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Tc(t){return t.filter(e=>os(e)||e instanceof Date).map(Number).filter(e=>eo(e)===!1)}function Ofe(t,e,n){return!n||typeof e!="number"||eo(e)?[]:n.length?Tc(n.flatMap(r=>{var i=Hr(t,r.dataKey),o,s;if(Array.isArray(i)?[o,s]=i:o=s=i,!(!Ri(o)||!Ri(s)))return[e-o,e+s]})):[]}var Lfe=se([iz,AR,lr],X$),fz=(t,e,n)=>{var r={},i=e.reduce((o,s)=>(s.stackId==null||(o[s.stackId]==null&&(o[s.stackId]=[]),o[s.stackId].push(s)),o),r);return Object.fromEntries(Object.entries(i).map(o=>{var[s,l]=o,c=l.map(kR);return[s,{stackedData:Hse(t,c,n),graphicalItems:l}]}))},lx=se([Lfe,iz,mT],fz),dz=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(n!=="zAxis"){var o=Yse(t,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Vfe=se([lx,Fl,On],dz),hz=(t,e,n,r,i)=>n.length>0?t.flatMap(o=>n.flatMap(s=>{var l,c,f=(l=r[s.id])===null||l===void 0?void 0:l.filter(g=>cz(i,g)),h=Hr(o,(c=e.dataKey)!==null&&c!==void 0?c:s.dataKey);return{value:h,errorDomain:Ofe(o,h,f)}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(o=>({value:Hr(o,e.dataKey),errorDomain:[]})):t.map(o=>({value:o,errorDomain:[]})),ET=t=>t.errorBars,pz=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>cz(n,r));se([sz,ET,On],pz);var Ufe=se([VR,ri,sz,ET,On],hz);function Ffe(t){var{value:e}=t;if(os(e)||e instanceof Date)return e}var $L=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Tc(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Bfe=(t,e,n)=>{var r=t.map(Ffe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&N3(r))?W5(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},UR=t=>{var e;if(t==null||!("domain"in t))return ax;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Tc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:ax},z_=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var o=i.flat(),s=Math.min(...o),l=Math.max(...o);return[s,l]}},mz=t=>t.referenceElements.dots,Wd=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),qfe=se([mz,On,vT],Wd),gz=t=>t.referenceElements.areas,$fe=se([gz,On,vT],Wd),yz=t=>t.referenceElements.lines,zfe=se([yz,On,vT],Wd),vz=(t,e)=>{var n=Tc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Hfe=se(qfe,On,vz),_z=(t,e)=>{var n=Tc(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Gfe=se([$fe,On],_z),Tz=(t,e)=>{var n=Tc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},jfe=se(zfe,On,Tz),Kfe=se(Hfe,jfe,Gfe,(t,e,n)=>z_(t,n,e)),Wfe=se([ri],UR),Ez=(t,e,n,r,i,o,s)=>{var l=lfe(e,t.allowDataOverflow);if(l!=null)return l;var c=o==="vertical"&&s==="xAxis"||o==="horizontal"&&s==="yAxis",f=c?z_(n,i,$L(r)):z_(i,$L(r));return ufe(e,f,t.allowDataOverflow)},Yfe=se([ri,Wfe,Vfe,Ufe,Kfe,Rt,On],Ez),Jfe=[0,1],wz=(t,e,n,r,i,o,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:l,type:c}=t,f=yc(e,o);return f&&l==null?W5(0,n.length):c==="category"?Bfe(r,t,f):i==="expand"?Jfe:s}},FR=se([ri,Rt,VR,TT,mT,On,Yfe],wz),bz=(t,e,n,r,i)=>{if(t!=null){var{scale:o,type:s}=t;if(o==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof o=="string"){var l="scale".concat(sg(o));return l in kp?l:"point"}}},yg=se([ri,Rt,tz,IR,On],bz);function Qfe(t){if(t!=null){if(t in kp)return kp[t]();var e="scale".concat(sg(t));if(e in kp)return kp[e]()}}function BR(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=Qfe(e);if(i!=null){var o=i.domain(n).range(r);return Fse(o),o}}}var Sz=(t,e,n)=>{var r=UR(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&wd(t))return _fe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&wd(t))return Tfe(t,e.tickCount,e.allowDecimals)}},qR=se([FR,mg,yg],Sz),Az=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&wd(e)&&Array.isArray(n)&&n.length>0){var i=e[0],o=n[0],s=e[1],l=n[n.length-1];return[Math.min(i,o),Math.max(s,l)]}return e},Xfe=se([ri,FR,qR,On],Az),Zfe=se(TT,ri,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Tc(t.map(l=>l.value))).sort((l,c)=>l-c);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var o=0;o<r.length-1;o++){var s=r[o+1]-r[o];n=Math.min(n,s)}return n/i}}),xz=se(Zfe,Rt,H$,sr,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!Ri(t))return 0;var o=e==="vertical"?r.height:r.width;if(i==="gap")return t*o/2;if(i==="no-gap"){var s=To(n,t*o),l=t*o/2;return l-s-(l-s)/o*s}return 0}),ede=(t,e)=>{var n=Bl(t,e);return n==null||typeof n.padding!="string"?0:xz(t,"xAxis",e,n.padding)},tde=(t,e)=>{var n=ql(t,e);return n==null||typeof n.padding!="string"?0:xz(t,"yAxis",e,n.padding)},nde=se(Bl,ede,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),rde=se(ql,tde,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),ide=se([sr,nde,aT,sT,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:o}=r;return i?[o.left,n.width-o.right]:[t.left+e.left,t.left+t.width-e.right]}),ode=se([sr,Rt,rde,aT,sT,(t,e,n)=>n],(t,e,n,r,i,o)=>{var{padding:s}=i;return o?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),vg=(t,e,n,r)=>{var i;switch(e){case"xAxis":return ide(t,n,r);case"yAxis":return ode(t,n,r);case"zAxis":return(i=OR(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return W$(t);case"radiusAxis":return Y$(t,n);default:return}},Cz=se([ri,vg],gT),Yd=se([ri,yg,Xfe,Cz],BR);se([gg,ET,On],pz);function Iz(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var wT=(t,e)=>e,bT=(t,e,n)=>n,sde=se(iT,wT,bT,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Iz)),ade=se(oT,wT,bT,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Iz)),Rz=(t,e)=>({width:t.width,height:e.height}),lde=(t,e)=>{var n=typeof e.width=="number"?e.width:ug;return{width:n,height:t.height}},Pz=se(sr,Bl,Rz),ude=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},cde=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},fde=se(ga,sr,sde,wT,bT,(t,e,n,r,i)=>{var o={},s;return n.forEach(l=>{var c=Rz(e,l);s==null&&(s=ude(e,r,t));var f=r==="top"&&!i||r==="bottom"&&i;o[l.id]=s-Number(f)*c.height,s+=(f?-1:1)*c.height}),o}),dde=se(ma,sr,ade,wT,bT,(t,e,n,r,i)=>{var o={},s;return n.forEach(l=>{var c=lde(e,l);s==null&&(s=cde(e,r,t));var f=r==="left"&&!i||r==="right"&&i;o[l.id]=s-Number(f)*c.width,s+=(f?-1:1)*c.width}),o}),hde=(t,e)=>{var n=sr(t),r=Bl(t,e);if(r!=null){var i=fde(t,r.orientation,r.mirror),o=i[e];return o==null?{x:n.left,y:0}:{x:n.left,y:o}}},pde=(t,e)=>{var n=sr(t),r=ql(t,e);if(r!=null){var i=dde(t,r.orientation,r.mirror),o=i[e];return o==null?{x:0,y:n.top}:{x:o,y:n.top}}},Nz=se(sr,ql,(t,e)=>{var n=typeof e.width=="number"?e.width:ug;return{width:n,height:t.height}}),zL=(t,e,n)=>{switch(e){case"xAxis":return Pz(t,n).width;case"yAxis":return Nz(t,n).height;default:return}},Mz=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:o,dataKey:s}=n,l=yc(t,r),c=e.map(f=>f.value);if(s&&l&&o==="category"&&i&&N3(c))return c}},$R=se([Rt,TT,ri,On],Mz),Dz=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:o}=n,s=yc(t,r);if(s&&(i==="number"||o!=="auto"))return e.map(l=>l.value)}},zR=se([Rt,TT,mg,On],Dz);se([Rt,Mfe,yg,Yd,$R,zR,vg,qR,On],(t,e,n,r,i,o,s,l,c)=>{if(e==null)return null;var f=yc(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:o,duplicateDomain:i,isCategorical:f,niceTicks:l,range:s,realScaleType:n,scale:r}});var mde=(t,e,n,r,i,o,s,l,c)=>{if(!(e==null||r==null)){var f=yc(t,c),{type:h,ticks:g,tickCount:v}=e,E=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=h==="category"&&r.bandwidth?r.bandwidth()/E:0;b=c==="angleAxis"&&o!=null&&o.length>=2?bi(o[0]-o[1])*2*b:b;var S=g||i;if(S){var A=S.map((I,D)=>{var k=s?s.indexOf(I):I;return{index:D,coordinate:r(k)+b,value:I,offset:b}});return A.filter(I=>!eo(I.coordinate))}return f&&l?l.map((I,D)=>({coordinate:r(I)+b,value:I,index:D,offset:b})):r.ticks?r.ticks(v).map(I=>({coordinate:r(I)+b,value:I,offset:b})):r.domain().map((I,D)=>({coordinate:r(I)+b,value:s?s[I]:I,index:D,offset:b}))}},kz=se([Rt,mg,yg,Yd,qR,vg,$R,zR,On],mde),gde=(t,e,n,r,i,o,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var l=yc(t,s),{tickCount:c}=e,f=0;return f=s==="angleAxis"&&(r==null?void 0:r.length)>=2?bi(r[0]-r[1])*2*f:f,l&&o?o.map((h,g)=>({coordinate:n(h)+f,value:h,index:g,offset:f})):n.ticks?n.ticks(c).map(h=>({coordinate:n(h)+f,value:h,offset:f})):n.domain().map((h,g)=>({coordinate:n(h)+f,value:i?i[h]:h,index:g,offset:f}))}},bd=se([Rt,mg,Yd,vg,$R,zR,On],gde),Sd=se(ri,Yd,(t,e)=>{if(!(t==null||e==null))return $_($_({},t),{},{scale:e})}),yde=se([ri,yg,FR,Cz],BR);se((t,e,n)=>OR(t,n),yde,(t,e)=>{if(!(t==null||e==null))return $_($_({},t),{},{scale:e})});var vde=se([Rt,iT,oT],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Oz=t=>t.options.defaultTooltipEventType,Lz=t=>t.options.validateTooltipEventTypes;function Vz(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function HR(t,e){var n=Oz(t),r=Lz(t);return Vz(e,n,r)}function _de(t){return ze(e=>HR(e,t))}var Uz=(t,e)=>{var n,r=Number(e);if(!(eo(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Tde=t=>t.tooltip.settings,il={active:!1,index:null,dataKey:void 0,coordinate:void 0},Ede={itemInteraction:{click:il,hover:il},axisInteraction:{click:il,hover:il},keyboardInteraction:il,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Fz=Pi({name:"tooltip",initialState:Ede,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=Ws(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:wde,removeTooltipEntrySettings:bde,setTooltipSettingsState:Sde,setActiveMouseOverItemIndex:Bz,mouseLeaveItem:Ade,mouseLeaveChart:qz,setActiveClickItemIndex:xde,setMouseOverAxisIndex:$z,setMouseClickAxisIndex:Cde,setSyncInteraction:ux,setKeyboardInteraction:cx}=Fz.actions,Ide=Fz.reducer;function HL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HL(Object(n),!0).forEach(function(r){Rde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rde(t,e,n){return(e=Pde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pde(t){var e=Nde(t,"string");return typeof e=="symbol"?e:e+""}function Nde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mde(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Dde(t){return t.index!=null}var zz=(t,e,n,r)=>{if(e==null)return il;var i=Mde(t,e,n);if(i==null)return il;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var o=t.settings.active===!0;if(Dde(i)){if(o)return hv(hv({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return hv(hv({},il),{},{coordinate:i.coordinate})},GR=(t,e)=>{var n=t==null?void 0:t.index;if(n==null)return null;var r=Number(n);if(!Ri(r))return n;var i=0,o=1/0;return e.length>0&&(o=e.length-1),String(Math.max(i,Math.min(r,o)))},Hz=(t,e,n,r,i,o,s,l)=>{if(!(o==null||l==null)){var c=s[0],f=c==null?void 0:l(c.positions,o);if(f!=null)return f;var h=i==null?void 0:i[Number(o)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:h.coordinate}}}},Gz=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(o=>{var s;return((s=o.settings)===null||s===void 0?void 0:s.dataKey)===i})},_g=t=>t.options.tooltipPayloadSearcher,Jd=t=>t.tooltip;function GL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GL(Object(n),!0).forEach(function(r){kde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kde(t,e,n){return(e=Ode(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ode(t){var e=Lde(t,"string");return typeof e=="symbol"?e:e+""}function Lde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vde(t,e){return t??e}var jz=(t,e,n,r,i,o,s)=>{if(!(e==null||o==null)){var{chartData:l,computedData:c,dataStartIndex:f,dataEndIndex:h}=n,g=[];return t.reduce((v,E)=>{var b,{dataDefinedOnItem:S,settings:A}=E,I=Vde(S,l),D=Array.isArray(I)?O5(I,f,h):I,k=(b=A==null?void 0:A.dataKey)!==null&&b!==void 0?b:r,q=A==null?void 0:A.nameKey,$;if(r&&Array.isArray(D)&&!Array.isArray(D[0])&&s==="axis"?$=Rre(D,r,i):$=o(D,e,c,q),Array.isArray($))$.forEach(M=>{var L=jL(jL({},A),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});v.push(NO({tooltipEntrySettings:L,dataKey:M.dataKey,payload:M.payload,value:Hr(M.payload,M.dataKey),name:M.name}))});else{var H;v.push(NO({tooltipEntrySettings:A,dataKey:k,payload:$,value:Hr($,k),name:(H=Hr($,q))!==null&&H!==void 0?H:A==null?void 0:A.name}))}return v},g)}},jR=se([lr,Rt,tz,IR,Gn],bz),Ude=se([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Fde=se([Gn,Kd],nz),Tg=se([Ude,lr,Fde],rz),Bde=se([Tg],t=>t.filter(_T)),qde=se([Tg],az),Qd=se([qde,Fl],lz),$de=se([Bde,Fl,lr],X$),KR=se([Qd,lr,Tg],uz),zde=se([lr],UR),Hde=se([Tg],t=>t.filter(_T)),Gde=se([$de,Hde,mT],fz),jde=se([Gde,Fl,Gn],dz),Kde=se([Tg],oz),Wde=se([Qd,lr,Kde,ET,Gn],hz),Yde=se([mz,Gn,Kd],Wd),Jde=se([Yde,Gn],vz),Qde=se([gz,Gn,Kd],Wd),Xde=se([Qde,Gn],_z),Zde=se([yz,Gn,Kd],Wd),ehe=se([Zde,Gn],Tz),the=se([Jde,ehe,Xde],z_),nhe=se([lr,zde,jde,Wde,the,Rt,Gn],Ez),Kz=se([lr,Rt,Qd,KR,mT,Gn,nhe],wz),rhe=se([Kz,lr,jR],Sz),ihe=se([lr,Kz,rhe,Gn],Az),Wz=t=>{var e=Gn(t),n=Kd(t),r=!1;return vg(t,e,n,r)},Yz=se([lr,Wz],gT),Jz=se([lr,jR,ihe,Yz],BR),ohe=se([Rt,KR,lr,Gn],Mz),she=se([Rt,KR,lr,Gn],Dz),ahe=(t,e,n,r,i,o,s,l)=>{if(e){var{type:c}=e,f=yc(t,l);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=c==="category"&&r.bandwidth?r.bandwidth()/h:0;return g=l==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?bi(i[0]-i[1])*2*g:g,f&&s?s.map((v,E)=>({coordinate:r(v)+g,value:v,index:E,offset:g})):r.domain().map((v,E)=>({coordinate:r(v)+g,value:o?o[v]:v,index:E,offset:g}))}}},va=se([Rt,lr,jR,Jz,Wz,ohe,she,Gn],ahe),WR=se([Oz,Lz,Tde],(t,e,n)=>Vz(n.shared,t,e)),Qz=t=>t.tooltip.settings.trigger,YR=t=>t.tooltip.settings.defaultIndex,ST=se([Jd,WR,Qz,YR],zz),Ad=se([ST,Qd],GR),Xz=se([va,Ad],Uz),Zz=se([ST],t=>{if(t)return t.dataKey}),eH=se([Jd,WR,Qz,YR],Gz),lhe=se([ma,ga,Rt,sr,va,YR,eH,_g],Hz),uhe=se([ST,lhe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),che=se([ST],t=>t.active),fhe=se([eH,Ad,Fl,Q$,Xz,_g,WR],jz);se([fhe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function KL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KL(Object(n),!0).forEach(function(r){dhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dhe(t,e,n){return(e=hhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hhe(t){var e=phe(t,"string");return typeof e=="symbol"?e:e+""}function phe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mhe=()=>ze(lr),ghe=()=>{var t=mhe(),e=ze(va),n=ze(Jz);return JI(WL(WL({},t),{},{scale:n}),e)},yhe=()=>ze(IR),JR=(t,e)=>e,tH=(t,e,n)=>n,QR=(t,e,n,r)=>r,vhe=se(va,t=>X0(t,e=>e.coordinate)),XR=se([Jd,JR,tH,QR],zz),nH=se([XR,Qd],GR),_he=(t,e,n)=>{if(e!=null){var r=Jd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},rH=se([Jd,JR,tH,QR],Gz),H_=se([ma,ga,Rt,sr,va,QR,rH,_g],Hz),The=se([XR,H_],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),iH=se(va,nH,Uz),Ehe=se([rH,nH,Fl,Q$,iH,_g,JR],jz),whe=se([XR],t=>({isActive:t.active,activeIndex:t.index})),bhe=(t,e,n,r,i,o,s,l)=>{if(!(!t||!e||!r||!i||!o)){var c=Jse(t.chartX,t.chartY,e,n,l);if(c){var f=Xse(c,e),h=Vse(f,s,o,r,i),g=Qse(e,o,h,c);return{activeIndex:String(h),activeCoordinate:g}}}};function fx(){return fx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fx.apply(null,arguments)}function YL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YL(Object(n),!0).forEach(function(r){She(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function She(t,e,n){return(e=Ahe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ahe(t){var e=xhe(t,"string");return typeof e=="symbol"?e:e+""}function xhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Che(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:o,layout:s,cursor:l,tooltipEventType:c,chartName:f}=t,h=e,g=n,v=r;if(!l||!h||f!=="ScatterChart"&&c!=="axis")return null;var E,b;if(f==="ScatterChart")E=h,b=Kae;else if(f==="BarChart")E=Wae(s,h,i,o),b=H5;else if(s==="radial"){var{cx:S,cy:A,radius:I,startAngle:D,endAngle:k}=G5(h);E={cx:S,cy:A,startAngle:D,endAngle:k,innerRadius:I,outerRadius:I},b=K5}else E={points:Cle(s,h,i)},b=Uae;var q=typeof l=="object"&&"className"in l?l.className:void 0,$=pv(pv(pv(pv({stroke:"#ccc",pointerEvents:"none"},i),E),tr(l,!1)),{},{payload:g,payloadIndex:v,className:Xt("recharts-tooltip-cursor",q)});return R.isValidElement(l)?R.cloneElement(l,$):R.createElement(b,$)}function Ihe(t){var e=ghe(),n=hae(),r=ZI(),i=yhe();return R.createElement(Che,fx({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var oH=R.createContext(null),Rhe=()=>R.useContext(oH),gS={exports:{}},JL;function Phe(){return JL||(JL=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,f,h){this.fn=c,this.context=f,this.once=h||!1}function o(c,f,h,g,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var E=new i(h,g||c,v),b=n?n+f:f;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],E]:c._events[b].push(E):(c._events[b]=E,c._eventsCount++),c}function s(c,f){--c._eventsCount===0?c._events=new r:delete c._events[f]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],h,g;if(this._eventsCount===0)return f;for(g in h=this._events)e.call(h,g)&&f.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},l.prototype.listeners=function(f){var h=n?n+f:f,g=this._events[h];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,E=g.length,b=new Array(E);v<E;v++)b[v]=g[v].fn;return b},l.prototype.listenerCount=function(f){var h=n?n+f:f,g=this._events[h];return g?g.fn?1:g.length:0},l.prototype.emit=function(f,h,g,v,E,b){var S=n?n+f:f;if(!this._events[S])return!1;var A=this._events[S],I=arguments.length,D,k;if(A.fn){switch(A.once&&this.removeListener(f,A.fn,void 0,!0),I){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,g),!0;case 4:return A.fn.call(A.context,h,g,v),!0;case 5:return A.fn.call(A.context,h,g,v,E),!0;case 6:return A.fn.call(A.context,h,g,v,E,b),!0}for(k=1,D=new Array(I-1);k<I;k++)D[k-1]=arguments[k];A.fn.apply(A.context,D)}else{var q=A.length,$;for(k=0;k<q;k++)switch(A[k].once&&this.removeListener(f,A[k].fn,void 0,!0),I){case 1:A[k].fn.call(A[k].context);break;case 2:A[k].fn.call(A[k].context,h);break;case 3:A[k].fn.call(A[k].context,h,g);break;case 4:A[k].fn.call(A[k].context,h,g,v);break;default:if(!D)for($=1,D=new Array(I-1);$<I;$++)D[$-1]=arguments[$];A[k].fn.apply(A[k].context,D)}}return!0},l.prototype.on=function(f,h,g){return o(this,f,h,g,!1)},l.prototype.once=function(f,h,g){return o(this,f,h,g,!0)},l.prototype.removeListener=function(f,h,g,v){var E=n?n+f:f;if(!this._events[E])return this;if(!h)return s(this,E),this;var b=this._events[E];if(b.fn)b.fn===h&&(!v||b.once)&&(!g||b.context===g)&&s(this,E);else{for(var S=0,A=[],I=b.length;S<I;S++)(b[S].fn!==h||v&&!b[S].once||g&&b[S].context!==g)&&A.push(b[S]);A.length?this._events[E]=A.length===1?A[0]:A:s(this,E)}return this},l.prototype.removeAllListeners=function(f){var h;return f?(h=n?n+f:f,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(gS)),gS.exports}var Nhe=Phe();const Mhe=as(Nhe);var Om=new Mhe,dx="recharts.syncEvent.tooltip",QL="recharts.syncEvent.brush";function Dhe(t,e){if(e){var n=Number.parseInt(e,10);if(!eo(n))return t==null?void 0:t[n]}}var khe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},sH=Pi({name:"options",initialState:khe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Ohe=sH.reducer,{createEventEmitter:Lhe}=sH.actions;function Vhe(t){return t.tooltip.syncInteraction}var Uhe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},aH=Pi({name:"chartData",initialState:Uhe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:XL,setDataStartEndIndexes:Fhe,setComputedData:YIe}=aH.actions,Bhe=aH.reducer,qhe=["x","y"];function ZL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZL(Object(n),!0).forEach(function(r){$he(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $he(t,e,n){return(e=zhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zhe(t){var e=Hhe(t,"string");return typeof e=="symbol"?e:e+""}function Hhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ghe(t,e){if(t==null)return{};var n,r,i=jhe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lH=()=>{};function Khe(){var t=ze(RR),e=ze(PR),n=or(),r=ze(G$),i=ze(va),o=ZI(),s=XI(),l=ze(c=>c.rootProps.className);R.useEffect(()=>{if(t==null)return lH;var c=(f,h,g)=>{if(e!==g&&t===f){if(r==="index"){var v;if(s&&h!==null&&h!==void 0&&(v=h.payload)!==null&&v!==void 0&&v.coordinate){var E=h.payload.coordinate,{x:b,y:S}=E,A=Ghe(E,qhe),I=Tu(Tu(Tu({},A),typeof b=="number"&&{x:Math.max(s.x,Math.min(b,s.x+s.width))}),typeof S=="number"&&{y:Math.max(s.y,Math.min(S,s.y+s.height))}),D=Tu(Tu({},h),{},{payload:Tu(Tu({},h.payload),{},{coordinate:I})});n(D)}else n(h);return}if(i!=null){var k;if(typeof r=="function"){var q={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},$=r(i,q);k=i[$]}else r==="value"&&(k=i.find(G=>String(G.value)===h.payload.label));var{coordinate:H}=h.payload;if(k==null||h.payload.active===!1||H==null||s==null){n(ux({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:M,y:L}=H,O=Math.min(M,s.x+s.width),F=Math.min(L,s.y+s.height),U={x:o==="horizontal"?k.coordinate:O,y:o==="horizontal"?F:k.coordinate},z=ux({active:h.payload.active,coordinate:U,dataKey:h.payload.dataKey,index:String(k.index),label:h.payload.label});n(z)}}};return Om.on(dx,c),()=>{Om.off(dx,c)}},[l,n,e,t,r,i,o,s])}function Whe(){var t=ze(RR),e=ze(PR),n=or();R.useEffect(()=>{if(t==null)return lH;var r=(i,o,s)=>{e!==s&&t===i&&n(Fhe(o))};return Om.on(QL,r),()=>{Om.off(QL,r)}},[n,e,t])}function Yhe(){var t=or();R.useEffect(()=>{t(Lhe())},[t]),Khe(),Whe()}function Jhe(t,e,n,r,i,o){var s=ze(v=>_he(v,t,e)),l=ze(PR),c=ze(RR),f=ze(G$),h=ze(Vhe),g=h==null?void 0:h.active;R.useEffect(()=>{if(!g&&c!=null&&l!=null){var v=ux({active:o,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r});Om.emit(dx,c,v,l)}},[g,n,s,i,r,l,c,f,o])}function eV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eV(Object(n),!0).forEach(function(r){Qhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qhe(t,e,n){return(e=Xhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xhe(t){var e=Zhe(t,"string");return typeof e=="symbol"?e:e+""}function Zhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function epe(t){return t.dataKey}function tpe(t,e){return R.isValidElement(t)?R.cloneElement(t,e):typeof t=="function"?R.createElement(t,e):R.createElement(Sae,e)}var nV=[],npe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!cg.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function rpe(t){var e=Ll(t,npe),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:o,content:s,filterNull:l,isAnimationActive:c,offset:f,payloadUniqBy:h,position:g,reverseDirection:v,useTranslate3d:E,wrapperStyle:b,cursor:S,shared:A,trigger:I,defaultIndex:D,portal:k,axisId:q}=e,$=or(),H=typeof D=="number"?String(D):D;R.useEffect(()=>{$(Sde({shared:A,trigger:I,axisId:q,active:n,defaultIndex:H}))},[$,A,I,q,n,H]);var M=XI(),L=F5(),O=_de(A),{activeIndex:F,isActive:U}=ze(Oe=>whe(Oe,O,I,H)),z=ze(Oe=>Ehe(Oe,O,I,H)),G=ze(Oe=>iH(Oe,O,I,H)),Ce=ze(Oe=>The(Oe,O,I,H)),be=z,ee=Rhe(),le=n??U,[Se,Ve]=xoe([be,le]),K=O==="axis"?G:void 0;Jhe(O,I,Ce,K,F,le);var de=k??ee;if(de==null)return null;var ue=be??nV;le||(ue=nV),l&&ue.length&&(ue=Xie(be.filter(Oe=>Oe.value!=null&&(Oe.hide!==!0||e.includeHidden)),h,epe));var Te=ue.length>0,Le=R.createElement(Nae,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:c,active:le,coordinate:Ce,hasPayload:Te,offset:f,position:g,reverseDirection:v,useTranslate3d:E,viewBox:M,wrapperStyle:b,lastBoundingBox:Se,innerRef:Ve,hasPortalFromProps:!!k},tpe(s,tV(tV({},e),{},{payload:ue,label:K,active:le,coordinate:Ce,accessibilityLayer:L})));return R.createElement(R.Fragment,null,kj.createPortal(Le,de),le&&R.createElement(Ihe,{cursor:S,tooltipEventType:O,coordinate:Ce,payload:be,index:F}))}var yS={},vS={},_S={},rV;function ipe(){return rV||(rV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:o}={}){let s,l=null;const c=o!=null&&o.includes("leading"),f=o==null||o.includes("trailing"),h=()=>{l!==null&&(n.apply(s,l),s=void 0,l=null)},g=()=>{f&&h(),S()};let v=null;const E=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},r)},b=()=>{v!==null&&(clearTimeout(v),v=null)},S=()=>{b(),s=void 0,l=null},A=()=>{h()},I=function(...D){if(i!=null&&i.aborted)return;s=this,l=D;const k=v==null;E(),c&&k&&h()};return I.schedule=E,I.cancel=S,I.flush=A,i==null||i.addEventListener("abort",S,{once:!0}),I}t.debounce=e})(_S)),_S}var iV;function ope(){return iV||(iV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ipe();function n(r,i=0,o={}){typeof o!="object"&&(o={});const{leading:s=!1,trailing:l=!0,maxWait:c}=o,f=Array(2);s&&(f[0]="leading"),l&&(f[1]="trailing");let h,g=null;const v=e.debounce(function(...S){h=r.apply(this,S),g=null},i,{edges:f}),E=function(...S){return c!=null&&(g===null&&(g=Date.now()),Date.now()-g>=c)?(h=r.apply(this,S),g=Date.now(),v.cancel(),v.schedule(),h):(v.apply(this,S),h)},b=()=>(v.flush(),h);return E.cancel=v.cancel,E.flush=b,E}t.debounce=n})(vS)),vS}var oV;function spe(){return oV||(oV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ope();function n(r,i=0,o={}){const{leading:s=!0,trailing:l=!0}=o;return e.debounce(r,i,{leading:s,maxWait:i,trailing:l})}t.throttle=n})(yS)),yS}var TS,sV;function ape(){return sV||(sV=1,TS=spe().throttle),TS}var lpe=ape();const upe=as(lpe);var ES=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function aV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(n),!0).forEach(function(r){cpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cpe(t,e,n){return(e=fpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fpe(t){var e=dpe(t,"string");return typeof e=="symbol"?e:e+""}function dpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hpe=R.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:o="100%",minWidth:s=0,minHeight:l,maxHeight:c,children:f,debounce:h=0,id:g,className:v,onResize:E,style:b={}}=t,S=R.useRef(null),A=R.useRef();A.current=E,R.useImperativeHandle(e,()=>S.current);var[I,D]=R.useState({containerWidth:r.width,containerHeight:r.height}),k=R.useCallback(($,H)=>{D(M=>{var L=Math.round($),O=Math.round(H);return M.containerWidth===L&&M.containerHeight===O?M:{containerWidth:L,containerHeight:O}})},[]);R.useEffect(()=>{var $=O=>{var F,{width:U,height:z}=O[0].contentRect;k(U,z),(F=A.current)===null||F===void 0||F.call(A,U,z)};h>0&&($=upe($,h,{trailing:!0,leading:!1}));var H=new ResizeObserver($),{width:M,height:L}=S.current.getBoundingClientRect();return k(M,L),H.observe(S.current),()=>{H.disconnect()}},[k,h]);var q=R.useMemo(()=>{var{containerWidth:$,containerHeight:H}=I;if($<0||H<0)return null;ES(Lu(i)||Lu(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,o),ES(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=Lu(i)?$:i,L=Lu(o)?H:o;return n&&n>0&&(M?L=M/n:L&&(M=L*n),c&&L>c&&(L=c)),ES(M>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,L,i,o,s,l,n),R.Children.map(f,O=>R.cloneElement(O,{width:M,height:L,style:wS({width:M,height:L},O.props.style)}))},[n,f,o,c,l,s,I,i]);return R.createElement("div",{id:g?"".concat(g):void 0,className:Xt("recharts-responsive-container",v),style:wS(wS({},b),{},{width:i,height:o,minWidth:s,minHeight:l,maxHeight:c}),ref:S},R.createElement("div",{style:{width:0,height:0,overflow:"visible"}},q))}),uH=t=>null;uH.displayName="Cell";function ppe(t,e,n){return(e=mpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mpe(t){var e=gpe(t,"string");return typeof e=="symbol"?e:e+""}function gpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class ype{constructor(e){ppe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function lV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lV(Object(n),!0).forEach(function(r){_pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _pe(t,e,n){return(e=Tpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tpe(t){var e=Epe(t,"string");return typeof e=="symbol"?e:e+""}function Epe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wpe={cacheSize:2e3,enableCache:!0},cH=vpe({},wpe),uV=new ype(cH.cacheSize),bpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},cV="recharts_measurement_span";function Spe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",o=e.fontStyle||"",s=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(s,"|").concat(l)}var fV=(t,e)=>{try{var n=document.getElementById(cV);n||(n=document.createElement("span"),n.setAttribute("id",cV),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,bpe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Xp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||cg.isSsr)return{width:0,height:0};if(!cH.enableCache)return fV(e,n);var r=Spe(e,n),i=uV.get(r);if(i)return i;var o=fV(e,n);return uV.set(r,o),o},dV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hV=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ape=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xpe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,fH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Cpe=Object.keys(fH),Nf="NaN";function Ipe(t,e){return t*fH[e]}class Qr{static parse(e){var n,[,r,i]=(n=xpe.exec(e))!==null&&n!==void 0?n:[];return new Qr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,eo(e)&&(this.unit=""),n!==""&&!Ape.test(n)&&(this.num=NaN,this.unit=""),Cpe.includes(n)&&(this.num=Ipe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Qr(NaN,""):new Qr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return eo(this.num)}}function dH(t){if(t.includes(Nf))return Nf;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,o]=(n=dV.exec(e))!==null&&n!==void 0?n:[],s=Qr.parse(r??""),l=Qr.parse(o??""),c=i==="*"?s.multiply(l):s.divide(l);if(c.isNaN())return Nf;e=e.replace(dV,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,[,h,g,v]=(f=hV.exec(e))!==null&&f!==void 0?f:[],E=Qr.parse(h??""),b=Qr.parse(v??""),S=g==="+"?E.add(b):E.subtract(b);if(S.isNaN())return Nf;e=e.replace(hV,S.toString())}return e}var pV=/\(([^()]*)\)/;function Rpe(t){for(var e=t,n;(n=pV.exec(e))!=null;){var[,r]=n;e=e.replace(pV,dH(r))}return e}function Ppe(t){var e=t.replace(/\s+/g,"");return e=Rpe(e),e=dH(e),e}function Npe(t){try{return Ppe(t)}catch{return Nf}}function bS(t){var e=Npe(t.slice(5,-1));return e===Nf?"":e}var Mpe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Dpe=["dx","dy","angle","className","breakAll"];function hx(){return hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hx.apply(null,arguments)}function mV(t,e){if(t==null)return{};var n,r,i=kpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hH=/[ \f\n\r\t\v\u2028\u2029]+/,pH=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];ir(e)||(n?i=e.toString().split(""):i=e.toString().split(hH));var o=i.map(l=>({word:l,width:Xp(l,r).width})),s=n?0:Xp(" ",r).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Ope=(t,e,n,r,i)=>{var{maxLines:o,children:s,style:l,breakAll:c}=t,f=We(o),h=s,g=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce((z,G)=>{var{word:Ce,width:be}=G,ee=z[z.length-1];if(ee&&(r==null||i||ee.width+be+n<Number(r)))ee.words.push(Ce),ee.width+=be+n;else{var le={words:[Ce],width:be};z.push(le)}return z},[])},v=g(e),E=F=>F.reduce((U,z)=>U.width>z.width?U:z);if(!f||i)return v;var b=v.length>o||E(v).width>Number(r);if(!b)return v;for(var S="…",A=F=>{var U=h.slice(0,F),z=pH({breakAll:c,style:l,children:U+S}).wordsWithComputedWidth,G=g(z),Ce=G.length>o||E(G).width>Number(r);return[Ce,G]},I=0,D=h.length-1,k=0,q;I<=D&&k<=h.length-1;){var $=Math.floor((I+D)/2),H=$-1,[M,L]=A(H),[O]=A($);if(!M&&!O&&(I=$+1),M&&O&&(D=$-1),!M&&O){q=L;break}k++}return q||v},gV=t=>{var e=ir(t)?[]:t.toString().split(hH);return[{words:e}]},Lpe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:o,maxLines:s}=t;if((e||n)&&!cg.isSsr){var l,c,f=pH({breakAll:o,children:r,style:i});if(f){var{wordsWithComputedWidth:h,spaceWidth:g}=f;l=h,c=g}else return gV(r);return Ope({breakAll:o,children:r,maxLines:s,style:i},l,c,e,n)}return gV(r)},yV="#808080",ZR=R.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:o="0.71em",scaleToFit:s=!1,textAnchor:l="start",verticalAnchor:c="end",fill:f=yV}=t,h=mV(t,Mpe),g=R.useMemo(()=>Lpe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:s,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,s,h.style,h.width]),{dx:v,dy:E,angle:b,className:S,breakAll:A}=h,I=mV(h,Dpe);if(!os(n)||!os(r)||g.length===0)return null;var D=n+(We(v)?v:0),k=r+(We(E)?E:0),q;switch(c){case"start":q=bS("calc(".concat(o,")"));break;case"middle":q=bS("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:q=bS("calc(".concat(g.length-1," * -").concat(i,")"));break}var $=[];if(s){var H=g[0].width,{width:M}=h;$.push("scale(".concat(We(M)?M/H:1,")"))}return b&&$.push("rotate(".concat(b,", ").concat(D,", ").concat(k,")")),$.length&&(I.transform=$.join(" ")),R.createElement("text",hx({},tr(I,!0),{ref:e,x:D,y:k,className:Xt("recharts-text",S),textAnchor:l,fill:f.includes("url")?yV:f}),g.map((L,O)=>{var F=L.words.join(A?"":" ");return R.createElement("tspan",{x:D,dy:O===0?q:i,key:"".concat(F,"-").concat(O)},F)}))});ZR.displayName="Text";var Vpe=["labelRef"];function Upe(t,e){if(t==null)return{};var n,r,i=Fpe(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Fpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function vV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vV(Object(n),!0).forEach(function(r){Bpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bpe(t,e,n){return(e=qpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qpe(t){var e=$pe(t,"string");return typeof e=="symbol"?e:e+""}function $pe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bs(){return Bs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bs.apply(null,arguments)}var mH=R.createContext(null),zpe=t=>{var{x:e,y:n,width:r,height:i,children:o}=t,s=R.useMemo(()=>({x:e,y:n,width:r,height:i}),[e,n,r,i]);return R.createElement(mH.Provider,{value:s},o)},gH=()=>{var t=R.useContext(mH),e=XI();return t||e},Hpe=R.createContext(null),Gpe=()=>{var t=R.useContext(Hpe),e=ze(J$);return t||e},jpe=t=>{var{value:e,formatter:n}=t,r=ir(t.children)?e:t.children;return typeof n=="function"?n(r):r},e1=t=>t!=null&&typeof t=="function",Kpe=(t,e)=>{var n=bi(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Wpe=(t,e,n,r,i)=>{var{offset:o,className:s}=t,{cx:l,cy:c,innerRadius:f,outerRadius:h,startAngle:g,endAngle:v,clockWise:E}=i,b=(f+h)/2,S=Kpe(g,v),A=S>=0?1:-1,I,D;switch(e){case"insideStart":I=g+A*o,D=E;break;case"insideEnd":I=v-A*o,D=!E;break;case"end":I=v+A*o,D=E;break;default:throw new Error("Unsupported position ".concat(e))}D=S<=0?D:!D;var k=vr(l,c,b,I),q=vr(l,c,b,I+(D?1:-1)*359),$="M".concat(k.x,",").concat(k.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(D?0:1,`,
    `).concat(q.x,",").concat(q.y),H=ir(t.id)?xm("recharts-radial-line-"):t.id;return R.createElement("text",Bs({},r,{dominantBaseline:"central",className:Xt("recharts-radial-bar-label",s)}),R.createElement("defs",null,R.createElement("path",{id:H,d:$})),R.createElement("textPath",{xlinkHref:"#".concat(H)},n))},Ype=(t,e,n)=>{var{cx:r,cy:i,innerRadius:o,outerRadius:s,startAngle:l,endAngle:c}=t,f=(l+c)/2;if(n==="outside"){var{x:h,y:g}=vr(r,i,s+e,f);return{x:h,y:g,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var v=(o+s)/2,{x:E,y:b}=vr(r,i,v,f);return{x:E,y:b,textAnchor:"middle",verticalAnchor:"middle"}},yH=t=>"cx"in t&&We(t.cx),Jpe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,o;n!=null&&!yH(n)&&(o=n);var{x:s,y:l,width:c,height:f}=e,h=f>=0?1:-1,g=h*r,v=h>0?"end":"start",E=h>0?"start":"end",b=c>=0?1:-1,S=b*r,A=b>0?"end":"start",I=b>0?"start":"end";if(i==="top"){var D={x:s+c/2,y:l-h*r,textAnchor:"middle",verticalAnchor:v};return Sn(Sn({},D),o?{height:Math.max(l-o.y,0),width:c}:{})}if(i==="bottom"){var k={x:s+c/2,y:l+f+g,textAnchor:"middle",verticalAnchor:E};return Sn(Sn({},k),o?{height:Math.max(o.y+o.height-(l+f),0),width:c}:{})}if(i==="left"){var q={x:s-S,y:l+f/2,textAnchor:A,verticalAnchor:"middle"};return Sn(Sn({},q),o?{width:Math.max(q.x-o.x,0),height:f}:{})}if(i==="right"){var $={x:s+c+S,y:l+f/2,textAnchor:I,verticalAnchor:"middle"};return Sn(Sn({},$),o?{width:Math.max(o.x+o.width-$.x,0),height:f}:{})}var H=o?{width:c,height:f}:{};return i==="insideLeft"?Sn({x:s+S,y:l+f/2,textAnchor:I,verticalAnchor:"middle"},H):i==="insideRight"?Sn({x:s+c-S,y:l+f/2,textAnchor:A,verticalAnchor:"middle"},H):i==="insideTop"?Sn({x:s+c/2,y:l+g,textAnchor:"middle",verticalAnchor:E},H):i==="insideBottom"?Sn({x:s+c/2,y:l+f-g,textAnchor:"middle",verticalAnchor:v},H):i==="insideTopLeft"?Sn({x:s+S,y:l+g,textAnchor:I,verticalAnchor:E},H):i==="insideTopRight"?Sn({x:s+c-S,y:l+g,textAnchor:A,verticalAnchor:E},H):i==="insideBottomLeft"?Sn({x:s+S,y:l+f-g,textAnchor:I,verticalAnchor:v},H):i==="insideBottomRight"?Sn({x:s+c-S,y:l+f-g,textAnchor:A,verticalAnchor:v},H):i&&typeof i=="object"&&(We(i.x)||Lu(i.x))&&(We(i.y)||Lu(i.y))?Sn({x:s+To(i.x,c),y:l+To(i.y,f),textAnchor:"end",verticalAnchor:"end"},H):Sn({x:s+c/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},H)},Qpe={offset:5};function nl(t){var e=Ll(t,Qpe),{viewBox:n,position:r,value:i,children:o,content:s,className:l="",textBreakAll:c,labelRef:f}=e,h=Gpe(),g=gH(),v=r==="center"?g:h??g,E=n||v;if(!E||ir(i)&&ir(o)&&!R.isValidElement(s)&&typeof s!="function")return null;var b=Sn(Sn({},e),{},{viewBox:E});if(R.isValidElement(s)){var{labelRef:S}=b,A=Upe(b,Vpe);return R.cloneElement(s,A)}var I;if(typeof s=="function"){if(I=R.createElement(s,b),R.isValidElement(I))return I}else I=jpe(e);var D=yH(E),k=tr(e,!0);if(D&&(r==="insideStart"||r==="insideEnd"||r==="end"))return Wpe(e,r,I,k,E);var q=D?Ype(E,e.offset,e.position):Jpe(e,E);return R.createElement(ZR,Bs({ref:f,className:Xt("recharts-label",l)},k,q,{breakAll:c}),I)}nl.displayName="Label";var Xpe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?R.createElement(nl,Bs({key:"label-implicit"},r)):os(t)?R.createElement(nl,Bs({key:"label-implicit",value:t},r)):R.isValidElement(t)?t.type===nl?R.cloneElement(t,Sn({key:"label-implicit"},r)):R.createElement(nl,Bs({key:"label-implicit",content:t},r)):e1(t)?R.createElement(nl,Bs({key:"label-implicit",content:t},r)):t&&typeof t=="object"?R.createElement(nl,Bs({},t,{key:"label-implicit"},r)):null};function Zpe(t){var{label:e}=t,n=gH();return Xpe(e,n)||null}var SS={},AS={},_V;function eme(){return _V||(_V=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(AS)),AS}var xS={},TV;function tme(){return TV||(TV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(xS)),xS}var EV;function nme(){return EV||(EV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eme(),n=tme(),r=$I();function i(o){if(r.isArrayLike(o))return e.last(n.toArray(o))}t.last=i})(SS)),SS}var CS,wV;function rme(){return wV||(wV=1,CS=nme().last),CS}var ime=rme();const ome=as(ime);var sme=["valueAccessor"],ame=["dataKey","clockWise","id","textBreakAll"];function G_(){return G_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G_.apply(null,arguments)}function bV(t,e){if(t==null)return{};var n,r,i=lme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ume=t=>Array.isArray(t.value)?ome(t.value):t.value,vH=R.createContext(void 0),cme=vH.Provider,_H=R.createContext(void 0);_H.Provider;function fme(){return R.useContext(vH)}function dme(){return R.useContext(_H)}function Vv(t){var{valueAccessor:e=ume}=t,n=bV(t,sme),{dataKey:r,clockWise:i,id:o,textBreakAll:s}=n,l=bV(n,ame),c=fme(),f=dme(),h=c||f;return!h||!h.length?null:R.createElement(xl,{className:"recharts-label-list"},h.map((g,v)=>{var E,b=ir(r)?e(g,v):Hr(g&&g.payload,r),S=ir(o)?{}:{id:"".concat(o,"-").concat(v)};return R.createElement(nl,G_({},tr(g,!0),l,S,{fill:(E=n.fill)!==null&&E!==void 0?E:g.fill,parentViewBox:g.parentViewBox,value:b,textBreakAll:s,viewBox:g.viewBox,key:"label-".concat(v),index:v}))}))}Vv.displayName="LabelList";function hme(t){var{label:e}=t;return e?e===!0?R.createElement(Vv,{key:"labelList-implicit"}):R.isValidElement(e)||e1(e)?R.createElement(Vv,{key:"labelList-implicit",content:e}):typeof e=="object"?R.createElement(Vv,G_({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var pme={radiusAxis:{},angleAxis:{}},TH=Pi({name:"polarAxis",initialState:pme,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:JIe,removeRadiusAxis:QIe,addAngleAxis:XIe,removeAngleAxis:ZIe}=TH.actions,mme=TH.reducer,IS={},SV;function gme(){return SV||(SV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${o}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(IS)),IS}var RS,AV;function yme(){return AV||(AV=1,RS=gme().isPlainObject),RS}var vme=yme();const _me=as(vme);function xV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xV(Object(n),!0).forEach(function(r){Tme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tme(t,e,n){return(e=Eme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eme(t){var e=wme(t,"string");return typeof e=="symbol"?e:e+""}function wme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j_(){return j_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j_.apply(null,arguments)}var IV=(t,e,n,r,i)=>{var o=n-r,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+n,",").concat(e),s+="L ".concat(t+n-o/2,",").concat(e+i),s+="L ".concat(t+n-o/2-r,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},bme={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Sme=t=>{var e=Ll(t,bme),{x:n,y:r,upperWidth:i,lowerWidth:o,height:s,className:l}=e,{animationEasing:c,animationDuration:f,animationBegin:h,isUpdateAnimationActive:g}=e,v=R.useRef(),[E,b]=R.useState(-1),S=R.useRef(i),A=R.useRef(o),I=R.useRef(s),D=R.useRef(n),k=R.useRef(r),q=tR(t,"trapezoid-");if(R.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var Ce=v.current.getTotalLength();Ce&&b(Ce)}catch{}},[]),n!==+n||r!==+r||i!==+i||o!==+o||s!==+s||i===0&&o===0||s===0)return null;var $=Xt("recharts-trapezoid",l);if(!g)return R.createElement("g",null,R.createElement("path",j_({},tr(e,!0),{className:$,d:IV(n,r,i,o,s)})));var H=S.current,M=A.current,L=I.current,O=D.current,F=k.current,U="0px ".concat(E===-1?1:E,"px"),z="".concat(E,"px 0px"),G=B5(["strokeDasharray"],f,c);return R.createElement(eR,{animationId:q,key:q,canBegin:E>0,duration:f,easing:c,isActive:g,begin:h},Ce=>{var be=Br(H,i,Ce),ee=Br(M,o,Ce),le=Br(L,s,Ce),Se=Br(O,n,Ce),Ve=Br(F,r,Ce);v.current&&(S.current=be,A.current=ee,I.current=le,D.current=Se,k.current=Ve);var K=Ce>0?{transition:G,strokeDasharray:z}:{strokeDasharray:U};return R.createElement("path",j_({},tr(e,!0),{className:$,d:IV(Se,Ve,be,ee,le),ref:v,style:CV(CV({},K),e.style)}))})},Ame=["option","shapeType","propTransformer","activeClassName","isActive"];function xme(t,e){if(t==null)return{};var n,r,i=Cme(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function RV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RV(Object(n),!0).forEach(function(r){Ime(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ime(t,e,n){return(e=Rme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rme(t){var e=Pme(t,"string");return typeof e=="symbol"?e:e+""}function Pme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nme(t,e){return K_(K_({},e),t)}function Mme(t,e){return t==="symbols"}function PV(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return R.createElement(H5,n);case"trapezoid":return R.createElement(Sme,n);case"sector":return R.createElement(K5,n);case"symbols":if(Mme(e))return R.createElement(X3,n);break;default:return null}}function Dme(t){return R.isValidElement(t)?t.props:t}function kme(t){var{option:e,shapeType:n,propTransformer:r=Nme,activeClassName:i="recharts-active-shape",isActive:o}=t,s=xme(t,Ame),l;if(R.isValidElement(e))l=R.cloneElement(e,K_(K_({},s),Dme(e)));else if(typeof e=="function")l=e(s);else if(_me(e)&&typeof e!="boolean"){var c=r(e,s);l=R.createElement(PV,{shapeType:n,elementProps:c})}else{var f=s;l=R.createElement(PV,{shapeType:n,elementProps:f})}return o?R.createElement(xl,{className:i},l):l}var EH=(t,e)=>{var n=or();return(r,i)=>o=>{t==null||t(r,i,o),n(Bz({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},wH=t=>{var e=or();return(n,r)=>i=>{t==null||t(n,r,i),e(Ade())}},bH=(t,e)=>{var n=or();return(r,i)=>o=>{t==null||t(r,i,o),n(xde({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function Ome(t){var{fn:e,args:n}=t,r=or(),i=So();return R.useEffect(()=>{if(!i){var o=e(n);return r(wde(o)),()=>{r(bde(o))}}},[e,n,r,i]),null}var Lme=()=>{};function Vme(t){var{legendPayload:e}=t,n=or(),r=So();return R.useEffect(()=>r?Lme:(n(yae(e)),()=>{n(vae(e))}),[n,r,e]),null}var PS,Ume=()=>{var[t]=R.useState(()=>xm("uid-"));return t},Fme=(PS=o8.useId)!==null&&PS!==void 0?PS:Ume;function Bme(t,e){var n=Fme();return e||(t?"".concat(t,"-").concat(n):n)}var qme=R.createContext(void 0),$me=t=>{var{id:e,type:n,children:r}=t,i=Bme("recharts-".concat(n),e);return R.createElement(qme.Provider,{value:i},r(i))},zme={cartesianItems:[],polarItems:[]},SH=Pi({name:"graphicalItems",initialState:zme,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,i=Ws(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},removeCartesianGraphicalItem(t,e){var n=Ws(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=Ws(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:Hme,replaceCartesianGraphicalItem:Gme,removeCartesianGraphicalItem:jme,addPolarGraphicalItem:eRe,removePolarGraphicalItem:tRe}=SH.actions,Kme=SH.reducer;function Wme(t){var e=or(),n=R.useRef(null);return R.useEffect(()=>{n.current===null?e(Hme(t)):n.current!==t&&e(Gme({prev:n.current,next:t})),n.current=t},[e,t]),R.useEffect(()=>()=>{n.current&&(e(jme(n.current)),n.current=null)},[e]),null}function NV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(n),!0).forEach(function(r){Yme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yme(t,e,n){return(e=Jme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jme(t){var e=Qme(t,"string");return typeof e=="symbol"?e:e+""}function Qme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xme={xAxis:{},yAxis:{},zAxis:{}},AH=Pi({name:"cartesianAxis",initialState:Xme,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=MV(MV({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:Zme,removeXAxis:ege,addYAxis:tge,removeYAxis:nge,addZAxis:nRe,removeZAxis:rRe,updateYAxisWidth:rge}=AH.actions,ige=AH.reducer,oge=se([sr],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),sge=se([oge,ma,ga],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),xH=()=>ze(sge),age="Invariant failed";function lge(t,e){throw new Error(age)}var uge=["x","y"];function px(){return px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},px.apply(null,arguments)}function DV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(n),!0).forEach(function(r){cge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cge(t,e,n){return(e=fge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fge(t){var e=dge(t,"string");return typeof e=="symbol"?e:e+""}function dge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hge(t,e){if(t==null)return{};var n,r,i=pge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function mge(t,e){var{x:n,y:r}=t,i=hge(t,uge),o="".concat(n),s=parseInt(o,10),l="".concat(r),c=parseInt(l,10),f="".concat(e.height||i.height),h=parseInt(f,10),g="".concat(e.width||i.width),v=parseInt(g,10);return bp(bp(bp(bp(bp({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:h,width:v,name:e.name,radius:e.radius})}function t1(t){return R.createElement(kme,px({shapeType:"rectangle",propTransformer:mge,activeClassName:"recharts-active-bar"},t))}var gge=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(We(e))return e;var o=We(r)||ir(r);return o?e(r,i):(o||lge(),n)}},yge={},CH=Pi({name:"errorBars",initialState:yge,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(o=>o.dataKey===r.dataKey&&o.direction===r.direction?i:o))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:iRe,replaceErrorBar:oRe,removeErrorBar:sRe}=CH.actions,vge=CH.reducer,_ge=["children"];function Tge(t,e){if(t==null)return{};var n,r,i=Ege(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ege(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wge={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},bge=R.createContext(wge);function Sge(t){var{children:e}=t,n=Tge(t,_ge);return R.createElement(bge.Provider,{value:n},e)}function IH(t,e){var n,r,i=ze(f=>Bl(f,t)),o=ze(f=>ql(f,e)),s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:mi.allowDataOverflow,l=(r=o==null?void 0:o.allowDataOverflow)!==null&&r!==void 0?r:gi.allowDataOverflow,c=s||l;return{needClip:c,needClipX:s,needClipY:l}}function Age(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=xH(),{needClipX:o,needClipY:s,needClip:l}=IH(e,n);if(!l)return null;var{x:c,y:f,width:h,height:g}=i;return R.createElement("clipPath",{id:"clipPath-".concat(r)},R.createElement("rect",{x:o?c:c-h/2,y:s?f:f-g/2,width:o?h:h*2,height:s?g:g*2}))}var xge=["onMouseEnter","onMouseLeave","onClick"],Cge=["value","background","tooltipPosition"],Ige=["id"],Rge=["onMouseEnter","onClick","onMouseLeave"];function Cl(){return Cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cl.apply(null,arguments)}function kV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(n),!0).forEach(function(r){Pge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pge(t,e,n){return(e=Nge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nge(t){var e=Mge(t,"string");return typeof e=="symbol"?e:e+""}function Mge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W_(t,e){if(t==null)return{};var n,r,i=Dge(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kge=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:o}=t;return[{inactive:o,dataKey:e,type:i,color:r,value:L5(n,e),payload:t}]};function Oge(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:o,hide:s,unit:l}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:L5(o,e),hide:s,type:t.tooltipType,color:t.fill,unit:l}}}function Lge(t){var e=ze(Ad),{data:n,dataKey:r,background:i,allOtherBarProps:o}=t,{onMouseEnter:s,onMouseLeave:l,onClick:c}=o,f=W_(o,xge),h=EH(s,r),g=wH(l),v=bH(c,r);if(!i||n==null)return null;var E=tr(i,!1);return R.createElement(R.Fragment,null,n.map((b,S)=>{var{value:A,background:I,tooltipPosition:D}=b,k=W_(b,Cge);if(!I)return null;var q=h(b,S),$=g(b,S),H=v(b,S),M=qr(qr(qr(qr(qr({option:i,isActive:String(S)===e},k),{},{fill:"#eee"},I),E),UI(f,b,S)),{},{onMouseEnter:q,onMouseLeave:$,onClick:H,dataKey:r,index:S,className:"recharts-bar-background-rectangle"});return R.createElement(t1,Cl({key:"background-bar-".concat(S)},M))}))}function Vge(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(o=>{var s={x:o.x,y:o.y,width:o.width,height:o.height};return qr(qr({},s),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:s,fill:o.fill})});return R.createElement(cme,{value:e?i:void 0},n)}function Uge(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:o,dataKey:s}=t,l=ze(Ad),c=ze(Zz),f=n&&String(o)===l&&(c==null||s===c),h=f?n:e;return R.createElement(t1,Cl({},r,i,{isActive:f,option:h,index:o,dataKey:s}))}function Fge(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:o}=t;return R.createElement(t1,Cl({},n,r,{isActive:!1,option:e,index:i,dataKey:o}))}function Bge(t){var{data:e,props:n}=t,r=W0(n),{id:i}=r,o=W_(r,Ige),{shape:s,dataKey:l,activeBar:c}=n,{onMouseEnter:f,onClick:h,onMouseLeave:g}=n,v=W_(n,Rge),E=EH(f,l),b=wH(g),S=bH(h,l);return e?R.createElement(R.Fragment,null,e.map((A,I)=>R.createElement(xl,Cl({className:"recharts-bar-rectangle"},UI(v,A,I),{onMouseEnter:E(A,I),onMouseLeave:b(A,I),onClick:S(A,I),key:"rectangle-".concat(A==null?void 0:A.x,"-").concat(A==null?void 0:A.y,"-").concat(A==null?void 0:A.value,"-").concat(I)}),c?R.createElement(Uge,{shape:s,activeBar:c,baseProps:o,entry:A,index:I,dataKey:l}):R.createElement(Fge,{shape:s,baseProps:o,entry:A,index:I,dataKey:l})))):null}function qge(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:o,animationBegin:s,animationDuration:l,animationEasing:c,onAnimationEnd:f,onAnimationStart:h}=e,g=n.current,v=tR(e,"recharts-bar-"),[E,b]=R.useState(!1),S=!E,A=R.useCallback(()=>{typeof f=="function"&&f(),b(!1)},[f]),I=R.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return R.createElement(Vge,{showLabels:S,rects:r},R.createElement(eR,{animationId:v,begin:s,duration:l,isActive:o,easing:c,onAnimationEnd:A,onAnimationStart:I,key:v},D=>{var k=D===1?r:r==null?void 0:r.map((q,$)=>{var H=g&&g[$];if(H)return qr(qr({},q),{},{x:Br(H.x,q.x,D),y:Br(H.y,q.y,D),width:Br(H.width,q.width,D),height:Br(H.height,q.height,D)});if(i==="horizontal"){var M=Br(0,q.height,D);return qr(qr({},q),{},{y:q.y+q.height-M,height:M})}var L=Br(0,q.width,D);return qr(qr({},q),{},{width:L})});return D>0&&(n.current=k??null),k==null?null:R.createElement(xl,null,R.createElement(Bge,{props:e,data:k}))}),R.createElement(hme,{label:e.label}),e.children)}function $ge(t){var e=R.useRef(null);return R.createElement(qge,{previousRectanglesRef:e,props:t})}var RH=0,zge=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:Hr(t,e)}};class Hge extends R.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:o,yAxisId:s,needClip:l,background:c,id:f}=this.props;if(e||n==null)return null;var h=Xt("recharts-bar",i),g=f;return R.createElement(xl,{className:h,id:f},l&&R.createElement("defs",null,R.createElement(Age,{clipPathId:g,xAxisId:o,yAxisId:s})),R.createElement(xl,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(g,")"):void 0},R.createElement(Lge,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),R.createElement($ge,this.props)))}}var Gge={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!cg.isSsr,legendType:"rect",minPointSize:RH,xAxisId:0,yAxisId:0};function jge(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:l,animationDuration:c,animationEasing:f,isAnimationActive:h}=t,{needClip:g}=IH(e,n),v=ZI(),E=So(),b=Ore(t.children,uH),S=ze(D=>_ye(D,e,n,E,t.id,b));if(v!=="vertical"&&v!=="horizontal")return null;var A,I=S==null?void 0:S[0];return I==null||I.height==null||I.width==null?A=0:A=v==="vertical"?I.height/2:I.width/2,R.createElement(Sge,{xAxisId:e,yAxisId:n,data:S,dataPointFormatter:zge,errorBarOffset:A},R.createElement(Hge,Cl({},t,{layout:v,needClip:g,data:S,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:o,activeBar:s,animationBegin:l,animationDuration:c,animationEasing:f,isAnimationActive:h})))}function Kge(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:o,xAxis:s,yAxis:l,xAxisTicks:c,yAxisTicks:f,stackedData:h,displayedData:g,offset:v,cells:E,parentViewBox:b}=t,S=e==="horizontal"?l:s,A=h?S.scale.domain():null,I=jse({numericAxis:S});return g.map((D,k)=>{var q,$,H,M,L,O;h?q=Bse(h[k],A):(q=Hr(D,n),Array.isArray(q)||(q=[I,q]));var F=gge(r,RH)(q[1],k);if(e==="horizontal"){var U,[z,G]=[l.scale(q[0]),l.scale(q[1])];$=IO({axis:s,ticks:c,bandSize:o,offset:i.offset,entry:D,index:k}),H=(U=G??z)!==null&&U!==void 0?U:void 0,M=i.size;var Ce=z-G;if(L=eo(Ce)?0:Ce,O={x:$,y:v.top,width:M,height:v.height},Math.abs(F)>0&&Math.abs(L)<Math.abs(F)){var be=bi(L||F)*(Math.abs(F)-Math.abs(L));H-=be,L+=be}}else{var[ee,le]=[s.scale(q[0]),s.scale(q[1])];if($=ee,H=IO({axis:l,ticks:f,bandSize:o,offset:i.offset,entry:D,index:k}),M=le-ee,L=i.size,O={x:v.left,y:H,width:v.width,height:L},Math.abs(F)>0&&Math.abs(M)<Math.abs(F)){var Se=bi(M||F)*(Math.abs(F)-Math.abs(M));M+=Se}}if($==null||H==null||M==null||L==null)return null;var Ve=qr(qr({},D),{},{x:$,y:H,width:M,height:L,value:h?q:q[1],payload:D,background:O,tooltipPosition:{x:$+M/2,y:H+L/2},parentViewBox:b},E&&E[k]&&E[k].props);return Ve}).filter(Boolean)}function PH(t){var e=Ll(t,Gge),n=So();return R.createElement($me,{id:e.id,type:"bar"},r=>R.createElement(R.Fragment,null,R.createElement(Vme,{legendPayload:kge(e)}),R.createElement(Ome,{fn:Oge,args:e}),R.createElement(Wme,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Gse(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),R.createElement(jge,Cl({},e,{id:r}))))}PH.displayName="Bar";function OV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OV(Object(n),!0).forEach(function(r){Wge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wge(t,e,n){return(e=Yge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yge(t){var e=Jge(t,"string");return typeof e=="symbol"?e:e+""}function Jge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qge=(t,e)=>e,Xge=(t,e,n)=>n,Zge=(t,e,n,r)=>r,eye=(t,e,n,r,i)=>i,Eg=se([LR,eye],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),tye=se([Eg],t=>t==null?void 0:t.maxBarSize),nye=(t,e,n,r,i,o)=>o,LV=(t,e,n)=>{var r=n??t;if(!ir(r))return To(r,e,0)},rye=se([Rt,LR,Qge,Xge,Zge],(t,e,n,r,i)=>e.filter(o=>t==="horizontal"?o.xAxisId===n:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),iye=(t,e,n,r)=>{var i=Rt(t);return i==="horizontal"?lx(t,"yAxis",n,r):lx(t,"xAxis",e,r)},oye=(t,e,n)=>{var r=Rt(t);return r==="horizontal"?zL(t,"xAxis",e):zL(t,"yAxis",n)},sye=(t,e,n)=>{var r={},i=t.filter(_T),o=t.filter(f=>f.stackId==null),s=i.reduce((f,h)=>(f[h.stackId]||(f[h.stackId]=[]),f[h.stackId].push(h),f),r),l=Object.entries(s).map(f=>{var[h,g]=f,v=g.map(b=>b.dataKey),E=LV(e,n,g[0].barSize);return{stackId:h,dataKeys:v,barSize:E}}),c=o.map(f=>{var h=[f.dataKey].filter(v=>v!=null),g=LV(e,n,f.barSize);return{stackId:void 0,dataKeys:h,barSize:g}});return[...l,...c]},aye=se([rye,wfe,oye],sye),lye=(t,e,n,r,i)=>{var o,s,l=Eg(t,e,n,r,i);if(l!=null){var c=Rt(t),f=z$(t),{maxBarSize:h}=l,g=ir(h)?f:h,v,E;return c==="horizontal"?(v=Sd(t,"xAxis",e,r),E=bd(t,"xAxis",e,r)):(v=Sd(t,"yAxis",n,r),E=bd(t,"yAxis",n,r)),(o=(s=JI(v,E,!0))!==null&&s!==void 0?s:g)!==null&&o!==void 0?o:0}},NH=(t,e,n,r)=>{var i=Rt(t),o,s;return i==="horizontal"?(o=Sd(t,"xAxis",e,r),s=bd(t,"xAxis",e,r)):(o=Sd(t,"yAxis",n,r),s=bd(t,"yAxis",n,r)),JI(o,s)};function uye(t,e,n,r,i){var o=r.length;if(!(o<1)){var s=To(t,n,0,!0),l,c=[];if(Ri(r[0].barSize)){var f=!1,h=n/o,g=r.reduce((I,D)=>I+(D.barSize||0),0);g+=(o-1)*s,g>=n&&(g-=(o-1)*s,s=0),g>=n&&h>0&&(f=!0,h*=.9,g=o*h);var v=(n-g)/2>>0,E={offset:v-s,size:0};l=r.reduce((I,D)=>{var k,q={stackId:D.stackId,dataKeys:D.dataKeys,position:{offset:E.offset+E.size+s,size:f?h:(k=D.barSize)!==null&&k!==void 0?k:0}},$=[...I,q];return E=$[$.length-1].position,$},c)}else{var b=To(e,n,0,!0);n-2*b-(o-1)*s<=0&&(s=0);var S=(n-2*b-(o-1)*s)/o;S>1&&(S>>=0);var A=Ri(i)?Math.min(S,i):S;l=r.reduce((I,D,k)=>[...I,{stackId:D.stackId,dataKeys:D.dataKeys,position:{offset:b+(S+s)*k+(S-A)/2,size:A}}],c)}return l}}var cye=(t,e,n,r,i,o,s)=>{var l=ir(s)?e:s,c=uye(n,r,i!==o?i:o,t,l);return i!==o&&c!=null&&(c=c.map(f=>mv(mv({},f),{},{position:mv(mv({},f.position),{},{offset:f.position.offset-i/2})}))),c},fye=se([aye,z$,Efe,H$,lye,NH,tye],cye),dye=(t,e,n,r)=>Sd(t,"xAxis",e,r),hye=(t,e,n,r)=>Sd(t,"yAxis",n,r),pye=(t,e,n,r)=>bd(t,"xAxis",e,r),mye=(t,e,n,r)=>bd(t,"yAxis",n,r),gye=se([fye,Eg],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),yye=(t,e)=>{var n=kR(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:o}=i;if(o)return o.find(s=>s.key===n)}}}},vye=se([iye,Eg],yye),_ye=se([sr,QI,dye,hye,pye,mye,gye,Rt,AR,NH,vye,Eg,nye],(t,e,n,r,i,o,s,l,c,f,h,g,v)=>{var{chartData:E,dataStartIndex:b,dataEndIndex:S}=c;if(!(g==null||s==null||e==null||l!=="horizontal"&&l!=="vertical"||n==null||r==null||i==null||o==null||f==null)){var{data:A}=g,I;if(A!=null&&A.length>0?I=A:I=E==null?void 0:E.slice(b,S+1),I!=null)return Kge({layout:l,barSettings:g,pos:s,parentViewBox:e,bandSize:f,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:h,displayedData:I,offset:t,cells:v})}}),Tye=t=>{var{chartData:e}=t,n=or(),r=So();return R.useEffect(()=>r?()=>{}:(n(XL(e)),()=>{n(XL(void 0))}),[e,n,r]),null},VV={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},MH=Pi({name:"brush",initialState:VV,reducers:{setBrushSettings(t,e){return e.payload==null?VV:e.payload}}}),{setBrushSettings:aRe}=MH.actions,Eye=MH.reducer;function wye(t,e,n){return(e=bye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bye(t){var e=Sye(t,"string");return typeof e=="symbol"?e:e+""}function Sye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class n1{static create(e){return new n1(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}wye(n1,"EPS",1e-4);function Aye(t){return(t%180+180)%180}var xye=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Aye(i),s=o*Math.PI/180,l=Math.atan(r/n),c=s>l&&s<Math.PI-l?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},Cye={dots:[],areas:[],lines:[]},DH=Pi({name:"referenceElements",initialState:Cye,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ws(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ws(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ws(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:lRe,removeDot:uRe,addArea:cRe,removeArea:fRe,addLine:dRe,removeLine:hRe}=DH.actions,Iye=DH.reducer,Rye=R.createContext(void 0),Pye=t=>{var{children:e}=t,[n]=R.useState("".concat(xm("recharts"),"-clip")),r=xH();if(r==null)return null;var{x:i,y:o,width:s,height:l}=r;return R.createElement(Rye.Provider,{value:n},R.createElement("defs",null,R.createElement("clipPath",{id:n},R.createElement("rect",{x:i,y:o,height:l,width:s}))),e)};function NS(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function kH(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Nye(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return xye(r,n)}function Mye(t,e,n){var r=n==="width",{x:i,y:o,width:s,height:l}=t;return e===1?{start:r?i:o,end:r?i+s:o+l}:{start:r?i+s:o+l,end:r?i:o}}function Y_(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Dye(t,e){return kH(t,e+1)}function kye(t,e,n,r,i){for(var o=(r||[]).slice(),{start:s,end:l}=e,c=0,f=1,h=s,g=function(){var b=r==null?void 0:r[c];if(b===void 0)return{v:kH(r,f)};var S=c,A,I=()=>(A===void 0&&(A=n(b,S)),A),D=b.coordinate,k=c===0||Y_(t,D,I,h,l);k||(c=0,h=s,f+=1),k&&(h=D+t*(I()/2+i),c+=f)},v;f<=o.length;)if(v=g(),v)return v.v;return[]}function UV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UV(Object(n),!0).forEach(function(r){Oye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oye(t,e,n){return(e=Lye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lye(t){var e=Vye(t,"string");return typeof e=="symbol"?e:e+""}function Vye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uye(t,e,n,r,i){for(var o=(r||[]).slice(),s=o.length,{start:l}=e,{end:c}=e,f=function(v){var E=o[v],b,S=()=>(b===void 0&&(b=n(E,v)),b);if(v===s-1){var A=t*(E.coordinate+t*S()/2-c);o[v]=E=Sr(Sr({},E),{},{tickCoord:A>0?E.coordinate-A*t:E.coordinate})}else o[v]=E=Sr(Sr({},E),{},{tickCoord:E.coordinate});var I=Y_(t,E.tickCoord,S,l,c);I&&(c=E.tickCoord-t*(S()/2+i),o[v]=Sr(Sr({},E),{},{isShow:!0}))},h=s-1;h>=0;h--)f(h);return o}function Fye(t,e,n,r,i,o){var s=(r||[]).slice(),l=s.length,{start:c,end:f}=e;if(o){var h=r[l-1],g=n(h,l-1),v=t*(h.coordinate+t*g/2-f);s[l-1]=h=Sr(Sr({},h),{},{tickCoord:v>0?h.coordinate-v*t:h.coordinate});var E=Y_(t,h.tickCoord,()=>g,c,f);E&&(f=h.tickCoord-t*(g/2+i),s[l-1]=Sr(Sr({},h),{},{isShow:!0}))}for(var b=o?l-1:l,S=function(D){var k=s[D],q,$=()=>(q===void 0&&(q=n(k,D)),q);if(D===0){var H=t*(k.coordinate-t*$()/2-c);s[D]=k=Sr(Sr({},k),{},{tickCoord:H<0?k.coordinate-H*t:k.coordinate})}else s[D]=k=Sr(Sr({},k),{},{tickCoord:k.coordinate});var M=Y_(t,k.tickCoord,$,c,f);M&&(c=k.tickCoord+t*($()/2+i),s[D]=Sr(Sr({},k),{},{isShow:!0}))},A=0;A<b;A++)S(A);return s}function Bye(t,e,n){var{tick:r,ticks:i,viewBox:o,minTickGap:s,orientation:l,interval:c,tickFormatter:f,unit:h,angle:g}=t;if(!i||!i.length||!r)return[];if(We(c)||cg.isSsr){var v;return(v=Dye(i,We(c)?c:0))!==null&&v!==void 0?v:[]}var E=[],b=l==="top"||l==="bottom"?"width":"height",S=h&&b==="width"?Xp(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},A=(k,q)=>{var $=typeof f=="function"?f(k.value,q):k.value;return b==="width"?Nye(Xp($,{fontSize:e,letterSpacing:n}),S,g):Xp($,{fontSize:e,letterSpacing:n})[b]},I=i.length>=2?bi(i[1].coordinate-i[0].coordinate):1,D=Mye(o,I,b);return c==="equidistantPreserveStart"?kye(I,D,A,i,s):(c==="preserveStart"||c==="preserveStartEnd"?E=Fye(I,D,A,i,s,c==="preserveStartEnd"):E=Uye(I,D,A,i,s),E.filter(k=>k.isShow))}var qye=["viewBox"],$ye=["viewBox"];function Mf(){return Mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mf.apply(null,arguments)}function FV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FV(Object(n),!0).forEach(function(r){r1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BV(t,e){if(t==null)return{};var n,r,i=zye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function r1(t,e,n){return(e=Hye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hye(t){var e=Gye(t,"string");return typeof e=="symbol"?e:e+""}function Gye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Xd extends R.Component{constructor(e){super(e),this.tickRefs=R.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,n){var{viewBox:r}=e,i=BV(e,qye),o=this.props,{viewBox:s}=o,l=BV(o,$ye);return!NS(r,s)||!NS(i,l)||!NS(n,this.state)}getTickLineCoord(e){var{x:n,y:r,width:i,height:o,orientation:s,tickSize:l,mirror:c,tickMargin:f}=this.props,h,g,v,E,b,S,A=c?-1:1,I=e.tickSize||l,D=We(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=g=e.coordinate,E=r+ +!c*o,v=E-A*I,S=v-A*f,b=D;break;case"left":v=E=e.coordinate,g=n+ +!c*i,h=g-A*I,b=h-A*f,S=D;break;case"right":v=E=e.coordinate,g=n+ +c*i,h=g+A*I,b=h+A*f,S=D;break;default:h=g=e.coordinate,E=r+ +c*o,v=E+A*I,S=v+A*f,b=D;break}return{line:{x1:h,y1:v,x2:g,y2:E},tick:{x:b,y:S}}}getTickTextAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":return n?"start":"end";case"right":return n?"end":"start";default:return"middle"}}getTickVerticalAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:e,y:n,width:r,height:i,orientation:o,mirror:s,axisLine:l}=this.props,c=qn(qn(qn({},tr(this.props,!1)),tr(l,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var f=+(o==="top"&&!s||o==="bottom"&&s);c=qn(qn({},c),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(o==="left"&&!s||o==="right"&&s);c=qn(qn({},c),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return R.createElement("line",Mf({},c,{className:Xt("recharts-cartesian-axis-line",gd(l,"className"))}))}static renderTickItem(e,n,r){var i,o=Xt(n.className,"recharts-cartesian-axis-tick-value");if(R.isValidElement(e))i=R.cloneElement(e,qn(qn({},n),{},{className:o}));else if(typeof e=="function")i=e(qn(qn({},n),{},{className:o}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Xt(s,e.className)),i=R.createElement(ZR,Mf({},n,{className:s}),r)}return i}renderTicks(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:o,tick:s,tickFormatter:l,unit:c,padding:f,tickTextProps:h}=this.props,g=Bye(qn(qn({},this.props),{},{ticks:r}),e,n),v=this.getTickTextAnchor(),E=this.getTickVerticalAnchor(),b=W0(this.props),S=tr(s,!1),A=qn(qn({},b),{},{fill:"none"},tr(i,!1)),I=g.map((D,k)=>{var{line:q,tick:$}=this.getTickLineCoord(D),H=qn(qn(qn(qn({textAnchor:v,verticalAnchor:E},b),{},{stroke:"none",fill:o},S),$),{},{index:k,payload:D,visibleTicksCount:g.length,tickFormatter:l,padding:f},h);return R.createElement(xl,Mf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(D.value,"-").concat(D.coordinate,"-").concat(D.tickCoord)},UI(this.props,D,k)),i&&R.createElement("line",Mf({},A,q,{className:Xt("recharts-cartesian-axis-tick-line",gd(i,"className"))})),s&&Xd.renderTickItem(s,H,"".concat(typeof l=="function"?l(D.value,k):D.value).concat(c||"")))});return I.length>0?R.createElement("g",{className:"recharts-cartesian-axis-ticks"},I):null}render(){var{axisLine:e,width:n,height:r,className:i,hide:o}=this.props;if(o)return null;var{ticks:s}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:R.createElement(xl,{className:Xt("recharts-cartesian-axis",i),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var f=c[0];if(f){var h=window.getComputedStyle(f).fontSize,g=window.getComputedStyle(f).letterSpacing;(h!==this.state.fontSize||g!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(f).fontSize,letterSpacing:window.getComputedStyle(f).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),R.createElement(zpe,{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height},R.createElement(Zpe,{label:this.props.label}),this.props.children))}}r1(Xd,"displayName","CartesianAxis");r1(Xd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var jye=["children"],Kye=["dangerouslySetInnerHTML","ticks"],Wye=["id"];function OH(t,e,n){return(e=Yye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yye(t){var e=Jye(t,"string");return typeof e=="symbol"?e:e+""}function Jye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mx(){return mx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mx.apply(null,arguments)}function gx(t,e){if(t==null)return{};var n,r,i=Qye(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Qye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Xye(t){var e=or(),n=R.useMemo(()=>{var{children:r}=t,i=gx(t,jye);return i},[t]);return R.useEffect(()=>(e(Zme(n)),()=>{e(ege(n))}),[n,e]),t.children}var Zye=t=>{var{xAxisId:e,className:n}=t,r=ze(QI),i=So(),o="xAxis",s=ze(A=>Yd(A,o,e,i)),l=ze(A=>kz(A,o,e,i)),c=ze(A=>Pz(A,e)),f=ze(A=>hde(A,e)),h=ze(A=>Z$(A,e));if(c==null||f==null||h==null)return null;var{dangerouslySetInnerHTML:g,ticks:v}=t,E=gx(t,Kye),{id:b}=h,S=gx(h,Wye);return R.createElement(Xd,mx({},E,S,{scale:s,x:f.x,y:f.y,width:c.width,height:c.height,className:Xt("recharts-".concat(o," ").concat(o),n),viewBox:r,ticks:l}))},eve=t=>{var e,n,r,i,o;return R.createElement(Xye,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter},R.createElement(Zye,t))};class i1 extends R.Component{render(){return R.createElement(eve,this.props)}}OH(i1,"displayName","XAxis");OH(i1,"defaultProps",{allowDataOverflow:mi.allowDataOverflow,allowDecimals:mi.allowDecimals,allowDuplicatedCategory:mi.allowDuplicatedCategory,height:mi.height,hide:!1,mirror:mi.mirror,orientation:mi.orientation,padding:mi.padding,reversed:mi.reversed,scale:mi.scale,tickCount:mi.tickCount,type:mi.type,xAxisId:0});var tve=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:o=0}=t,s=0;if(e){e.forEach(h=>{if(h){var g=h.getBoundingClientRect();g.width>s&&(s=g.width)}});var l=n?n.getBoundingClientRect().width:0,c=i+o,f=s+c+l+(n?r:0);return Math.round(f)}return 0},nve=["dangerouslySetInnerHTML","ticks"],rve=["id"];function LH(t,e,n){return(e=ive(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ive(t){var e=ove(t,"string");return typeof e=="symbol"?e:e+""}function ove(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yx(){return yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yx.apply(null,arguments)}function qV(t,e){if(t==null)return{};var n,r,i=sve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ave(t){var e=or();return R.useEffect(()=>(e(tge(t)),()=>{e(nge(t))}),[t,e]),null}var lve=t=>{var e,{yAxisId:n,className:r,width:i,label:o}=t,s=R.useRef(null),l=R.useRef(null),c=ze(QI),f=So(),h=or(),g="yAxis",v=ze(H=>Yd(H,g,n,f)),E=ze(H=>Nz(H,n)),b=ze(H=>pde(H,n)),S=ze(H=>kz(H,g,n,f)),A=ze(H=>ez(H,n));if(R.useLayoutEffect(()=>{var H;if(!(i!=="auto"||!E||e1(o)||R.isValidElement(o)||A==null)){var M=s.current,L=M==null||(H=M.tickRefs)===null||H===void 0?void 0:H.current,{tickSize:O,tickMargin:F}=M.props,U=tve({ticks:L,label:l.current,labelGapWithTick:5,tickSize:O,tickMargin:F});Math.round(E.width)!==Math.round(U)&&h(rge({id:n,width:U}))}},[s,s==null||(e=s.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,E==null?void 0:E.width,E,h,o,n,i]),E==null||b==null||A==null)return null;var{dangerouslySetInnerHTML:I,ticks:D}=t,k=qV(t,nve),{id:q}=A,$=qV(A,rve);return R.createElement(Xd,yx({},k,$,{ref:s,labelRef:l,scale:v,x:b.x,y:b.y,tickTextProps:i==="auto"?{width:void 0}:{width:i},width:E.width,height:E.height,className:Xt("recharts-".concat(g," ").concat(g),r),viewBox:c,ticks:S}))},uve=t=>{var e,n,r,i,o;return R.createElement(R.Fragment,null,R.createElement(ave,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(o=t.tick)!==null&&o!==void 0?o:!0,tickFormatter:t.tickFormatter}),R.createElement(lve,t))},cve={allowDataOverflow:gi.allowDataOverflow,allowDecimals:gi.allowDecimals,allowDuplicatedCategory:gi.allowDuplicatedCategory,hide:!1,mirror:gi.mirror,orientation:gi.orientation,padding:gi.padding,reversed:gi.reversed,scale:gi.scale,tickCount:gi.tickCount,type:gi.type,width:gi.width,yAxisId:0};class o1 extends R.Component{render(){return R.createElement(uve,this.props)}}LH(o1,"displayName","YAxis");LH(o1,"defaultProps",cve);var MS={exports:{}},DS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $V;function fve(){if($V)return DS;$V=1;var t=xd();function e(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,o=t.useEffect,s=t.useMemo,l=t.useDebugValue;return DS.useSyncExternalStoreWithSelector=function(c,f,h,g,v){var E=i(null);if(E.current===null){var b={hasValue:!1,value:null};E.current=b}else b=E.current;E=s(function(){function A($){if(!I){if(I=!0,D=$,$=g($),v!==void 0&&b.hasValue){var H=b.value;if(v(H,$))return k=H}return k=$}if(H=k,n(D,$))return H;var M=g($);return v!==void 0&&v(H,M)?(D=$,H):(D=$,k=M)}var I=!1,D,k,q=h===void 0?null:h;return[function(){return A(f())},q===null?void 0:function(){return A(q())}]},[f,h,g,v]);var S=r(c,E[0],E[1]);return o(function(){b.hasValue=!0,b.value=S},[S]),l(S),S},DS}var zV;function dve(){return zV||(zV=1,MS.exports=fve()),MS.exports}dve();function hve(t){t()}function pve(){let t=null,e=null;return{clear(){t=null,e=null},notify(){hve(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var HV={notify(){},get:()=>[]};function mve(t,e){let n,r=HV,i=0,o=!1;function s(S){h();const A=r.subscribe(S);let I=!1;return()=>{I||(I=!0,A(),g())}}function l(){r.notify()}function c(){b.onStateChange&&b.onStateChange()}function f(){return o}function h(){i++,n||(n=t.subscribe(c),r=pve())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=HV)}function v(){o||(o=!0,h())}function E(){o&&(o=!1,g())}const b={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:f,trySubscribe:v,tryUnsubscribe:E,getListeners:()=>r};return b}var gve=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yve=gve(),vve=()=>typeof navigator<"u"&&navigator.product==="ReactNative",_ve=vve(),Tve=()=>yve||_ve?R.useLayoutEffect:R.useEffect,Eve=Tve(),kS=Symbol.for("react-redux-context"),OS=typeof globalThis<"u"?globalThis:{};function wve(){if(!R.createContext)return{};const t=OS[kS]??(OS[kS]=new Map);let e=t.get(R.createContext);return e||(e=R.createContext(null),t.set(R.createContext,e)),e}var bve=wve();function Sve(t){const{children:e,context:n,serverState:r,store:i}=t,o=R.useMemo(()=>{const c=mve(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=R.useMemo(()=>i.getState(),[i]);Eve(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,s]);const l=n||bve;return R.createElement(l.Provider,{value:o},e)}var Ave=Sve,xve=(t,e)=>e,s1=se([xve,Rt,J$,Gn,Yz,va,vhe,sr],bhe),a1=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},VH=to("mouseClick"),UH=lg();UH.startListening({actionCreator:VH,effect:(t,e)=>{var n=t.payload,r=s1(e.getState(),a1(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(Cde({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var vx=to("mouseMove"),FH=lg();FH.startListening({actionCreator:vx,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=HR(r,r.tooltip.settings.shared),o=s1(r,a1(n));i==="axis"&&((o==null?void 0:o.activeIndex)!=null?e.dispatch($z({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(qz()))}});function Cve(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var GV={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},BH=Pi({name:"rootProps",initialState:GV,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:GV.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),Ive=BH.reducer,{updateOptions:Rve}=BH.actions,qH=Pi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:pRe}=qH.actions,Pve=qH.reducer,$H=to("keyDown"),zH=to("focus"),l1=lg();l1.startListening({actionCreator:$H,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,o=t.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var s=Number(GR(i,Qd(n))),l=va(n);if(o==="Enter"){var c=H_(n,"axis","hover",String(i.index));e.dispatch(cx({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var f=vde(n),h=f==="left-to-right"?1:-1,g=o==="ArrowRight"?1:-1,v=s+g*h;if(!(l==null||v>=l.length||v<0)){var E=H_(n,"axis","hover",String(v));e.dispatch(cx({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:E}))}}}}});l1.startListening({actionCreator:zH,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var o="0",s=H_(n,"axis","hover",String(o));e.dispatch(cx({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:s}))}}}});var Hi=to("externalEvent"),HH=lg();HH.startListening({actionCreator:Hi,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:uhe(n),activeDataKey:Zz(n),activeIndex:Ad(n),activeLabel:Xz(n),activeTooltipIndex:Ad(n),isTooltipActive:che(n)};t.payload.handler(r,t.payload.reactEvent)}}});var Nve=se([Jd],t=>t.tooltipItemPayloads),Mve=se([Nve,_g,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:o}=i;if(o!=null){var s=e(o,n);return s}}}),GH=to("touchMove"),jH=lg();jH.startListening({actionCreator:GH,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=HR(r,r.tooltip.settings.shared);if(i==="axis"){var o=s1(r,a1({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch($z({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var s,l=n.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var f=c.getAttribute(eae),h=(s=c.getAttribute(tae))!==null&&s!==void 0?s:void 0,g=Mve(e.getState(),f,h);e.dispatch(Bz({activeDataKey:h,activeIndex:f,activeCoordinate:g}))}}});var Dve=d5({brush:Eye,cartesianAxis:ige,chartData:Bhe,errorBars:vge,graphicalItems:Kme,layout:bse,legend:_ae,options:Ohe,polarAxis:mme,polarOptions:Pve,referenceElements:Iye,rootProps:Ive,tooltip:Ide}),kve=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Woe({reducer:Dve,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([UH.middleware,FH.middleware,l1.middleware,HH.middleware,jH.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Cve},name:"recharts-".concat(n)}})};function Ove(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=So(),o=R.useRef(null);if(i)return n;o.current==null&&(o.current=kve(e,r));var s=HI;return R.createElement(Ave,{context:s,store:o.current},n)}function Lve(t){var{layout:e,width:n,height:r,margin:i}=t,o=or(),s=So();return R.useEffect(()=>{s||(o(Tse(e)),o(Ese({width:n,height:r})),o(_se(i)))},[o,s,e,n,r,i]),null}function Vve(t){var e=or();return R.useEffect(()=>{e(Rve(t))},[e,t]),null}var Uve=["children"];function Fve(t,e){if(t==null)return{};var n,r,i=Bve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function J_(){return J_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J_.apply(null,arguments)}var qve={width:"100%",height:"100%"},$ve=R.forwardRef((t,e)=>{var n=pae(),r=mae(),i=F5();if(!I_(n)||!I_(r))return null;var{children:o,otherAttributes:s,title:l,desc:c}=t,f,h;return typeof s.tabIndex=="number"?f=s.tabIndex:f=i?0:void 0,typeof s.role=="string"?h=s.role:h=i?"application":void 0,R.createElement(k3,J_({},s,{title:l,desc:c,role:h,tabIndex:f,width:n,height:r,style:qve,ref:e}),o)}),zve=t=>{var{children:e}=t,n=ze(aT);if(!n)return null;var{width:r,height:i,y:o,x:s}=n;return R.createElement(k3,{width:r,height:i,x:s,y:o},e)},jV=R.forwardRef((t,e)=>{var{children:n}=t,r=Fve(t,Uve),i=So();return i?R.createElement(zve,null,n):R.createElement($ve,J_({ref:e},r),n)});function Hve(){var t=or(),[e,n]=R.useState(null),r=ze(Zse);return R.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),o=i.width/e.offsetWidth;Ri(o)&&o!==r&&t(wse(o))}},[e,t,r]),n}function KV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KV(Object(n),!0).forEach(function(r){jve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jve(t,e,n){return(e=Kve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kve(t){var e=Wve(t,"string");return typeof e=="symbol"?e:e+""}function Wve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yve=R.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:o,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:f,onMouseLeave:h,onMouseMove:g,onMouseUp:v,onTouchEnd:E,onTouchMove:b,onTouchStart:S,style:A,width:I}=t,D=or(),[k,q]=R.useState(null),[$,H]=R.useState(null);Yhe();var M=Hve(),L=R.useCallback(ue=>{M(ue),typeof e=="function"&&e(ue),q(ue),H(ue)},[M,e,q,H]),O=R.useCallback(ue=>{D(VH(ue)),D(Hi({handler:o,reactEvent:ue}))},[D,o]),F=R.useCallback(ue=>{D(vx(ue)),D(Hi({handler:f,reactEvent:ue}))},[D,f]),U=R.useCallback(ue=>{D(qz()),D(Hi({handler:h,reactEvent:ue}))},[D,h]),z=R.useCallback(ue=>{D(vx(ue)),D(Hi({handler:g,reactEvent:ue}))},[D,g]),G=R.useCallback(()=>{D(zH())},[D]),Ce=R.useCallback(ue=>{D($H(ue.key))},[D]),be=R.useCallback(ue=>{D(Hi({handler:s,reactEvent:ue}))},[D,s]),ee=R.useCallback(ue=>{D(Hi({handler:l,reactEvent:ue}))},[D,l]),le=R.useCallback(ue=>{D(Hi({handler:c,reactEvent:ue}))},[D,c]),Se=R.useCallback(ue=>{D(Hi({handler:v,reactEvent:ue}))},[D,v]),Ve=R.useCallback(ue=>{D(Hi({handler:S,reactEvent:ue}))},[D,S]),K=R.useCallback(ue=>{D(GH(ue)),D(Hi({handler:b,reactEvent:ue}))},[D,b]),de=R.useCallback(ue=>{D(Hi({handler:E,reactEvent:ue}))},[D,E]);return R.createElement(oH.Provider,{value:k},R.createElement(zre.Provider,{value:$},R.createElement("div",{className:Xt("recharts-wrapper",r),style:Gve({position:"relative",cursor:"default",width:I,height:i},A),onClick:O,onContextMenu:be,onDoubleClick:ee,onFocus:G,onKeyDown:Ce,onMouseDown:le,onMouseEnter:F,onMouseLeave:U,onMouseMove:z,onMouseUp:Se,onTouchEnd:de,onTouchMove:K,onTouchStart:Ve,ref:L},n)))}),Jve=["children","className","width","height","style","compact","title","desc"];function Qve(t,e){if(t==null)return{};var n,r,i=Xve(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Zve=R.forwardRef((t,e)=>{var{children:n,className:r,width:i,height:o,style:s,compact:l,title:c,desc:f}=t,h=Qve(t,Jve),g=W0(h);return l?R.createElement(jV,{otherAttributes:g,title:c,desc:f},n):R.createElement(Yve,{className:r,style:s,width:i,height:o,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},R.createElement(jV,{otherAttributes:g,title:c,desc:f,ref:e},R.createElement(Pye,null,n)))}),e_e=["width","height"];function _x(){return _x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_x.apply(null,arguments)}function t_e(t,e){if(t==null)return{};var n,r,i=n_e(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function n_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var r_e={top:5,right:5,bottom:5,left:5},i_e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:r_e,reverseStackOrder:!1,syncMethod:"index"},o_e=R.forwardRef(function(e,n){var r,i=Ll(e.categoricalChartProps,i_e),{width:o,height:s}=i,l=t_e(i,e_e);if(!I_(o)||!I_(s))return null;var{chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,categoricalChartProps:v}=e,E={chartName:c,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,eventEmitter:void 0};return R.createElement(Ove,{preloadedState:{options:E},reduxStoreName:(r=v.id)!==null&&r!==void 0?r:c},R.createElement(Tye,{chartData:v.data}),R.createElement(Lve,{width:o,height:s,layout:i.layout,margin:i.margin}),R.createElement(Vve,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),R.createElement(Zve,_x({},l,{width:o,height:s,ref:n})))}),s_e=["axis","item"],a_e=R.forwardRef((t,e)=>R.createElement(o_e,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:s_e,tooltipPayloadSearcher:Dhe,categoricalChartProps:t,ref:e}));const l_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M2 11h3v7H2v-7zM6 3h3v15H6V3zm5 8h3v7h-3v-7zm4-4h3v11h-3V7z"})}),u_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),c_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),f_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),d_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),h_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm2 6V6a2 2 0 10-4 0v4h4zM4 12h12v6H4v-6z"})}),p_e=({data:t})=>!t||t.length===0?C.jsx("p",{className:"text-stone-400 text-center py-8",children:"Нет данных для отображения."}):C.jsx(hpe,{width:"100%",height:300,children:C.jsxs(a_e,{data:t,margin:{top:5,right:20,left:-10,bottom:5},children:[C.jsx(i1,{dataKey:"label",stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1}),C.jsx(o1,{stroke:"#a8a29e",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1}),C.jsx(rpe,{contentStyle:{backgroundColor:"#292524",border:"1px solid #57534e",borderRadius:"0.375rem"},labelStyle:{color:"#f59e0b"},itemStyle:{color:"#d6d3d1"},formatter:e=>[e,"Просмотры"]}),C.jsx(PH,{dataKey:"value",fill:"#f59e0b",radius:[4,4,0,0]})]})}),m_e=({codeword:t,games:e,onUpdate:n,onDelete:r})=>{const[i,o]=R.useState(t.usedMessage),[s,l]=R.useState(t.introText||"ВАШЕ КОДОВОЕ СЛОВО:"),[c,f]=R.useState(t.note||""),[h,g]=R.useState(!1),[v,E]=R.useState([]),[b,S]=R.useState(!1),[A,I]=R.useState(""),[D,k]=R.useState("day"),[q,$]=R.useState(!1),[H,M]=R.useState(t.word),L=`${window.location.origin}${window.location.pathname}#/view?c=${t.id}`,O=`https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${encodeURIComponent(L)}`,F=async()=>{S(!0),I(""),E([]);try{const z=Gi(Go(Vr,"codewords",t.id,"viewEvents"),h_("viewedAt","asc")),Ce=(await bI(z)).docs.map(le=>le.data().viewedAt.toDate());if(Ce.length===0){S(!1);return}const be={};Ce.forEach(le=>{let Se="";D==="day"?Se=le.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"}):Se=le.toLocaleDateString("ru-RU",{year:"2-digit",month:"2-digit",day:"2-digit"})+` ${le.getHours()}:00`,be[Se]=(be[Se]||0)+1});const ee=Object.keys(be).map(le=>({label:le,value:be[le]}));E(ee)}catch(z){console.error("Error fetching stats:",z),I("Не удалось загрузить статистику.")}finally{S(!1)}};R.useEffect(()=>{h&&F()},[h,D]),R.useEffect(()=>{q||M(t.word)},[t.word,q]);const U=async()=>{try{const z=await fetch(O);if(!z.ok)throw new Error("QR code fetch failed");const G=await z.blob(),Ce=window.URL.createObjectURL(G),be=document.createElement("a");be.href=Ce;const ee=t.word.replace(/[^a-z0-9а-яё]/gi,"_").toLowerCase();be.setAttribute("download",`qr_${ee}.png`),document.body.appendChild(be),be.click(),be.parentNode&&be.parentNode.removeChild(be),window.URL.revokeObjectURL(Ce)}catch(z){console.error("Failed to download QR code",z),alert("Не удалось скачать QR-код.")}};return C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[C.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[C.jsx("img",{src:O,alt:"QR Code",className:"w-36 h-36 border-2 border-stone-600 rounded-md"}),C.jsxs("button",{onClick:U,className:"flex items-center justify-center gap-2 w-full bg-stone-600 hover:bg-stone-500 text-stone-200 px-3 py-2 rounded-md text-sm transition-colors",children:[C.jsx(f_e,{}),"Скачать QR"]}),C.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-amber-400 hover:text-amber-300 break-all text-center pt-1",children:L})]}),C.jsxs("div",{className:"md:col-span-2 space-y-3",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:`introText_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Вступительный текст:"}),C.jsx("input",{id:`introText_${t.id}`,type:"text",value:s,onChange:z=>l(z.target.value),onBlur:()=>n(t.id,{introText:s}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:`word_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Кодовое слово:"}),C.jsxs("div",{className:"flex items-center gap-2 bg-stone-900 rounded-md pr-2 border border-stone-600 focus-within:border-amber-500 focus-within:ring-1 focus-within:ring-amber-500 transition-all",children:[q?C.jsx("input",{id:`word_${t.id}`,type:"text",value:H,onChange:z=>M(z.target.value),onBlur:()=>{H.trim()&&H.trim()!==t.word?n(t.id,{word:H.trim()}):M(t.word),$(!1)},onKeyDown:z=>{z.key==="Enter"&&z.target.blur(),z.key==="Escape"&&(M(t.word),$(!1))},className:"text-lg w-full bg-transparent p-1 px-3 font-bold text-amber-400 focus:ring-0 border-0 outline-none",autoFocus:!0}):C.jsx("p",{id:`word_${t.id}`,className:"flex-grow text-lg p-1 px-3 font-bold text-stone-100 break-words",children:t.word}),C.jsx("button",{onClick:()=>{q||M(t.word),$(!q)},className:"p-1 text-stone-400 hover:text-amber-400 transition-colors",title:q?"Заблокировать":"Редактировать кодовое слово","aria-label":q?"Заблокировать редактирование":"Редактировать кодовое слово","aria-controls":`word_${t.id}`,children:q?C.jsx(h_e,{}):C.jsx(d_e,{})})]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:`usedMsg_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Сообщение (если использовано):"}),C.jsx("input",{id:`usedMsg_${t.id}`,type:"text",value:i,onChange:z=>o(z.target.value),onBlur:()=>n(t.id,{usedMessage:i}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:`note_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Заметка (видна только вам):"}),C.jsx("textarea",{id:`note_${t.id}`,value:c,onChange:z=>f(z.target.value),onBlur:()=>n(t.id,{note:c}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-20 resize-y",placeholder:"Любые пометки по этому коду..."})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:`questLink_${t.id}`,className:"text-sm font-bold text-stone-400 block",children:"Запустить квест перед показом:"}),C.jsxs("select",{id:`questLink_${t.id}`,value:t.questId||"",onChange:z=>n(t.id,{questId:z.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-3 py-1 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[C.jsx("option",{value:"",children:"Квест отключен"}),e.map(z=>C.jsx("option",{value:z.id,children:z.title},z.id))]})]}),C.jsxs("div",{className:"flex items-center justify-between pt-2",children:[C.jsxs("label",{htmlFor:`toggle_${t.id}`,className:"flex items-center cursor-pointer",children:[C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"checkbox",id:`toggle_${t.id}`,className:"sr-only",checked:t.isUsed,onChange:()=>n(t.id,{isUsed:!t.isUsed})}),C.jsx("div",{className:`block ${t.isUsed?"bg-amber-500":"bg-stone-600"} w-14 h-8 rounded-full transition-colors`}),C.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform ${t.isUsed?"transform translate-x-6":""}`})]}),C.jsx("div",{className:"ml-3 text-stone-300 font-semibold",children:t.isUsed?"ИСПОЛЬЗОВАНО":"АКТИВНО"})]}),C.jsxs("div",{className:"flex items-center gap-2 text-stone-400",children:[C.jsxs("div",{className:"flex items-center gap-1",title:"Просмотры",children:[C.jsx(u_e,{}),C.jsx("span",{children:t.views||0})]}),C.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-1 bg-sky-800 hover:bg-sky-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[C.jsx(l_e,{}),"Статистика"]}),C.jsxs("button",{onClick:()=>r(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[C.jsx(c_e,{}),"Удалить"]})]})]})]})]}),h&&C.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>g(!1),role:"dialog","aria-modal":"true","aria-labelledby":"stats-modal-title",children:C.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:z=>z.stopPropagation(),children:[C.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[C.jsx("h3",{id:"stats-modal-title",className:"font-display text-2xl text-amber-400",children:"Статистика просмотров"}),C.jsx("button",{onClick:()=>g(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),C.jsxs("div",{className:"p-4 flex-grow overflow-y-auto",children:[C.jsxs("div",{className:"flex gap-2 mb-4",children:[C.jsx("button",{onClick:()=>k("day"),className:`px-4 py-2 rounded-md font-semibold ${D==="day"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По дням"}),C.jsx("button",{onClick:()=>k("hour"),className:`px-4 py-2 rounded-md font-semibold ${D==="hour"?"bg-amber-500 text-stone-900":"bg-stone-700 text-stone-300 hover:bg-stone-600"}`,children:"По часам"})]}),b&&C.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:"ЗАГРУЗКА СТАТИСТИКИ..."}),A&&C.jsx("p",{className:"text-red-500 text-center py-8",children:A}),!b&&!A&&C.jsx(p_e,{data:v})]})]})})]})},g_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),y_e=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[C.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),C.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),v_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),__e=({game:t,onDelete:e})=>{var o;const n=(o=t.createdAt)==null?void 0:o.toDate().toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),r=()=>{window.location.hash=`#/admin/quest/${t.id}`},i=()=>{window.location.hash=`#/play/${t.id}`};return C.jsxs("div",{className:"bg-stone-800/70 border border-stone-700 p-4 rounded-md flex justify-between items-center",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"text-xl font-bold text-stone-100",children:t.title}),C.jsxs("div",{className:"text-sm text-stone-400 mt-1",children:[C.jsx("span",{className:`inline-block px-2 py-0.5 rounded-md mr-2 text-xs font-semibold ${t.status==="published"?"bg-green-900/50 text-green-300":"bg-sky-900/50 text-sky-300"}`,children:t.status==="published"?"Опубликован":"Черновик"}),C.jsxs("span",{children:["Создан: ",n||"N/A"]})]})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsxs("button",{onClick:i,className:"flex items-center gap-1 bg-green-800 hover:bg-green-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[C.jsx(g_e,{})," Играть"]}),C.jsxs("button",{onClick:r,className:"flex items-center gap-1 bg-blue-800 hover:bg-blue-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[C.jsx(y_e,{})," Редактировать"]}),C.jsxs("button",{onClick:()=>e(t.id),className:"flex items-center gap-1 bg-red-800 hover:bg-red-700 text-stone-100 px-3 py-2 rounded-md text-sm transition-colors",children:[C.jsx(v_e,{})," Удалить"]})]})]})},T_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H5v-2H3v-2H1v-4a6 6 0 017.743-5.743z"})}),E_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),w_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6H5V5h12v4z"})}),b_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),S_e=()=>{const[t,e]=R.useState("quests"),[n,r]=R.useState([]),[i,o]=R.useState(""),[s,l]=R.useState("Этот код уже был использован."),[c,f]=R.useState("ВАШЕ КОДОВОЕ СЛОВО:"),[h,g]=R.useState([]),[v,E]=R.useState(""),[b,S]=R.useState(""),[A,I]=R.useState({type:"",text:""});R.useEffect(()=>{const O=Gi(Go(Vr,"games"),h_("createdAt","desc")),F=bm(O,U=>{const z=U.docs.map(G=>({...G.data(),id:G.id}));g(z)},U=>{console.error("Error fetching games:",U),alert("Не удалось загрузить квесты.")});return()=>F()},[]),R.useEffect(()=>{if(t!=="codewords"){r([]);return}const O=Gi(Go(Vr,"codewords"),h_("createdAt","desc")),F=bm(O,U=>{const z=U.docs.map(G=>({...G.data(),id:G.id}));r(z)},U=>{console.error("Error fetching codewords:",U),alert("Не удалось загрузить кодовые слова.")});return()=>F&&F()},[t]);const D=async O=>{if(O.preventDefault(),i.trim()!=="")try{await wm(Go(Vr,"codewords"),{word:i.trim(),isUsed:!1,usedMessage:s.trim()||"Этот код уже был использован.",introText:c.trim()||"ВАШЕ КОДОВОЕ СЛОВО:",note:"",questId:"",createdAt:hl(),views:0}),o(""),f("ВАШЕ КОДОВОЕ СЛОВО:"),l("Этот код уже был использован.")}catch(F){console.error("Error adding codeword: ",F),alert("Ошибка при добавлении кода.")}},k=async(O,F)=>{try{await Em(go(Vr,"codewords",O),F)}catch(U){console.error("Error updating codeword: ",U),alert("Ошибка при обновлении кода.")}},q=async O=>{if(window.confirm("Вы уверены, что хотите удалить этот код? Это действие необратимо."))try{const F=Gi(Go(Vr,"codewords",O,"viewEvents")),U=await bI(F),z=Nte(Vr);U.docs.forEach(G=>z.delete(G.ref)),await z.commit(),await AA(go(Vr,"codewords",O))}catch(F){console.error("Error deleting codeword:",F),alert("Ошибка при удалении кода.")}},$=async O=>{if(O.preventDefault(),v.trim()!=="")try{const F=`quest_${Date.now()}`;await wm(Go(Vr,"games"),{title:v.trim(),status:"draft",createdAt:hl(),updatedAt:hl(),dsl:{format:"bk-quest@1",meta:{id:F,title:v.trim(),version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:{start:{text:"This is the beginning."}}}}),E("")}catch(F){console.error("Error adding quest: ",F),alert("Ошибка при создании квеста.")}},H=async O=>{if(window.confirm("Вы уверены, что хотите удалить этот квест? Все его данные будут стерты навсегда."))try{await AA(go(Vr,"games",O))}catch(F){console.error("Error deleting quest:",F),alert("Ошибка при удалении квеста.")}},M=async O=>{if(O.preventDefault(),I({type:"",text:""}),window.confirm("Вы уверены, что хотите изменить пароль?"))try{if(!Qp.currentUser)throw new Error("Пользователь не авторизован.");if(!b||b.length<6)throw new Error("Пароль должен содержать не менее 6 символов.");await FF(Qp.currentUser,b),I({type:"success",text:"Пароль успешно изменен!"}),S("")}catch(F){I({type:"error",text:`Ошибка: ${F.message}`})}},L=({tabName:O,label:F,children:U})=>C.jsxs("button",{onClick:()=>e(O),className:`flex items-center justify-center w-full px-4 py-3 font-display text-xl rounded-t-md transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500
            ${t===O?"bg-stone-800/50 text-amber-400 border-b-2 border-amber-400":"bg-stone-900/50 text-stone-400 hover:bg-stone-800/50"}`,children:[U,F]});return C.jsxs("div",{className:"container mx-auto py-8 px-4",children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsx("h2",{className:"font-display text-4xl text-stone-200",children:"Панель управления"}),C.jsx("button",{onClick:()=>lY(Qp),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors",children:"Выйти"})]}),C.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-md mb-8",children:[C.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Изменить пароль"}),C.jsxs("form",{onSubmit:M,className:"space-y-4",children:[C.jsx("input",{type:"password",value:b,onChange:O=>S(O.target.value),placeholder:"Новый пароль (минимум 6 символов)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),C.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[C.jsx(w_e,{})," Сохранить пароль"]}),A.text&&C.jsx("p",{className:A.type==="success"?"text-green-400":"text-red-500",children:A.text})]})]}),C.jsxs("div",{className:"flex mb-[-1px]",children:[C.jsx(L,{tabName:"quests",label:"Квесты",children:C.jsx(E_e,{})}),C.jsx(L,{tabName:"codewords",label:"Кодовые слова",children:C.jsx(T_e,{})})]}),C.jsxs("div",{className:"bg-stone-800/50 border border-stone-700 p-6 rounded-b-md rounded-tr-md",children:[t==="codewords"&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"mb-8",children:[C.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Добавить новый код"}),C.jsxs("form",{onSubmit:D,className:"space-y-4",children:[C.jsx("input",{type:"text",value:c,onChange:O=>f(O.target.value),placeholder:"Вступительный текст (обращение)",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),C.jsx("input",{type:"text",value:i,onChange:O=>o(O.target.value),placeholder:"Новое кодовое слово",required:!0,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),C.jsx("input",{type:"text",value:s,onChange:O=>l(O.target.value),placeholder:"Сообщение если код использован",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),C.jsx("button",{type:"submit",className:"w-full font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Создать QR-код"})]})]}),C.jsx("div",{className:"space-y-4",children:n.map(O=>C.jsx(m_e,{codeword:O,games:h,onUpdate:k,onDelete:q},O.id))})]}),t==="quests"&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"mb-8",children:[C.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4",children:"Создать новый квест"}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[C.jsxs("form",{onSubmit:$,className:"flex-grow flex gap-4",children:[C.jsx("input",{type:"text",value:v,onChange:O=>E(O.target.value),placeholder:"Название квеста",required:!0,className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"}),C.jsx("button",{type:"submit",className:"font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors",children:"Создать"})]}),C.jsxs("a",{href:"/#/admin/architect",className:"w-full md:w-auto flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors",children:[C.jsx(b_e,{})," Создать с AI"]})]})]}),C.jsx("div",{className:"space-y-4",children:h.length>0?h.map(O=>C.jsx(__e,{game:O,onDelete:H},O.id)):C.jsx("p",{className:"text-stone-400 text-center py-4",children:"Квесты еще не созданы."})})]})]})]})},A_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),Tx=({questId:t,onWin:e})=>{var H;const{questId:n}=R4(),r=t||n,[i,o]=R.useState(null),[s,l]=R.useState(null),[c,f]=R.useState("start"),[h,g]=R.useState(!0),[v,E]=R.useState(""),b=M=>M?typeof M=="string"?M:M[(i==null?void 0:i.dsl.meta.defaultLocale)||"ru"]||Object.values(M)[0]||"":"",S=R.useCallback((M,L)=>{if(!M)return!0;if(M.all)return M.all.every(U=>S(U,L));if(M.any)return M.any.some(U=>S(U,L));if(M.not)return!S(M.not,L);const{vars:O,inventory:F}=L;return M.hp_eq!==void 0?O.hp===M.hp_eq:M.hp_gt!==void 0?O.hp>M.hp_gt:M.hp_gte!==void 0?O.hp>=M.hp_gte:M.hp_lt!==void 0?O.hp<M.hp_lt:M.hp_lte!==void 0?O.hp<=M.hp_lte:M.has_item?F.includes(M.has_item):M.missing_item?!F.includes(M.missing_item):M.var_eq?Array.isArray(M.var_eq)?M.var_eq.every(U=>O[U.key]===U.value):Object.entries(M.var_eq).every(([U,z])=>O[U]===z):M.var_neq?Array.isArray(M.var_neq)?M.var_neq.every(U=>O[U.key]!==U.value):Object.entries(M.var_neq).every(([U,z])=>O[U]!==z):!0},[]),A=R.useCallback((M,L)=>{if(!M)return L;const O=JSON.parse(JSON.stringify(L));return M.forEach(F=>{F.add&&(Array.isArray(F.add)?F.add.forEach(U=>{O.vars[U.key]=(O.vars[U.key]||0)+U.value}):Object.entries(F.add).forEach(([U,z])=>{O.vars[U]=(O.vars[U]||0)+z})),F.set&&(Array.isArray(F.set)?F.set.forEach(U=>{O.vars[U.key]=U.value}):Object.entries(F.set).forEach(([U,z])=>{O.vars[U]=z})),F.inv_add&&!O.inventory.includes(F.inv_add)&&O.inventory.push(F.inv_add),F.inv_remove&&(O.inventory=O.inventory.filter(U=>U!==F.inv_remove))}),O},[]);R.useEffect(()=>{if(!r){E("Квест не найден."),g(!1);return}g(!0),E("");const M=go(Vr,"games",r);wI(M).then(L=>{if(L.exists()){const O={id:L.id,...L.data()};o(O);const F=localStorage.getItem(`quest-save-${r}`);if(F){const{playerState:U,currentNodeId:z}=JSON.parse(F);l(U),f(z)}else l(O.dsl.state),f("start")}else E("Квест не найден.");g(!1)}).catch(L=>{console.error("Error fetching quest:",L),E("Ошибка при загрузке квеста."),g(!1)})},[r]),R.useEffect(()=>{if(i&&s){const M={questId:r,playerState:s,currentNodeId:c};localStorage.setItem(`quest-save-${r}`,JSON.stringify(M))}},[s,c,r,i]);const I=i==null?void 0:i.dsl.nodes[c];R.useEffect(()=>{var L;if(!I||!s)return;if(((L=I.end)==null?void 0:L.type)==="win"&&e){localStorage.removeItem(`quest-save-${r}`),e();return}const M=A(I.effects,s);if(JSON.stringify(M)!==JSON.stringify(s)){l(M);return}if(I.branch){for(const O of I.branch)if(S(O.when,s)){f(O.to);return}}I.fallback&&f(I.fallback)},[c,i,s,A,S,e,r]);const D=M=>{if(!s)return;const L=A(M.effects,s);l(L),f(M.to)},k=R.useCallback(()=>{!r||!i||window.confirm("Вы уверены, что хотите начать квест заново? Весь прогресс будет потерян.")&&(localStorage.removeItem(`quest-save-${r}`),l(i.dsl.state),f("start"))},[r,i]);if(h)return C.jsx("div",{className:"text-center p-8 font-display text-4xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА КВЕСТА..."});if(v)return C.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:v});if(!i||!s||!I)return C.jsx("div",{className:"text-center p-8 text-2xl text-stone-400",children:"Инициализация..."});const q=I.bg&&i.dsl.assets.images[I.bg]?i.dsl.assets.images[I.bg]:void 0,$=((H=I.choices)==null?void 0:H.filter(M=>M.when?S(M.when,s):!0))||[];return C.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4 md:p-8",children:C.jsx("div",{className:"w-full max-w-4xl bg-cover bg-center rounded-lg shadow-2xl shadow-black/50 overflow-hidden border-2 border-stone-800",style:{backgroundImage:q?`url(${q})`:"none",backgroundColor:"#1c1917",minHeight:"70vh"},children:C.jsxs("div",{className:"bg-stone-900/80 backdrop-blur-sm p-6 md:p-8 flex flex-col h-full text-stone-200",children:[C.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6 border-b border-stone-700 pb-4 text-sm",children:[C.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1",children:[Object.keys(s.vars).length>0&&Object.keys(s.vars).map(M=>C.jsxs("span",{className:"font-bold text-amber-400",children:[M.toUpperCase(),": ",C.jsx("span",{className:"font-normal text-stone-200",children:s.vars[M]??0})]},M)),s.inventory.length>0&&C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:"font-bold text-amber-400",children:"ИНВЕНТАРЬ:"}),C.jsx("span",{className:"text-stone-200",children:s.inventory.join(", ")})]})]}),C.jsxs("button",{onClick:k,className:"flex items-center justify-center font-display text-lg bg-stone-700 text-stone-200 py-2 px-4 rounded-md hover:bg-stone-600 transition-colors flex-shrink-0",children:[C.jsx(A_e,{}),"ЗАНОВО"]})]}),C.jsxs("div",{className:"flex-grow",children:[C.jsx("h2",{className:"font-display text-3xl md:text-4xl text-amber-400 mb-4",children:b(I.title)}),C.jsx("p",{className:"text-stone-300 whitespace-pre-wrap leading-relaxed mb-6",children:b(I.text)}),I.end&&!e&&C.jsxs("div",{className:"text-center py-4 border-t border-stone-700 mt-6",children:[C.jsx("h3",{className:`font-display text-4xl ${I.end.type==="win"?"text-lime-400":"text-red-500"}`,children:I.end.type==="win"?"Победа!":"Конец игры"}),C.jsx("p",{className:"mt-4 text-stone-300",children:b(I.end.message)})]}),!I.end&&C.jsx("div",{className:"flex flex-col space-y-3",children:$.map((M,L)=>C.jsx("button",{onClick:()=>D(M),className:"text-left w-full p-4 bg-stone-800/70 border border-stone-600 rounded-md hover:bg-amber-500 hover:border-amber-400 hover:text-stone-900 transition-all text-stone-200 font-semibold",children:b(M.label)},L))})]})]})})})},x_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),C_e=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),WV=({codeId:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState("loading"),[o,s]=R.useState(!1),[l,c]=R.useState(!1),f=ls();R.useEffect(()=>{const g=new URLSearchParams(f.search||f.hash.split("?")[1]),v=t||g.get("c");if(v){const E=go(Vr,"codewords",v);(async()=>{try{const S=await wI(E);if(S.exists()){const A={id:S.id,...S.data()};n(A),i("found");const I=`viewed-${v}`;sessionStorage.getItem(I)||(await Em(E,{views:W6(1)}),await wm(Go(E,"viewEvents"),{viewedAt:hl()}),sessionStorage.setItem(I,"true"))}else i("not-found")}catch(S){console.error("Failed to fetch codeword from Firestore:",S),i("error")}})()}else i("not-found")},[f,t]);const h=()=>{e&&!e.isUsed&&(navigator.clipboard.writeText(e.word),s(!0),setTimeout(()=>s(!1),2e3))};return r==="loading"?C.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:C.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ПОИСК ДАННЫХ..."})}):r==="not-found"||r==="error"?C.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[C.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),C.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Код не найден."}),C.jsx("p",{className:"text-stone-500",children:"Возможно, ссылка неверна или код был удален."})]}):e!=null&&e.isUsed?C.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[C.jsx("h2",{className:"font-display text-5xl text-amber-500",children:"КОД ИСПОЛЬЗОВАН"}),C.jsx("p",{className:"text-stone-300 text-xl mt-4 max-w-lg",children:e.usedMessage})]}):e!=null&&e.questId&&!l?C.jsx(Tx,{questId:e.questId,onWin:()=>c(!0)}):C.jsx("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:C.jsxs("div",{className:"w-full max-w-2xl bg-stone-800/50 border-2 border-stone-700 p-8 rounded-lg shadow-2xl shadow-black/50",children:[l&&C.jsx("p",{className:"font-display text-2xl text-lime-400 mb-4 tracking-wider",children:"КВЕСТ ПРОЙДЕН!"}),C.jsx("p",{className:"text-stone-400 font-display text-2xl tracking-wide",children:(e==null?void 0:e.introText)||"ВАШЕ КОДОВОЕ СЛОВО:"}),C.jsx("p",{className:"text-amber-400 font-bold text-3xl md:text-5xl my-4 break-words select-all tracking-widest",children:e==null?void 0:e.word}),C.jsxs("button",{onClick:h,className:"w-full flex items-center justify-center gap-3 mt-6 bg-stone-700 hover:bg-amber-500 hover:text-stone-900 text-stone-200 font-display text-2xl py-3 rounded-md transition-all duration-300",children:[o?C.jsx(C_e,{}):C.jsx(x_e,{}),o?"СКОПИРОВАНО!":"СКОПИРОВАТЬ КОД"]})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let I_e,R_e;function P_e(){return{geminiUrl:I_e,vertexUrl:R_e}}function N_e(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=P_e();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ec{}function Me(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function m(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let f=0;f<c.length;f++){const h=c[f];m(h,e.slice(o+1),n[f])}else for(const f of c)m(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];m(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function p(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>p(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ex(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var YV;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(YV||(YV={}));var JV;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(JV||(JV={}));var Be;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Be||(Be={}));var QV;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(QV||(QV={}));var XV;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(XV||(XV={}));var ZV;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ZV||(ZV={}));var eU;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(eU||(eU={}));var tU;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(tU||(tU={}));var nU;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(nU||(nU={}));var rU;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(rU||(rU={}));var iU;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(iU||(iU={}));var oU;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(oU||(oU={}));var sU;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(sU||(sU={}));var aU;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(aU||(aU={}));var lU;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(lU||(lU={}));var Q_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Q_||(Q_={}));var uU;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(uU||(uU={}));var wx;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wx||(wx={}));var cU;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(cU||(cU={}));var fU;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(fU||(fU={}));var dU;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(dU||(dU={}));var hU;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(hU||(hU={}));var pU;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(pU||(pU={}));var mU;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mU||(mU={}));var gU;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(gU||(gU={}));var yU;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(yU||(yU={}));var vU;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(vU||(vU={}));var _U;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(_U||(_U={}));var TU;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(TU||(TU={}));var EU;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(EU||(EU={}));var wU;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wU||(wU={}));var bU;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(bU||(bU={}));var SU;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(SU||(SU={}));var AU;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(AU||(AU={}));var xU;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(xU||(xU={}));var CU;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(CU||(CU={}));var IU;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(IU||(IU={}));var RU;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(RU||(RU={}));var PU;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(PU||(PU={}));var NU;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(NU||(NU={}));var MU;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(MU||(MU={}));var DU;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(DU||(DU={}));var kU;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(kU||(kU={}));var OU;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(OU||(OU={}));var LU;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(LU||(LU={}));var Df;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Df||(Df={}));class bx{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Sp{get text(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const g=[];for(const v of(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[E,b]of Object.entries(v))E!=="text"&&E!=="thought"&&(b!==null||b!==void 0)&&g.push(E);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;h=!0,f+=v.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const g of(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[v,E]of Object.entries(g))v!=="inlineData"&&(E!==null||E!==void 0)&&h.push(v);g.inlineData&&typeof g.inlineData.data=="string"&&(f+=atob(g.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,i,o,s,l,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,l,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class VU{}class UU{}class M_e{}class D_e{}class k_e{}class O_e{}class FU{}class BU{}class qU{}class L_e{}class $U{}class X_{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new X_;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const o=new $U,s=i.videos;o.generatedVideos=s==null?void 0:s.map(l=>({video:{uri:l.gcsUri,videoBytes:l.bytesBase64Encoded?Ex(l.bytesBase64Encoded):void 0,mimeType:l.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=e.response;if(i){const o=new $U,s=i.generateVideoResponse,l=s==null?void 0:s.generatedSamples;o.generatedVideos=l==null?void 0:l.map(c=>{const f=c.video;return{video:{uri:f==null?void 0:f.uri,videoBytes:f!=null&&f.encodedVideo?Ex(f==null?void 0:f.encodedVideo):void 0,mimeType:c.encoding}}}),o.raiMediaFilteredCount=s==null?void 0:s.raiMediaFilteredCount,o.raiMediaFilteredReasons=s==null?void 0:s.raiMediaFilteredReasons,r.response=o}}return r}}class zU{}class HU{}class GU{}class V_e{}class U_e{}class F_e{}class jU{}class B_e{get text(){var e,n,r;let i="",o=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(l))c!=="text"&&c!=="thought"&&f!==null&&s.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(s))l!=="inlineData"&&c!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class q_e{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _t(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function KH(t,e){const n=_t(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function WH(t){return Array.isArray(t)?t.map(e=>Z_(e)):[Z_(t)]}function Z_(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function YH(t){const e=Z_(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JH(t){const e=Z_(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function KU(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function QH(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>KU(e)):[KU(t)]}function Sx(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function WU(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function YU(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ir(t){if(t==null)throw new Error("ContentUnion is required");return Sx(t)?t:{role:"user",parts:QH(t)}}function u1(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ir(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ir(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ir(n)):[Ir(e)]}function Ji(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(WU(t)||YU(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ir(t)]}const e=[],n=[],r=Sx(t[0]);for(const i of t){const o=Sx(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(WU(i)||YU(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:QH(n)}),e}function $_e(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Be).includes(n[0].toUpperCase())?n[0].toUpperCase():Be.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Be).includes(r.toUpperCase())?r.toUpperCase():Be.TYPE_UNSPECIFIED})}}function zf(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&$_e(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Be).includes(l.toUpperCase())?l.toUpperCase():Be.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=zf(l);else if(r.includes(s)){const c=[];for(const f of l){if(f.type=="null"){e.nullable=!0;continue}c.push(zf(f))}e[s]=c}else if(i.includes(s)){const c={};for(const[f,h]of Object.entries(l))c[f]=zf(h);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=l}return e}function c1(t){return zf(t)}function f1(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function d1(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Zd(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=zf(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=zf(e.response));return t}function eh(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function z_e(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function _a(t,e){if(typeof e!="string")throw new Error("name must be a string");return z_e(t,e,"cachedContents")}function XH(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function wc(t){return Ex(t)}function H_e(t){return t!=null&&typeof t=="object"&&"name"in t}function G_e(t){return t!=null&&typeof t=="object"&&"video"in t}function j_e(t){return t!=null&&typeof t=="object"&&"uri"in t}function ZH(t){var e;let n;if(H_e(t)&&(n=t.name),!(j_e(t)&&(n=t.uri,n===void 0))&&!(G_e(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function eG(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function tG(t){for(const e of["models","tunedModels","publisherModels"])if(K_e(t,e))return t[e];return[]}function K_e(t,e){return t!==null&&typeof t=="object"&&e in t}function W_e(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Y_e(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=W_e(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function nG(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function J_e(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function rG(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function th(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function iG(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q_e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function X_e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Z_e(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function e0e(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function t0e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Q_e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],X_e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Z_e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],e0e(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function oG(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>t0e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function n0e(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const l=p(t,["format"]);l!=null&&m(e,["format"],l);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const g=p(t,["maxProperties"]);g!=null&&m(e,["maxProperties"],g);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const I=p(t,["nullable"]);I!=null&&m(e,["nullable"],I);const D=p(t,["pattern"]);D!=null&&m(e,["pattern"],D);const k=p(t,["properties"]);k!=null&&m(e,["properties"],k);const q=p(t,["propertyOrdering"]);q!=null&&m(e,["propertyOrdering"],q);const $=p(t,["required"]);$!=null&&m(e,["required"],$);const H=p(t,["title"]);H!=null&&m(e,["title"],H);const M=p(t,["type"]);return M!=null&&m(e,["type"],M),e}function r0e(t){const e={};if(p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["category"]);n!=null&&m(e,["category"],n);const r=p(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function i0e(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function o0e(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function s0e(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],o0e(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function a0e(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function l0e(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],a0e(n)),e}function u0e(){return{}}function c0e(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function f0e(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>i0e(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],s0e(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],l0e(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],u0e());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],c0e(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function d0e(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function h0e(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function p0e(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],h0e(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function m0e(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],d0e(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],p0e(r)),e}function g0e(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function sG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],g0e(n)),e}function y0e(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],sG(r)),e}function v0e(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>y0e(i))),m(e,["speakerVoiceConfigs"],r)}return e}function _0e(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],sG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],v0e(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function T0e(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function E0e(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],oG(Ir(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const l=p(e,["topK"]);l!=null&&m(r,["topK"],l);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const g=p(e,["responseLogprobs"]);g!=null&&m(r,["responseLogprobs"],g);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const I=p(e,["responseSchema"]);I!=null&&m(r,["responseSchema"],n0e(c1(I)));const D=p(e,["responseJsonSchema"]);if(D!=null&&m(r,["responseJsonSchema"],D),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=p(e,["safetySettings"]);if(n!==void 0&&k!=null){let U=k;Array.isArray(U)&&(U=U.map(z=>r0e(z))),m(n,["safetySettings"],U)}const q=p(e,["tools"]);if(n!==void 0&&q!=null){let U=eh(q);Array.isArray(U)&&(U=U.map(z=>f0e(Zd(z)))),m(n,["tools"],U)}const $=p(e,["toolConfig"]);if(n!==void 0&&$!=null&&m(n,["toolConfig"],m0e($)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=p(e,["cachedContent"]);n!==void 0&&H!=null&&m(n,["cachedContent"],_a(t,H));const M=p(e,["responseModalities"]);M!=null&&m(r,["responseModalities"],M);const L=p(e,["mediaResolution"]);L!=null&&m(r,["mediaResolution"],L);const O=p(e,["speechConfig"]);if(O!=null&&m(r,["speechConfig"],_0e(f1(O))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=p(e,["thinkingConfig"]);return F!=null&&m(r,["thinkingConfig"],T0e(F)),r}function w0e(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["request","model"],_t(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ji(i);Array.isArray(s)&&(s=s.map(l=>oG(l))),m(n,["request","contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["request","generationConfig"],E0e(t,o,n)),n}function b0e(t,e){const n={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=p(e,["fileName"]);r!=null&&m(n,["fileName"],r);const i=p(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>w0e(t,s))),m(n,["requests","requests"],o)}return n}function S0e(t,e){const n={},r=p(t,["displayName"]);if(e!==void 0&&r!=null&&m(e,["batch","displayName"],r),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function LS(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["src"]);i!=null&&m(n,["batch","inputConfig"],b0e(t,nG(t,i)));const o=p(e,["config"]);return o!=null&&m(n,["config"],S0e(o,n)),n}function A0e(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function x0e(t,e){const n={},r=p(e,["contents"]);r!=null&&m(n,["requests[]","request","content"],u1(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],A0e(i,n)),n}function C0e(t,e){const n={},r=p(e,["fileName"]);r!=null&&m(n,["file_name"],r);const i=p(e,["inlinedRequests"]);return i!=null&&m(n,["requests"],x0e(t,i)),n}function I0e(t,e){const n={},r=p(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["batch","displayName"],r),n}function VS(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["src"]);i!=null&&m(n,["batch","inputConfig"],C0e(t,i));const o=p(e,["config"]);return o!=null&&m(n,["config"],I0e(o,n)),n}function R0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],th(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function P0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],th(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function N0e(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);if(e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function M0e(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],N0e(n,e)),e}function D0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],th(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function k0e(t){const e={},n=p(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const r=p(t,["gcsUri"]);r!=null&&m(e,["gcsSource","uris"],r);const i=p(t,["bigqueryUri"]);if(i!=null&&m(e,["bigquerySource","inputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function O0e(t){const e={},n=p(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const r=p(t,["gcsUri"]);r!=null&&m(e,["gcsDestination","outputUriPrefix"],r);const i=p(t,["bigqueryUri"]);if(i!=null&&m(e,["bigqueryDestination","outputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function L0e(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["dest"]);return e!==void 0&&i!=null&&m(e,["outputConfig"],O0e(J_e(i))),n}function V0e(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],_t(t,r));const i=p(e,["src"]);i!=null&&m(n,["inputConfig"],k0e(nG(t,i)));const o=p(e,["config"]);return o!=null&&m(n,["config"],L0e(o,n)),n}function U0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],th(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function F0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],th(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function B0e(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function q0e(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],B0e(n,e)),e}function $0e(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],th(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function z0e(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function H0e(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function G0e(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function j0e(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function K0e(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],z0e(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],H0e(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],G0e(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],j0e(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function W0e(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>K0e(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function Y0e(t){const e={},n=p(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function J0e(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function Q0e(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>J0e(i))),m(e,["urlMetadata"],r)}return e}function X0e(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],W0e(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],Y0e(r));const i=p(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],Q0e(s));const l=p(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);return g!=null&&m(e,["safetyRatings"],g),e}function Z0e(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>X0e(f))),m(e,["candidates"],c)}const i=p(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const s=p(t,["responseId"]);s!=null&&m(e,["responseId"],s);const l=p(t,["usageMetadata"]);return l!=null&&m(e,["usageMetadata"],l),e}function h1(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["code"]);r!=null&&m(e,["code"],r);const i=p(t,["message"]);return i!=null&&m(e,["message"],i),e}function eTe(t){const e={},n=p(t,["response"]);n!=null&&m(e,["response"],Z0e(n));const r=p(t,["error"]);return r!=null&&m(e,["error"],h1(r)),e}function tTe(t){const e={},n=p(t,["values"]);return n!=null&&m(e,["values"],n),e}function nTe(t){const e={},n=p(t,["embedding"]);n!=null&&m(e,["embedding"],tTe(n));const r=p(t,["tokenCount"]);return r!=null&&m(e,["tokenCount"],r),e}function rTe(t){const e={},n=p(t,["response"]);n!=null&&m(e,["response"],nTe(n));const r=p(t,["error"]);return r!=null&&m(e,["error"],h1(r)),e}function iTe(t){const e={},n=p(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const r=p(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>eTe(s))),m(e,["inlinedResponses"],o)}const i=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>rTe(s))),m(e,["inlinedEmbedContentResponses"],o)}return e}function Rf(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata","displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["metadata","state"]);i!=null&&m(e,["state"],iG(i));const o=p(t,["metadata","createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["metadata","endTime"]);s!=null&&m(e,["endTime"],s);const l=p(t,["metadata","updateTime"]);l!=null&&m(e,["updateTime"],l);const c=p(t,["metadata","model"]);c!=null&&m(e,["model"],c);const f=p(t,["metadata","output"]);return f!=null&&m(e,["dest"],iTe(rG(f))),e}function oTe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Rf(s))),m(e,["batchJobs"],o)}return e}function sTe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);return o!=null&&m(e,["error"],h1(o)),e}function aG(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["code"]);r!=null&&m(e,["code"],r);const i=p(t,["message"]);return i!=null&&m(e,["message"],i),e}function aTe(t){const e={},n=p(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const r=p(t,["gcsSource","uris"]);r!=null&&m(e,["gcsUri"],r);const i=p(t,["bigquerySource","inputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function lTe(t){const e={},n=p(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const r=p(t,["gcsDestination","outputUriPrefix"]);r!=null&&m(e,["gcsUri"],r);const i=p(t,["bigqueryDestination","outputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function Ax(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],iG(i));const o=p(t,["error"]);o!=null&&m(e,["error"],aG(o));const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const l=p(t,["startTime"]);l!=null&&m(e,["startTime"],l);const c=p(t,["endTime"]);c!=null&&m(e,["endTime"],c);const f=p(t,["updateTime"]);f!=null&&m(e,["updateTime"],f);const h=p(t,["model"]);h!=null&&m(e,["model"],h);const g=p(t,["inputConfig"]);g!=null&&m(e,["src"],aTe(g));const v=p(t,["outputConfig"]);return v!=null&&m(e,["dest"],lTe(rG(v))),e}function uTe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ax(s))),m(e,["batchJobs"],o)}return e}function cTe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);return o!=null&&m(e,["error"],aG(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lc;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(lc||(lc={}));class wg{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fTe extends Ec{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);const o=n.src;if(!(Array.isArray(n.src)||o.inlinedRequests!==void 0))return this.createInternal(n);const l=this.createInlinedGenerateContentRequest(n),c=l.path,f=l.body,h=LS(this.apiClient,n)._query||{};return this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()).then(v=>Rf(v))},this.createEmbeddings=async n=>{var r,i;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const l=this.createInlinedEmbedContentRequest(n),c=l.path,f=l.body,h=VS(this.apiClient,n)._query||{};return this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()).then(v=>Rf(v))},this.list=async(n={})=>new wg(lc.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=LS(this.apiClient,e),r=n._url,i=Me("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,c=l.requests,f=[];for(const h of c){const g=Object.assign({},h);if(g.systemInstruction){const v=g.systemInstruction;delete g.systemInstruction;const E=g.request;E.systemInstruction=v,g.request=E}f.push(g)}return l.requests=f,delete n.config,delete n._url,delete n._query,{path:i,body:n}}createInlinedEmbedContentRequest(e){const n=VS(this.apiClient,e),r=n._url,i=Me("{model}:asyncBatchEmbedContent",r),l=n.batch.inputConfig.requests,c=l.requests,f=[];delete l.config;for(const h of c){const g=Object.assign({},h),v=g.request;for(const E in g)E!=="request"&&(v[E]=g[E],delete g[E]);f.push(g)}return l.requests=f,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=V0e(this.apiClient,e);return l=Me("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ax(h))}else{const f=LS(this.apiClient,e);return l=Me("{model}:batchGenerateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Rf(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=VS(this.apiClient,e);return o=Me("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>Rf(c))}}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=U0e(this.apiClient,e);return l=Me("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Ax(h))}else{const f=R0e(this.apiClient,e);return l=Me("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Rf(h))}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const c=F0e(this.apiClient,e);s=Me("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=P0e(this.apiClient,e);s=Me("batches/{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=q0e(e);return l=Me("batchPredictionJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=uTe(h),v=new jU;return Object.assign(v,g),v})}else{const f=M0e(e);return l=Me("batches",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=oTe(h),v=new jU;return Object.assign(v,g),v})}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=$0e(this.apiClient,e);return l=Me("batchPredictionJobs/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>cTe(h))}else{const f=D0e(this.apiClient,e);return l=Me("batches/{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>sTe(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dTe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function hTe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function pTe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function mTe(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function gTe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],dTe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],hTe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],pTe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],mTe(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function JU(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>gTe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function yTe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function vTe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function _Te(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],vTe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function TTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function ETe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],TTe(n)),e}function wTe(){return{}}function bTe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function STe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>yTe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],_Te(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],ETe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],wTe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],bTe(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function ATe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function xTe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function CTe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],xTe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function ITe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],ATe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],CTe(r)),e}function RTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const s=p(t,["contents"]);if(e!==void 0&&s!=null){let h=Ji(s);Array.isArray(h)&&(h=h.map(g=>JU(g))),m(e,["contents"],h)}const l=p(t,["systemInstruction"]);e!==void 0&&l!=null&&m(e,["systemInstruction"],JU(Ir(l)));const c=p(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>STe(g))),m(e,["tools"],h)}const f=p(t,["toolConfig"]);if(e!==void 0&&f!=null&&m(e,["toolConfig"],ITe(f)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function PTe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],KH(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],RTe(i,n)),n}function NTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],_a(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function MTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],_a(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function DTe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function kTe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],_a(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],DTe(i,n)),n}function OTe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function LTe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],OTe(n,e)),e}function VTe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function UTe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function FTe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function BTe(t){const e={};if(p(t,["id"])!==void 0)throw new Error("id parameter is not supported in Vertex AI.");const n=p(t,["args"]);n!=null&&m(e,["args"],n);const r=p(t,["name"]);return r!=null&&m(e,["name"],r),e}function qTe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],VTe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],UTe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],FTe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],BTe(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function QU(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>qTe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function $Te(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const l=p(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function zTe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function HTe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],zTe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function GTe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function jTe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],GTe(n)),e}function KTe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function WTe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function YTe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],WTe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const l=p(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function JTe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],YTe(n)),e}function QTe(){return{}}function XTe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function ZTe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(v=>$Te(v))),m(e,["functionDeclarations"],g)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],HTe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],jTe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],KTe(s));const l=p(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],JTe(l)),p(t,["urlContext"])!=null&&m(e,["urlContext"],QTe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],XTe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function eEe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function tEe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function nEe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],tEe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function rEe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],eEe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],nEe(r)),e}function iEe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const s=p(t,["contents"]);if(e!==void 0&&s!=null){let g=Ji(s);Array.isArray(g)&&(g=g.map(v=>QU(v))),m(e,["contents"],g)}const l=p(t,["systemInstruction"]);e!==void 0&&l!=null&&m(e,["systemInstruction"],QU(Ir(l)));const c=p(t,["tools"]);if(e!==void 0&&c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>ZTe(v))),m(e,["tools"],g)}const f=p(t,["toolConfig"]);e!==void 0&&f!=null&&m(e,["toolConfig"],rEe(f));const h=p(t,["kmsKeyName"]);return e!==void 0&&h!=null&&m(e,["encryption_spec","kmsKeyName"],h),n}function oEe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["model"],KH(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],iEe(i,n)),n}function sEe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],_a(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function aEe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],_a(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function lEe(t,e){const n={},r=p(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function uEe(t,e){const n={},r=p(e,["name"]);r!=null&&m(n,["_url","name"],_a(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],lEe(i,n)),n}function cEe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function fEe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],cEe(n,e)),e}function Uv(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["model"]);i!=null&&m(e,["model"],i);const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["updateTime"]);s!=null&&m(e,["updateTime"],s);const l=p(t,["expireTime"]);l!=null&&m(e,["expireTime"],l);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function dEe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function hEe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Uv(s))),m(e,["cachedContents"],o)}return e}function Fv(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["model"]);i!=null&&m(e,["model"],i);const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["updateTime"]);s!=null&&m(e,["updateTime"],s);const l=p(t,["expireTime"]);l!=null&&m(e,["expireTime"],l);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function pEe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function mEe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Fv(s))),m(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gEe extends Ec{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new wg(lc.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=oEe(this.apiClient,e);return l=Me("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Fv(h))}else{const f=PTe(this.apiClient,e);return l=Me("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Uv(h))}}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=sEe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Fv(h))}else{const f=NTe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Uv(h))}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=aEe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=pEe(h),v=new HU;return Object.assign(v,g),v})}else{const f=MTe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=dEe(h),v=new HU;return Object.assign(v,g),v})}}async update(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=uEe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Fv(h))}else{const f=kTe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Uv(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=fEe(e);return l=Me("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=mEe(h),v=new GU;return Object.assign(v,g),v})}else{const f=LTe(e);return l=Me("cachedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=hEe(h),v=new GU;return Object.assign(v,g),v})}}}function XU(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wt(t){return this instanceof Wt?(this.v=t,this):new Wt(t)}function Hf(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(E){return function(b){return Promise.resolve(b).then(E,g)}}function l(E,b){r[E]&&(i[E]=function(S){return new Promise(function(A,I){o.push([E,S,A,I])>1||c(E,S)})},b&&(i[E]=b(i[E])))}function c(E,b){try{f(r[E](b))}catch(S){v(o[0][3],S)}}function f(E){E.value instanceof Wt?Promise.resolve(E.value.v).then(h,g):v(o[0][2],E)}function h(E){c("next",E)}function g(E){c("throw",E)}function v(E,b){E(b),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Zp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof XU=="function"?XU(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(l,c){s=t[o](s),i(l,c,s.done,s.value)})}}function i(o,s,l,c){Promise.resolve(c).then(function(f){o({value:f,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yEe(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:lG(n)}function lG(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function vEe(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function ZU(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!lG(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class _Ee{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new TEe(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class TEe{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),vEe(o)}async sendMessage(e){var n;await this.sendPromise;const r=Ir(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const c=await i,f=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=c.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let v=[];h!=null&&(v=(l=h.slice(g))!==null&&l!==void 0?l:[]);const E=f?[f]:[];this.recordHistory(r,E,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Ir(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?ZU(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Hf(this,arguments,function*(){var s,l,c,f;const h=[];try{for(var g=!0,v=Zp(e),E;E=yield Wt(v.next()),s=E.done,!s;g=!0){f=E.value,g=!1;const b=f;if(yEe(b)){const S=(i=(r=b.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;S!==void 0&&h.push(S)}yield yield Wt(b)}}catch(b){l={error:b}}finally{try{!g&&!s&&(c=v.return)&&(yield Wt(c.call(v)))}finally{if(l)throw l.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...ZU(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AT extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,AT.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EEe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function wEe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],EEe(n,e)),e}function bEe(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["message"]);r!=null&&m(e,["message"],r);const i=p(t,["code"]);return i!=null&&m(e,["code"],i),e}function SEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["mimeType"]);i!=null&&m(e,["mimeType"],i);const o=p(t,["sizeBytes"]);o!=null&&m(e,["sizeBytes"],o);const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const l=p(t,["expirationTime"]);l!=null&&m(e,["expirationTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["sha256Hash"]);f!=null&&m(e,["sha256Hash"],f);const h=p(t,["uri"]);h!=null&&m(e,["uri"],h);const g=p(t,["downloadUri"]);g!=null&&m(e,["downloadUri"],g);const v=p(t,["state"]);v!=null&&m(e,["state"],v);const E=p(t,["source"]);E!=null&&m(e,["source"],E);const b=p(t,["videoMetadata"]);b!=null&&m(e,["videoMetadata"],b);const S=p(t,["error"]);return S!=null&&m(e,["error"],bEe(S)),e}function AEe(t){const e={},n=p(t,["file"]);n!=null&&m(e,["file"],SEe(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function xEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","file"],ZH(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function CEe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","file"],ZH(n));const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function IEe(t){const e={},n=p(t,["details"]);n!=null&&m(e,["details"],n);const r=p(t,["message"]);r!=null&&m(e,["message"],r);const i=p(t,["code"]);return i!=null&&m(e,["code"],i),e}function xx(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["mimeType"]);i!=null&&m(e,["mimeType"],i);const o=p(t,["sizeBytes"]);o!=null&&m(e,["sizeBytes"],o);const s=p(t,["createTime"]);s!=null&&m(e,["createTime"],s);const l=p(t,["expirationTime"]);l!=null&&m(e,["expirationTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["sha256Hash"]);f!=null&&m(e,["sha256Hash"],f);const h=p(t,["uri"]);h!=null&&m(e,["uri"],h);const g=p(t,["downloadUri"]);g!=null&&m(e,["downloadUri"],g);const v=p(t,["state"]);v!=null&&m(e,["state"],v);const E=p(t,["source"]);E!=null&&m(e,["source"],E);const b=p(t,["videoMetadata"]);b!=null&&m(e,["videoMetadata"],b);const S=p(t,["error"]);return S!=null&&m(e,["error"],IEe(S)),e}function REe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>xx(s))),m(e,["files"],o)}return e}function PEe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function NEe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MEe extends Ec{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new wg(lc.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>xx(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=wEe(e);return o=Me("files",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=REe(c),h=new V_e;return Object.assign(h,f),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=AEe(e);return o=Me("upload/v1beta/files",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=PEe(c),h=new U_e;return Object.assign(h,f),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=xEe(e);return o=Me("files/{file}",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>xx(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=CEe(e);return o=Me("files/{file}",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=NEe(c),h=new F_e;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DEe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function uG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],DEe(n)),e}function kEe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],uG(r)),e}function OEe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>kEe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function LEe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],uG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],OEe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function VEe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function UEe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function FEe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function BEe(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function qEe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],VEe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],UEe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],FEe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],BEe(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function $Ee(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>qEe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function zEe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function HEe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function GEe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],HEe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function jEe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function KEe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],jEe(n)),e}function WEe(){return{}}function YEe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function JEe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>zEe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],GEe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],KEe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],WEe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],YEe(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function QEe(t){const e={},n=p(t,["handle"]);if(n!=null&&m(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function e4(){return{}}function XEe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function ZEe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],XEe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function ewe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function twe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],ewe(r)),e}function nwe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function rwe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const l=p(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const g=p(t,["speechConfig"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","speechConfig"],LEe(d1(g)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],$Ee(Ir(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let $=eh(b);Array.isArray($)&&($=$.map(H=>JEe(Zd(H)))),m(e,["setup","tools"],$)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],QEe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],e4());const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&m(e,["setup","outputAudioTranscription"],e4());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&m(e,["setup","realtimeInputConfig"],ZEe(D));const k=p(t,["contextWindowCompression"]);e!==void 0&&k!=null&&m(e,["setup","contextWindowCompression"],twe(k));const q=p(t,["proactivity"]);return e!==void 0&&q!=null&&m(e,["setup","proactivity"],nwe(q)),n}function iwe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],_t(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],rwe(i,n)),n}function owe(){return{}}function swe(){return{}}function awe(t){const e={},n=p(t,["media"]);n!=null&&m(e,["mediaChunks"],WH(n));const r=p(t,["audio"]);r!=null&&m(e,["audio"],JH(r));const i=p(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(t,["video"]);o!=null&&m(e,["video"],YH(o));const s=p(t,["text"]);return s!=null&&m(e,["text"],s),p(t,["activityStart"])!=null&&m(e,["activityStart"],owe()),p(t,["activityEnd"])!=null&&m(e,["activityEnd"],swe()),e}function cG(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["weight"]);return r!=null&&m(e,["weight"],r),e}function lwe(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>cG(i))),m(e,["weightedPrompts"],r)}return e}function fG(t){const e={},n=p(t,["temperature"]);n!=null&&m(e,["temperature"],n);const r=p(t,["topK"]);r!=null&&m(e,["topK"],r);const i=p(t,["seed"]);i!=null&&m(e,["seed"],i);const o=p(t,["guidance"]);o!=null&&m(e,["guidance"],o);const s=p(t,["bpm"]);s!=null&&m(e,["bpm"],s);const l=p(t,["density"]);l!=null&&m(e,["density"],l);const c=p(t,["brightness"]);c!=null&&m(e,["brightness"],c);const f=p(t,["scale"]);f!=null&&m(e,["scale"],f);const h=p(t,["muteBass"]);h!=null&&m(e,["muteBass"],h);const g=p(t,["muteDrums"]);g!=null&&m(e,["muteDrums"],g);const v=p(t,["onlyBassAndDrums"]);v!=null&&m(e,["onlyBassAndDrums"],v);const E=p(t,["musicGenerationMode"]);return E!=null&&m(e,["musicGenerationMode"],E),e}function uwe(t){const e={},n=p(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],fG(n)),e}function dG(t){const e={},n=p(t,["model"]);return n!=null&&m(e,["model"],n),e}function hG(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>cG(i))),m(e,["weightedPrompts"],r)}return e}function Cx(t){const e={},n=p(t,["setup"]);n!=null&&m(e,["setup"],dG(n));const r=p(t,["clientContent"]);r!=null&&m(e,["clientContent"],hG(r));const i=p(t,["musicGenerationConfig"]);i!=null&&m(e,["musicGenerationConfig"],fG(i));const o=p(t,["playbackControl"]);return o!=null&&m(e,["playbackControl"],o),e}function cwe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function fwe(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],cwe(n)),e}function dwe(t){const e={},n=p(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],fwe(n)),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function hwe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function pwe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function mwe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function gwe(t){const e={};if(p(t,["id"])!==void 0)throw new Error("id parameter is not supported in Vertex AI.");const n=p(t,["args"]);n!=null&&m(e,["args"],n);const r=p(t,["name"]);return r!=null&&m(e,["name"],r),e}function ywe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],hwe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],pwe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],mwe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],gwe(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function vwe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ywe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function _we(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const l=p(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function Twe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function Ewe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],Twe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function wwe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function bwe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],wwe(n)),e}function Swe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function Awe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function xwe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],Awe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const l=p(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function Cwe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],xwe(n)),e}function Iwe(){return{}}function Rwe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function Pwe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(v=>_we(v))),m(e,["functionDeclarations"],g)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],Ewe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],bwe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],Swe(s));const l=p(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],Cwe(l)),p(t,["urlContext"])!=null&&m(e,["urlContext"],Iwe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],Rwe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function Nwe(t){const e={},n=p(t,["handle"]);n!=null&&m(e,["handle"],n);const r=p(t,["transparent"]);return r!=null&&m(e,["transparent"],r),e}function t4(){return{}}function Mwe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function Dwe(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],Mwe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function kwe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function Owe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],kwe(r)),e}function Lwe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function Vwe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const l=p(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const g=p(t,["speechConfig"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","speechConfig"],dwe(d1(g)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],vwe(Ir(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let $=eh(b);Array.isArray($)&&($=$.map(H=>Pwe(Zd(H)))),m(e,["setup","tools"],$)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],Nwe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],t4());const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&m(e,["setup","outputAudioTranscription"],t4());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&m(e,["setup","realtimeInputConfig"],Dwe(D));const k=p(t,["contextWindowCompression"]);e!==void 0&&k!=null&&m(e,["setup","contextWindowCompression"],Owe(k));const q=p(t,["proactivity"]);return e!==void 0&&q!=null&&m(e,["setup","proactivity"],Lwe(q)),n}function Uwe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],_t(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],Vwe(i,n)),n}function Fwe(){return{}}function Bwe(){return{}}function qwe(t){const e={},n=p(t,["media"]);n!=null&&m(e,["mediaChunks"],WH(n));const r=p(t,["audio"]);r!=null&&m(e,["audio"],JH(r));const i=p(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(t,["video"]);o!=null&&m(e,["video"],YH(o));const s=p(t,["text"]);return s!=null&&m(e,["text"],s),p(t,["activityStart"])!=null&&m(e,["activityStart"],Fwe()),p(t,["activityEnd"])!=null&&m(e,["activityEnd"],Bwe()),e}function $we(){return{}}function zwe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function Hwe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Gwe(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function pG(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function jwe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],zwe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],Hwe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Gwe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],pG(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function Kwe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jwe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function n4(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["finished"]);return r!=null&&m(e,["finished"],r),e}function Wwe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function Ywe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Wwe(i))),m(e,["urlMetadata"],r)}return e}function Jwe(t){const e={},n=p(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],Kwe(n));const r=p(t,["turnComplete"]);r!=null&&m(e,["turnComplete"],r);const i=p(t,["interrupted"]);i!=null&&m(e,["interrupted"],i);const o=p(t,["groundingMetadata"]);o!=null&&m(e,["groundingMetadata"],o);const s=p(t,["generationComplete"]);s!=null&&m(e,["generationComplete"],s);const l=p(t,["inputTranscription"]);l!=null&&m(e,["inputTranscription"],n4(l));const c=p(t,["outputTranscription"]);c!=null&&m(e,["outputTranscription"],n4(c));const f=p(t,["urlContextMetadata"]);return f!=null&&m(e,["urlContextMetadata"],Ywe(f)),e}function Qwe(t){const e={},n=p(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>pG(i))),m(e,["functionCalls"],r)}return e}function Xwe(t){const e={},n=p(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function gv(t){const e={},n=p(t,["modality"]);n!=null&&m(e,["modality"],n);const r=p(t,["tokenCount"]);return r!=null&&m(e,["tokenCount"],r),e}function Zwe(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=p(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=p(t,["responseTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const s=p(t,["thoughtsTokenCount"]);s!=null&&m(e,["thoughtsTokenCount"],s);const l=p(t,["totalTokenCount"]);l!=null&&m(e,["totalTokenCount"],l);const c=p(t,["promptTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(E=>gv(E))),m(e,["promptTokensDetails"],v)}const f=p(t,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(E=>gv(E))),m(e,["cacheTokensDetails"],v)}const h=p(t,["responseTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(E=>gv(E))),m(e,["responseTokensDetails"],v)}const g=p(t,["toolUsePromptTokensDetails"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(E=>gv(E))),m(e,["toolUsePromptTokensDetails"],v)}return e}function ebe(t){const e={},n=p(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function tbe(t){const e={},n=p(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const r=p(t,["resumable"]);r!=null&&m(e,["resumable"],r);const i=p(t,["lastConsumedClientMessageIndex"]);return i!=null&&m(e,["lastConsumedClientMessageIndex"],i),e}function nbe(t){const e={};p(t,["setupComplete"])!=null&&m(e,["setupComplete"],$we());const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],Jwe(r));const i=p(t,["toolCall"]);i!=null&&m(e,["toolCall"],Qwe(i));const o=p(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],Xwe(o));const s=p(t,["usageMetadata"]);s!=null&&m(e,["usageMetadata"],Zwe(s));const l=p(t,["goAway"]);l!=null&&m(e,["goAway"],ebe(l));const c=p(t,["sessionResumptionUpdate"]);return c!=null&&m(e,["sessionResumptionUpdate"],tbe(c)),e}function rbe(){return{}}function ibe(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["weight"]);return r!=null&&m(e,["weight"],r),e}function obe(t){const e={},n=p(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ibe(i))),m(e,["weightedPrompts"],r)}return e}function sbe(t){const e={},n=p(t,["temperature"]);n!=null&&m(e,["temperature"],n);const r=p(t,["topK"]);r!=null&&m(e,["topK"],r);const i=p(t,["seed"]);i!=null&&m(e,["seed"],i);const o=p(t,["guidance"]);o!=null&&m(e,["guidance"],o);const s=p(t,["bpm"]);s!=null&&m(e,["bpm"],s);const l=p(t,["density"]);l!=null&&m(e,["density"],l);const c=p(t,["brightness"]);c!=null&&m(e,["brightness"],c);const f=p(t,["scale"]);f!=null&&m(e,["scale"],f);const h=p(t,["muteBass"]);h!=null&&m(e,["muteBass"],h);const g=p(t,["muteDrums"]);g!=null&&m(e,["muteDrums"],g);const v=p(t,["onlyBassAndDrums"]);v!=null&&m(e,["onlyBassAndDrums"],v);const E=p(t,["musicGenerationMode"]);return E!=null&&m(e,["musicGenerationMode"],E),e}function abe(t){const e={},n=p(t,["clientContent"]);n!=null&&m(e,["clientContent"],obe(n));const r=p(t,["musicGenerationConfig"]);return r!=null&&m(e,["musicGenerationConfig"],sbe(r)),e}function lbe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);r!=null&&m(e,["mimeType"],r);const i=p(t,["sourceMetadata"]);return i!=null&&m(e,["sourceMetadata"],abe(i)),e}function ube(t){const e={},n=p(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>lbe(i))),m(e,["audioChunks"],r)}return e}function cbe(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["filteredReason"]);return r!=null&&m(e,["filteredReason"],r),e}function fbe(t){const e={};p(t,["setupComplete"])!=null&&m(e,["setupComplete"],rbe());const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],ube(r));const i=p(t,["filteredPrompt"]);return i!=null&&m(e,["filteredPrompt"],cbe(i)),e}function dbe(t){const e={},n=p(t,["sessionId"]);return n!=null&&m(e,["sessionId"],n),e}function hbe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function pbe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function mbe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function mG(t){const e={},n=p(t,["args"]);n!=null&&m(e,["args"],n);const r=p(t,["name"]);return r!=null&&m(e,["name"],r),e}function gbe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],hbe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],pbe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],mbe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],mG(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function ybe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>gbe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function r4(t){const e={},n=p(t,["text"]);n!=null&&m(e,["text"],n);const r=p(t,["finished"]);return r!=null&&m(e,["finished"],r),e}function vbe(t){const e={},n=p(t,["modelTurn"]);n!=null&&m(e,["modelTurn"],ybe(n));const r=p(t,["turnComplete"]);r!=null&&m(e,["turnComplete"],r);const i=p(t,["interrupted"]);i!=null&&m(e,["interrupted"],i);const o=p(t,["groundingMetadata"]);o!=null&&m(e,["groundingMetadata"],o);const s=p(t,["generationComplete"]);s!=null&&m(e,["generationComplete"],s);const l=p(t,["inputTranscription"]);l!=null&&m(e,["inputTranscription"],r4(l));const c=p(t,["outputTranscription"]);return c!=null&&m(e,["outputTranscription"],r4(c)),e}function _be(t){const e={},n=p(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>mG(i))),m(e,["functionCalls"],r)}return e}function Tbe(t){const e={},n=p(t,["ids"]);return n!=null&&m(e,["ids"],n),e}function yv(t){const e={},n=p(t,["modality"]);n!=null&&m(e,["modality"],n);const r=p(t,["tokenCount"]);return r!=null&&m(e,["tokenCount"],r),e}function Ebe(t){const e={},n=p(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=p(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=p(t,["candidatesTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const s=p(t,["thoughtsTokenCount"]);s!=null&&m(e,["thoughtsTokenCount"],s);const l=p(t,["totalTokenCount"]);l!=null&&m(e,["totalTokenCount"],l);const c=p(t,["promptTokensDetails"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(b=>yv(b))),m(e,["promptTokensDetails"],E)}const f=p(t,["cacheTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(b=>yv(b))),m(e,["cacheTokensDetails"],E)}const h=p(t,["candidatesTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(b=>yv(b))),m(e,["responseTokensDetails"],E)}const g=p(t,["toolUsePromptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(b=>yv(b))),m(e,["toolUsePromptTokensDetails"],E)}const v=p(t,["trafficType"]);return v!=null&&m(e,["trafficType"],v),e}function wbe(t){const e={},n=p(t,["timeLeft"]);return n!=null&&m(e,["timeLeft"],n),e}function bbe(t){const e={},n=p(t,["newHandle"]);n!=null&&m(e,["newHandle"],n);const r=p(t,["resumable"]);r!=null&&m(e,["resumable"],r);const i=p(t,["lastConsumedClientMessageIndex"]);return i!=null&&m(e,["lastConsumedClientMessageIndex"],i),e}function Sbe(t){const e={},n=p(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],dbe(n));const r=p(t,["serverContent"]);r!=null&&m(e,["serverContent"],vbe(r));const i=p(t,["toolCall"]);i!=null&&m(e,["toolCall"],_be(i));const o=p(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],Tbe(o));const s=p(t,["usageMetadata"]);s!=null&&m(e,["usageMetadata"],Ebe(s));const l=p(t,["goAway"]);l!=null&&m(e,["goAway"],wbe(l));const c=p(t,["sessionResumptionUpdate"]);return c!=null&&m(e,["sessionResumptionUpdate"],bbe(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Abe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function xbe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Cbe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Ibe(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function Rbe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],Abe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],xbe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Cbe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],Ibe(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function xT(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Rbe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function Pbe(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const l=p(t,["format"]);l!=null&&m(e,["format"],l);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const g=p(t,["maxProperties"]);g!=null&&m(e,["maxProperties"],g);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const I=p(t,["nullable"]);I!=null&&m(e,["nullable"],I);const D=p(t,["pattern"]);D!=null&&m(e,["pattern"],D);const k=p(t,["properties"]);k!=null&&m(e,["properties"],k);const q=p(t,["propertyOrdering"]);q!=null&&m(e,["propertyOrdering"],q);const $=p(t,["required"]);$!=null&&m(e,["required"],$);const H=p(t,["title"]);H!=null&&m(e,["title"],H);const M=p(t,["type"]);return M!=null&&m(e,["type"],M),e}function Nbe(t){const e={};if(p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["category"]);n!=null&&m(e,["category"],n);const r=p(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function Mbe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function Dbe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function kbe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],Dbe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Obe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function Lbe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],Obe(n)),e}function Vbe(){return{}}function Ube(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function Fbe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>Mbe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],kbe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],Lbe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],Vbe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],Ube(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function Bbe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function qbe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function $be(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],qbe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function zbe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],Bbe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],$be(r)),e}function Hbe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function gG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],Hbe(n)),e}function Gbe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],gG(r)),e}function jbe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Gbe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function Kbe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],gG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],jbe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function Wbe(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function Ybe(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],xT(Ir(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const l=p(e,["topK"]);l!=null&&m(r,["topK"],l);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const g=p(e,["responseLogprobs"]);g!=null&&m(r,["responseLogprobs"],g);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const I=p(e,["responseSchema"]);I!=null&&m(r,["responseSchema"],Pbe(c1(I)));const D=p(e,["responseJsonSchema"]);if(D!=null&&m(r,["responseJsonSchema"],D),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const k=p(e,["safetySettings"]);if(n!==void 0&&k!=null){let U=k;Array.isArray(U)&&(U=U.map(z=>Nbe(z))),m(n,["safetySettings"],U)}const q=p(e,["tools"]);if(n!==void 0&&q!=null){let U=eh(q);Array.isArray(U)&&(U=U.map(z=>Fbe(Zd(z)))),m(n,["tools"],U)}const $=p(e,["toolConfig"]);if(n!==void 0&&$!=null&&m(n,["toolConfig"],zbe($)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=p(e,["cachedContent"]);n!==void 0&&H!=null&&m(n,["cachedContent"],_a(t,H));const M=p(e,["responseModalities"]);M!=null&&m(r,["responseModalities"],M);const L=p(e,["mediaResolution"]);L!=null&&m(r,["mediaResolution"],L);const O=p(e,["speechConfig"]);if(O!=null&&m(r,["speechConfig"],Kbe(f1(O))),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const F=p(e,["thinkingConfig"]);return F!=null&&m(r,["thinkingConfig"],Wbe(F)),r}function i4(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ji(i);Array.isArray(s)&&(s=s.map(l=>xT(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["generationConfig"],Ybe(t,o,n)),n}function Jbe(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Qbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["contents"]);i!=null&&m(n,["requests[]","content"],u1(t,i));const o=p(e,["config"]);o!=null&&m(n,["config"],Jbe(o,n));const s=p(e,["model"]);return s!==void 0&&m(n,["requests[]","model"],_t(t,s)),n}function Xbe(t,e){const n={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=p(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["aspectRatio"]);e!==void 0&&i!=null&&m(e,["parameters","aspectRatio"],i);const o=p(t,["guidanceScale"]);if(e!==void 0&&o!=null&&m(e,["parameters","guidanceScale"],o),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&m(e,["parameters","safetySetting"],s);const l=p(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=p(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&m(e,["parameters","includeSafetyAttributes"],c);const f=p(t,["includeRaiReason"]);e!==void 0&&f!=null&&m(e,["parameters","includeRaiReason"],f);const h=p(t,["language"]);e!==void 0&&h!=null&&m(e,["parameters","language"],h);const g=p(t,["outputMimeType"]);e!==void 0&&g!=null&&m(e,["parameters","outputOptions","mimeType"],g);const v=p(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&m(e,["parameters","outputOptions","compressionQuality"],v),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const E=p(t,["imageSize"]);if(e!==void 0&&E!=null&&m(e,["parameters","sampleImageSize"],E),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Zbe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&m(n,["config"],Xbe(o,n)),n}function eSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],_t(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function tSe(t,e,n){const r={},i=p(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const s=p(e,["filter"]);n!==void 0&&s!=null&&m(n,["_query","filter"],s);const l=p(e,["queryBase"]);return n!==void 0&&l!=null&&m(n,["_url","models_url"],eG(t,l)),r}function nSe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],tSe(t,r,n)),n}function rSe(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function iSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],_t(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],rSe(i,n)),n}function oSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],_t(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function sSe(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function aSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ji(i);Array.isArray(s)&&(s=s.map(l=>xT(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],sSe(o)),n}function yG(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=p(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],wc(n));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function lSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);if(e!==void 0&&i!=null&&m(e,["instances[0]","image"],yG(i)),p(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function uSe(t,e){const n={},r=p(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=p(t,["durationSeconds"]);if(e!==void 0&&i!=null&&m(e,["parameters","durationSeconds"],i),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const s=p(t,["resolution"]);e!==void 0&&s!=null&&m(e,["parameters","resolution"],s);const l=p(t,["personGeneration"]);if(e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=p(t,["negativePrompt"]);e!==void 0&&c!=null&&m(e,["parameters","negativePrompt"],c);const f=p(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&m(e,["parameters","enhancePrompt"],f),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(p(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(p(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function cSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["image"]);if(o!=null&&m(n,["instances[0]","image"],yG(o)),p(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=p(e,["source"]);s!=null&&m(n,["config"],lSe(s,n));const l=p(e,["config"]);return l!=null&&m(n,["config"],uSe(l,n)),n}function fSe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function dSe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function hSe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function pSe(t){const e={};if(p(t,["id"])!==void 0)throw new Error("id parameter is not supported in Vertex AI.");const n=p(t,["args"]);n!=null&&m(e,["args"],n);const r=p(t,["name"]);return r!=null&&m(e,["name"],r),e}function mSe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],fSe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],dSe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],hSe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],pSe(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function nh(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>mSe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function gSe(t){const e={},n=p(t,["anyOf"]);n!=null&&m(e,["anyOf"],n);const r=p(t,["default"]);r!=null&&m(e,["default"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["enum"]);o!=null&&m(e,["enum"],o);const s=p(t,["example"]);s!=null&&m(e,["example"],s);const l=p(t,["format"]);l!=null&&m(e,["format"],l);const c=p(t,["items"]);c!=null&&m(e,["items"],c);const f=p(t,["maxItems"]);f!=null&&m(e,["maxItems"],f);const h=p(t,["maxLength"]);h!=null&&m(e,["maxLength"],h);const g=p(t,["maxProperties"]);g!=null&&m(e,["maxProperties"],g);const v=p(t,["maximum"]);v!=null&&m(e,["maximum"],v);const E=p(t,["minItems"]);E!=null&&m(e,["minItems"],E);const b=p(t,["minLength"]);b!=null&&m(e,["minLength"],b);const S=p(t,["minProperties"]);S!=null&&m(e,["minProperties"],S);const A=p(t,["minimum"]);A!=null&&m(e,["minimum"],A);const I=p(t,["nullable"]);I!=null&&m(e,["nullable"],I);const D=p(t,["pattern"]);D!=null&&m(e,["pattern"],D);const k=p(t,["properties"]);k!=null&&m(e,["properties"],k);const q=p(t,["propertyOrdering"]);q!=null&&m(e,["propertyOrdering"],q);const $=p(t,["required"]);$!=null&&m(e,["required"],$);const H=p(t,["title"]);H!=null&&m(e,["title"],H);const M=p(t,["type"]);return M!=null&&m(e,["type"],M),e}function ySe(t){const e={},n=p(t,["featureSelectionPreference"]);return n!=null&&m(e,["featureSelectionPreference"],n),e}function vSe(t){const e={},n=p(t,["method"]);n!=null&&m(e,["method"],n);const r=p(t,["category"]);r!=null&&m(e,["category"],r);const i=p(t,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function _Se(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=p(t,["description"]);n!=null&&m(e,["description"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const s=p(t,["response"]);s!=null&&m(e,["response"],s);const l=p(t,["responseJsonSchema"]);return l!=null&&m(e,["responseJsonSchema"],l),e}function TSe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function ESe(t){const e={},n=p(t,["timeRangeFilter"]);n!=null&&m(e,["timeRangeFilter"],TSe(n));const r=p(t,["excludeDomains"]);return r!=null&&m(e,["excludeDomains"],r),e}function wSe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function bSe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],wSe(n)),e}function SSe(t){const e={},n=p(t,["excludeDomains"]);return n!=null&&m(e,["excludeDomains"],n),e}function ASe(t){const e={},n=p(t,["apiKeyString"]);return n!=null&&m(e,["apiKeyString"],n),e}function xSe(t){const e={},n=p(t,["apiKeyConfig"]);n!=null&&m(e,["apiKeyConfig"],ASe(n));const r=p(t,["authType"]);r!=null&&m(e,["authType"],r);const i=p(t,["googleServiceAccountConfig"]);i!=null&&m(e,["googleServiceAccountConfig"],i);const o=p(t,["httpBasicAuthConfig"]);o!=null&&m(e,["httpBasicAuthConfig"],o);const s=p(t,["oauthConfig"]);s!=null&&m(e,["oauthConfig"],s);const l=p(t,["oidcConfig"]);return l!=null&&m(e,["oidcConfig"],l),e}function CSe(t){const e={},n=p(t,["authConfig"]);return n!=null&&m(e,["authConfig"],xSe(n)),e}function ISe(){return{}}function RSe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function vG(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(v=>_Se(v))),m(e,["functionDeclarations"],g)}const r=p(t,["retrieval"]);r!=null&&m(e,["retrieval"],r);const i=p(t,["googleSearch"]);i!=null&&m(e,["googleSearch"],ESe(i));const o=p(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],bSe(o));const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],SSe(s));const l=p(t,["googleMaps"]);l!=null&&m(e,["googleMaps"],CSe(l)),p(t,["urlContext"])!=null&&m(e,["urlContext"],ISe());const f=p(t,["computerUse"]);f!=null&&m(e,["computerUse"],RSe(f));const h=p(t,["codeExecution"]);return h!=null&&m(e,["codeExecution"],h),e}function PSe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["allowedFunctionNames"]);return r!=null&&m(e,["allowedFunctionNames"],r),e}function NSe(t){const e={},n=p(t,["latitude"]);n!=null&&m(e,["latitude"],n);const r=p(t,["longitude"]);return r!=null&&m(e,["longitude"],r),e}function MSe(t){const e={},n=p(t,["latLng"]);n!=null&&m(e,["latLng"],NSe(n));const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function DSe(t){const e={},n=p(t,["functionCallingConfig"]);n!=null&&m(e,["functionCallingConfig"],PSe(n));const r=p(t,["retrievalConfig"]);return r!=null&&m(e,["retrievalConfig"],MSe(r)),e}function kSe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function OSe(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],kSe(n)),e}function LSe(t){const e={},n=p(t,["voiceConfig"]);if(n!=null&&m(e,["voiceConfig"],OSe(n)),p(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=p(t,["languageCode"]);return r!=null&&m(e,["languageCode"],r),e}function VSe(t){const e={},n=p(t,["includeThoughts"]);n!=null&&m(e,["includeThoughts"],n);const r=p(t,["thinkingBudget"]);return r!=null&&m(e,["thinkingBudget"],r),e}function USe(t,e,n){const r={},i=p(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],nh(Ir(i)));const o=p(e,["temperature"]);o!=null&&m(r,["temperature"],o);const s=p(e,["topP"]);s!=null&&m(r,["topP"],s);const l=p(e,["topK"]);l!=null&&m(r,["topK"],l);const c=p(e,["candidateCount"]);c!=null&&m(r,["candidateCount"],c);const f=p(e,["maxOutputTokens"]);f!=null&&m(r,["maxOutputTokens"],f);const h=p(e,["stopSequences"]);h!=null&&m(r,["stopSequences"],h);const g=p(e,["responseLogprobs"]);g!=null&&m(r,["responseLogprobs"],g);const v=p(e,["logprobs"]);v!=null&&m(r,["logprobs"],v);const E=p(e,["presencePenalty"]);E!=null&&m(r,["presencePenalty"],E);const b=p(e,["frequencyPenalty"]);b!=null&&m(r,["frequencyPenalty"],b);const S=p(e,["seed"]);S!=null&&m(r,["seed"],S);const A=p(e,["responseMimeType"]);A!=null&&m(r,["responseMimeType"],A);const I=p(e,["responseSchema"]);I!=null&&m(r,["responseSchema"],gSe(c1(I)));const D=p(e,["responseJsonSchema"]);D!=null&&m(r,["responseJsonSchema"],D);const k=p(e,["routingConfig"]);k!=null&&m(r,["routingConfig"],k);const q=p(e,["modelSelectionConfig"]);q!=null&&m(r,["modelConfig"],ySe(q));const $=p(e,["safetySettings"]);if(n!==void 0&&$!=null){let be=$;Array.isArray(be)&&(be=be.map(ee=>vSe(ee))),m(n,["safetySettings"],be)}const H=p(e,["tools"]);if(n!==void 0&&H!=null){let be=eh(H);Array.isArray(be)&&(be=be.map(ee=>vG(Zd(ee)))),m(n,["tools"],be)}const M=p(e,["toolConfig"]);n!==void 0&&M!=null&&m(n,["toolConfig"],DSe(M));const L=p(e,["labels"]);n!==void 0&&L!=null&&m(n,["labels"],L);const O=p(e,["cachedContent"]);n!==void 0&&O!=null&&m(n,["cachedContent"],_a(t,O));const F=p(e,["responseModalities"]);F!=null&&m(r,["responseModalities"],F);const U=p(e,["mediaResolution"]);U!=null&&m(r,["mediaResolution"],U);const z=p(e,["speechConfig"]);z!=null&&m(r,["speechConfig"],LSe(f1(z)));const G=p(e,["audioTimestamp"]);G!=null&&m(r,["audioTimestamp"],G);const Ce=p(e,["thinkingConfig"]);return Ce!=null&&m(r,["thinkingConfig"],VSe(Ce)),r}function o4(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ji(i);Array.isArray(s)&&(s=s.map(l=>nh(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["generationConfig"],USe(t,o,n)),n}function FSe(t,e){const n={},r=p(t,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["instances[]","title"],i);const o=p(t,["outputDimensionality"]);e!==void 0&&o!=null&&m(e,["parameters","outputDimensionality"],o);const s=p(t,["mimeType"]);e!==void 0&&s!=null&&m(e,["instances[]","mimeType"],s);const l=p(t,["autoTruncate"]);return e!==void 0&&l!=null&&m(e,["parameters","autoTruncate"],l),n}function BSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["contents"]);i!=null&&m(n,["instances[]","content"],u1(t,i));const o=p(e,["config"]);return o!=null&&m(n,["config"],FSe(o,n)),n}function qSe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const l=p(t,["guidanceScale"]);e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=p(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const g=p(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&m(e,["parameters","includeSafetyAttributes"],g);const v=p(t,["includeRaiReason"]);e!==void 0&&v!=null&&m(e,["parameters","includeRaiReason"],v);const E=p(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const S=p(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&m(e,["parameters","addWatermark"],A);const I=p(t,["imageSize"]);e!==void 0&&I!=null&&m(e,["parameters","sampleImageSize"],I);const D=p(t,["enhancePrompt"]);return e!==void 0&&D!=null&&m(e,["parameters","enhancePrompt"],D),n}function $Se(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&m(n,["config"],qSe(o,n)),n}function us(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["imageBytes"]);r!=null&&m(e,["bytesBase64Encoded"],wc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function zSe(t){const e={},n=p(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const r=p(t,["segmentationClasses"]);r!=null&&m(e,["maskClasses"],r);const i=p(t,["maskDilation"]);return i!=null&&m(e,["dilation"],i),e}function HSe(t){const e={},n=p(t,["controlType"]);n!=null&&m(e,["controlType"],n);const r=p(t,["enableControlImageComputation"]);return r!=null&&m(e,["computeControl"],r),e}function GSe(t){const e={},n=p(t,["styleDescription"]);return n!=null&&m(e,["styleDescription"],n),e}function jSe(t){const e={},n=p(t,["subjectType"]);n!=null&&m(e,["subjectType"],n);const r=p(t,["subjectDescription"]);return r!=null&&m(e,["subjectDescription"],r),e}function KSe(t){const e={},n=p(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],us(n));const r=p(t,["referenceId"]);r!=null&&m(e,["referenceId"],r);const i=p(t,["referenceType"]);i!=null&&m(e,["referenceType"],i);const o=p(t,["maskImageConfig"]);o!=null&&m(e,["maskImageConfig"],zSe(o));const s=p(t,["controlImageConfig"]);s!=null&&m(e,["controlImageConfig"],HSe(s));const l=p(t,["styleImageConfig"]);l!=null&&m(e,["styleImageConfig"],GSe(l));const c=p(t,["subjectImageConfig"]);return c!=null&&m(e,["subjectImageConfig"],jSe(c)),e}function WSe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const s=p(t,["aspectRatio"]);e!==void 0&&s!=null&&m(e,["parameters","aspectRatio"],s);const l=p(t,["guidanceScale"]);e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l);const c=p(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=p(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const g=p(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&m(e,["parameters","includeSafetyAttributes"],g);const v=p(t,["includeRaiReason"]);e!==void 0&&v!=null&&m(e,["parameters","includeRaiReason"],v);const E=p(t,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const S=p(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S);const A=p(t,["addWatermark"]);e!==void 0&&A!=null&&m(e,["parameters","addWatermark"],A);const I=p(t,["editMode"]);e!==void 0&&I!=null&&m(e,["parameters","editMode"],I);const D=p(t,["baseSteps"]);return e!==void 0&&D!=null&&m(e,["parameters","editConfig","baseSteps"],D),n}function YSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>KSe(c))),m(n,["instances[0]","referenceImages"],l)}const s=p(e,["config"]);return s!=null&&m(n,["config"],WSe(s,n)),n}function JSe(t,e){const n={},r=p(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=p(t,["includeRaiReason"]);e!==void 0&&i!=null&&m(e,["parameters","includeRaiReason"],i);const o=p(t,["outputMimeType"]);e!==void 0&&o!=null&&m(e,["parameters","outputOptions","mimeType"],o);const s=p(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&m(e,["parameters","outputOptions","compressionQuality"],s);const l=p(t,["enhanceInputImage"]);e!==void 0&&l!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],l);const c=p(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const f=p(t,["numberOfImages"]);e!==void 0&&f!=null&&m(e,["parameters","sampleCount"],f);const h=p(t,["mode"]);return e!==void 0&&h!=null&&m(e,["parameters","mode"],h),n}function QSe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["image"]);i!=null&&m(n,["instances[0]","image"],us(i));const o=p(e,["upscaleFactor"]);o!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=p(e,["config"]);return s!=null&&m(n,["config"],JSe(s,n)),n}function XSe(t){const e={},n=p(t,["productImage"]);return n!=null&&m(e,["image"],us(n)),e}function ZSe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["personImage"]);e!==void 0&&i!=null&&m(e,["instances[0]","personImage","image"],us(i));const o=p(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>XSe(l))),m(e,["instances[0]","productImages"],s)}return n}function eAe(t,e){const n={},r=p(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["baseSteps"]);e!==void 0&&i!=null&&m(e,["parameters","editConfig","baseSteps"],i);const o=p(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const s=p(t,["seed"]);e!==void 0&&s!=null&&m(e,["parameters","seed"],s);const l=p(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&m(e,["parameters","safetySetting"],l);const c=p(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const f=p(t,["addWatermark"]);e!==void 0&&f!=null&&m(e,["parameters","addWatermark"],f);const h=p(t,["outputMimeType"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","mimeType"],h);const g=p(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&m(e,["parameters","outputOptions","compressionQuality"],g);const v=p(t,["enhancePrompt"]);return e!==void 0&&v!=null&&m(e,["parameters","enhancePrompt"],v),n}function tAe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["source"]);i!=null&&m(n,["config"],ZSe(i,n));const o=p(e,["config"]);return o!=null&&m(n,["config"],eAe(o,n)),n}function nAe(t){const e={},n=p(t,["image"]);return n!=null&&m(e,["image"],us(n)),e}function rAe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],us(i));const o=p(t,["scribbleImage"]);return e!==void 0&&o!=null&&m(e,["instances[0]","scribble"],nAe(o)),n}function iAe(t,e){const n={},r=p(t,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const i=p(t,["maxPredictions"]);e!==void 0&&i!=null&&m(e,["parameters","maxPredictions"],i);const o=p(t,["confidenceThreshold"]);e!==void 0&&o!=null&&m(e,["parameters","confidenceThreshold"],o);const s=p(t,["maskDilation"]);e!==void 0&&s!=null&&m(e,["parameters","maskDilation"],s);const l=p(t,["binaryColorThreshold"]);return e!==void 0&&l!=null&&m(e,["parameters","binaryColorThreshold"],l),n}function oAe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["source"]);i!=null&&m(n,["config"],rAe(i,n));const o=p(e,["config"]);return o!=null&&m(n,["config"],iAe(o,n)),n}function sAe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],_t(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function aAe(t,e,n){const r={},i=p(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const o=p(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const s=p(e,["filter"]);n!==void 0&&s!=null&&m(n,["_query","filter"],s);const l=p(e,["queryBase"]);return n!==void 0&&l!=null&&m(n,["_url","models_url"],eG(t,l)),r}function lAe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],aAe(t,r,n)),n}function uAe(t,e){const n={},r=p(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function cAe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],uAe(i,n)),n}function fAe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","name"],_t(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],i),n}function dAe(t,e){const n={},r=p(t,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],nh(Ir(r)));const i=p(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>vG(l))),m(e,["tools"],s)}const o=p(t,["generationConfig"]);return e!==void 0&&o!=null&&m(e,["generationConfig"],o),n}function hAe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ji(i);Array.isArray(s)&&(s=s.map(l=>nh(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],dAe(o,n)),n}function pAe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["contents"]);if(i!=null){let s=Ji(i);Array.isArray(s)&&(s=s.map(l=>nh(l))),m(n,["contents"],s)}const o=p(e,["config"]);return o!=null&&m(n,["config"],o),n}function _G(t){const e={},n=p(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["videoBytes"]);r!=null&&m(e,["bytesBase64Encoded"],wc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function mAe(t,e){const n={},r=p(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],us(i));const o=p(t,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],_G(o)),n}function gAe(t){const e={},n=p(t,["image"]);n!=null&&m(e,["image"],us(n));const r=p(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function yAe(t,e){const n={},r=p(t,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=p(t,["fps"]);e!==void 0&&o!=null&&m(e,["parameters","fps"],o);const s=p(t,["durationSeconds"]);e!==void 0&&s!=null&&m(e,["parameters","durationSeconds"],s);const l=p(t,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const c=p(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=p(t,["resolution"]);e!==void 0&&f!=null&&m(e,["parameters","resolution"],f);const h=p(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const g=p(t,["pubsubTopic"]);e!==void 0&&g!=null&&m(e,["parameters","pubsubTopic"],g);const v=p(t,["negativePrompt"]);e!==void 0&&v!=null&&m(e,["parameters","negativePrompt"],v);const E=p(t,["enhancePrompt"]);e!==void 0&&E!=null&&m(e,["parameters","enhancePrompt"],E);const b=p(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const S=p(t,["lastFrame"]);e!==void 0&&S!=null&&m(e,["instances[0]","lastFrame"],us(S));const A=p(t,["referenceImages"]);if(e!==void 0&&A!=null){let D=A;Array.isArray(D)&&(D=D.map(k=>gAe(k))),m(e,["instances[0]","referenceImages"],D)}const I=p(t,["compressionQuality"]);return e!==void 0&&I!=null&&m(e,["parameters","compressionQuality"],I),n}function vAe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["_url","model"],_t(t,r));const i=p(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=p(e,["image"]);o!=null&&m(n,["instances[0]","image"],us(o));const s=p(e,["video"]);s!=null&&m(n,["instances[0]","video"],_G(s));const l=p(e,["source"]);l!=null&&m(n,["config"],mAe(l,n));const c=p(e,["config"]);return c!=null&&m(n,["config"],yAe(c,n)),n}function _Ae(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function TAe(t){const e={},n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function EAe(t){const e={},n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function wAe(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function bAe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],_Ae(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],TAe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],EAe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],wAe(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function SAe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>bAe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function AAe(t){const e={},n=p(t,["citationSources"]);return n!=null&&m(e,["citations"],n),e}function xAe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function CAe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>xAe(i))),m(e,["urlMetadata"],r)}return e}function IAe(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],SAe(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],AAe(r));const i=p(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],CAe(s));const l=p(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);return g!=null&&m(e,["safetyRatings"],g),e}function s4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(f=>IAe(f))),m(e,["candidates"],c)}const i=p(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const s=p(t,["responseId"]);s!=null&&m(e,["responseId"],s);const l=p(t,["usageMetadata"]);return l!=null&&m(e,["usageMetadata"],l),e}function RAe(t){const e={},n=p(t,["values"]);return n!=null&&m(e,["values"],n),e}function PAe(){return{}}function NAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>RAe(s))),m(e,["embeddings"],o)}return p(t,["metadata"])!=null&&m(e,["metadata"],PAe()),e}function MAe(t){const e={},n=p(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],wc(n));const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function TG(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=p(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=p(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function DAe(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["image"],MAe(n));const r=p(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=p(t,["_self"]);return i!=null&&m(e,["safetyAttributes"],TG(i)),e}function kAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>DAe(s))),m(e,["generatedImages"],o)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],TG(i)),e}function OAe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=p(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function Ix(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["version"]);o!=null&&m(e,["version"],o);const s=p(t,["_self"]);s!=null&&m(e,["tunedModelInfo"],OAe(s));const l=p(t,["inputTokenLimit"]);l!=null&&m(e,["inputTokenLimit"],l);const c=p(t,["outputTokenLimit"]);c!=null&&m(e,["outputTokenLimit"],c);const f=p(t,["supportedGenerationMethods"]);return f!=null&&m(e,["supportedActions"],f),e}function LAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["_self"]);if(i!=null){let o=tG(i);Array.isArray(o)&&(o=o.map(s=>Ix(s))),m(e,["models"],o)}return e}function VAe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function UAe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["totalTokens"]);r!=null&&m(e,["totalTokens"],r);const i=p(t,["cachedContentTokenCount"]);return i!=null&&m(e,["cachedContentTokenCount"],i),e}function FAe(t){const e={},n=p(t,["video","uri"]);n!=null&&m(e,["uri"],n);const r=p(t,["video","encodedVideo"]);r!=null&&m(e,["videoBytes"],wc(r));const i=p(t,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function BAe(t){const e={},n=p(t,["_self"]);return n!=null&&m(e,["video"],FAe(n)),e}function qAe(t){const e={},n=p(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>BAe(s))),m(e,["generatedVideos"],o)}const r=p(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function $Ae(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const s=p(t,["response","generateVideoResponse"]);return s!=null&&m(e,["response"],qAe(s)),e}function zAe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function HAe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["data"]);r!=null&&m(e,["data"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function GAe(t){const e={},n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function jAe(t){const e={},n=p(t,["args"]);n!=null&&m(e,["args"],n);const r=p(t,["name"]);return r!=null&&m(e,["name"],r),e}function KAe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],zAe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],HAe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],GAe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],jAe(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function WAe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>KAe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function YAe(t){const e={},n=p(t,["citations"]);return n!=null&&m(e,["citations"],n),e}function JAe(t){const e={},n=p(t,["retrievedUrl"]);n!=null&&m(e,["retrievedUrl"],n);const r=p(t,["urlRetrievalStatus"]);return r!=null&&m(e,["urlRetrievalStatus"],r),e}function QAe(t){const e={},n=p(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>JAe(i))),m(e,["urlMetadata"],r)}return e}function XAe(t){const e={},n=p(t,["content"]);n!=null&&m(e,["content"],WAe(n));const r=p(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],YAe(r));const i=p(t,["finishMessage"]);i!=null&&m(e,["finishMessage"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const s=p(t,["urlContextMetadata"]);s!=null&&m(e,["urlContextMetadata"],QAe(s));const l=p(t,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(t,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(t,["index"]);f!=null&&m(e,["index"],f);const h=p(t,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const g=p(t,["safetyRatings"]);return g!=null&&m(e,["safetyRatings"],g),e}function a4(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>XAe(h))),m(e,["candidates"],f)}const i=p(t,["createTime"]);i!=null&&m(e,["createTime"],i);const o=p(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const s=p(t,["promptFeedback"]);s!=null&&m(e,["promptFeedback"],s);const l=p(t,["responseId"]);l!=null&&m(e,["responseId"],l);const c=p(t,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function ZAe(t){const e={},n=p(t,["truncated"]);n!=null&&m(e,["truncated"],n);const r=p(t,["token_count"]);return r!=null&&m(e,["tokenCount"],r),e}function exe(t){const e={},n=p(t,["values"]);n!=null&&m(e,["values"],n);const r=p(t,["statistics"]);return r!=null&&m(e,["statistics"],ZAe(r)),e}function txe(t){const e={},n=p(t,["billableCharacterCount"]);return n!=null&&m(e,["billableCharacterCount"],n),e}function nxe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>exe(s))),m(e,["embeddings"],o)}const i=p(t,["metadata"]);return i!=null&&m(e,["metadata"],txe(i)),e}function EG(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=p(t,["bytesBase64Encoded"]);r!=null&&m(e,["imageBytes"],wc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function wG(t){const e={},n=p(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=p(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=p(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function CT(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["image"],EG(n));const r=p(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=p(t,["_self"]);i!=null&&m(e,["safetyAttributes"],wG(i));const o=p(t,["prompt"]);return o!=null&&m(e,["enhancedPrompt"],o),e}function rxe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>CT(s))),m(e,["generatedImages"],o)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],wG(i)),e}function ixe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>CT(o))),m(e,["generatedImages"],i)}return e}function oxe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>CT(o))),m(e,["generatedImages"],i)}return e}function sxe(t){const e={},n=p(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>CT(i))),m(e,["generatedImages"],r)}return e}function axe(t){const e={},n=p(t,["label"]);n!=null&&m(e,["label"],n);const r=p(t,["score"]);return r!=null&&m(e,["score"],r),e}function lxe(t){const e={},n=p(t,["_self"]);n!=null&&m(e,["mask"],EG(n));const r=p(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>axe(o))),m(e,["labels"],i)}return e}function uxe(t){const e={},n=p(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>lxe(i))),m(e,["generatedMasks"],r)}return e}function cxe(t){const e={},n=p(t,["endpoint"]);n!=null&&m(e,["name"],n);const r=p(t,["deployedModelId"]);return r!=null&&m(e,["deployedModelId"],r),e}function fxe(t){const e={},n=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=p(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function dxe(t){const e={},n=p(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const r=p(t,["epoch"]);r!=null&&m(e,["epoch"],r);const i=p(t,["step"]);return i!=null&&m(e,["step"],i),e}function Rx(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["versionId"]);o!=null&&m(e,["version"],o);const s=p(t,["deployedModels"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>cxe(v))),m(e,["endpoints"],g)}const l=p(t,["labels"]);l!=null&&m(e,["labels"],l);const c=p(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],fxe(c));const f=p(t,["defaultCheckpointId"]);f!=null&&m(e,["defaultCheckpointId"],f);const h=p(t,["checkpoints"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>dxe(v))),m(e,["checkpoints"],g)}return e}function hxe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["_self"]);if(i!=null){let o=tG(i);Array.isArray(o)&&(o=o.map(s=>Rx(s))),m(e,["models"],o)}return e}function pxe(t){const e={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function mxe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["totalTokens"]);return r!=null&&m(e,["totalTokens"],r),e}function gxe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["tokensInfo"]);return r!=null&&m(e,["tokensInfo"],r),e}function yxe(t){const e={},n=p(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const r=p(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],wc(r));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function vxe(t){const e={},n=p(t,["_self"]);return n!=null&&m(e,["video"],yxe(n)),e}function _xe(t){const e={},n=p(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>vxe(s))),m(e,["generatedVideos"],o)}const r=p(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function Txe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["name"],n);const r=p(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const s=p(t,["response"]);return s!=null&&m(e,["response"],_xe(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Exe="Content-Type",wxe="X-Server-Timeout",bxe="User-Agent",Px="x-goog-api-client",Sxe="1.18.0",Axe=`google-genai-sdk/${Sxe}`,xxe="v1beta1",Cxe="v1beta",l4=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Ixe{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:xxe,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Cxe,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&Rxe(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await u4(i),new bx(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await u4(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Hf(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:l,value:c}=yield Wt(i.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(c,{stream:!0});try{const g=JSON.parse(f);if("error"in g){const v=JSON.parse(JSON.stringify(g.error)),E=v.status,b=v.code,S=`got status: ${E}. ${JSON.stringify(g)}`;if(b>=400&&b<600)throw new AT({message:S,status:b})}}catch(g){if(g.name==="ApiError")throw g}s+=f;let h=s.match(l4);for(;h;){const g=h[1];try{const v=new Response(g,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Wt(new bx(v)),s=s.slice(h[0].length),h=s.match(l4)}catch(v){throw new Error(`exception parsing stream chunk ${g}. ${v}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Axe+" "+this.clientOptions.userAgentExtra;return e[bxe]=n,e[Px]=n,e[Exe]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(wxe,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:Me("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const l=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(l===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return l}}async function u4(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new AT({message:i,status:n}):new Error(i)}}function Rxe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const l=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const f=s[c],h=l[c];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?l[c]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),l[c]=f)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pxe="mcp_used/unknown";let Nxe=!1;function bG(t){for(const e of t)if(Mxe(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Nxe}function SG(t){var e;const n=(e=t[Px])!==null&&e!==void 0?e:"";t[Px]=(n+` ${Pxe}`).trimStart()}function Mxe(t){return t!==null&&typeof t=="object"&&t instanceof p1}function Dxe(t,e=100){return Hf(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield Wt(t.listTools({cursor:r}));for(const s of o.tools)yield yield Wt(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class p1{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new p1(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var l=!0,c=(n=void 0,Zp(Dxe(h))),f;f=await c.next(),e=f.done,!e;l=!0){i=f.value,l=!1;const g=i;s.push(g);const v=g.name;if(o[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);o[v]=h}}catch(g){n={error:g}}finally{try{!l&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),Y_e(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kxe(t,e,n){const r=new q_e;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=fbe(i);Object.assign(r,o),e(r)}class Oxe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=Uxe(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let f=()=>{};const h=new Promise(k=>{f=k}),g=e.callbacks,v=function(){f({})},E=this.apiClient,b={onopen:v,onmessage:k=>{kxe(E,g.onmessage,k)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=g==null?void 0:g.onclose)!==null&&r!==void 0?r:function(k){}},S=this.webSocketFactory.create(c,Vxe(s),b);S.connect(),await h;const A=_t(this.apiClient,e.model),I=dG({model:A}),D=Cx({setup:I});return S.send(JSON.stringify(D)),new Lxe(S,this.apiClient)}}class Lxe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=lwe(e),r=hG(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=uwe(e),r=Cx(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=Cx({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Df.PLAY)}pause(){this.sendPlaybackControl(Df.PAUSE)}stop(){this.sendPlaybackControl(Df.STOP)}resetContext(){this.sendPlaybackControl(Df.RESET_CONTEXT)}close(){this.conn.close()}}function Vxe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Uxe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fxe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Bxe(t,e,n){const r=new B_e;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=Sbe(o);Object.assign(r,s)}else{const s=nbe(o);Object.assign(r,s)}e(r)}class qxe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new Oxe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&bG(e.config.tools)&&SG(g);const v=Gxe(g);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v);else{const O=this.apiClient.getApiKey();let F="BidiGenerateContent",U="key";O!=null&&O.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),F="BidiGenerateContentConstrained",U="access_token"),h=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.${F}?${U}=${O}`}let E=()=>{};const b=new Promise(O=>{E=O}),S=e.callbacks,A=function(){var O;(O=S==null?void 0:S.onopen)===null||O===void 0||O.call(S),E({})},I=this.apiClient,D={onopen:A,onmessage:O=>{Bxe(I,S.onmessage,O)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(O){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(O){}},k=this.webSocketFactory.create(h,Hxe(v),D);k.connect(),await b;let q=_t(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const O=this.apiClient.getProject(),F=this.apiClient.getLocation();q=`projects/${O}/locations/${F}/`+q}let $={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Q_.AUDIO]}:e.config.responseModalities=[Q_.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],M=[];for(const O of H)if(this.isCallableTool(O)){const F=O;M.push(await F.tool())}else M.push(O);M.length>0&&(e.config.tools=M);const L={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?$=Uwe(this.apiClient,L):$=iwe(this.apiClient,L),delete $.config,k.send(JSON.stringify($)),new zxe(k,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const $xe={turnComplete:!0};class zxe{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ji(n.turns),e.isVertexAI()?r=r.map(i=>nh(i)):r=r.map(i=>xT(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(Fxe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},$xe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:qwe(e)}:n={realtimeInput:awe(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Hxe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Gxe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c4=10;function f4(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Gf(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Gf(t){return"callTool"in t&&typeof t.callTool=="function"}function jxe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Gf(i)))!==null&&r!==void 0?r:!1}function Kxe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!Gf(i)))!==null&&r!==void 0?r:!1}function d4(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wxe extends Ec{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!jxe(n)||f4(n.config))return await this.generateContentInternal(c);if(Kxe(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let f,h;const g=Ji(c.contents),v=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:c4;let E=0;for(;E<v&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const b=f.candidates[0].content,S=[];for(const A of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Gf(A)){const D=await A.callTool(f.functionCalls);S.push(...D)}E++,h={role:"user",parts:S},c.contents=Ji(c.contents),c.contents.push(b),c.contents.push(h),d4(c.config)&&(g.push(b),g.push(h))}return d4(c.config)&&(f.automaticFunctionCallingHistory=g),f},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),f4(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new wg(lc.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>Gf(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&bG(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},c);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),SG(f),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return l}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Gf(s)){const l=s,c=await l.tool();for(const f of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,l)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:c4;let s=!1,l=0;const c=await this.initAfcToolsMap(e);return(function(f,h,g){var v,E;return Hf(this,arguments,function*(){for(var b,S,A,I;l<o;){s&&(l++,s=!1);const $=yield Wt(f.processParamsMaybeAddMcpUsage(g)),H=yield Wt(f.generateContentStreamInternal($)),M=[],L=[];try{for(var D=!0,k=(S=void 0,Zp(H)),q;q=yield Wt(k.next()),b=q.done,!b;D=!0){I=q.value,D=!1;const O=I;if(yield yield Wt(O),O.candidates&&(!((v=O.candidates[0])===null||v===void 0)&&v.content)){L.push(O.candidates[0].content);for(const F of(E=O.candidates[0].content.parts)!==null&&E!==void 0?E:[])if(l<o&&F.functionCall){if(!F.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(F.functionCall.name)){const U=yield Wt(h.get(F.functionCall.name).callTool([F.functionCall]));M.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${F.functionCall.name}`)}}}}catch(O){S={error:O}}finally{try{!D&&!b&&(A=k.return)&&(yield Wt(A.call(k)))}finally{if(S)throw S.error}}if(M.length>0){s=!0;const O=new Sp;O.candidates=[{content:{role:"user",parts:M}}],yield yield Wt(O);const F=[];F.push(...L),F.push({role:"user",parts:M});const U=Ji(g.contents).concat(F);g.contents=U}else break}})})(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=o4(this.apiClient,e);return l=Me("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=a4(h),v=new Sp;return Object.assign(v,g),v})}else{const f=i4(this.apiClient,e);return l=Me("{model}:generateContent",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=s4(h),v=new Sp;return Object.assign(v,g),v})}}async generateContentStreamInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=o4(this.apiClient,e);return l=Me("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(g){return Hf(this,arguments,function*(){var v,E,b,S;try{for(var A=!0,I=Zp(g),D;D=yield Wt(I.next()),v=D.done,!v;A=!0){S=D.value,A=!1;const k=S,q=a4(yield Wt(k.json()));q.sdkHttpResponse={headers:k.headers};const $=new Sp;Object.assign($,q),yield yield Wt($)}}catch(k){E={error:k}}finally{try{!A&&!v&&(b=I.return)&&(yield Wt(b.call(I)))}finally{if(E)throw E.error}}})})}else{const f=i4(this.apiClient,e);return l=Me("{model}:streamGenerateContent?alt=sse",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(g){return Hf(this,arguments,function*(){var v,E,b,S;try{for(var A=!0,I=Zp(g),D;D=yield Wt(I.next()),v=D.done,!v;A=!0){S=D.value,A=!1;const k=S,q=s4(yield Wt(k.json()));q.sdkHttpResponse={headers:k.headers};const $=new Sp;Object.assign($,q),yield yield Wt($)}}catch(k){E={error:k}}finally{try{!A&&!v&&(b=I.return)&&(yield Wt(b.call(I)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=BSe(this.apiClient,e);return l=Me("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=nxe(h),v=new VU;return Object.assign(v,g),v})}else{const f=Qbe(this.apiClient,e);return l=Me("{model}:batchEmbedContents",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=NAe(h),v=new VU;return Object.assign(v,g),v})}}async generateImagesInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=$Se(this.apiClient,e);return l=Me("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=rxe(h),v=new UU;return Object.assign(v,g),v})}else{const f=Zbe(this.apiClient,e);return l=Me("{model}:predict",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=kAe(h),v=new UU;return Object.assign(v,g),v})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=YSe(this.apiClient,e);return o=Me("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=ixe(c),h=new M_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=QSe(this.apiClient,e);return o=Me("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=oxe(c),h=new D_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=tAe(this.apiClient,e);return o=Me("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=sxe(c),h=new k_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=oAe(this.apiClient,e);return o=Me("{model}:predict",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const f=uxe(c),h=new O_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=sAe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Rx(h))}else{const f=eSe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ix(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=lAe(this.apiClient,e);return l=Me("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=hxe(h),v=new FU;return Object.assign(v,g),v})}else{const f=nSe(this.apiClient,e);return l=Me("{models_url}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=LAe(h),v=new FU;return Object.assign(v,g),v})}}async update(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=cAe(this.apiClient,e);return l=Me("{model}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Rx(h))}else{const f=iSe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ix(h))}}async delete(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=fAe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=pxe(h),v=new BU;return Object.assign(v,g),v})}else{const f=oSe(this.apiClient,e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=VAe(h),v=new BU;return Object.assign(v,g),v})}}async countTokens(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=hAe(this.apiClient,e);return l=Me("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=mxe(h),v=new qU;return Object.assign(v,g),v})}else{const f=aSe(this.apiClient,e);return l=Me("{model}:countTokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=UAe(h),v=new qU;return Object.assign(v,g),v})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=pAe(this.apiClient,e);return o=Me("{model}:computeTokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const f=gxe(c),h=new L_e;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=vAe(this.apiClient,e);return l=Me("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const g=Txe(h),v=new X_;return Object.assign(v,g),v})}else{const f=cSe(this.apiClient,e);return l=Me("{model}:predictLongRunning",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const g=$Ae(h),v=new X_;return Object.assign(v,g),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yxe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function Jxe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["operationName"],n);const r=p(t,["resourceName"]);r!=null&&m(e,["_url","resourceName"],r);const i=p(t,["config"]);return i!=null&&m(e,["config"],i),e}function Qxe(t){const e={},n=p(t,["operationName"]);n!=null&&m(e,["_url","operationName"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xxe extends Ec{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=Qxe(e);return l=Me("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const f=Yxe(e);return l=Me("{operationName}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=Jxe(e);return o=Me("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zxe(t){const e={},n=p(t,["voiceName"]);return n!=null&&m(e,["voiceName"],n),e}function AG(t){const e={},n=p(t,["prebuiltVoiceConfig"]);return n!=null&&m(e,["prebuiltVoiceConfig"],Zxe(n)),e}function eCe(t){const e={},n=p(t,["speaker"]);n!=null&&m(e,["speaker"],n);const r=p(t,["voiceConfig"]);return r!=null&&m(e,["voiceConfig"],AG(r)),e}function tCe(t){const e={},n=p(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>eCe(i))),m(e,["speakerVoiceConfigs"],r)}return e}function nCe(t){const e={},n=p(t,["voiceConfig"]);n!=null&&m(e,["voiceConfig"],AG(n));const r=p(t,["multiSpeakerVoiceConfig"]);r!=null&&m(e,["multiSpeakerVoiceConfig"],tCe(r));const i=p(t,["languageCode"]);return i!=null&&m(e,["languageCode"],i),e}function rCe(t){const e={},n=p(t,["fps"]);n!=null&&m(e,["fps"],n);const r=p(t,["endOffset"]);r!=null&&m(e,["endOffset"],r);const i=p(t,["startOffset"]);return i!=null&&m(e,["startOffset"],i),e}function iCe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["data"]);n!=null&&m(e,["data"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function oCe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=p(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function sCe(t){const e={},n=p(t,["id"]);n!=null&&m(e,["id"],n);const r=p(t,["args"]);r!=null&&m(e,["args"],r);const i=p(t,["name"]);return i!=null&&m(e,["name"],i),e}function aCe(t){const e={},n=p(t,["videoMetadata"]);n!=null&&m(e,["videoMetadata"],rCe(n));const r=p(t,["thought"]);r!=null&&m(e,["thought"],r);const i=p(t,["inlineData"]);i!=null&&m(e,["inlineData"],iCe(i));const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],oCe(o));const s=p(t,["thoughtSignature"]);s!=null&&m(e,["thoughtSignature"],s);const l=p(t,["functionCall"]);l!=null&&m(e,["functionCall"],sCe(l));const c=p(t,["codeExecutionResult"]);c!=null&&m(e,["codeExecutionResult"],c);const f=p(t,["executableCode"]);f!=null&&m(e,["executableCode"],f);const h=p(t,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const g=p(t,["text"]);return g!=null&&m(e,["text"],g),e}function lCe(t){const e={},n=p(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>aCe(o))),m(e,["parts"],i)}const r=p(t,["role"]);return r!=null&&m(e,["role"],r),e}function uCe(t){const e={},n=p(t,["behavior"]);n!=null&&m(e,["behavior"],n);const r=p(t,["description"]);r!=null&&m(e,["description"],r);const i=p(t,["name"]);i!=null&&m(e,["name"],i);const o=p(t,["parameters"]);o!=null&&m(e,["parameters"],o);const s=p(t,["parametersJsonSchema"]);s!=null&&m(e,["parametersJsonSchema"],s);const l=p(t,["response"]);l!=null&&m(e,["response"],l);const c=p(t,["responseJsonSchema"]);return c!=null&&m(e,["responseJsonSchema"],c),e}function cCe(t){const e={},n=p(t,["startTime"]);n!=null&&m(e,["startTime"],n);const r=p(t,["endTime"]);return r!=null&&m(e,["endTime"],r),e}function fCe(t){const e={},n=p(t,["timeRangeFilter"]);if(n!=null&&m(e,["timeRangeFilter"],cCe(n)),p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function dCe(t){const e={},n=p(t,["mode"]);n!=null&&m(e,["mode"],n);const r=p(t,["dynamicThreshold"]);return r!=null&&m(e,["dynamicThreshold"],r),e}function hCe(t){const e={},n=p(t,["dynamicRetrievalConfig"]);return n!=null&&m(e,["dynamicRetrievalConfig"],dCe(n)),e}function pCe(){return{}}function mCe(t){const e={},n=p(t,["environment"]);return n!=null&&m(e,["environment"],n),e}function gCe(t){const e={},n=p(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(f=>uCe(f))),m(e,["functionDeclarations"],c)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(t,["googleSearch"]);r!=null&&m(e,["googleSearch"],fCe(r));const i=p(t,["googleSearchRetrieval"]);if(i!=null&&m(e,["googleSearchRetrieval"],hCe(i)),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(p(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");p(t,["urlContext"])!=null&&m(e,["urlContext"],pCe());const s=p(t,["computerUse"]);s!=null&&m(e,["computerUse"],mCe(s));const l=p(t,["codeExecution"]);return l!=null&&m(e,["codeExecution"],l),e}function yCe(t){const e={},n=p(t,["handle"]);if(n!=null&&m(e,["handle"],n),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function h4(){return{}}function vCe(t){const e={},n=p(t,["disabled"]);n!=null&&m(e,["disabled"],n);const r=p(t,["startOfSpeechSensitivity"]);r!=null&&m(e,["startOfSpeechSensitivity"],r);const i=p(t,["endOfSpeechSensitivity"]);i!=null&&m(e,["endOfSpeechSensitivity"],i);const o=p(t,["prefixPaddingMs"]);o!=null&&m(e,["prefixPaddingMs"],o);const s=p(t,["silenceDurationMs"]);return s!=null&&m(e,["silenceDurationMs"],s),e}function _Ce(t){const e={},n=p(t,["automaticActivityDetection"]);n!=null&&m(e,["automaticActivityDetection"],vCe(n));const r=p(t,["activityHandling"]);r!=null&&m(e,["activityHandling"],r);const i=p(t,["turnCoverage"]);return i!=null&&m(e,["turnCoverage"],i),e}function TCe(t){const e={},n=p(t,["targetTokens"]);return n!=null&&m(e,["targetTokens"],n),e}function ECe(t){const e={},n=p(t,["triggerTokens"]);n!=null&&m(e,["triggerTokens"],n);const r=p(t,["slidingWindow"]);return r!=null&&m(e,["slidingWindow"],TCe(r)),e}function wCe(t){const e={},n=p(t,["proactiveAudio"]);return n!=null&&m(e,["proactiveAudio"],n),e}function bCe(t,e){const n={},r=p(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const s=p(t,["topP"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topP"],s);const l=p(t,["topK"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topK"],l);const c=p(t,["maxOutputTokens"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","maxOutputTokens"],c);const f=p(t,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const h=p(t,["seed"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","seed"],h);const g=p(t,["speechConfig"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","speechConfig"],nCe(d1(g)));const v=p(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],v);const E=p(t,["systemInstruction"]);e!==void 0&&E!=null&&m(e,["setup","systemInstruction"],lCe(Ir(E)));const b=p(t,["tools"]);if(e!==void 0&&b!=null){let $=eh(b);Array.isArray($)&&($=$.map(H=>gCe(Zd(H)))),m(e,["setup","tools"],$)}const S=p(t,["sessionResumption"]);e!==void 0&&S!=null&&m(e,["setup","sessionResumption"],yCe(S));const A=p(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&m(e,["setup","inputAudioTranscription"],h4());const I=p(t,["outputAudioTranscription"]);e!==void 0&&I!=null&&m(e,["setup","outputAudioTranscription"],h4());const D=p(t,["realtimeInputConfig"]);e!==void 0&&D!=null&&m(e,["setup","realtimeInputConfig"],_Ce(D));const k=p(t,["contextWindowCompression"]);e!==void 0&&k!=null&&m(e,["setup","contextWindowCompression"],ECe(k));const q=p(t,["proactivity"]);return e!==void 0&&q!=null&&m(e,["setup","proactivity"],wCe(q)),n}function SCe(t,e){const n={},r=p(e,["model"]);r!=null&&m(n,["setup","model"],_t(t,r));const i=p(e,["config"]);return i!=null&&m(n,["config"],bCe(i,n)),n}function ACe(t,e,n){const r={},i=p(e,["expireTime"]);n!==void 0&&i!=null&&m(n,["expireTime"],i);const o=p(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&m(n,["newSessionExpireTime"],o);const s=p(e,["uses"]);n!==void 0&&s!=null&&m(n,["uses"],s);const l=p(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&m(n,["bidiGenerateContentSetup"],SCe(t,l));const c=p(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&m(n,["fieldMask"],c),r}function xCe(t,e){const n={},r=p(e,["config"]);return r!=null&&m(n,["config"],ACe(t,r,n)),n}function CCe(t){const e={},n=p(t,["name"]);return n!=null&&m(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ICe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function RCe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=ICe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const c=[];o&&c.push(o),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class PCe extends Ec{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=xCe(this.apiClient,e);o=Me("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const c=RCe(l,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>CCe(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NCe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function MCe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function DCe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],MCe(n,e)),e}function kCe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function OCe(t){const e={},n=p(t,["textInput"]);n!=null&&m(e,["textInput"],n);const r=p(t,["output"]);return r!=null&&m(e,["output"],r),e}function LCe(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=p(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>OCe(i))),m(e,["examples","examples"],r)}return e}function VCe(t,e){const n={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=p(t,["epochCount"]);e!==void 0&&i!=null&&m(e,["tuningTask","hyperparameters","epochCount"],i);const o=p(t,["learningRateMultiplier"]);if(o!=null&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=p(t,["batchSize"]);e!==void 0&&s!=null&&m(e,["tuningTask","hyperparameters","batchSize"],s);const l=p(t,["learningRate"]);return e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","learningRate"],l),n}function UCe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["preTunedModel"]);r!=null&&m(e,["preTunedModel"],r);const i=p(t,["trainingDataset"]);i!=null&&m(e,["tuningTask","trainingData"],LCe(i));const o=p(t,["config"]);return o!=null&&m(e,["config"],VCe(o,e)),e}function FCe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function BCe(t,e){const n={},r=p(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function qCe(t){const e={},n=p(t,["config"]);return n!=null&&m(e,["config"],BCe(n,e)),e}function $Ce(t){const e={},n=p(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=p(t,["config"]);return r!=null&&m(e,["config"],r),e}function zCe(t,e){const n={},r=p(t,["gcsUri"]);e!==void 0&&r!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=p(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],i),p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function HCe(t,e){const n={},r=p(t,["gcsUri"]);r!=null&&m(n,["validationDatasetUri"],r);const i=p(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function GCe(t,e){const n={},r=p(t,["validationDataset"]);e!==void 0&&r!=null&&m(e,["supervisedTuningSpec"],HCe(r,n));const i=p(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&m(e,["tunedModelDisplayName"],i);const o=p(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const s=p(t,["epochCount"]);e!==void 0&&s!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const l=p(t,["learningRateMultiplier"]);e!==void 0&&l!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],l);const c=p(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const f=p(t,["preTunedModelCheckpointId"]);f!=null&&m(n,["preTunedModel","checkpointId"],f);const h=p(t,["adapterSize"]);if(e!==void 0&&h!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function jCe(t){const e={},n=p(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=p(t,["preTunedModel"]);r!=null&&m(e,["preTunedModel"],r);const i=p(t,["trainingDataset"]);i!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],zCe(i,e));const o=p(t,["config"]);return o!=null&&m(e,["config"],GCe(o,e)),e}function KCe(t){const e={},n=p(t,["name"]);n!=null&&m(e,["model"],n);const r=p(t,["name"]);return r!=null&&m(e,["endpoint"],r),e}function xG(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],XH(i));const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["tuningTask","startTime"]);s!=null&&m(e,["startTime"],s);const l=p(t,["tuningTask","completeTime"]);l!=null&&m(e,["endTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["description"]);f!=null&&m(e,["description"],f);const h=p(t,["baseModel"]);h!=null&&m(e,["baseModel"],h);const g=p(t,["_self"]);g!=null&&m(e,["tunedModel"],KCe(g));const v=p(t,["customBaseModel"]);v!=null&&m(e,["customBaseModel"],v);const E=p(t,["experiment"]);E!=null&&m(e,["experiment"],E);const b=p(t,["labels"]);b!=null&&m(e,["labels"],b);const S=p(t,["outputUri"]);S!=null&&m(e,["outputUri"],S);const A=p(t,["pipelineJob"]);A!=null&&m(e,["pipelineJob"],A);const I=p(t,["serviceAccount"]);I!=null&&m(e,["serviceAccount"],I);const D=p(t,["tunedModelDisplayName"]);return D!=null&&m(e,["tunedModelDisplayName"],D),e}function WCe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>xG(s))),m(e,["tuningJobs"],o)}return e}function YCe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["metadata"]);i!=null&&m(e,["metadata"],i);const o=p(t,["done"]);o!=null&&m(e,["done"],o);const s=p(t,["error"]);return s!=null&&m(e,["error"],s),e}function JCe(t){const e={},n=p(t,["checkpointId"]);n!=null&&m(e,["checkpointId"],n);const r=p(t,["epoch"]);r!=null&&m(e,["epoch"],r);const i=p(t,["step"]);i!=null&&m(e,["step"],i);const o=p(t,["endpoint"]);return o!=null&&m(e,["endpoint"],o),e}function QCe(t){const e={},n=p(t,["model"]);n!=null&&m(e,["model"],n);const r=p(t,["endpoint"]);r!=null&&m(e,["endpoint"],r);const i=p(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>JCe(s))),m(e,["checkpoints"],o)}return e}function Nx(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["name"]);r!=null&&m(e,["name"],r);const i=p(t,["state"]);i!=null&&m(e,["state"],XH(i));const o=p(t,["createTime"]);o!=null&&m(e,["createTime"],o);const s=p(t,["startTime"]);s!=null&&m(e,["startTime"],s);const l=p(t,["endTime"]);l!=null&&m(e,["endTime"],l);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(t,["error"]);f!=null&&m(e,["error"],f);const h=p(t,["description"]);h!=null&&m(e,["description"],h);const g=p(t,["baseModel"]);g!=null&&m(e,["baseModel"],g);const v=p(t,["tunedModel"]);v!=null&&m(e,["tunedModel"],QCe(v));const E=p(t,["preTunedModel"]);E!=null&&m(e,["preTunedModel"],E);const b=p(t,["supervisedTuningSpec"]);b!=null&&m(e,["supervisedTuningSpec"],b);const S=p(t,["tuningDataStats"]);S!=null&&m(e,["tuningDataStats"],S);const A=p(t,["encryptionSpec"]);A!=null&&m(e,["encryptionSpec"],A);const I=p(t,["partnerModelTuningSpec"]);I!=null&&m(e,["partnerModelTuningSpec"],I);const D=p(t,["customBaseModel"]);D!=null&&m(e,["customBaseModel"],D);const k=p(t,["experiment"]);k!=null&&m(e,["experiment"],k);const q=p(t,["labels"]);q!=null&&m(e,["labels"],q);const $=p(t,["outputUri"]);$!=null&&m(e,["outputUri"],$);const H=p(t,["pipelineJob"]);H!=null&&m(e,["pipelineJob"],H);const M=p(t,["serviceAccount"]);M!=null&&m(e,["serviceAccount"],M);const L=p(t,["tunedModelDisplayName"]);return L!=null&&m(e,["tunedModelDisplayName"],L),e}function XCe(t){const e={},n=p(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=p(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=p(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Nx(s))),m(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZCe extends Ec{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new wg(lc.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:wx.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=FCe(e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>Nx(h))}else{const f=NCe(e);return l=Me("{name}",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>xG(h))}}async listInternal(e){var n,r,i,o;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=qCe(e);return l=Me("tuningJobs",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=XCe(h),v=new zU;return Object.assign(v,g),v})}else{const f=DCe(e);return l=Me("tunedModels",f._url),c=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const g=WCe(h),v=new zU;return Object.assign(v,g),v})}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const c=$Ce(e);s=Me("{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=kCe(e);s=Me("{name}:cancel",c._url),l=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=jCe(e);return o=Me("tuningJobs",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>Nx(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=UCe(e);return o=Me("tunedModels",l._url),s=l._query,delete l.config,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>YCe(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eIe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const tIe=1024*1024*8,nIe=3,rIe=1e3,iIe=2,US="x-goog-upload-status";async function oIe(t,e,n){var r,i,o;let s=0,l=0,c=new bx(new Response),f="upload";for(s=t.size;l<s;){const g=Math.min(tIe,s-l),v=t.slice(l,l+g);l+g>=s&&(f+=", finalize");let E=0,b=rIe;for(;E<nIe&&(c=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(g)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[US]));)E++,await aIe(b),b=b*iIe;if(l+=g,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[US])!=="active")break;if(s<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[US])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function sIe(t){return{size:t.size,type:t.type}}function aIe(t){return new Promise(e=>setTimeout(e,t))}class lIe{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oIe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sIe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uIe{create(e,n,r){return new cIe(e,n,r)}}class cIe{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p4="x-goog-api-key";class fIe{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(p4)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(p4,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dIe="gl-node/";class hIe{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=N_e(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new fIe(this.apiKey);this.apiClient=new Ixe({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:dIe+"web",uploader:new lIe,downloader:new eIe}),this.models=new Wxe(this.apiClient),this.live=new qxe(this.apiClient,i,new uIe),this.batches=new fTe(this.apiClient),this.chats=new _Ee(this.models,this.apiClient),this.caches=new gEe(this.apiClient),this.files=new MEe(this.apiClient),this.operations=new Xxe(this.apiClient),this.authTokens=new PCe(this.apiClient),this.tunings=new ZCe(this.apiClient)}}const pIe="AIzaSyByOfSHfNNIwPKwNOkklamTuSy1-t3NOPI",rh=new hIe({apiKey:pIe}),mIe=t=>new Promise(e=>setTimeout(e,t)),gIe=async(t,e=3,n=2e3)=>{var o,s;let r=0,i=n;for(;r<e;)try{return await t()}catch(l){if((((o=l.message)==null?void 0:o.includes("503"))||((s=l.message)==null?void 0:s.toLowerCase().includes("overloaded")))&&r<e-1)console.warn(`Gemini API overloaded. Retrying in ${i}ms... (Attempt ${r+1}/${e})`),await mIe(i),r++,i*=2;else throw l}throw new Error("Max retries reached. Failed to call Gemini API.")},yIe=async t=>{try{const e=`Проанализируй следующий текст игровой сцены на русском языке. Создай из него короткий, ёмкий и эффективный промпт на АНГЛИЙСКОМ языке для AI-генератора изображений, чтобы визуализировать эту сцену. Промпт должен фокусироваться на ключевых визуальных элементах, объектах и атмосфере.

        Текст сцены:
        "${t}"

        Твой ответ должен содержать ТОЛЬКО готовый промпт. Без комментариев, заголовков или кавычек.`,r=(await rh.models.generateContent({model:"gemini-2.5-flash",contents:e})).text;if(!r)throw new Error("API returned an empty response.");return r.trim()}catch(e){throw console.error("Error generating image prompt from text with Gemini API:",e),new Error(`Failed to generate image prompt: ${e.message}`)}},vIe={Киберпанк:"cyberpunk city, neon signs, rain-slicked streets, high-tech low-life, dystopian future, cinematic lighting","Темное фэнтези":"dark fantasy, gothic architecture, ominous atmosphere, mythical creatures, enchanted forest, epic, moody lighting",Фотореализм:"photorealistic, 8k, hyper-detailed, sharp focus, professional photography, natural lighting",Аниме:"anime style, vibrant colors, cel shading, dynamic composition, detailed background, style of Studio Ghibli","Пиксель-арт":"pixel art, 16-bit, retro gaming style, limited color palette, detailed sprites",Стимпанк:"steampunk, victorian era, gears and cogs, steam-powered machinery, brass and copper details, intricate designs"},_Ie=async t=>{var s;const{mainPrompt:e,style:n,negativePrompt:r}=t;let o=`${vIe[n]||"Futuristic, dark, dystopian, gritty, mysterious, quest item."}, ${e}.`;r&&r.trim()!==""&&(o+=` Avoid the following: ${r.trim()}.`);try{const l=await rh.models.generateImages({model:"imagen-4.0-generate-001",prompt:o,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:"16:9"}});if(l.generatedImages&&l.generatedImages.length>0)return`data:image/jpeg;base64,${l.generatedImages[0].image.imageBytes}`;throw new Error("No image was generated by the API.")}catch(l){console.error("Error generating image with Gemini API:",l);let c="An unknown error occurred.";if(l instanceof Error){c=l.message;try{const f=l.message.includes("ApiError: ")?l.message.split("ApiError: ")[1]:l.message,h=JSON.parse(f);c=((s=h==null?void 0:h.error)==null?void 0:s.message)||c}catch{}}throw new Error(`Failed to generate image: ${c}`)}},TIe=async t=>{var e;try{const{prompt:n,tone:r,keywords:i,wordCount:o}=t,s=`Ты — талантливый сценарист для текстовых квестов в мрачном, загадочном сеттинге. Напиши художественное описание для одной игровой сцены на русском языке.

        Инструкции:
        - Тон/атмосфера: ${r}.
        - Обязательно упомяни следующие ключевые детали: ${i||"не указаны"}.
        - Объем текста: примерно ${o} слов.
        - Твой ответ должен содержать ТОЛЬКО готовый текст для сцены. Не добавляй заголовков, комментариев, цитат или приветствий.
        - Текст должен быть захватывающим и погружающим игрока в атмосферу.

        Основная идея от автора:
        "${n}"`,c=(await rh.models.generateContent({model:"gemini-2.5-flash",contents:s})).text;if(!c)throw new Error("API вернул пустой ответ.");return c.trim()}catch(n){console.error("Error generating text with Gemini API:",n);let r="Произошла неизвестная ошибка при генерации текста.";if(n instanceof Error){r=n.message;try{const i=n.message.includes("ApiError: ")?n.message.split("ApiError: ")[1]:n.message,o=JSON.parse(i);r=((e=o==null?void 0:o.error)==null?void 0:e.message)||r}catch{}}throw new Error(`Не удалось сгенерировать текст: ${r}`)}},EIe=async t=>{if(!t||t.trim().length<10)throw new Error("Текст узла слишком короткий для анализа.");try{const e=`Ты — гейм-дизайнер, создающий текстовый квест. Основываясь на описании игровой сцены ниже, предложи 3-4 интересных и логичных варианта выбора для игрока. Варианты должны быть краткими и ориентированными на действие.

        Описание сцены:
        "${t}"

        Инструкции:
        - Верни ТОЛЬКО JSON-массив строк.
        - Никаких лишних комментариев, пояснений или markdown-форматирования.
        - Пример ответа: ["Осмотреть стол", "Подойти к окну", "Проверить карманы"]`,r=(await rh.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{responseMimeType:"application/json",responseSchema:{type:Be.ARRAY,items:{type:Be.STRING}}}})).text.trim();if(!r)throw new Error("API вернул пустой ответ.");const i=JSON.parse(r);if(!Array.isArray(i)||!i.every(o=>typeof o=="string"))throw new Error("API вернул некорректный формат данных.");return i}catch(e){console.error("Error generating choices with Gemini API:",e);let n="Произошла неизвестная ошибка при генерации выборов.";throw e instanceof Error&&(n=`Не удалось сгенерировать выборы: ${e.message}`),new Error(n)}},wIe=async t=>{const{prompt:e,genre:n,keywords:r,nodesCount:i,addLogic:o,complexity:s}=t,l={type:Be.OBJECT,properties:{key:{type:Be.STRING,description:"The name of the variable or item."},value:{type:Be.STRING,description:"The string value. For numbers, use a string like '1'."}},required:["key","value"]},c={type:Be.OBJECT,properties:{key:{type:Be.STRING,description:"The name of the numeric variable."},value:{type:Be.NUMBER,description:"The number to add."}},required:["key","value"]},f={type:Be.ARRAY,items:l},h={type:Be.ARRAY,items:c},g={type:Be.OBJECT,description:"Optional condition to show this choice.",properties:{has_item:{type:Be.STRING},missing_item:{type:Be.STRING},var_eq:f,var_neq:f},nullable:!0},v={type:Be.OBJECT,description:"An effect to apply.",properties:{inv_add:{type:Be.STRING},inv_remove:{type:Be.STRING},set:f,add:h}},E={type:Be.OBJECT,properties:{label:{type:Be.STRING,description:"The text displayed to the player for this choice, in Russian."},to:{type:Be.STRING,description:"The 'id' of the node this choice leads to. Must be one of the other generated node IDs."},when:g,effects:{type:Be.ARRAY,items:v,nullable:!0}},required:["label","to"]},b={type:Be.OBJECT,properties:{id:{type:Be.STRING,description:"A unique, short, snake_case identifier for this node. The first node must have the id 'start'."},text:{type:Be.STRING,description:"The main descriptive text for this scene, in Russian. Should be engaging and atmospheric."},choices:{type:Be.ARRAY,description:"A list of 2-3 actions the player can take.",items:E,nullable:!0},when:{...g,nullable:!0},effects:{type:Be.ARRAY,items:v,nullable:!0,description:"Optional effects that trigger upon entering this node."},end:{type:Be.OBJECT,nullable:!0,properties:{type:{type:Be.STRING,description:"'win' or 'lose'"},message:{type:Be.STRING,description:"Final message to the player, in Russian."}}}},required:["id","text"]},S={type:Be.OBJECT,properties:{nodes:{type:Be.ARRAY,description:"An array of all the quest nodes.",items:b}},required:["nodes"]};let A="**ВАЖНОЕ ОГРАНИЧЕНИЕ:** НЕ ИСПОЛЬЗУЙ поля 'when' и 'effects'. Создай только простую повествовательную историю без игровой механики.";o&&(A=`
    **Игровая логика (Уровень сложности: ${s}):**
    Твоя главная задача — создать **РЕШАЕМУЮ** загадку по принципу "Решение -> Преграда".

    1.  **"Решение" (Ключ):** Сначала в одном или нескольких узлах размести предметы (через \`"effects": [{"inv_add": "название_предмета"}]\`) или установи переменные (через \`"effects": [{"set": [{"key": "переменная", "value": "1"}]}]\`).
    2.  **"Преграда" (Замок):** Затем, в узле, который находится *дальше по сюжету*, создай выбор, который требует это "Решение". Используй условие 'when' (например, \`"when": {"has_item": "название_предмета"}\` или \`"when": {"var_eq": [...]}\`).
    3.  **ГАРАНТИЯ ПРОХОДИМОСТИ:** Убедись, что игрок может добраться от "Решения" до "Преграды". Путь к победе НЕ ДОЛЖЕН быть заблокирован нерешаемой загадкой. Не создавай предметы, которые нигде не используются. Не создавай преграды, которые невозможно преодолеть.
    4.  **ПРАВИЛО ФОРМАТА:** Для всех переменных в эффектах 'set' и условиях 'var_eq'/'var_neq', используй МАССИВ ОБЪЕКТОВ с полями 'key' и 'value'. ВСЕГДА используй СТРОКИ в качестве 'value' (например, '1', 'true', 'активно').
        -   Пример для 'set': \`"effects": [{"set": [{"key": "power_on", "value": "1"}]}]\`
        -   Пример для 'var_eq': \`"when": {"var_eq": [{"key": "door_locked", "value": "true"}]}\`
    `);const I=`Ты — опытный сценарист и гейм-дизайнер текстовых квестов. Твоя задача — создать структуру для целого квеста на основе идеи автора.

    Инструкции:
    1.  Создай связную историю, состоящую примерно из ${i} узлов.
    2.  Первый узел ОБЯЗАТЕЛЬНО должен иметь id "start".
    3.  Все id узлов должны быть уникальными, короткими и в стиле snake_case (например: 'dark_corridor', 'captain_bridge').
    4.  Для каждого узла напиши атмосферный текст на русском языке.
    5.  Для каждого узла придумай 2-3 логичных варианта выбора ('choices').
    6.  Поле 'to' в каждом выборе должно ссылаться на id другого существующего узла, создавая связный граф истории. Убедись, что нет ссылок на несуществующие id.
    7.  Хотя бы один узел должен быть конечным, завершая историю (используй поле 'end', например: \`"end": {"type": "win", "message": "Вы победили!"}\`). У конечных узлов не должно быть поля 'choices'.
    ${A}
    8.  Верни результат в формате JSON, соответствующем предоставленной схеме. Не добавляй никаких комментариев или лишнего текста вне JSON.

    Параметры квеста от автора:
    -   Жанр/Сеттинг: ${n}
    -   Основная завязка сюжета: "${e}"
    -   Ключевые элементы, которые нужно включить: ${r||"не указаны"}
    `;try{const k=(await rh.models.generateContent({model:"gemini-2.5-flash",contents:I,config:{responseMimeType:"application/json",responseSchema:S}})).text.trim();if(!k)throw new Error("API вернул пустой ответ.");const q=JSON.parse(k);if(!q.nodes||!Array.isArray(q.nodes))throw new Error("API вернул некорректную структуру данных (отсутствует массив nodes).");const $={};for(const H of q.nodes)if(H.id){const{id:M,...L}=H;L.choices&&L.choices.length===0&&delete L.choices,L.effects&&L.effects.length===0&&delete L.effects,$[M]=L}if(!$.start)throw new Error("Сгенерированный сценарий не содержит обязательного узла 'start'.");return $}catch(D){console.error("Error generating quest DSL with Gemini API:",D);let k="Произошла неизвестная ошибка при генерации сценария.";throw D instanceof Error&&(k=`Не удалось сгенерировать сценарий: ${D.message}`),new Error(k)}},bIe=async t=>{const e={type:Be.OBJECT,properties:{action:{type:Be.STRING,description:"Action to perform: CREATE_NODE, DELETE_CHOICE, SET_CHOICE_TARGET, DELETE_NODE."},label:{type:Be.STRING,description:"Human-readable label for the button, e.g., 'Create missing node'."},details:{type:Be.OBJECT,properties:{targetNodeId:{type:Be.STRING,nullable:!0},choiceIndex:{type:Be.NUMBER,nullable:!0,description:"The index of the choice with the broken link within its node's 'choices' array."},newNodeId:{type:Be.STRING,nullable:!0},generatedText:{type:Be.STRING,nullable:!0,description:"Pre-generated Russian text for the new node if action is CREATE_NODE."}}}},required:["action","label","details"]},n={type:Be.OBJECT,properties:{type:{type:Be.STRING,description:"Error type: BROKEN_LINK, ORPHAN_NODE, DEAD_END, UNSOLVABLE_PUZZLE"},nodeId:{type:Be.STRING,description:"ID of the node where the error occurs."},description:{type:Be.STRING,description:"Human-readable description of the error."},suggestions:{type:Be.ARRAY,items:e},details:{type:Be.OBJECT,properties:{choiceLabel:{type:Be.STRING,nullable:!0,description:"The 'label' text of the choice with the broken link."},targetNodeId:{type:Be.STRING,nullable:!0}}}},required:["type","nodeId","description","suggestions"]},r={type:Be.OBJECT,properties:{issues:{type:Be.ARRAY,items:n}},required:["issues"]},i=`Ты — опытный гейм-дизайнер и QA-тестировщик текстовых квестов. Проанализируй предоставленный JSON-сценарий (QuestDSL) на наличие логических ошибок. Для каждой найденной ошибки "BROKEN_LINK" ты должен не только предложить создать узел, но и СРАЗУ ЖЕ сгенерировать для него подходящий по контексту текст.

    **Типы ошибок для поиска и правила генерации предложений:**

    1.  **BROKEN_LINK (Битые ссылки):**
        -   **Задача:** Найди выбор (\`choices\`), у которого поле \`to\` ссылается на ID узла, которого нет в сценарии. Ты ДОЛЖЕН определить: 1. Текст этого выбора (\`label\`). 2. Индекс этого выбора в массиве \`choices\` (число).
        -   **В \`details\` самой ошибки (\`AnalysisResult.details\`):** Укажи \`choiceLabel\` (текст выбора) и \`targetNodeId\` (несуществующий ID).
        -   **В \`suggestions\`:**
            -   **Для \`action: "CREATE_NODE"\`:** В \`details\` укажи \`choiceIndex\` (индекс), \`newNodeId\` (несуществующий ID) и сгенерируй \`generatedText\`. Текст должен логично продолжать историю, основываясь на тексте исходного узла и \`choiceLabel\`. Учти ID целевого узла (например, \`lose_taunted\` намекает на проигрыш).
            -   **Для \`action: "DELETE_CHOICE"\`:** В \`details\` укажи тот же самый \`choiceIndex\`.

    2.  **ORPHAN_NODE (Узлы-сироты):**
        -   **Задача:** Найди узел (кроме 'start'), на который нет ни одной ссылки из полей \`to\`.
        -   **Предложения:** Предложи удалить этот узел (\`action: "DELETE_NODE"\`).

    3.  **DEAD_END (Тупики):**
        -   **Задача:** Найди узел, который не является концом игры (\`end\`), но не имеет доступных для игрока выборов.
        -   **Предложения:** Предложи удалить этот узел.

    4.  **UNSOLVABLE_PUZZLE (Нерешаемые загадки):**
        -   **Задача:** Найди преграду (выбор с \`when\`), для которой нет решения в предыдущих узлах.
        -   **Предложения:** Опиши проблему в \`description\` и предложи удалить этот выбор.

    **Сценарий для анализа:**
    \`\`\`json
    ${JSON.stringify(t,null,2)}
    \`\`\`

    Верни ТОЛЬКО JSON-объект с полем "issues". Если ошибок нет, верни пустой массив.
    `,o=()=>rh.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json",responseSchema:r}});try{const l=(await gIe(o)).text.trim();return l?JSON.parse(l).issues||[]:[]}catch(s){console.error("Error analyzing quest DSL:",s);let l="Произошла неизвестная ошибка при анализе сценария.";throw s instanceof Error&&(l=`Не удалось проанализировать сценарий: ${s.message}`),new Error(l)}},SIe=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M17 3H5a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2zm-3 12H8v-4h6v4zm2-6-H5V5h12v4z"})}),bf=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),m4=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),CG=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-red-500 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),vv=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),AIe=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-stone-400 hover:text-amber-400 transition-colors",viewBox:"0 0 20 20",fill:"currentColor",children:[C.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),C.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]}),xIe=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),CIe=()=>C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-stone-400 hover:text-amber-400 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924-1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066 2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),g4=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),IIe=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),Mx=({nodeId:t,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:l,onFinishRename:c,onDeleteNode:f,level:h=0,visited:g})=>{const v=e.nodes[t];if(!v||g.has(t))return null;g.add(t);const E=()=>{c(t,i)},b=(v.choices||[]).map(S=>S.to).concat((v.branch||[]).map(S=>S.to)).concat(v.fallback?[v.fallback]:[]).filter((S,A,I)=>S&&e.nodes[S]&&I.indexOf(S)===A);return C.jsxs("div",{className:"relative",children:[h>0&&C.jsx("div",{className:"absolute top-0 left-[-11px] h-full w-px bg-stone-600"}),h>0&&C.jsx("div",{className:"absolute top-4 left-[-11px] w-3 h-px bg-stone-600"}),C.jsx("div",{className:`pl-${h*4}`,children:C.jsxs("div",{className:`flex items-center justify-between p-2 rounded-md transition-colors group ${n===t?"bg-amber-500":"bg-stone-700 hover:bg-stone-600"}`,children:[r===t?C.jsx("input",{type:"text",value:i,onChange:S=>o(S.target.value),onBlur:E,onKeyDown:S=>S.key==="Enter"&&E(),className:"bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-2 py-1 text-sm w-full",autoFocus:!0}):C.jsx("button",{onClick:()=>s(t),className:`w-full text-left font-mono text-sm ${n===t?"text-stone-900 font-bold":""}`,children:t}),t!=="start"&&r!==t&&C.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[C.jsx("button",{onClick:()=>l(t),className:"p-1",children:C.jsx(AIe,{})}),C.jsx("button",{onClick:()=>f(t),className:"p-1",children:C.jsx(CG,{})})]})]})}),C.jsx("div",{className:"mt-1",children:b.map(S=>C.jsx(Mx,{nodeId:S,dsl:e,selectedNodeId:n,renamingNodeId:r,renamingValue:i,setRenamingValue:o,onSelectNode:s,onStartRename:l,onFinishRename:c,onDeleteNode:f,level:h+1,visited:g},S))})]})},RIe=()=>{var Aa,si,xa,io,gs;const{questId:t}=R4(),e=t0(),[n,r]=R.useState(null),[i,o]=R.useState(null),[s,l]=R.useState("draft"),[c,f]=R.useState("start"),[h,g]=R.useState(!0),[v,E]=R.useState(!1),[b,S]=R.useState(""),[A,I]=R.useState(null),[D,k]=R.useState({}),[q,$]=R.useState(null),[H,M]=R.useState(""),[L,O]=R.useState(null),F=R.useRef(!1),[U,z]=R.useState(!1),[G,Ce]=R.useState(!1),[be,ee]=R.useState({prompt:"",tone:"Таинственный",keywords:"",wordCount:100}),[le,Se]=R.useState({loading:!1,error:"",text:""}),[Ve,K]=R.useState(!1),[de,ue]=R.useState([]),[Te,Le]=R.useState(""),[Oe,qe]=R.useState({loading:!1,error:"",results:[],isOpen:!1}),[Pt,ht]=R.useState({prompt:"",style:"Киберпанк",negativePrompt:"text, words, letters, blurry, ugly, watermark"}),Ee=R.useCallback((Y,ae=!1)=>{o(Y),ae||(F.current=!0)},[]);R.useEffect(()=>{if(!t){S("Квест не найден."),g(!1);return}g(!0);const Y=go(Vr,"games",t),ae=bm(Y,we=>{if(we.exists()){const ye={id:we.id,...we.data()};r(ye),F.current||(l(ye.status||"draft"),Ee(JSON.parse(JSON.stringify(ye.dsl)),!0))}else S("Квест не найден.");g(!1)},we=>{console.error(we),S("Ошибка загрузки квеста."),g(!1)});return()=>ae()},[t,Ee]),R.useEffect(()=>{O(null),ue([]),Le("")},[c]);const je=Y=>{l(Y),F.current=!0},Ye=async()=>{if(!(!t||!i)){E(!0);try{await Em(go(Vr,"games",t),{title:i.meta.title,dsl:i,status:s,updatedAt:hl()}),I(new Date),F.current=!1}catch(Y){console.error(Y),alert("Не удалось сохранить изменения.")}finally{E(!1)}}},me=(Y,ae,we)=>{if(!i)return;const ye={...i,nodes:{...i.nodes}};we===void 0?delete ye.nodes[Y][ae]:ye.nodes[Y]={...ye.nodes[Y],[ae]:we},Ee(ye)},Lt=(Y,ae,we,ye)=>{if(!i)return;const ve={...i,nodes:{...i.nodes}},Xe=[...ve.nodes[Y].choices||[]],gt={...Xe[ae]};ye===void 0||Array.isArray(ye)&&ye.length===0?delete gt[we]:gt[we]=ye,Xe[ae]=gt,ve.nodes[Y]={...ve.nodes[Y],choices:Xe},Ee(ve)},st=(Y,ae,we)=>{var ye,ve,Xe,gt,Vt,Kt,Tt,at,et;if(i)if(we==="__CREATE_NEW__"){const ln=prompt("Введите ID нового узла (латиницей, без пробелов):");if(ln&&/^[a-zA-Z0-9_]+$/.test(ln)){if(i.nodes[ln]){alert("Узел с таким ID уже существует.");const un=document.getElementById(`choice-to-${ae}`);un&&(un.value=((Xe=(ve=(ye=i.nodes[Y])==null?void 0:ye.choices)==null?void 0:ve[ae])==null?void 0:Xe.to)||"");return}const Ut={...i,nodes:{...i.nodes}};Ut.nodes[ln]={text:"Новый узел..."};const jn=[...Ut.nodes[Y].choices||[]];jn[ae]={...jn[ae],to:ln},Ut.nodes[Y]={...Ut.nodes[Y],choices:jn},Ee(Ut),f(ln)}else if(ln){alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.");const Ut=document.getElementById(`choice-to-${ae}`);Ut&&(Ut.value=((Kt=(Vt=(gt=i.nodes[Y])==null?void 0:gt.choices)==null?void 0:Vt[ae])==null?void 0:Kt.to)||"")}else{const Ut=document.getElementById(`choice-to-${ae}`);Ut&&(Ut.value=((et=(at=(Tt=i.nodes[Y])==null?void 0:Tt.choices)==null?void 0:at[ae])==null?void 0:et.to)||"")}}else Lt(Y,ae,"to",we)},En=Y=>{if(!i)return;const ae={...i,nodes:{...i.nodes}},we=[...ae.nodes[Y].choices||[]];we.push({label:"",to:""}),ae.nodes[Y]={...ae.nodes[Y],choices:we},Ee(ae)},Cn=(Y,ae)=>{if(!i||!window.confirm("Вы уверены, что хотите удалить этот выбор?"))return;const we={...i,nodes:{...i.nodes}},ye=[...we.nodes[Y].choices||[]];ye.splice(ae,1),we.nodes[Y]={...we.nodes[Y],choices:ye},Ee(we)},pn=()=>{if(!i)return;const Y=prompt("Введите ID нового узла (латиницей, без пробелов):");if(Y&&/^[a-zA-Z0-9_]+$/.test(Y)){if(i.nodes[Y]){alert("Узел с таким ID уже существует.");return}const ae={...i,nodes:{...i.nodes}};ae.nodes[Y]={text:"Новый узел..."},Ee(ae),f(Y)}else Y&&alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.")},Ta=(Y,ae)=>{if(!i||!ae||ae===Y||Y==="start")return;if(!/^[a-zA-Z0-9_]+$/.test(ae)){alert("Неверный формат ID. Используйте только латинские буквы, цифры и подчеркивание.");return}if(i.nodes[ae]){alert("Узел с таким ID уже существует.");return}const we=JSON.parse(JSON.stringify(i));we.nodes[ae]=we.nodes[Y],delete we.nodes[Y],Object.values(we.nodes).forEach(ye=>{ye.choices&&ye.choices.forEach(ve=>{ve.to===Y&&(ve.to=ae)}),ye.branch&&ye.branch.forEach(ve=>{ve.to===Y&&(ve.to=ae)}),ye.fallback===Y&&(ye.fallback=ae)}),Ee(we),c===Y&&f(ae)},Ea=Y=>{$(Y),M(Y)},cs=(Y,ae)=>{ae.trim()&&ae.trim()!==Y&&Ta(Y,ae.trim()),$(null),M("")},Ao=Y=>{if(!i||Y==="start"||!window.confirm(`Вы уверены, что хотите удалить узел "${Y}"? Это действие необратимо.`))return;const ae=[];if(Object.entries(i.nodes).forEach(([ye,ve])=>{if(ye===Y)return;((ve.choices||[]).some(gt=>gt.to===Y)||(ve.branch||[]).some(gt=>gt.to===Y)||ve.fallback===Y)&&ae.push(ye)}),ae.length>0&&!window.confirm(`Внимание! На этот узел ссылаются следующие узлы: ${ae.join(", ")}. Все ссылки будут удалены. Продолжить?`))return;const we=JSON.parse(JSON.stringify(i));delete we.nodes[Y],Object.values(we.nodes).forEach(ye=>{ye.choices&&(ye.choices=ye.choices.map(ve=>ve.to===Y?{...ve,to:""}:ve)),ye.branch&&(ye.branch=ye.branch.filter(ve=>ve.to!==Y)),ye.fallback===Y&&(ye.fallback=void 0)}),c===Y&&f("start"),Ee(we)},ih=async()=>{if(!($t!=null&&$t.text)||typeof $t.text!="string"){alert("Текст узла пуст, чтобы генерировать промпт.");return}try{const Y=await yIe($t.text);ht(ae=>({...ae,prompt:Y}))}catch(Y){alert(`Не удалось сгенерировать промпт: ${Y.message}`)}},wa=async Y=>{if(!t)return;const{prompt:ae,style:we,negativePrompt:ye}=Pt;if(!ae){alert("Пожалуйста, введите описание для генерации изображения.");return}k(ve=>({...ve,[Y]:{loading:!0,error:""}}));try{const ve=await _Ie({mainPrompt:ae,style:we,negativePrompt:ye}),Xe=`${Y}_${Date.now()}`,gt=PA(_re,`quests/${t}/images/${Xe}.jpeg`),Vt=ve.split(",")[1],Kt=await nre(gt,Vt,"base64",{contentType:"image/jpeg"}),Tt=await S3(Kt.ref),at=JSON.parse(JSON.stringify(i));at.assets.images||(at.assets.images={}),at.assets.images[Xe]=Tt,at.nodes[Y].bg=Xe,Ee(at),k(et=>({...et,[Y]:{loading:!1,error:""}}))}catch(ve){let Xe=ve.message||"Ошибка генерации или загрузки";(ve==null?void 0:ve.code)==="storage/unauthorized"&&(Xe="Ошибка прав доступа. Проверьте правила безопасности Firebase Storage."),k(gt=>({...gt,[Y]:{loading:!1,error:Xe}}))}},$l=Y=>{me(c,"bg",Y),z(!1)},bc=Y=>{if(!i)return;const ae=Object.entries(i.nodes).filter(([ye,ve])=>ve.bg===Y).map(([ye,ve])=>ye);let we="Вы уверены, что хотите навсегда удалить это изображение из библиотеки?";if(ae.length>0&&(we+=`

Оно используется в следующих узлах: ${ae.join(", ")}. Фон в этих узлах будет сброшен.`),window.confirm(we)){const ye=JSON.parse(JSON.stringify(i));delete ye.assets.images[Y],ae.forEach(ve=>{ye.nodes[ve]&&delete ye.nodes[ve].bg}),Ee(ye)}},en=(Y,ae)=>{var Xe;if(!((Xe=$t==null?void 0:$t.choices)==null?void 0:Xe[Y])||!i)return;const ye=JSON.parse(JSON.stringify(i)),ve=ye.nodes[c].choices[Y];ve.when||(ve.when={}),ve.when[ae]||(ve.when[ae]=[]),ve.when[ae].push({key:"",value:""}),Ee(ye)},mt=(Y,ae,we,ye)=>{if(!i)return;const ve=JSON.parse(JSON.stringify(i)),Xe=ve.nodes[c].choices[Y];ye!==void 0&&(Xe.when[ae][ye]=we),Ee(ve)},Nr=(Y,ae,we)=>{if(!i)return;const ye=JSON.parse(JSON.stringify(i)),ve=ye.nodes[c].choices[Y];ve.when&&(we!==void 0&&ve.when[ae]&&(ve.when[ae].splice(we,1),ve.when[ae].length===0&&delete ve.when[ae]),Object.keys(ve.when).length===0&&delete ve.when,Ee(ye))},Ln=(Y,ae)=>{if(!i)return;const we=JSON.parse(JSON.stringify(i)),ye=we.nodes[c].choices[Y];ye.effects||(ye.effects=[]);let ve={};ae==="set"?ve={set:[{key:"",value:""}]}:ae==="add"?ve={add:[{key:"",value:0}]}:ae==="inv_add"?ve={inv_add:""}:ae==="inv_remove"&&(ve={inv_remove:""}),ye.effects.push(ve),Ee(we)},ba=(Y,ae,we)=>{if(!i)return;const ye=JSON.parse(JSON.stringify(i)),ve=ye.nodes[c].choices[Y];ve.effects&&(ve.effects[ae]=we),Ee(ye)},Sc=(Y,ae)=>{if(!i||!window.confirm("Удалить этот эффект?"))return;const we=JSON.parse(JSON.stringify(i)),ye=we.nodes[c].choices[Y];ye.effects&&(ye.effects.splice(ae,1),ye.effects.length===0&&delete ye.effects),Ee(we)},fs=()=>{$t&&(Se({loading:!1,error:"",text:""}),ee(Y=>({...Y,prompt:$t.text||""})),Ce(!0))},ds=async Y=>{Y.preventDefault(),Se({loading:!0,error:"",text:""});try{const ae=await TIe(be);Se({loading:!1,error:"",text:ae})}catch(ae){Se({loading:!1,error:ae.message,text:""})}},hs=()=>{le.text&&(me(c,"text",le.text),Ce(!1))},ii=async()=>{if(!(!$t||typeof $t.text!="string")){K(!0),ue([]),Le("");try{const Y=await EIe($t.text);ue(Y)}catch(Y){Le(Y.message)}finally{K(!1)}}},Sa=Y=>{if(!i||!c)return;const ae=JSON.parse(JSON.stringify(i)),we=ae.nodes[c];we.choices||(we.choices=[]),we.choices.push({label:Y,to:""}),Ee(ae),ue(ye=>ye.filter(ve=>ve!==Y))},ps=async()=>{if(i){qe({loading:!0,error:"",results:[],isOpen:!0});try{const Y=await bIe(i);qe({loading:!1,error:"",results:Y,isOpen:!0})}catch(Y){qe({loading:!1,error:Y.message,results:[],isOpen:!0})}}},zl=(Y,ae)=>{var we,ye;if(i)try{const ve=JSON.parse(JSON.stringify(i));let Xe=!1;const gt=ve.nodes[Y.nodeId];if(!gt)throw new Error(`Node with id '${Y.nodeId}' not found.`);switch(ae.action){case"CREATE_NODE":if(ae.details.newNodeId&&!ve.nodes[ae.details.newNodeId]&&ae.details.generatedText&&(ve.nodes[ae.details.newNodeId]={text:ae.details.generatedText},gt.choices)){let Vt=ae.details.choiceIndex;if(Vt===void 0&&((we=Y.details)!=null&&we.choiceLabel)&&(Vt=gt.choices.findIndex(Kt=>Kt.label===Y.details.choiceLabel)),Vt!==void 0&&Vt>-1){const Kt=gt.choices[Vt];Kt&&(Kt.to=ae.details.newNodeId,Xe=!0)}}break;case"DELETE_CHOICE":if(gt.choices){let Vt=ae.details.choiceIndex;Vt===void 0&&((ye=Y.details)!=null&&ye.choiceLabel)&&(Vt=gt.choices.findIndex(Kt=>Kt.label===Y.details.choiceLabel)),Vt!==void 0&&Vt>-1&&gt.choices[Vt]&&(gt.choices.splice(Vt,1),Xe=!0)}break;case"DELETE_NODE":ve.nodes[Y.nodeId]&&Y.nodeId!=="start"&&(delete ve.nodes[Y.nodeId],Xe=!0);break}Xe?(Ee(ve),qe(Vt=>({...Vt,results:Vt.results.filter(Kt=>Kt!==Y)}))):alert("Не удалось применить исправление (возможно, данные устарели).")}catch(ve){alert(`Ошибка при применении исправления: ${ve.message}`)}};if(h)return C.jsx("div",{className:"text-center p-8 font-display text-2xl text-stone-400 animate-pulse",children:"ЗАГРУЗКА РЕДАКТОРА..."});if(b)return C.jsx("div",{className:"text-center p-8 text-2xl text-red-500",children:b});if(!n||!i)return null;const $t=i.nodes[c],ms=new Set,jr=Object.keys(i.nodes),oi=jr.includes("start")?"start":jr[0]||null;return C.jsxs("div",{className:"container mx-auto py-8 px-4",children:[C.jsxs("div",{className:"flex justify-between items-center mb-6",children:[C.jsxs("div",{className:"flex items-center gap-4 flex-grow min-w-0",children:[C.jsx("button",{onClick:()=>e("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:"← Назад"}),C.jsx("input",{type:"text",value:i.meta.title,onChange:Y=>Ee({...i,meta:{...i.meta,title:Y.target.value}}),className:"font-display text-4xl text-stone-200 bg-transparent border-0 focus:ring-2 focus:ring-amber-500 rounded-md p-1 truncate"}),C.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[C.jsx("label",{htmlFor:"quest-status",className:"text-sm font-bold text-stone-400 flex-shrink-0",children:"Статус:"}),C.jsxs("div",{className:"relative",children:[C.jsx("span",{className:`absolute left-2.5 top-1/2 -translate-y-1/2 h-2.5 w-2.5 rounded-full z-10 ${s==="published"?"bg-green-400":"bg-sky-400"}`}),C.jsxs("select",{id:"quest-status",value:s,onChange:Y=>je(Y.target.value),className:`w-full bg-stone-700 border border-stone-600 rounded-md pl-7 pr-4 py-1.5 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all appearance-none font-semibold ${s==="published"?"text-green-300":"text-sky-300"}`,children:[C.jsx("option",{value:"draft",children:"Черновик"}),C.jsx("option",{value:"published",children:"Опубликован"})]})]})]})]}),C.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[A&&C.jsxs("span",{className:"text-sm text-stone-400",children:["Сохранено: ",A.toLocaleTimeString()]}),C.jsxs("button",{onClick:ps,disabled:Oe.loading,className:"flex items-center justify-center font-display text-xl bg-teal-600 text-white py-2 px-6 rounded-md hover:bg-teal-500 transition-colors disabled:bg-stone-600",children:[C.jsx(m4,{})," ",Oe.loading?"АНАЛИЗ...":"Проверить сценарий"]}),C.jsxs("button",{onClick:Ye,disabled:v,className:"flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 px-6 rounded-md hover:bg-amber-400 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[C.jsx(SIe,{})," ",v?"СОХРАНЕНИЕ...":"СОХРАНИТЬ"]})]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[C.jsxs("div",{className:"md:col-span-1 bg-stone-800/50 border border-stone-700 p-4 rounded-md flex flex-col h-full max-h-[75vh]",children:[C.jsx("h3",{className:"font-display text-2xl text-amber-400 mb-4 flex-shrink-0",children:"Узлы Сценария"}),C.jsxs("div",{className:"flex-grow overflow-y-auto space-y-1 pr-2",children:[oi&&i.nodes[oi]&&C.jsx(Mx,{nodeId:oi,dsl:i,selectedNodeId:c,onSelectNode:f,onStartRename:Ea,onFinishRename:cs,onDeleteNode:Ao,renamingNodeId:q,renamingValue:H,setRenamingValue:M,visited:ms}),jr.filter(Y=>!ms.has(Y)).map(Y=>C.jsx(Mx,{nodeId:Y,dsl:i,selectedNodeId:c,onSelectNode:f,onStartRename:Ea,onFinishRename:cs,onDeleteNode:Ao,renamingNodeId:q,renamingValue:H,setRenamingValue:M,visited:ms},Y))]}),C.jsxs("button",{onClick:pn,className:"mt-4 w-full flex items-center justify-center bg-stone-600 hover:bg-stone-500 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:[C.jsx(xIe,{})," Создать узел"]})]}),C.jsx("div",{className:"md:col-span-3 bg-stone-800/50 border border-stone-700 p-6 rounded-md space-y-6 max-h-[75vh] overflow-y-auto",children:$t?C.jsxs("div",{children:[C.jsxs("h3",{className:"font-display text-3xl text-stone-100 mb-4 border-b-2 border-amber-500 pb-2",children:["Узел: ",C.jsx("span",{className:"text-amber-400",children:c})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("label",{htmlFor:"nodeText",className:"text-sm font-bold text-stone-400 block",children:"Текст узла:"}),C.jsxs("button",{onClick:fs,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors",children:[C.jsx(bf,{})," Сгенерировать с AI"]})]}),C.jsx("textarea",{id:"nodeText",value:$t.text,onChange:Y=>me(c,"text",Y.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-40 resize-y"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-sm font-bold text-stone-400 block",children:"Фоновое изображение:"}),C.jsxs("div",{className:"aspect-video bg-stone-900 rounded-md overflow-hidden relative flex items-center justify-center",children:[i.assets.images[$t.bg||""]?C.jsx("img",{src:i.assets.images[$t.bg||""],alt:"Generated background",className:"w-full h-full object-cover"}):C.jsx("span",{className:"text-stone-500",children:"Нет изображения"}),((Aa=D[c])==null?void 0:Aa.loading)&&C.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:C.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"})}),$t.bg&&i.assets.images[$t.bg]&&C.jsx("button",{onClick:()=>me(c,"bg",void 0),className:"absolute top-2 right-2 bg-black/50 text-white rounded-full p-1.5 hover:bg-red-500 transition-colors",title:"Убрать фон с этого узла",children:C.jsx(vv,{})})]}),C.jsx("div",{className:"flex gap-2",children:C.jsxs("button",{onClick:()=>z(!0),className:"w-full flex items-center justify-center font-display text-lg bg-stone-600 text-white py-2 px-4 rounded-md hover:bg-stone-500 transition-colors",children:[C.jsx(g4,{}),"Выбрать из библиотеки"]})}),C.jsxs("div",{className:"mt-4 p-4 bg-stone-900/50 rounded-lg border border-stone-700 space-y-3",children:[C.jsx("h5",{className:"font-display text-lg text-amber-400",children:"AI-Студия Изображений"}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"ai-image-prompt",className:"text-sm font-bold text-stone-400 block mb-1",children:"Промпт (на английском):"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("textarea",{id:"ai-image-prompt",value:Pt.prompt,onChange:Y=>ht({...Pt,prompt:Y.target.value}),placeholder:"A lone detective standing in a neon-lit alley...",className:"flex-grow bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-20 resize-y"}),C.jsx("button",{onClick:ih,title:"Сгенерировать промпт из текста узла",className:"flex items-center justify-center font-display text-lg bg-sky-600 text-white p-3 rounded-md hover:bg-sky-500 transition-colors",children:C.jsx(bf,{})})]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"ai-image-style",className:"text-sm font-bold text-stone-400 block mb-1",children:"Стиль:"}),C.jsxs("select",{id:"ai-image-style",value:Pt.style,onChange:Y=>ht({...Pt,style:Y.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[C.jsx("option",{children:"Киберпанк"}),C.jsx("option",{children:"Темное фэнтези"}),C.jsx("option",{children:"Фотореализм"}),C.jsx("option",{children:"Аниме"}),C.jsx("option",{children:"Пиксель-арт"}),C.jsx("option",{children:"Стимпанк"})]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"ai-image-negative",className:"text-sm font-bold text-stone-400 block mb-1",children:"Негативный промпт:"}),C.jsx("input",{id:"ai-image-negative",type:"text",value:Pt.negativePrompt,onChange:Y=>ht({...Pt,negativePrompt:Y.target.value}),placeholder:"text, words, ugly, blurry",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]})]}),C.jsxs("button",{onClick:()=>wa(c),disabled:(si=D[c])==null?void 0:si.loading,className:"w-full flex items-center justify-center font-display text-lg bg-amber-500 text-stone-900 py-2 px-4 rounded-md hover:bg-amber-400 transition-colors disabled:bg-stone-600",children:[C.jsx(bf,{})," ",(xa=D[c])!=null&&xa.loading?"Генерация...":"Создать Изображение"]}),((io=D[c])==null?void 0:io.error)&&C.jsx("p",{className:"text-red-500 text-sm mt-1 text-center",children:(gs=D[c])==null?void 0:gs.error})]})]}),C.jsxs("div",{children:[C.jsxs("div",{className:"flex justify-between items-center mt-6 mb-2",children:[C.jsx("h4",{className:"text-lg font-bold text-stone-300",children:"Выборы:"}),C.jsxs("button",{onClick:ii,disabled:Ve,className:"flex items-center gap-1.5 text-sm bg-sky-600 hover:bg-sky-500 text-white font-semibold py-1 px-3 rounded-md transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[C.jsx(bf,{})," ",Ve?"Думаю...":"Предложить выборы"]})]}),Te&&C.jsx("p",{className:"text-red-500 text-sm my-2",children:Te}),de.length>0&&C.jsxs("div",{className:"p-2 bg-stone-900/50 rounded-md mb-2",children:[C.jsx("p",{className:"text-xs text-stone-400 mb-2",children:"Нажмите, чтобы добавить вариант:"}),C.jsx("div",{className:"flex flex-wrap gap-2",children:de.map((Y,ae)=>C.jsxs("button",{onClick:()=>Sa(Y),className:"bg-sky-800 text-sky-200 text-sm px-3 py-1 rounded-full hover:bg-sky-700 transition-colors",children:['+ "',Y,'"']},ae))})]}),C.jsxs("div",{className:"space-y-2",children:[($t.choices||[]).map((Y,ae)=>{var we,ye,ve,Xe,gt,Vt,Kt;return C.jsxs("div",{className:"bg-stone-900/50 p-3 rounded-md transition-all",children:[C.jsxs("div",{className:"flex gap-2 items-center",children:[C.jsx("input",{type:"text",value:Y.label,onChange:Tt=>Lt(c,ae,"label",Tt.target.value),placeholder:"Текст выбора",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none"}),C.jsx("span",{className:"text-stone-400",children:"→"}),C.jsxs("select",{id:`choice-to-${ae}`,value:Y.to||"",onChange:Tt=>st(c,ae,Tt.target.value),className:"w-48 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 focus:ring-1 focus:ring-amber-500 outline-none",children:[C.jsx("option",{value:"",disabled:!0,children:"Выберите узел..."}),C.jsx("option",{value:"__CREATE_NEW__",className:"text-sky-400 font-semibold",children:"[ Создать новый узел... ]"}),jr.map(Tt=>C.jsx("option",{value:Tt,children:Tt},Tt))]}),C.jsx("button",{onClick:()=>O(L===ae?null:ae),title:"Условия и эффекты",children:C.jsx(CIe,{})}),C.jsx("button",{onClick:()=>Cn(c,ae),title:"Удалить выбор",children:C.jsx(CG,{})})]}),L===ae&&C.jsxs("div",{className:"mt-3 space-y-4 border-t border-stone-700 pt-3",children:[C.jsxs("div",{children:[C.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2",children:"Условия видимости"}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[C.jsxs("select",{value:(we=Y.when)!=null&&we.has_item?"has_item":(ye=Y.when)!=null&&ye.missing_item?"missing_item":"none",onChange:Tt=>{const at=Tt.target.value,et={...Y.when};delete et.has_item,delete et.missing_item,at!=="none"&&(et[at]=""),Lt(c,ae,"when",et)},className:"bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none",children:[C.jsx("option",{value:"none",children:"Инвентарь: нет"}),C.jsx("option",{value:"has_item",children:"Инвентарь: Есть"}),C.jsx("option",{value:"missing_item",children:"Инвентарь: Нет"})]}),(((ve=Y.when)==null?void 0:ve.has_item)!==void 0||((Xe=Y.when)==null?void 0:Xe.missing_item)!==void 0)&&C.jsx("input",{type:"text",value:((gt=Y.when)==null?void 0:gt.has_item)||((Vt=Y.when)==null?void 0:Vt.missing_item)||"",onChange:Tt=>{const at={...Y.when};at.has_item!==void 0&&(at.has_item=Tt.target.value),at.missing_item!==void 0&&(at.missing_item=Tt.target.value),Lt(c,ae,"when",at)},placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"})]}),(((Kt=Y.when)==null?void 0:Kt.var_eq)||[]).map((Tt,at)=>C.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[C.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:"Переменная ="}),C.jsx("input",{type:"text",value:Tt.key,onChange:et=>mt(ae,"var_eq",{...Tt,key:et.target.value},at),placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),C.jsx("input",{type:"text",value:Tt.value,onChange:et=>mt(ae,"var_eq",{...Tt,value:et.target.value},at),placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm outline-none"}),C.jsx("button",{onClick:()=>Nr(ae,"var_eq",at),className:"text-stone-500 hover:text-red-400",children:C.jsx(vv,{})})]},`var_eq_${at}`)),C.jsx("button",{onClick:()=>en(ae,"var_eq"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Добавить 'Переменная ='"})]})]}),C.jsxs("div",{children:[C.jsx("h5",{className:"text-sm font-bold text-stone-400 mb-2 mt-4",children:"Эффекты при выборе"}),C.jsx("div",{className:"space-y-2",children:(Y.effects||[]).map((Tt,at)=>{const et=Object.keys(Tt)[0];if(et==="set"||et==="add"){const ln=Tt[et]||[];return ln.map((Ut,jn)=>C.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[C.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:et==="set"?"Установить":"Добавить к"}),C.jsx("input",{type:"text",value:Ut.key,placeholder:"variable",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:un=>{const Ft=[...ln];Ft[jn]={...Ut,key:un.target.value},ba(ae,at,{[et]:Ft})}}),C.jsx("input",{type:et==="add"?"number":"text",value:Ut.value,placeholder:"value",className:"w-24 bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:un=>{const Ft=[...ln],Hl=et==="add"?Number(un.target.value):un.target.value;Ft[jn]={...Ut,value:Hl},ba(ae,at,{[et]:Ft})}}),C.jsx("button",{onClick:()=>Sc(ae,at),className:"text-stone-500 hover:text-red-400",children:C.jsx(vv,{})})]},`${et}_${jn}`))}return et==="inv_add"||et==="inv_remove"?C.jsxs("div",{className:"flex items-center gap-2 bg-stone-800 p-2 rounded",children:[C.jsx("span",{className:"text-sm text-stone-300 font-semibold",children:et==="inv_add"?"Добавить предмет":"Удалить предмет"}),C.jsx("input",{type:"text",value:Tt[et],placeholder:"item_id",className:"flex-grow bg-stone-700 text-stone-200 border border-stone-600 rounded px-2 py-1 text-sm",onChange:ln=>ba(ae,at,{[et]:ln.target.value})}),C.jsx("button",{onClick:()=>Sc(ae,at),className:"text-stone-500 hover:text-red-400",children:C.jsx(vv,{})})]},et):null})}),C.jsxs("div",{className:"flex gap-4 mt-2",children:[C.jsx("button",{onClick:()=>Ln(ae,"set"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Установить переменную"}),C.jsx("button",{onClick:()=>Ln(ae,"inv_add"),className:"text-sky-400 hover:text-sky-300 text-sm font-semibold",children:"+ Добавить предмет"})]})]})]})]},ae)}),C.jsx("button",{onClick:()=>En(c),className:"w-full text-stone-300 hover:bg-stone-700 p-2 rounded-md transition-colors text-sm font-semibold",children:"+ Добавить выбор"})]})]})]}):C.jsx("p",{className:"text-stone-400",children:"Выберите узел для редактирования"})})]}),U&&C.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>z(!1),role:"dialog","aria-modal":"true","aria-labelledby":"asset-library-title",children:C.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-5xl max-h-[90vh] flex flex-col",onClick:Y=>Y.stopPropagation(),children:[C.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700 flex-shrink-0",children:[C.jsxs("h3",{id:"asset-library-title",className:"font-display text-2xl text-amber-400 flex items-center",children:[C.jsx(g4,{})," Библиотека Ассетов"]}),C.jsx("button",{onClick:()=>z(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),C.jsx("div",{className:"p-6 overflow-y-auto",children:Object.keys(i.assets.images).length>0?C.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Object.entries(i.assets.images).map(([Y,ae])=>C.jsxs("div",{className:"group relative",children:[C.jsx("button",{onClick:()=>$l(Y),className:"block w-full aspect-video bg-stone-900 rounded-md overflow-hidden border-2 border-transparent hover:border-amber-500 focus:border-amber-500 outline-none transition-all",children:C.jsx("img",{src:ae,alt:Y,className:"w-full h-full object-cover",loading:"lazy"})}),C.jsx("button",{onClick:()=>bc(Y),className:"absolute top-1 right-1 bg-black/60 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 hover:bg-red-600 transition-all",title:"Удалить из библиотеки (необратимо)",children:C.jsx(IIe,{})})]},Y))}):C.jsx("p",{className:"text-stone-400 text-center py-12",children:"Библиотека пуста. Сгенерируйте изображения, чтобы они появились здесь."})})]})}),G&&C.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>Ce(!1),role:"dialog","aria-modal":"true",children:C.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:Y=>Y.stopPropagation(),children:[C.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[C.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[C.jsx(bf,{})," AI-Ассистент Сценариста"]}),C.jsx("button",{onClick:()=>Ce(!1),className:"text-stone-400 hover:text-white text-3xl leading-none","aria-label":"Close",children:"×"})]}),C.jsxs("form",{onSubmit:ds,className:"p-6 space-y-4 overflow-y-auto",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"ai-prompt",className:"text-sm font-bold text-stone-400 block mb-1",children:"Основная идея сцены:"}),C.jsx("textarea",{id:"ai-prompt",value:be.prompt,onChange:Y=>ee({...be,prompt:Y.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:"Напр.: Герой входит в таверну, где за столом сидит загадочный незнакомец...",required:!0})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"ai-tone",className:"text-sm font-bold text-stone-400 block mb-1",children:"Тон / Атмосфера:"}),C.jsxs("select",{id:"ai-tone",value:be.tone,onChange:Y=>ee({...be,tone:Y.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[C.jsx("option",{children:"Таинственный"}),C.jsx("option",{children:"Напряженный"}),C.jsx("option",{children:"Юмористический"}),C.jsx("option",{children:"Эпический"}),C.jsx("option",{children:"Мрачный"}),C.jsx("option",{children:"Спокойный"})]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"ai-keywords",className:"text-sm font-bold text-stone-400 block mb-1",children:"Ключевые детали (через запятую):"}),C.jsx("input",{id:"ai-keywords",type:"text",value:be.keywords,onChange:Y=>ee({...be,keywords:Y.target.value}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"старая книга, свеча, кинжал"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"ai-wordCount",className:"text-sm font-bold text-stone-400 block mb-1",children:"Примерный объем (слов):"}),C.jsx("input",{id:"ai-wordCount",type:"number",step:"10",value:be.wordCount,onChange:Y=>ee({...be,wordCount:Number(Y.target.value)}),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all"})]})]}),C.jsxs("button",{type:"submit",disabled:le.loading,className:"w-full flex items-center justify-center font-display text-xl bg-sky-600 text-white py-2 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600",children:[C.jsx(bf,{})," ",le.loading?"ГЕНЕРАЦИЯ...":"СГЕНЕРИРОВАТЬ ТЕКСТ"]})]}),(le.text||le.error)&&C.jsxs("div",{className:"p-6 border-t border-stone-700 space-y-3",children:[C.jsx("h4",{className:"font-display text-xl text-stone-300",children:"Результат:"}),le.error&&C.jsx("p",{className:"text-red-500",children:le.error}),le.text&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"bg-stone-900 p-4 rounded-md max-h-48 overflow-y-auto",children:C.jsx("p",{className:"whitespace-pre-wrap text-stone-300",children:le.text})}),C.jsx("button",{onClick:hs,className:"w-full font-display text-lg bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:"Вставить текст в узел"})]})]})]})}),Oe.isOpen&&C.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",onClick:()=>qe(Y=>({...Y,isOpen:!1})),children:C.jsxs("div",{className:"bg-stone-800 border border-stone-700 rounded-lg w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:Y=>Y.stopPropagation(),children:[C.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-stone-700",children:[C.jsxs("h3",{className:"font-display text-2xl text-amber-400 flex items-center gap-2",children:[C.jsx(m4,{})," Анализ Сценария"]}),C.jsx("button",{onClick:()=>qe(Y=>({...Y,isOpen:!1})),className:"text-stone-400 hover:text-white text-3xl leading-none",children:"×"})]}),C.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[Oe.loading&&C.jsx("p",{className:"animate-pulse text-center py-8 font-display text-xl text-stone-400",children:"АНАЛИЗ..."}),Oe.error&&C.jsx("p",{className:"text-red-500 text-center py-8",children:Oe.error}),!Oe.loading&&!Oe.error&&Oe.results.length===0&&C.jsx("p",{className:"text-green-400 text-center py-8 font-semibold",children:"Ошибок не найдено. Отличная работа!"}),Oe.results.map((Y,ae)=>C.jsxs("div",{className:"bg-stone-900/50 p-4 rounded-md border border-stone-700",children:[C.jsxs("h4",{className:"font-bold text-lg text-red-400 mb-1",children:[Y.type," ",C.jsxs("span",{className:"text-stone-400 font-mono text-base",children:["(в узле: ",Y.nodeId,")"]})]}),C.jsx("p",{className:"text-stone-300 mb-3",children:Y.description}),C.jsx("div",{className:"flex gap-2",children:Y.suggestions.map((we,ye)=>C.jsx("button",{onClick:()=>zl(Y,we),className:"text-sm bg-sky-700 hover:bg-sky-600 text-white font-semibold py-1 px-3 rounded-md transition-colors",children:we.label},ye))})]},ae))]})]})})]})},y4=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),PIe=()=>{const t=t0(),[e,n]=R.useState({prompt:"",keywords:"",nodesCount:"5-7"}),[r,i]=R.useState("Киберпанк-нуар"),[o,s]=R.useState(""),[l,c]=R.useState(!1),[f,h]=R.useState("easy"),[g,v]=R.useState({loading:!1,error:""}),E=A=>{const{name:I,value:D}=A.target;n(k=>({...k,[I]:D}))},b=A=>{i(A.target.value)},S=async A=>{A.preventDefault();const I=r==="__CUSTOM__"?o:r;if(!I.trim()){v({loading:!1,error:"Пожалуйста, укажите жанр."});return}v({loading:!0,error:""});try{const D={...e,genre:I,addLogic:l,complexity:f},k=await wIe(D),q=`AI: ${e.prompt.substring(0,30)}...`,H={format:"bk-quest@1",meta:{id:`quest_ai_${Date.now()}`,title:q,version:1,defaultLocale:"ru"},assets:{images:{},audio:{}},state:{vars:{},inventory:[]},nodes:k},M=await wm(Go(Vr,"games"),{title:q,status:"draft",createdAt:hl(),updatedAt:hl(),dsl:H});t(`/admin/quest/${M.id}`)}catch(D){v({loading:!1,error:D.message})}};return C.jsxs("div",{className:"container mx-auto py-8 px-4",children:[C.jsx("div",{className:"flex items-center mb-6",children:C.jsx("button",{onClick:()=>t("/admin"),className:"bg-stone-700 hover:bg-stone-600 text-stone-200 font-semibold py-2 px-4 rounded-md transition-colors flex-shrink-0",children:"← Назад"})}),C.jsxs("div",{className:"max-w-4xl mx-auto bg-stone-800/50 border border-stone-700 p-8 rounded-md",children:[C.jsxs("h2",{className:"font-display text-4xl text-amber-400 mb-2 flex items-center",children:[C.jsx(y4,{}),"AI-Архитектор Квестов"]}),C.jsx("p",{className:"text-stone-400 mb-6",children:"Опишите вашу идею, и AI создаст базовую структуру сценария, которую вы сможете доработать в редакторе."}),C.jsxs("form",{onSubmit:S,className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"prompt",className:"text-sm font-bold text-stone-300 block mb-2",children:"Основная завязка сюжета:"}),C.jsx("textarea",{id:"prompt",name:"prompt",value:e.prompt,onChange:E,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all h-32 resize-y",placeholder:"Напр.: Детектив в киберпанк-городе расследует исчезновение ученого. Квест начинается в его мрачном офисе...",required:!0})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"genre",className:"text-sm font-bold text-stone-300 block mb-2",children:"Жанр / Сеттинг:"}),C.jsxs("select",{id:"genre",name:"genre",value:r,onChange:b,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[C.jsx("option",{children:"Киберпанк-нуар"}),C.jsx("option",{children:"Темное фэнтези"}),C.jsx("option",{children:"Научная фантастика"}),C.jsx("option",{children:"Космический хоррор"}),C.jsx("option",{children:"Мистический триллер"}),C.jsx("option",{children:"Детектив"}),C.jsx("option",{children:"Постапокалипсис"}),C.jsx("option",{children:"Выживание"}),C.jsx("option",{children:"Приключение"}),C.jsx("option",{value:"__CUSTOM__",children:"Свой вариант..."})]})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"keywords",className:"text-sm font-bold text-stone-300 block mb-2",children:"Ключевые элементы (через запятую):"}),C.jsx("input",{id:"keywords",name:"keywords",type:"text",value:e.keywords,onChange:E,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: импланты, корпорация, дождь"})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"nodesCount",className:"text-sm font-bold text-stone-300 block mb-2",children:"Примерное кол-во узлов:"}),C.jsx("input",{id:"nodesCount",name:"nodesCount",type:"text",value:e.nodesCount,onChange:E,className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: 5-7"})]})]}),r==="__CUSTOM__"&&C.jsxs("div",{children:[C.jsx("label",{htmlFor:"customGenre",className:"text-sm font-bold text-stone-300 block mb-2",children:"Ваш собственный жанр:"}),C.jsx("input",{id:"customGenre",name:"customGenre",type:"text",value:o,onChange:A=>s(A.target.value),className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",placeholder:"Напр.: Подводное стимпанк-королевство грибов",required:!0})]}),C.jsxs("div",{className:"space-y-4 pt-4 border-t border-stone-600",children:[C.jsxs("label",{htmlFor:"addLogic",className:"flex items-center cursor-pointer",children:[C.jsx("input",{type:"checkbox",id:"addLogic",checked:l,onChange:A=>c(A.target.checked),className:"h-5 w-5 rounded border-stone-500 bg-stone-700 text-sky-500 focus:ring-sky-600"}),C.jsx("span",{className:"ml-3 text-stone-300 font-semibold",children:"Добавить игровую логику (предметы, условия, эффекты)"})]}),l&&C.jsxs("div",{className:"pl-8",children:[C.jsx("label",{htmlFor:"complexity",className:"text-sm font-bold text-stone-300 block mb-2",children:"Сложность логики:"}),C.jsxs("select",{id:"complexity",name:"complexity",value:f,onChange:A=>h(A.target.value),className:"w-full md:w-1/2 bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all",children:[C.jsx("option",{value:"easy",children:"Легко"}),C.jsx("option",{value:"medium",children:"Средне"}),C.jsx("option",{value:"hard",children:"Сложно"})]})]})]}),C.jsx("div",{className:"pt-4 border-t border-stone-700",children:C.jsxs("button",{type:"submit",disabled:g.loading,className:"w-full flex items-center justify-center font-display text-2xl bg-sky-600 text-white py-3 px-6 rounded-md hover:bg-sky-500 transition-colors disabled:bg-stone-600 disabled:cursor-not-allowed",children:[C.jsx(y4,{}),g.loading?"СОЗДАНИЕ СЦЕНАРИЯ...":"СГЕНЕРИРОВАТЬ КВЕСТ"]})}),g.error&&C.jsx("p",{className:"text-red-500 text-center text-sm",children:g.error})]})]})]})},NIe=()=>C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v4H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2v-6a2 2 0 00-2-2h-2V6a4 4 0 00-4-4zm-2 6V6a2 2 0 114 0v4H8z",clipRule:"evenodd"})}),v4=()=>{const[t,e]=R.useState(""),[n,r]=R.useState(""),[i,o]=R.useState(""),s=async l=>{l.preventDefault(),o("");try{await UF(Qp,t,n)}catch(c){o("Ошибка входа. Проверьте почту и пароль."),console.error(c)}};return C.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:C.jsxs("div",{className:"w-full max-w-sm p-8 bg-stone-800/50 border border-stone-700 rounded-md shadow-lg",children:[C.jsx("h2",{className:"font-display text-3xl text-center text-stone-200 mb-6 tracking-wider",children:"ВХОД В ПАНЕЛЬ"}),C.jsxs("form",{onSubmit:s,className:"space-y-4",children:[C.jsx("input",{type:"email",value:t,onChange:l=>e(l.target.value),placeholder:"Email",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Email",required:!0}),C.jsx("input",{type:"password",value:n,onChange:l=>r(l.target.value),placeholder:"Пароль",className:"w-full bg-stone-900 text-stone-200 border border-stone-600 rounded-md px-4 py-2 focus:ring-2 focus:ring-amber-500 focus:outline-none transition-all","aria-label":"Password",required:!0}),C.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center font-display text-xl bg-amber-500 text-stone-900 py-2 rounded-md hover:bg-amber-400 transition-colors",children:[C.jsx(NIe,{}),"ВОЙТИ"]}),i&&C.jsx("p",{className:"text-red-500 text-center text-sm mt-4",children:i})]})]})})},MIe=()=>C.jsx("header",{className:"bg-black/50 border-b-2 border-amber-500/50 p-4 sticky top-0 z-20 backdrop-blur-sm",children:C.jsxs("div",{className:"container mx-auto text-center",children:[C.jsx("a",{href:"/#",className:"font-display text-4xl md:text-5xl text-amber-400 tracking-widest no-underline",children:"B_KOMHATE"}),C.jsx("p",{className:"text-stone-400 text-sm tracking-wider",children:"QUEST & CODEWORD PLATFORM"})]})}),_4=()=>C.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] text-center p-4",children:[C.jsx("h2",{className:"font-display text-6xl text-red-500",children:"404"}),C.jsx("p",{className:"text-stone-300 text-xl mt-2",children:"Страница не найдена."}),C.jsx("a",{href:"/#/admin",className:"text-amber-400 hover:text-amber-300 mt-4",children:"Перейти в панель управления"})]}),DIe=()=>{const{currentUser:t,loading:e}=Tre(),n=ls();if(e)return C.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:C.jsx("p",{className:"font-display text-2xl text-stone-400 animate-pulse",children:"ИНИЦИАЛИЗАЦИЯ СИСТЕМЫ..."})});if(t)return C.jsxs(BM,{children:[C.jsx(Jr,{path:"/admin",element:C.jsx(S_e,{})}),C.jsx(Jr,{path:"/admin/quest/:questId",element:C.jsx(RIe,{})}),C.jsx(Jr,{path:"/admin/architect",element:C.jsx(PIe,{})})," ",C.jsx(Jr,{path:"/",element:C.jsx(FM,{to:"/admin",replace:!0})}),C.jsx(Jr,{path:"/view",element:C.jsx(WV,{})}),C.jsx(Jr,{path:"/play/:questId",element:C.jsx(Tx,{})}),C.jsx(Jr,{path:"*",element:C.jsx(_4,{})})]});const r=n.pathname.startsWith("/admin");return C.jsxs(BM,{children:[C.jsx(Jr,{path:"/view",element:C.jsx(WV,{})}),C.jsx(Jr,{path:"/play/:questId",element:C.jsx(Tx,{})}),r&&C.jsx(Jr,{path:"/admin/*",element:C.jsx(v4,{})}),C.jsx(Jr,{path:"/admin",element:C.jsx(v4,{})}),C.jsx(Jr,{path:"/",element:C.jsx(FM,{to:"/admin",replace:!0})}),C.jsx(Jr,{path:"*",element:C.jsx(_4,{})})]})},kIe=()=>C.jsx("div",{className:"min-h-screen",children:C.jsx(Ere,{children:C.jsxs(Sj,{children:[C.jsx(MIe,{}),C.jsx("main",{children:C.jsx(DIe,{})})]})})}),IG=document.getElementById("root");if(!IG)throw new Error("Could not find root element to mount to");const OIe=d8.createRoot(IG);OIe.render(C.jsx(T4.StrictMode,{children:C.jsx(kIe,{})}));
